(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function j_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var i2={exports:{}},to={},s2={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ss=Symbol.for("react.element"),K_=Symbol.for("react.portal"),X_=Symbol.for("react.fragment"),q_=Symbol.for("react.strict_mode"),G_=Symbol.for("react.profiler"),Y_=Symbol.for("react.provider"),Q_=Symbol.for("react.context"),Z_=Symbol.for("react.forward_ref"),J_=Symbol.for("react.suspense"),e3=Symbol.for("react.memo"),t3=Symbol.for("react.lazy"),Pc=Symbol.iterator;function r3(e){return e===null||typeof e!="object"?null:(e=Pc&&e[Pc]||e["@@iterator"],typeof e=="function"?e:null)}var n2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o2=Object.assign,a2={};function Si(e,t,r){this.props=e,this.context=t,this.refs=a2,this.updater=r||n2}Si.prototype.isReactComponent={};Si.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Si.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function l2(){}l2.prototype=Si.prototype;function Ol(e,t,r){this.props=e,this.context=t,this.refs=a2,this.updater=r||n2}var Ml=Ol.prototype=new l2;Ml.constructor=Ol;o2(Ml,Si.prototype);Ml.isPureReactComponent=!0;var Dc=Array.isArray,c2=Object.prototype.hasOwnProperty,Fl={current:null},h2={key:!0,ref:!0,__self:!0,__source:!0};function u2(e,t,r){var i,s={},a=null,u=null;if(t!=null)for(i in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(a=""+t.key),t)c2.call(t,i)&&!h2.hasOwnProperty(i)&&(s[i]=t[i]);var n=arguments.length-2;if(n===1)s.children=r;else if(1<n){for(var o=Array(n),d=0;d<n;d++)o[d]=arguments[d+2];s.children=o}if(e&&e.defaultProps)for(i in n=e.defaultProps,n)s[i]===void 0&&(s[i]=n[i]);return{$$typeof:Ss,type:e,key:a,ref:u,props:s,_owner:Fl.current}}function i3(e,t){return{$$typeof:Ss,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ss}function s3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ac=/\/+/g;function bo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?s3(""+e.key):t.toString(36)}function hn(e,t,r,i,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case Ss:case K_:u=!0}}if(u)return u=e,s=s(u),e=i===""?"."+bo(u,0):i,Dc(s)?(r="",e!=null&&(r=e.replace(Ac,"$&/")+"/"),hn(s,t,r,"",function(d){return d})):s!=null&&(Bl(s)&&(s=i3(s,r+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(Ac,"$&/")+"/")+e)),t.push(s)),1;if(u=0,i=i===""?".":i+":",Dc(e))for(var n=0;n<e.length;n++){a=e[n];var o=i+bo(a,n);u+=hn(a,t,r,o,s)}else if(o=r3(e),typeof o=="function")for(e=o.call(e),n=0;!(a=e.next()).done;)a=a.value,o=i+bo(a,n++),u+=hn(a,t,r,o,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function bs(e,t,r){if(e==null)return e;var i=[],s=0;return hn(e,i,"","",function(a){return t.call(r,a,s++)}),i}function n3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ue={current:null},un={transition:null},o3={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:un,ReactCurrentOwner:Fl};function f2(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:bs,forEach:function(e,t,r){bs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return bs(e,function(){t++}),t},toArray:function(e){return bs(e,function(t){return t})||[]},only:function(e){if(!Bl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=Si;J.Fragment=X_;J.Profiler=G_;J.PureComponent=Ol;J.StrictMode=q_;J.Suspense=J_;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o3;J.act=f2;J.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=o2({},e.props),s=e.key,a=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,u=Fl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var n=e.type.defaultProps;for(o in t)c2.call(t,o)&&!h2.hasOwnProperty(o)&&(i[o]=t[o]===void 0&&n!==void 0?n[o]:t[o])}var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){n=Array(o);for(var d=0;d<o;d++)n[d]=arguments[d+2];i.children=n}return{$$typeof:Ss,type:e.type,key:s,ref:a,props:i,_owner:u}};J.createContext=function(e){return e={$$typeof:Q_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Y_,_context:e},e.Consumer=e};J.createElement=u2;J.createFactory=function(e){var t=u2.bind(null,e);return t.type=e,t};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:Z_,render:e}};J.isValidElement=Bl;J.lazy=function(e){return{$$typeof:t3,_payload:{_status:-1,_result:e},_init:n3}};J.memo=function(e,t){return{$$typeof:e3,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=un.transition;un.transition={};try{e()}finally{un.transition=t}};J.unstable_act=f2;J.useCallback=function(e,t){return Ue.current.useCallback(e,t)};J.useContext=function(e){return Ue.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return Ue.current.useDeferredValue(e)};J.useEffect=function(e,t){return Ue.current.useEffect(e,t)};J.useId=function(){return Ue.current.useId()};J.useImperativeHandle=function(e,t,r){return Ue.current.useImperativeHandle(e,t,r)};J.useInsertionEffect=function(e,t){return Ue.current.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return Ue.current.useLayoutEffect(e,t)};J.useMemo=function(e,t){return Ue.current.useMemo(e,t)};J.useReducer=function(e,t,r){return Ue.current.useReducer(e,t,r)};J.useRef=function(e){return Ue.current.useRef(e)};J.useState=function(e){return Ue.current.useState(e)};J.useSyncExternalStore=function(e,t,r){return Ue.current.useSyncExternalStore(e,t,r)};J.useTransition=function(){return Ue.current.useTransition()};J.version="18.3.1";s2.exports=J;var Y=s2.exports;const er=j_(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3=Y,l3=Symbol.for("react.element"),c3=Symbol.for("react.fragment"),h3=Object.prototype.hasOwnProperty,u3=a3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f3={key:!0,ref:!0,__self:!0,__source:!0};function d2(e,t,r){var i,s={},a=null,u=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(u=t.ref);for(i in t)h3.call(t,i)&&!f3.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:l3,type:e,key:a,ref:u,props:s,_owner:u3.current}}to.Fragment=c3;to.jsx=d2;to.jsxs=d2;i2.exports=to;var G=i2.exports,Fa={},p2={exports:{}},Ze={},_2={exports:{}},g2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,T){var P=b.length;b.push(T);e:for(;0<P;){var L=P-1>>>1,U=b[L];if(0<s(U,T))b[L]=T,b[P]=U,P=L;else break e}}function r(b){return b.length===0?null:b[0]}function i(b){if(b.length===0)return null;var T=b[0],P=b.pop();if(P!==T){b[0]=P;e:for(var L=0,U=b.length,$=U>>>1;L<$;){var X=2*(L+1)-1,q=b[X],ie=X+1,I=b[ie];if(0>s(q,P))ie<U&&0>s(I,q)?(b[L]=I,b[ie]=P,L=ie):(b[L]=q,b[X]=P,L=X);else if(ie<U&&0>s(I,P))b[L]=I,b[ie]=P,L=ie;else break e}}return T}function s(b,T){var P=b.sortIndex-T.sortIndex;return P!==0?P:b.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,n=u.now();e.unstable_now=function(){return u.now()-n}}var o=[],d=[],m=1,p=null,v=3,C=!1,w=!1,y=!1,f=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,l=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(b){for(var T=r(d);T!==null;){if(T.callback===null)i(d);else if(T.startTime<=b)i(d),T.sortIndex=T.expirationTime,t(o,T);else break;T=r(d)}}function _(b){if(y=!1,h(b),!w)if(r(o)!==null)w=!0,N(S);else{var T=r(d);T!==null&&z(_,T.startTime-b)}}function S(b,T){w=!1,y&&(y=!1,c(g),g=-1),C=!0;var P=v;try{for(h(T),p=r(o);p!==null&&(!(p.expirationTime>T)||b&&!A());){var L=p.callback;if(typeof L=="function"){p.callback=null,v=p.priorityLevel;var U=L(p.expirationTime<=T);T=e.unstable_now(),typeof U=="function"?p.callback=U:p===r(o)&&i(o),h(T)}else i(o);p=r(o)}if(p!==null)var $=!0;else{var X=r(d);X!==null&&z(_,X.startTime-T),$=!1}return $}finally{p=null,v=P,C=!1}}var x=!1,R=null,g=-1,E=5,k=-1;function A(){return!(e.unstable_now()-k<E)}function D(){if(R!==null){var b=e.unstable_now();k=b;var T=!0;try{T=R(!0,b)}finally{T?O():(x=!1,R=null)}}else x=!1}var O;if(typeof l=="function")O=function(){l(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,F=B.port2;B.port1.onmessage=D,O=function(){F.postMessage(null)}}else O=function(){f(D,0)};function N(b){R=b,x||(x=!0,O())}function z(b,T){g=f(function(){b(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){w||C||(w=!0,N(S))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(b){switch(v){case 1:case 2:case 3:var T=3;break;default:T=v}var P=v;v=T;try{return b()}finally{v=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,T){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var P=v;v=b;try{return T()}finally{v=P}},e.unstable_scheduleCallback=function(b,T,P){var L=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?L+P:L):P=L,b){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=P+U,b={id:m++,callback:T,priorityLevel:b,startTime:P,expirationTime:U,sortIndex:-1},P>L?(b.sortIndex=P,t(d,b),r(o)===null&&b===r(d)&&(y?(c(g),g=-1):y=!0,z(_,P-L))):(b.sortIndex=U,t(o,b),w||C||(w=!0,N(S))),b},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(b){var T=v;return function(){var P=v;v=T;try{return b.apply(this,arguments)}finally{v=P}}}})(g2);_2.exports=g2;var d3=_2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p3=Y,Qe=d3;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m2=new Set,es={};function Or(e,t){li(e,t),li(e+"Capture",t)}function li(e,t){for(es[e]=t,e=0;e<t.length;e++)m2.add(t[e])}var Lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=Object.prototype.hasOwnProperty,_3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lc={},Oc={};function g3(e){return Ba.call(Oc,e)?!0:Ba.call(Lc,e)?!1:_3.test(e)?Oc[e]=!0:(Lc[e]=!0,!1)}function m3(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function v3(e,t,r,i){if(t===null||typeof t>"u"||m3(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ne(e,t,r,i,s,a,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=u}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Te[e]=new Ne(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Te[t]=new Ne(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Te[e]=new Ne(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Te[e]=new Ne(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Te[e]=new Ne(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Te[e]=new Ne(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Te[e]=new Ne(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Te[e]=new Ne(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Te[e]=new Ne(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ul=/[\-:]([a-z])/g;function Nl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ul,Nl);Te[t]=new Ne(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ul,Nl);Te[t]=new Ne(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ul,Nl);Te[t]=new Ne(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Te[e]=new Ne(e,1,!1,e.toLowerCase(),null,!1,!1)});Te.xlinkHref=new Ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Te[e]=new Ne(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hl(e,t,r,i){var s=Te.hasOwnProperty(t)?Te[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(v3(t,r,s,i)&&(r=null),i||s===null?g3(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,i=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Ut=p3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ks=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),Vl=Symbol.for("react.strict_mode"),Ua=Symbol.for("react.profiler"),v2=Symbol.for("react.provider"),S2=Symbol.for("react.context"),zl=Symbol.for("react.forward_ref"),Na=Symbol.for("react.suspense"),Ha=Symbol.for("react.suspense_list"),Wl=Symbol.for("react.memo"),Wt=Symbol.for("react.lazy"),y2=Symbol.for("react.offscreen"),Mc=Symbol.iterator;function bi(e){return e===null||typeof e!="object"?null:(e=Mc&&e[Mc]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,ko;function Ui(e){if(ko===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ko=t&&t[1]||""}return`
`+ko+e}var Io=!1;function To(e,t){if(!e||Io)return"";Io=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=i.stack.split(`
`),u=s.length-1,n=a.length-1;1<=u&&0<=n&&s[u]!==a[n];)n--;for(;1<=u&&0<=n;u--,n--)if(s[u]!==a[n]){if(u!==1||n!==1)do if(u--,n--,0>n||s[u]!==a[n]){var o=`
`+s[u].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=u&&0<=n);break}}}finally{Io=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ui(e):""}function S3(e){switch(e.tag){case 5:return Ui(e.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 2:case 15:return e=To(e.type,!1),e;case 11:return e=To(e.type.render,!1),e;case 1:return e=To(e.type,!0),e;default:return""}}function Va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $r:return"Fragment";case Wr:return"Portal";case Ua:return"Profiler";case Vl:return"StrictMode";case Na:return"Suspense";case Ha:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S2:return(e.displayName||"Context")+".Consumer";case v2:return(e._context.displayName||"Context")+".Provider";case zl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wl:return t=e.displayName||null,t!==null?t:Va(e.type)||"Memo";case Wt:t=e._payload,e=e._init;try{return Va(e(t))}catch{}}return null}function y3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(t);case 8:return t===Vl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function C2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function C3(e){var t=C2(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(u){i=""+u,a.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Is(e){e._valueTracker||(e._valueTracker=C3(e))}function w2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=C2(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function kn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function za(e,t){var r=t.checked;return pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Fc(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=hr(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function x2(e,t){t=t.checked,t!=null&&Hl(e,"checked",t,!1)}function Wa(e,t){x2(e,t);var r=hr(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$a(e,t.type,r):t.hasOwnProperty("defaultValue")&&$a(e,t.type,hr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $a(e,t,r){(t!=="number"||kn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ni=Array.isArray;function ri(e,t,r,i){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&i&&(e[r].defaultSelected=!0)}else{for(r=""+hr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ja(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Uc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(W(92));if(Ni(r)){if(1<r.length)throw Error(W(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:hr(r)}}function E2(e,t){var r=hr(t.value),i=hr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function Nc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function R2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ka(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?R2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ts,b2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ts.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ts(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w3=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(e){w3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wi[t]=Wi[e]})});function k2(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Wi.hasOwnProperty(e)&&Wi[e]?(""+t).trim():t+"px"}function I2(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=k2(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,s):e[r]=s}}var x3=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xa(e,t){if(t){if(x3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function qa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ga=null;function $l(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ya=null,ii=null,si=null;function Hc(e){if(e=ws(e)){if(typeof Ya!="function")throw Error(W(280));var t=e.stateNode;t&&(t=oo(t),Ya(e.stateNode,e.type,t))}}function T2(e){ii?si?si.push(e):si=[e]:ii=e}function P2(){if(ii){var e=ii,t=si;if(si=ii=null,Hc(e),t)for(e=0;e<t.length;e++)Hc(t[e])}}function D2(e,t){return e(t)}function A2(){}var Po=!1;function L2(e,t,r){if(Po)return e(t,r);Po=!0;try{return D2(e,t,r)}finally{Po=!1,(ii!==null||si!==null)&&(A2(),P2())}}function rs(e,t){var r=e.stateNode;if(r===null)return null;var i=oo(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(W(231,t,typeof r));return r}var Qa=!1;if(Lt)try{var ki={};Object.defineProperty(ki,"passive",{get:function(){Qa=!0}}),window.addEventListener("test",ki,ki),window.removeEventListener("test",ki,ki)}catch{Qa=!1}function E3(e,t,r,i,s,a,u,n,o){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(m){this.onError(m)}}var $i=!1,In=null,Tn=!1,Za=null,R3={onError:function(e){$i=!0,In=e}};function b3(e,t,r,i,s,a,u,n,o){$i=!1,In=null,E3.apply(R3,arguments)}function k3(e,t,r,i,s,a,u,n,o){if(b3.apply(this,arguments),$i){if($i){var d=In;$i=!1,In=null}else throw Error(W(198));Tn||(Tn=!0,Za=d)}}function Mr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function O2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vc(e){if(Mr(e)!==e)throw Error(W(188))}function I3(e){var t=e.alternate;if(!t){if(t=Mr(e),t===null)throw Error(W(188));return t!==e?null:e}for(var r=e,i=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Vc(s),e;if(a===i)return Vc(s),t;a=a.sibling}throw Error(W(188))}if(r.return!==i.return)r=s,i=a;else{for(var u=!1,n=s.child;n;){if(n===r){u=!0,r=s,i=a;break}if(n===i){u=!0,i=s,r=a;break}n=n.sibling}if(!u){for(n=a.child;n;){if(n===r){u=!0,r=a,i=s;break}if(n===i){u=!0,i=a,r=s;break}n=n.sibling}if(!u)throw Error(W(189))}}if(r.alternate!==i)throw Error(W(190))}if(r.tag!==3)throw Error(W(188));return r.stateNode.current===r?e:t}function M2(e){return e=I3(e),e!==null?F2(e):null}function F2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=F2(e);if(t!==null)return t;e=e.sibling}return null}var B2=Qe.unstable_scheduleCallback,zc=Qe.unstable_cancelCallback,T3=Qe.unstable_shouldYield,P3=Qe.unstable_requestPaint,ve=Qe.unstable_now,D3=Qe.unstable_getCurrentPriorityLevel,jl=Qe.unstable_ImmediatePriority,U2=Qe.unstable_UserBlockingPriority,Pn=Qe.unstable_NormalPriority,A3=Qe.unstable_LowPriority,N2=Qe.unstable_IdlePriority,ro=null,xt=null;function L3(e){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(ro,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:F3,O3=Math.log,M3=Math.LN2;function F3(e){return e>>>=0,e===0?32:31-(O3(e)/M3|0)|0}var Ps=64,Ds=4194304;function Hi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dn(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes,u=r&268435455;if(u!==0){var n=u&~s;n!==0?i=Hi(n):(a&=u,a!==0&&(i=Hi(a)))}else u=r&~s,u!==0?i=Hi(u):a!==0&&(i=Hi(a));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-_t(t),s=1<<r,i|=e[r],t&=~s;return i}function B3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U3(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-_t(a),n=1<<u,o=s[u];o===-1?(!(n&r)||n&i)&&(s[u]=B3(n,t)):o<=t&&(e.expiredLanes|=n),a&=~n}}function Ja(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function H2(){var e=Ps;return Ps<<=1,!(Ps&4194240)&&(Ps=64),e}function Do(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ys(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_t(t),e[t]=r}function N3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-_t(r),a=1<<s;t[s]=0,i[s]=-1,e[s]=-1,r&=~a}}function Kl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-_t(r),s=1<<i;s&t|e[i]&t&&(e[i]|=t),r&=~s}}var oe=0;function V2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var z2,Xl,W2,$2,j2,el=!1,As=[],tr=null,rr=null,ir=null,is=new Map,ss=new Map,Xt=[],H3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wc(e,t){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":is.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ss.delete(t.pointerId)}}function Ii(e,t,r,i,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},t!==null&&(t=ws(t),t!==null&&Xl(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function V3(e,t,r,i,s){switch(t){case"focusin":return tr=Ii(tr,e,t,r,i,s),!0;case"dragenter":return rr=Ii(rr,e,t,r,i,s),!0;case"mouseover":return ir=Ii(ir,e,t,r,i,s),!0;case"pointerover":var a=s.pointerId;return is.set(a,Ii(is.get(a)||null,e,t,r,i,s)),!0;case"gotpointercapture":return a=s.pointerId,ss.set(a,Ii(ss.get(a)||null,e,t,r,i,s)),!0}return!1}function K2(e){var t=Cr(e.target);if(t!==null){var r=Mr(t);if(r!==null){if(t=r.tag,t===13){if(t=O2(r),t!==null){e.blockedOn=t,j2(e.priority,function(){W2(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=tl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Ga=i,r.target.dispatchEvent(i),Ga=null}else return t=ws(r),t!==null&&Xl(t),e.blockedOn=r,!1;t.shift()}return!0}function $c(e,t,r){fn(e)&&r.delete(t)}function z3(){el=!1,tr!==null&&fn(tr)&&(tr=null),rr!==null&&fn(rr)&&(rr=null),ir!==null&&fn(ir)&&(ir=null),is.forEach($c),ss.forEach($c)}function Ti(e,t){e.blockedOn===t&&(e.blockedOn=null,el||(el=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,z3)))}function ns(e){function t(s){return Ti(s,e)}if(0<As.length){Ti(As[0],e);for(var r=1;r<As.length;r++){var i=As[r];i.blockedOn===e&&(i.blockedOn=null)}}for(tr!==null&&Ti(tr,e),rr!==null&&Ti(rr,e),ir!==null&&Ti(ir,e),is.forEach(t),ss.forEach(t),r=0;r<Xt.length;r++)i=Xt[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Xt.length&&(r=Xt[0],r.blockedOn===null);)K2(r),r.blockedOn===null&&Xt.shift()}var ni=Ut.ReactCurrentBatchConfig,An=!0;function W3(e,t,r,i){var s=oe,a=ni.transition;ni.transition=null;try{oe=1,ql(e,t,r,i)}finally{oe=s,ni.transition=a}}function $3(e,t,r,i){var s=oe,a=ni.transition;ni.transition=null;try{oe=4,ql(e,t,r,i)}finally{oe=s,ni.transition=a}}function ql(e,t,r,i){if(An){var s=tl(e,t,r,i);if(s===null)Vo(e,t,i,Ln,r),Wc(e,i);else if(V3(s,e,t,r,i))i.stopPropagation();else if(Wc(e,i),t&4&&-1<H3.indexOf(e)){for(;s!==null;){var a=ws(s);if(a!==null&&z2(a),a=tl(e,t,r,i),a===null&&Vo(e,t,i,Ln,r),a===s)break;s=a}s!==null&&i.stopPropagation()}else Vo(e,t,i,null,r)}}var Ln=null;function tl(e,t,r,i){if(Ln=null,e=$l(i),e=Cr(e),e!==null)if(t=Mr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=O2(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ln=e,null}function X2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D3()){case jl:return 1;case U2:return 4;case Pn:case A3:return 16;case N2:return 536870912;default:return 16}default:return 16}}var Yt=null,Gl=null,dn=null;function q2(){if(dn)return dn;var e,t=Gl,r=t.length,i,s="value"in Yt?Yt.value:Yt.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var u=r-e;for(i=1;i<=u&&t[r-i]===s[a-i];i++);return dn=s.slice(e,1<i?1-i:void 0)}function pn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ls(){return!0}function jc(){return!1}function Je(e){function t(r,i,s,a,u){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=u,this.currentTarget=null;for(var n in e)e.hasOwnProperty(n)&&(r=e[n],this[n]=r?r(a):a[n]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ls:jc,this.isPropagationStopped=jc,this}return pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),t}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=Je(yi),Cs=pe({},yi,{view:0,detail:0}),j3=Je(Cs),Ao,Lo,Pi,io=pe({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pi&&(Pi&&e.type==="mousemove"?(Ao=e.screenX-Pi.screenX,Lo=e.screenY-Pi.screenY):Lo=Ao=0,Pi=e),Ao)},movementY:function(e){return"movementY"in e?e.movementY:Lo}}),Kc=Je(io),K3=pe({},io,{dataTransfer:0}),X3=Je(K3),q3=pe({},Cs,{relatedTarget:0}),Oo=Je(q3),G3=pe({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Y3=Je(G3),Q3=pe({},yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Z3=Je(Q3),J3=pe({},yi,{data:0}),Xc=Je(J3),e4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=r4[e])?!!t[e]:!1}function Ql(){return i4}var s4=pe({},Cs,{key:function(e){if(e.key){var t=e4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?t4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(e){return e.type==="keypress"?pn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),n4=Je(s4),o4=pe({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=Je(o4),a4=pe({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),l4=Je(a4),c4=pe({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),h4=Je(c4),u4=pe({},io,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),f4=Je(u4),d4=[9,13,27,32],Zl=Lt&&"CompositionEvent"in window,ji=null;Lt&&"documentMode"in document&&(ji=document.documentMode);var p4=Lt&&"TextEvent"in window&&!ji,G2=Lt&&(!Zl||ji&&8<ji&&11>=ji),Gc=" ",Yc=!1;function Y2(e,t){switch(e){case"keyup":return d4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jr=!1;function _4(e,t){switch(e){case"compositionend":return Q2(t);case"keypress":return t.which!==32?null:(Yc=!0,Gc);case"textInput":return e=t.data,e===Gc&&Yc?null:e;default:return null}}function g4(e,t){if(jr)return e==="compositionend"||!Zl&&Y2(e,t)?(e=q2(),dn=Gl=Yt=null,jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return G2&&t.locale!=="ko"?null:t.data;default:return null}}var m4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!m4[e.type]:t==="textarea"}function Z2(e,t,r,i){T2(i),t=On(t,"onChange"),0<t.length&&(r=new Yl("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Ki=null,os=null;function v4(e){cp(e,0)}function so(e){var t=qr(e);if(w2(t))return e}function S4(e,t){if(e==="change")return t}var J2=!1;if(Lt){var Mo;if(Lt){var Fo="oninput"in document;if(!Fo){var Zc=document.createElement("div");Zc.setAttribute("oninput","return;"),Fo=typeof Zc.oninput=="function"}Mo=Fo}else Mo=!1;J2=Mo&&(!document.documentMode||9<document.documentMode)}function Jc(){Ki&&(Ki.detachEvent("onpropertychange",ep),os=Ki=null)}function ep(e){if(e.propertyName==="value"&&so(os)){var t=[];Z2(t,os,e,$l(e)),L2(v4,t)}}function y4(e,t,r){e==="focusin"?(Jc(),Ki=t,os=r,Ki.attachEvent("onpropertychange",ep)):e==="focusout"&&Jc()}function C4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return so(os)}function w4(e,t){if(e==="click")return so(t)}function x4(e,t){if(e==="input"||e==="change")return so(t)}function E4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mt=typeof Object.is=="function"?Object.is:E4;function as(e,t){if(mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!Ba.call(t,s)||!mt(e[s],t[s]))return!1}return!0}function eh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function th(e,t){var r=eh(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=eh(r)}}function tp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rp(){for(var e=window,t=kn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=kn(e.document)}return t}function Jl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function R4(e){var t=rp(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&tp(r.ownerDocument.documentElement,r)){if(i!==null&&Jl(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!e.extend&&a>i&&(s=i,i=a,a=s),s=th(r,a);var u=th(r,i);s&&u&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var b4=Lt&&"documentMode"in document&&11>=document.documentMode,Kr=null,rl=null,Xi=null,il=!1;function rh(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;il||Kr==null||Kr!==kn(i)||(i=Kr,"selectionStart"in i&&Jl(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xi&&as(Xi,i)||(Xi=i,i=On(rl,"onSelect"),0<i.length&&(t=new Yl("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Kr)))}function Os(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Xr={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionend:Os("Transition","TransitionEnd")},Bo={},ip={};Lt&&(ip=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function no(e){if(Bo[e])return Bo[e];if(!Xr[e])return e;var t=Xr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ip)return Bo[e]=t[r];return e}var sp=no("animationend"),np=no("animationiteration"),op=no("animationstart"),ap=no("transitionend"),lp=new Map,ih="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){lp.set(e,t),Or(t,[e])}for(var Uo=0;Uo<ih.length;Uo++){var No=ih[Uo],k4=No.toLowerCase(),I4=No[0].toUpperCase()+No.slice(1);fr(k4,"on"+I4)}fr(sp,"onAnimationEnd");fr(np,"onAnimationIteration");fr(op,"onAnimationStart");fr("dblclick","onDoubleClick");fr("focusin","onFocus");fr("focusout","onBlur");fr(ap,"onTransitionEnd");li("onMouseEnter",["mouseout","mouseover"]);li("onMouseLeave",["mouseout","mouseover"]);li("onPointerEnter",["pointerout","pointerover"]);li("onPointerLeave",["pointerout","pointerover"]);Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Or("onBeforeInput",["compositionend","keypress","textInput","paste"]);Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function sh(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,k3(i,t,void 0,e),e.currentTarget=null}function cp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],s=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var u=i.length-1;0<=u;u--){var n=i[u],o=n.instance,d=n.currentTarget;if(n=n.listener,o!==a&&s.isPropagationStopped())break e;sh(s,n,d),a=o}else for(u=0;u<i.length;u++){if(n=i[u],o=n.instance,d=n.currentTarget,n=n.listener,o!==a&&s.isPropagationStopped())break e;sh(s,n,d),a=o}}}if(Tn)throw e=Za,Tn=!1,Za=null,e}function le(e,t){var r=t[ll];r===void 0&&(r=t[ll]=new Set);var i=e+"__bubble";r.has(i)||(hp(t,e,2,!1),r.add(i))}function Ho(e,t,r){var i=0;t&&(i|=4),hp(r,e,i,t)}var Ms="_reactListening"+Math.random().toString(36).slice(2);function ls(e){if(!e[Ms]){e[Ms]=!0,m2.forEach(function(r){r!=="selectionchange"&&(T4.has(r)||Ho(r,!1,e),Ho(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ms]||(t[Ms]=!0,Ho("selectionchange",!1,t))}}function hp(e,t,r,i){switch(X2(t)){case 1:var s=W3;break;case 4:s=$3;break;default:s=ql}r=s.bind(null,t,r,e),s=void 0,!Qa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Vo(e,t,r,i,s){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var n=i.stateNode.containerInfo;if(n===s||n.nodeType===8&&n.parentNode===s)break;if(u===4)for(u=i.return;u!==null;){var o=u.tag;if((o===3||o===4)&&(o=u.stateNode.containerInfo,o===s||o.nodeType===8&&o.parentNode===s))return;u=u.return}for(;n!==null;){if(u=Cr(n),u===null)return;if(o=u.tag,o===5||o===6){i=a=u;continue e}n=n.parentNode}}i=i.return}L2(function(){var d=a,m=$l(r),p=[];e:{var v=lp.get(e);if(v!==void 0){var C=Yl,w=e;switch(e){case"keypress":if(pn(r)===0)break e;case"keydown":case"keyup":C=n4;break;case"focusin":w="focus",C=Oo;break;case"focusout":w="blur",C=Oo;break;case"beforeblur":case"afterblur":C=Oo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=X3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=l4;break;case sp:case np:case op:C=Y3;break;case ap:C=h4;break;case"scroll":C=j3;break;case"wheel":C=f4;break;case"copy":case"cut":case"paste":C=Z3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=qc}var y=(t&4)!==0,f=!y&&e==="scroll",c=y?v!==null?v+"Capture":null:v;y=[];for(var l=d,h;l!==null;){h=l;var _=h.stateNode;if(h.tag===5&&_!==null&&(h=_,c!==null&&(_=rs(l,c),_!=null&&y.push(cs(l,_,h)))),f)break;l=l.return}0<y.length&&(v=new C(v,w,null,r,m),p.push({event:v,listeners:y}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",v&&r!==Ga&&(w=r.relatedTarget||r.fromElement)&&(Cr(w)||w[Ot]))break e;if((C||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,C?(w=r.relatedTarget||r.toElement,C=d,w=w?Cr(w):null,w!==null&&(f=Mr(w),w!==f||w.tag!==5&&w.tag!==6)&&(w=null)):(C=null,w=d),C!==w)){if(y=Kc,_="onMouseLeave",c="onMouseEnter",l="mouse",(e==="pointerout"||e==="pointerover")&&(y=qc,_="onPointerLeave",c="onPointerEnter",l="pointer"),f=C==null?v:qr(C),h=w==null?v:qr(w),v=new y(_,l+"leave",C,r,m),v.target=f,v.relatedTarget=h,_=null,Cr(m)===d&&(y=new y(c,l+"enter",w,r,m),y.target=h,y.relatedTarget=f,_=y),f=_,C&&w)t:{for(y=C,c=w,l=0,h=y;h;h=Br(h))l++;for(h=0,_=c;_;_=Br(_))h++;for(;0<l-h;)y=Br(y),l--;for(;0<h-l;)c=Br(c),h--;for(;l--;){if(y===c||c!==null&&y===c.alternate)break t;y=Br(y),c=Br(c)}y=null}else y=null;C!==null&&nh(p,v,C,y,!1),w!==null&&f!==null&&nh(p,f,w,y,!0)}}e:{if(v=d?qr(d):window,C=v.nodeName&&v.nodeName.toLowerCase(),C==="select"||C==="input"&&v.type==="file")var S=S4;else if(Qc(v))if(J2)S=x4;else{S=C4;var x=y4}else(C=v.nodeName)&&C.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(S=w4);if(S&&(S=S(e,d))){Z2(p,S,r,m);break e}x&&x(e,v,d),e==="focusout"&&(x=v._wrapperState)&&x.controlled&&v.type==="number"&&$a(v,"number",v.value)}switch(x=d?qr(d):window,e){case"focusin":(Qc(x)||x.contentEditable==="true")&&(Kr=x,rl=d,Xi=null);break;case"focusout":Xi=rl=Kr=null;break;case"mousedown":il=!0;break;case"contextmenu":case"mouseup":case"dragend":il=!1,rh(p,r,m);break;case"selectionchange":if(b4)break;case"keydown":case"keyup":rh(p,r,m)}var R;if(Zl)e:{switch(e){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else jr?Y2(e,r)&&(g="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(g="onCompositionStart");g&&(G2&&r.locale!=="ko"&&(jr||g!=="onCompositionStart"?g==="onCompositionEnd"&&jr&&(R=q2()):(Yt=m,Gl="value"in Yt?Yt.value:Yt.textContent,jr=!0)),x=On(d,g),0<x.length&&(g=new Xc(g,e,null,r,m),p.push({event:g,listeners:x}),R?g.data=R:(R=Q2(r),R!==null&&(g.data=R)))),(R=p4?_4(e,r):g4(e,r))&&(d=On(d,"onBeforeInput"),0<d.length&&(m=new Xc("onBeforeInput","beforeinput",null,r,m),p.push({event:m,listeners:d}),m.data=R))}cp(p,t)})}function cs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function On(e,t){for(var r=t+"Capture",i=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=rs(e,r),a!=null&&i.unshift(cs(e,a,s)),a=rs(e,t),a!=null&&i.push(cs(e,a,s))),e=e.return}return i}function Br(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nh(e,t,r,i,s){for(var a=t._reactName,u=[];r!==null&&r!==i;){var n=r,o=n.alternate,d=n.stateNode;if(o!==null&&o===i)break;n.tag===5&&d!==null&&(n=d,s?(o=rs(r,a),o!=null&&u.unshift(cs(r,o,n))):s||(o=rs(r,a),o!=null&&u.push(cs(r,o,n)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var P4=/\r\n?/g,D4=/\u0000|\uFFFD/g;function oh(e){return(typeof e=="string"?e:""+e).replace(P4,`
`).replace(D4,"")}function Fs(e,t,r){if(t=oh(t),oh(e)!==t&&r)throw Error(W(425))}function Mn(){}var sl=null,nl=null;function ol(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var al=typeof setTimeout=="function"?setTimeout:void 0,A4=typeof clearTimeout=="function"?clearTimeout:void 0,ah=typeof Promise=="function"?Promise:void 0,L4=typeof queueMicrotask=="function"?queueMicrotask:typeof ah<"u"?function(e){return ah.resolve(null).then(e).catch(O4)}:al;function O4(e){setTimeout(function(){throw e})}function zo(e,t){var r=t,i=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){e.removeChild(s),ns(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);ns(t)}function sr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),wt="__reactFiber$"+Ci,hs="__reactProps$"+Ci,Ot="__reactContainer$"+Ci,ll="__reactEvents$"+Ci,M4="__reactListeners$"+Ci,F4="__reactHandles$"+Ci;function Cr(e){var t=e[wt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ot]||r[wt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=lh(e);e!==null;){if(r=e[wt])return r;e=lh(e)}return t}e=r,r=e.parentNode}return null}function ws(e){return e=e[wt]||e[Ot],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function oo(e){return e[hs]||null}var cl=[],Gr=-1;function dr(e){return{current:e}}function ce(e){0>Gr||(e.current=cl[Gr],cl[Gr]=null,Gr--)}function ae(e,t){Gr++,cl[Gr]=e.current,e.current=t}var ur={},Oe=dr(ur),$e=dr(!1),Tr=ur;function ci(e,t){var r=e.type.contextTypes;if(!r)return ur;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function je(e){return e=e.childContextTypes,e!=null}function Fn(){ce($e),ce(Oe)}function ch(e,t,r){if(Oe.current!==ur)throw Error(W(168));ae(Oe,t),ae($e,r)}function up(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(W(108,y3(e)||"Unknown",s));return pe({},r,i)}function Bn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ur,Tr=Oe.current,ae(Oe,e),ae($e,$e.current),!0}function hh(e,t,r){var i=e.stateNode;if(!i)throw Error(W(169));r?(e=up(e,t,Tr),i.__reactInternalMemoizedMergedChildContext=e,ce($e),ce(Oe),ae(Oe,e)):ce($e),ae($e,r)}var It=null,ao=!1,Wo=!1;function fp(e){It===null?It=[e]:It.push(e)}function B4(e){ao=!0,fp(e)}function pr(){if(!Wo&&It!==null){Wo=!0;var e=0,t=oe;try{var r=It;for(oe=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}It=null,ao=!1}catch(s){throw It!==null&&(It=It.slice(e+1)),B2(jl,pr),s}finally{oe=t,Wo=!1}}return null}var Yr=[],Qr=0,Un=null,Nn=0,st=[],nt=0,Pr=null,Pt=1,Dt="";function gr(e,t){Yr[Qr++]=Nn,Yr[Qr++]=Un,Un=e,Nn=t}function dp(e,t,r){st[nt++]=Pt,st[nt++]=Dt,st[nt++]=Pr,Pr=e;var i=Pt;e=Dt;var s=32-_t(i)-1;i&=~(1<<s),r+=1;var a=32-_t(t)+s;if(30<a){var u=s-s%5;a=(i&(1<<u)-1).toString(32),i>>=u,s-=u,Pt=1<<32-_t(t)+s|r<<s|i,Dt=a+e}else Pt=1<<a|r<<s|i,Dt=e}function ec(e){e.return!==null&&(gr(e,1),dp(e,1,0))}function tc(e){for(;e===Un;)Un=Yr[--Qr],Yr[Qr]=null,Nn=Yr[--Qr],Yr[Qr]=null;for(;e===Pr;)Pr=st[--nt],st[nt]=null,Dt=st[--nt],st[nt]=null,Pt=st[--nt],st[nt]=null}var Ye=null,Ge=null,he=!1,pt=null;function pp(e,t){var r=ot(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function uh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ye=e,Ge=sr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ye=e,Ge=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pr!==null?{id:Pt,overflow:Dt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ot(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ye=e,Ge=null,!0):!1;default:return!1}}function hl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ul(e){if(he){var t=Ge;if(t){var r=t;if(!uh(e,t)){if(hl(e))throw Error(W(418));t=sr(r.nextSibling);var i=Ye;t&&uh(e,t)?pp(i,r):(e.flags=e.flags&-4097|2,he=!1,Ye=e)}}else{if(hl(e))throw Error(W(418));e.flags=e.flags&-4097|2,he=!1,Ye=e}}}function fh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function Bs(e){if(e!==Ye)return!1;if(!he)return fh(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ol(e.type,e.memoizedProps)),t&&(t=Ge)){if(hl(e))throw _p(),Error(W(418));for(;t;)pp(e,t),t=sr(t.nextSibling)}if(fh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ge=sr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ge=null}}else Ge=Ye?sr(e.stateNode.nextSibling):null;return!0}function _p(){for(var e=Ge;e;)e=sr(e.nextSibling)}function hi(){Ge=Ye=null,he=!1}function rc(e){pt===null?pt=[e]:pt.push(e)}var U4=Ut.ReactCurrentBatchConfig;function Di(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(W(309));var i=r.stateNode}if(!i)throw Error(W(147,e));var s=i,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(u){var n=s.refs;u===null?delete n[a]:n[a]=u},t._stringRef=a,t)}if(typeof e!="string")throw Error(W(284));if(!r._owner)throw Error(W(290,e))}return e}function Us(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dh(e){var t=e._init;return t(e._payload)}function gp(e){function t(c,l){if(e){var h=c.deletions;h===null?(c.deletions=[l],c.flags|=16):h.push(l)}}function r(c,l){if(!e)return null;for(;l!==null;)t(c,l),l=l.sibling;return null}function i(c,l){for(c=new Map;l!==null;)l.key!==null?c.set(l.key,l):c.set(l.index,l),l=l.sibling;return c}function s(c,l){return c=lr(c,l),c.index=0,c.sibling=null,c}function a(c,l,h){return c.index=h,e?(h=c.alternate,h!==null?(h=h.index,h<l?(c.flags|=2,l):h):(c.flags|=2,l)):(c.flags|=1048576,l)}function u(c){return e&&c.alternate===null&&(c.flags|=2),c}function n(c,l,h,_){return l===null||l.tag!==6?(l=Yo(h,c.mode,_),l.return=c,l):(l=s(l,h),l.return=c,l)}function o(c,l,h,_){var S=h.type;return S===$r?m(c,l,h.props.children,_,h.key):l!==null&&(l.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wt&&dh(S)===l.type)?(_=s(l,h.props),_.ref=Di(c,l,h),_.return=c,_):(_=Cn(h.type,h.key,h.props,null,c.mode,_),_.ref=Di(c,l,h),_.return=c,_)}function d(c,l,h,_){return l===null||l.tag!==4||l.stateNode.containerInfo!==h.containerInfo||l.stateNode.implementation!==h.implementation?(l=Qo(h,c.mode,_),l.return=c,l):(l=s(l,h.children||[]),l.return=c,l)}function m(c,l,h,_,S){return l===null||l.tag!==7?(l=br(h,c.mode,_,S),l.return=c,l):(l=s(l,h),l.return=c,l)}function p(c,l,h){if(typeof l=="string"&&l!==""||typeof l=="number")return l=Yo(""+l,c.mode,h),l.return=c,l;if(typeof l=="object"&&l!==null){switch(l.$$typeof){case ks:return h=Cn(l.type,l.key,l.props,null,c.mode,h),h.ref=Di(c,null,l),h.return=c,h;case Wr:return l=Qo(l,c.mode,h),l.return=c,l;case Wt:var _=l._init;return p(c,_(l._payload),h)}if(Ni(l)||bi(l))return l=br(l,c.mode,h,null),l.return=c,l;Us(c,l)}return null}function v(c,l,h,_){var S=l!==null?l.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return S!==null?null:n(c,l,""+h,_);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ks:return h.key===S?o(c,l,h,_):null;case Wr:return h.key===S?d(c,l,h,_):null;case Wt:return S=h._init,v(c,l,S(h._payload),_)}if(Ni(h)||bi(h))return S!==null?null:m(c,l,h,_,null);Us(c,h)}return null}function C(c,l,h,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return c=c.get(h)||null,n(l,c,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ks:return c=c.get(_.key===null?h:_.key)||null,o(l,c,_,S);case Wr:return c=c.get(_.key===null?h:_.key)||null,d(l,c,_,S);case Wt:var x=_._init;return C(c,l,h,x(_._payload),S)}if(Ni(_)||bi(_))return c=c.get(h)||null,m(l,c,_,S,null);Us(l,_)}return null}function w(c,l,h,_){for(var S=null,x=null,R=l,g=l=0,E=null;R!==null&&g<h.length;g++){R.index>g?(E=R,R=null):E=R.sibling;var k=v(c,R,h[g],_);if(k===null){R===null&&(R=E);break}e&&R&&k.alternate===null&&t(c,R),l=a(k,l,g),x===null?S=k:x.sibling=k,x=k,R=E}if(g===h.length)return r(c,R),he&&gr(c,g),S;if(R===null){for(;g<h.length;g++)R=p(c,h[g],_),R!==null&&(l=a(R,l,g),x===null?S=R:x.sibling=R,x=R);return he&&gr(c,g),S}for(R=i(c,R);g<h.length;g++)E=C(R,c,g,h[g],_),E!==null&&(e&&E.alternate!==null&&R.delete(E.key===null?g:E.key),l=a(E,l,g),x===null?S=E:x.sibling=E,x=E);return e&&R.forEach(function(A){return t(c,A)}),he&&gr(c,g),S}function y(c,l,h,_){var S=bi(h);if(typeof S!="function")throw Error(W(150));if(h=S.call(h),h==null)throw Error(W(151));for(var x=S=null,R=l,g=l=0,E=null,k=h.next();R!==null&&!k.done;g++,k=h.next()){R.index>g?(E=R,R=null):E=R.sibling;var A=v(c,R,k.value,_);if(A===null){R===null&&(R=E);break}e&&R&&A.alternate===null&&t(c,R),l=a(A,l,g),x===null?S=A:x.sibling=A,x=A,R=E}if(k.done)return r(c,R),he&&gr(c,g),S;if(R===null){for(;!k.done;g++,k=h.next())k=p(c,k.value,_),k!==null&&(l=a(k,l,g),x===null?S=k:x.sibling=k,x=k);return he&&gr(c,g),S}for(R=i(c,R);!k.done;g++,k=h.next())k=C(R,c,g,k.value,_),k!==null&&(e&&k.alternate!==null&&R.delete(k.key===null?g:k.key),l=a(k,l,g),x===null?S=k:x.sibling=k,x=k);return e&&R.forEach(function(D){return t(c,D)}),he&&gr(c,g),S}function f(c,l,h,_){if(typeof h=="object"&&h!==null&&h.type===$r&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case ks:e:{for(var S=h.key,x=l;x!==null;){if(x.key===S){if(S=h.type,S===$r){if(x.tag===7){r(c,x.sibling),l=s(x,h.props.children),l.return=c,c=l;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Wt&&dh(S)===x.type){r(c,x.sibling),l=s(x,h.props),l.ref=Di(c,x,h),l.return=c,c=l;break e}r(c,x);break}else t(c,x);x=x.sibling}h.type===$r?(l=br(h.props.children,c.mode,_,h.key),l.return=c,c=l):(_=Cn(h.type,h.key,h.props,null,c.mode,_),_.ref=Di(c,l,h),_.return=c,c=_)}return u(c);case Wr:e:{for(x=h.key;l!==null;){if(l.key===x)if(l.tag===4&&l.stateNode.containerInfo===h.containerInfo&&l.stateNode.implementation===h.implementation){r(c,l.sibling),l=s(l,h.children||[]),l.return=c,c=l;break e}else{r(c,l);break}else t(c,l);l=l.sibling}l=Qo(h,c.mode,_),l.return=c,c=l}return u(c);case Wt:return x=h._init,f(c,l,x(h._payload),_)}if(Ni(h))return w(c,l,h,_);if(bi(h))return y(c,l,h,_);Us(c,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,l!==null&&l.tag===6?(r(c,l.sibling),l=s(l,h),l.return=c,c=l):(r(c,l),l=Yo(h,c.mode,_),l.return=c,c=l),u(c)):r(c,l)}return f}var ui=gp(!0),mp=gp(!1),Hn=dr(null),Vn=null,Zr=null,ic=null;function sc(){ic=Zr=Vn=null}function nc(e){var t=Hn.current;ce(Hn),e._currentValue=t}function fl(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function oi(e,t){Vn=e,ic=Zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(We=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(ic!==e)if(e={context:e,memoizedValue:t,next:null},Zr===null){if(Vn===null)throw Error(W(308));Zr=e,Vn.dependencies={lanes:0,firstContext:e}}else Zr=Zr.next=e;return t}var wr=null;function oc(e){wr===null?wr=[e]:wr.push(e)}function vp(e,t,r,i){var s=t.interleaved;return s===null?(r.next=r,oc(t)):(r.next=s.next,s.next=r),t.interleaved=r,Mt(e,i)}function Mt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var $t=!1;function ac(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function At(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nr(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,te&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Mt(e,r)}return s=i.interleaved,s===null?(t.next=t,oc(i)):(t.next=s.next,s.next=t),i.interleaved=t,Mt(e,r)}function _n(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Kl(e,r)}}function ph(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=u:a=a.next=u,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function zn(e,t,r,i){var s=e.updateQueue;$t=!1;var a=s.firstBaseUpdate,u=s.lastBaseUpdate,n=s.shared.pending;if(n!==null){s.shared.pending=null;var o=n,d=o.next;o.next=null,u===null?a=d:u.next=d,u=o;var m=e.alternate;m!==null&&(m=m.updateQueue,n=m.lastBaseUpdate,n!==u&&(n===null?m.firstBaseUpdate=d:n.next=d,m.lastBaseUpdate=o))}if(a!==null){var p=s.baseState;u=0,m=d=o=null,n=a;do{var v=n.lane,C=n.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:C,lane:0,tag:n.tag,payload:n.payload,callback:n.callback,next:null});e:{var w=e,y=n;switch(v=t,C=r,y.tag){case 1:if(w=y.payload,typeof w=="function"){p=w.call(C,p,v);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,v=typeof w=="function"?w.call(C,p,v):w,v==null)break e;p=pe({},p,v);break e;case 2:$t=!0}}n.callback!==null&&n.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[n]:v.push(n))}else C={eventTime:C,lane:v,tag:n.tag,payload:n.payload,callback:n.callback,next:null},m===null?(d=m=C,o=p):m=m.next=C,u|=v;if(n=n.next,n===null){if(n=s.shared.pending,n===null)break;v=n,n=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(m===null&&(o=p),s.baseState=o,s.firstBaseUpdate=d,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do u|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Ar|=u,e.lanes=u,e.memoizedState=p}}function _h(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(W(191,s));s.call(i)}}}var xs={},Et=dr(xs),us=dr(xs),fs=dr(xs);function xr(e){if(e===xs)throw Error(W(174));return e}function lc(e,t){switch(ae(fs,t),ae(us,e),ae(Et,xs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ka(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ka(t,e)}ce(Et),ae(Et,t)}function fi(){ce(Et),ce(us),ce(fs)}function yp(e){xr(fs.current);var t=xr(Et.current),r=Ka(t,e.type);t!==r&&(ae(us,e),ae(Et,r))}function cc(e){us.current===e&&(ce(Et),ce(us))}var fe=dr(0);function Wn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $o=[];function hc(){for(var e=0;e<$o.length;e++)$o[e]._workInProgressVersionPrimary=null;$o.length=0}var gn=Ut.ReactCurrentDispatcher,jo=Ut.ReactCurrentBatchConfig,Dr=0,de=null,ye=null,xe=null,$n=!1,qi=!1,ds=0,N4=0;function Pe(){throw Error(W(321))}function uc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!mt(e[r],t[r]))return!1;return!0}function fc(e,t,r,i,s,a){if(Dr=a,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gn.current=e===null||e.memoizedState===null?W4:$4,e=r(i,s),qi){a=0;do{if(qi=!1,ds=0,25<=a)throw Error(W(301));a+=1,xe=ye=null,t.updateQueue=null,gn.current=j4,e=r(i,s)}while(qi)}if(gn.current=jn,t=ye!==null&&ye.next!==null,Dr=0,xe=ye=de=null,$n=!1,t)throw Error(W(300));return e}function dc(){var e=ds!==0;return ds=0,e}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?de.memoizedState=xe=e:xe=xe.next=e,xe}function ht(){if(ye===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=ye.next;var t=xe===null?de.memoizedState:xe.next;if(t!==null)xe=t,ye=e;else{if(e===null)throw Error(W(310));ye=e,e={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},xe===null?de.memoizedState=xe=e:xe=xe.next=e}return xe}function ps(e,t){return typeof t=="function"?t(e):t}function Ko(e){var t=ht(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var i=ye,s=i.baseQueue,a=r.pending;if(a!==null){if(s!==null){var u=s.next;s.next=a.next,a.next=u}i.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,i=i.baseState;var n=u=null,o=null,d=a;do{var m=d.lane;if((Dr&m)===m)o!==null&&(o=o.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};o===null?(n=o=p,u=i):o=o.next=p,de.lanes|=m,Ar|=m}d=d.next}while(d!==null&&d!==a);o===null?u=i:o.next=n,mt(i,t.memoizedState)||(We=!0),t.memoizedState=i,t.baseState=u,t.baseQueue=o,r.lastRenderedState=i}if(e=r.interleaved,e!==null){s=e;do a=s.lane,de.lanes|=a,Ar|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Xo(e){var t=ht(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var i=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var u=s=s.next;do a=e(a,u.action),u=u.next;while(u!==s);mt(a,t.memoizedState)||(We=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,i]}function Cp(){}function wp(e,t){var r=de,i=ht(),s=t(),a=!mt(i.memoizedState,s);if(a&&(i.memoizedState=s,We=!0),i=i.queue,pc(Rp.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||xe!==null&&xe.memoizedState.tag&1){if(r.flags|=2048,_s(9,Ep.bind(null,r,i,s,t),void 0,null),Ee===null)throw Error(W(349));Dr&30||xp(r,t,s)}return s}function xp(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ep(e,t,r,i){t.value=r,t.getSnapshot=i,bp(t)&&kp(e)}function Rp(e,t,r){return r(function(){bp(t)&&kp(e)})}function bp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!mt(e,r)}catch{return!0}}function kp(e){var t=Mt(e,1);t!==null&&gt(t,e,1,-1)}function gh(e){var t=Ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:e},t.queue=e,e=e.dispatch=z4.bind(null,de,e),[t.memoizedState,e]}function _s(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Ip(){return ht().memoizedState}function mn(e,t,r,i){var s=Ct();de.flags|=e,s.memoizedState=_s(1|t,r,void 0,i===void 0?null:i)}function lo(e,t,r,i){var s=ht();i=i===void 0?null:i;var a=void 0;if(ye!==null){var u=ye.memoizedState;if(a=u.destroy,i!==null&&uc(i,u.deps)){s.memoizedState=_s(t,r,a,i);return}}de.flags|=e,s.memoizedState=_s(1|t,r,a,i)}function mh(e,t){return mn(8390656,8,e,t)}function pc(e,t){return lo(2048,8,e,t)}function Tp(e,t){return lo(4,2,e,t)}function Pp(e,t){return lo(4,4,e,t)}function Dp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ap(e,t,r){return r=r!=null?r.concat([e]):null,lo(4,4,Dp.bind(null,t,e),r)}function _c(){}function Lp(e,t){var r=ht();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&uc(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Op(e,t){var r=ht();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&uc(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Mp(e,t,r){return Dr&21?(mt(r,t)||(r=H2(),de.lanes|=r,Ar|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,We=!0),e.memoizedState=r)}function H4(e,t){var r=oe;oe=r!==0&&4>r?r:4,e(!0);var i=jo.transition;jo.transition={};try{e(!1),t()}finally{oe=r,jo.transition=i}}function Fp(){return ht().memoizedState}function V4(e,t,r){var i=ar(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Bp(e))Up(t,r);else if(r=vp(e,t,r,i),r!==null){var s=Be();gt(r,e,i,s),Np(r,t,i)}}function z4(e,t,r){var i=ar(e),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bp(e))Up(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,n=a(u,r);if(s.hasEagerState=!0,s.eagerState=n,mt(n,u)){var o=t.interleaved;o===null?(s.next=s,oc(t)):(s.next=o.next,o.next=s),t.interleaved=s;return}}catch{}finally{}r=vp(e,t,s,i),r!==null&&(s=Be(),gt(r,e,i,s),Np(r,t,i))}}function Bp(e){var t=e.alternate;return e===de||t!==null&&t===de}function Up(e,t){qi=$n=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Np(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Kl(e,r)}}var jn={readContext:ct,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},W4={readContext:ct,useCallback:function(e,t){return Ct().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:mh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,mn(4194308,4,Dp.bind(null,t,e),r)},useLayoutEffect:function(e,t){return mn(4194308,4,e,t)},useInsertionEffect:function(e,t){return mn(4,2,e,t)},useMemo:function(e,t){var r=Ct();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Ct();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=V4.bind(null,de,e),[i.memoizedState,e]},useRef:function(e){var t=Ct();return e={current:e},t.memoizedState=e},useState:gh,useDebugValue:_c,useDeferredValue:function(e){return Ct().memoizedState=e},useTransition:function(){var e=gh(!1),t=e[0];return e=H4.bind(null,e[1]),Ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=de,s=Ct();if(he){if(r===void 0)throw Error(W(407));r=r()}else{if(r=t(),Ee===null)throw Error(W(349));Dr&30||xp(i,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,mh(Rp.bind(null,i,a,e),[e]),i.flags|=2048,_s(9,Ep.bind(null,i,a,r,t),void 0,null),r},useId:function(){var e=Ct(),t=Ee.identifierPrefix;if(he){var r=Dt,i=Pt;r=(i&~(1<<32-_t(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=ds++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=N4++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$4={readContext:ct,useCallback:Lp,useContext:ct,useEffect:pc,useImperativeHandle:Ap,useInsertionEffect:Tp,useLayoutEffect:Pp,useMemo:Op,useReducer:Ko,useRef:Ip,useState:function(){return Ko(ps)},useDebugValue:_c,useDeferredValue:function(e){var t=ht();return Mp(t,ye.memoizedState,e)},useTransition:function(){var e=Ko(ps)[0],t=ht().memoizedState;return[e,t]},useMutableSource:Cp,useSyncExternalStore:wp,useId:Fp,unstable_isNewReconciler:!1},j4={readContext:ct,useCallback:Lp,useContext:ct,useEffect:pc,useImperativeHandle:Ap,useInsertionEffect:Tp,useLayoutEffect:Pp,useMemo:Op,useReducer:Xo,useRef:Ip,useState:function(){return Xo(ps)},useDebugValue:_c,useDeferredValue:function(e){var t=ht();return ye===null?t.memoizedState=e:Mp(t,ye.memoizedState,e)},useTransition:function(){var e=Xo(ps)[0],t=ht().memoizedState;return[e,t]},useMutableSource:Cp,useSyncExternalStore:wp,useId:Fp,unstable_isNewReconciler:!1};function ft(e,t){if(e&&e.defaultProps){t=pe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function dl(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:pe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var co={isMounted:function(e){return(e=e._reactInternals)?Mr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Be(),s=ar(e),a=At(i,s);a.payload=t,r!=null&&(a.callback=r),t=nr(e,a,s),t!==null&&(gt(t,e,s,i),_n(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Be(),s=ar(e),a=At(i,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=nr(e,a,s),t!==null&&(gt(t,e,s,i),_n(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Be(),i=ar(e),s=At(r,i);s.tag=2,t!=null&&(s.callback=t),t=nr(e,s,i),t!==null&&(gt(t,e,i,r),_n(t,e,i))}};function vh(e,t,r,i,s,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,u):t.prototype&&t.prototype.isPureReactComponent?!as(r,i)||!as(s,a):!0}function Hp(e,t,r){var i=!1,s=ur,a=t.contextType;return typeof a=="object"&&a!==null?a=ct(a):(s=je(t)?Tr:Oe.current,i=t.contextTypes,a=(i=i!=null)?ci(e,s):ur),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=co,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Sh(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&co.enqueueReplaceState(t,t.state,null)}function pl(e,t,r,i){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},ac(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=ct(a):(a=je(t)?Tr:Oe.current,s.context=ci(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(dl(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&co.enqueueReplaceState(s,s.state,null),zn(e,r,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function di(e,t){try{var r="",i=t;do r+=S3(i),i=i.return;while(i);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function qo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function _l(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var K4=typeof WeakMap=="function"?WeakMap:Map;function Vp(e,t,r){r=At(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Xn||(Xn=!0,Rl=i),_l(e,t)},r}function zp(e,t,r){r=At(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;r.payload=function(){return i(s)},r.callback=function(){_l(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){_l(e,t),typeof i!="function"&&(or===null?or=new Set([this]):or.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function yh(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new K4;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(r)||(s.add(r),e=og.bind(null,e,t,r),t.then(e,e))}function Ch(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wh(e,t,r,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=At(-1,1),t.tag=2,nr(r,t,1))),r.lanes|=1),e)}var X4=Ut.ReactCurrentOwner,We=!1;function Fe(e,t,r,i){t.child=e===null?mp(t,null,r,i):ui(t,e.child,r,i)}function xh(e,t,r,i,s){r=r.render;var a=t.ref;return oi(t,s),i=fc(e,t,r,i,a,s),r=dc(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ft(e,t,s)):(he&&r&&ec(t),t.flags|=1,Fe(e,t,i,s),t.child)}function Eh(e,t,r,i,s){if(e===null){var a=r.type;return typeof a=="function"&&!xc(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Wp(e,t,a,i,s)):(e=Cn(r.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var u=a.memoizedProps;if(r=r.compare,r=r!==null?r:as,r(u,i)&&e.ref===t.ref)return Ft(e,t,s)}return t.flags|=1,e=lr(a,i),e.ref=t.ref,e.return=t,t.child=e}function Wp(e,t,r,i,s){if(e!==null){var a=e.memoizedProps;if(as(a,i)&&e.ref===t.ref)if(We=!1,t.pendingProps=i=a,(e.lanes&s)!==0)e.flags&131072&&(We=!0);else return t.lanes=e.lanes,Ft(e,t,s)}return gl(e,t,r,i,s)}function $p(e,t,r){var i=t.pendingProps,s=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(ei,Xe),Xe|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ae(ei,Xe),Xe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,ae(ei,Xe),Xe|=i}else a!==null?(i=a.baseLanes|r,t.memoizedState=null):i=r,ae(ei,Xe),Xe|=i;return Fe(e,t,s,r),t.child}function jp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function gl(e,t,r,i,s){var a=je(r)?Tr:Oe.current;return a=ci(t,a),oi(t,s),r=fc(e,t,r,i,a,s),i=dc(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ft(e,t,s)):(he&&i&&ec(t),t.flags|=1,Fe(e,t,r,s),t.child)}function Rh(e,t,r,i,s){if(je(r)){var a=!0;Bn(t)}else a=!1;if(oi(t,s),t.stateNode===null)vn(e,t),Hp(t,r,i),pl(t,r,i,s),i=!0;else if(e===null){var u=t.stateNode,n=t.memoizedProps;u.props=n;var o=u.context,d=r.contextType;typeof d=="object"&&d!==null?d=ct(d):(d=je(r)?Tr:Oe.current,d=ci(t,d));var m=r.getDerivedStateFromProps,p=typeof m=="function"||typeof u.getSnapshotBeforeUpdate=="function";p||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(n!==i||o!==d)&&Sh(t,u,i,d),$t=!1;var v=t.memoizedState;u.state=v,zn(t,i,u,s),o=t.memoizedState,n!==i||v!==o||$e.current||$t?(typeof m=="function"&&(dl(t,r,m,i),o=t.memoizedState),(n=$t||vh(t,r,n,i,v,o,d))?(p||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=o),u.props=i,u.state=o,u.context=d,i=n):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,Sp(e,t),n=t.memoizedProps,d=t.type===t.elementType?n:ft(t.type,n),u.props=d,p=t.pendingProps,v=u.context,o=r.contextType,typeof o=="object"&&o!==null?o=ct(o):(o=je(r)?Tr:Oe.current,o=ci(t,o));var C=r.getDerivedStateFromProps;(m=typeof C=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(n!==p||v!==o)&&Sh(t,u,i,o),$t=!1,v=t.memoizedState,u.state=v,zn(t,i,u,s);var w=t.memoizedState;n!==p||v!==w||$e.current||$t?(typeof C=="function"&&(dl(t,r,C,i),w=t.memoizedState),(d=$t||vh(t,r,d,i,v,w,o)||!1)?(m||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,w,o),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,w,o)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||n===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||n===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=w),u.props=i,u.state=w,u.context=o,i=d):(typeof u.componentDidUpdate!="function"||n===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||n===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),i=!1)}return ml(e,t,r,i,a,s)}function ml(e,t,r,i,s,a){jp(e,t);var u=(t.flags&128)!==0;if(!i&&!u)return s&&hh(t,r,!1),Ft(e,t,a);i=t.stateNode,X4.current=t;var n=u&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&u?(t.child=ui(t,e.child,null,a),t.child=ui(t,null,n,a)):Fe(e,t,n,a),t.memoizedState=i.state,s&&hh(t,r,!0),t.child}function Kp(e){var t=e.stateNode;t.pendingContext?ch(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ch(e,t.context,!1),lc(e,t.containerInfo)}function bh(e,t,r,i,s){return hi(),rc(s),t.flags|=256,Fe(e,t,r,i),t.child}var vl={dehydrated:null,treeContext:null,retryLane:0};function Sl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xp(e,t,r){var i=t.pendingProps,s=fe.current,a=!1,u=(t.flags&128)!==0,n;if((n=u)||(n=e!==null&&e.memoizedState===null?!1:(s&2)!==0),n?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ae(fe,s&1),e===null)return ul(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=i.children,e=i.fallback,a?(i=t.mode,a=t.child,u={mode:"hidden",children:u},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=u):a=fo(u,i,0,null),e=br(e,i,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Sl(r),t.memoizedState=vl,e):gc(t,u));if(s=e.memoizedState,s!==null&&(n=s.dehydrated,n!==null))return q4(e,t,u,i,n,s,r);if(a){a=i.fallback,u=t.mode,s=e.child,n=s.sibling;var o={mode:"hidden",children:i.children};return!(u&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=o,t.deletions=null):(i=lr(s,o),i.subtreeFlags=s.subtreeFlags&14680064),n!==null?a=lr(n,a):(a=br(a,u,r,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,u=e.child.memoizedState,u=u===null?Sl(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~r,t.memoizedState=vl,i}return a=e.child,e=a.sibling,i=lr(a,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function gc(e,t){return t=fo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ns(e,t,r,i){return i!==null&&rc(i),ui(t,e.child,null,r),e=gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function q4(e,t,r,i,s,a,u){if(r)return t.flags&256?(t.flags&=-257,i=qo(Error(W(422))),Ns(e,t,u,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=fo({mode:"visible",children:i.children},s,0,null),a=br(a,s,u,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,t.mode&1&&ui(t,e.child,null,u),t.child.memoizedState=Sl(u),t.memoizedState=vl,a);if(!(t.mode&1))return Ns(e,t,u,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var n=i.dgst;return i=n,a=Error(W(419)),i=qo(a,i,void 0),Ns(e,t,u,i)}if(n=(u&e.childLanes)!==0,We||n){if(i=Ee,i!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|u)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Mt(e,s),gt(i,e,s,-1))}return wc(),i=qo(Error(W(421))),Ns(e,t,u,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=ag.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Ge=sr(s.nextSibling),Ye=t,he=!0,pt=null,e!==null&&(st[nt++]=Pt,st[nt++]=Dt,st[nt++]=Pr,Pt=e.id,Dt=e.overflow,Pr=t),t=gc(t,i.children),t.flags|=4096,t)}function kh(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),fl(e.return,t,r)}function Go(e,t,r,i,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=s)}function qp(e,t,r){var i=t.pendingProps,s=i.revealOrder,a=i.tail;if(Fe(e,t,i.children,r),i=fe.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kh(e,r,t);else if(e.tag===19)kh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ae(fe,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Wn(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Go(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Wn(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Go(t,!0,r,null,a);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vn(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ft(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ar|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,r=lr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=lr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function G4(e,t,r){switch(t.tag){case 3:Kp(t),hi();break;case 5:yp(t);break;case 1:je(t.type)&&Bn(t);break;case 4:lc(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;ae(Hn,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ae(fe,fe.current&1),t.flags|=128,null):r&t.child.childLanes?Xp(e,t,r):(ae(fe,fe.current&1),e=Ft(e,t,r),e!==null?e.sibling:null);ae(fe,fe.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return qp(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(fe,fe.current),i)break;return null;case 22:case 23:return t.lanes=0,$p(e,t,r)}return Ft(e,t,r)}var Gp,yl,Yp,Qp;Gp=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};yl=function(){};Yp=function(e,t,r,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,xr(Et.current);var a=null;switch(r){case"input":s=za(e,s),i=za(e,i),a=[];break;case"select":s=pe({},s,{value:void 0}),i=pe({},i,{value:void 0}),a=[];break;case"textarea":s=ja(e,s),i=ja(e,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Mn)}Xa(r,i);var u;r=null;for(d in s)if(!i.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var n=s[d];for(u in n)n.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(es.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in i){var o=i[d];if(n=s?.[d],i.hasOwnProperty(d)&&o!==n&&(o!=null||n!=null))if(d==="style")if(n){for(u in n)!n.hasOwnProperty(u)||o&&o.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in o)o.hasOwnProperty(u)&&n[u]!==o[u]&&(r||(r={}),r[u]=o[u])}else r||(a||(a=[]),a.push(d,r)),r=o;else d==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,n=n?n.__html:void 0,o!=null&&n!==o&&(a=a||[]).push(d,o)):d==="children"?typeof o!="string"&&typeof o!="number"||(a=a||[]).push(d,""+o):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(es.hasOwnProperty(d)?(o!=null&&d==="onScroll"&&le("scroll",e),a||n===o||(a=[])):(a=a||[]).push(d,o))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Qp=function(e,t,r,i){r!==i&&(t.flags|=4)};function Ai(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function De(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Y4(e,t,r){var i=t.pendingProps;switch(tc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(t),null;case 1:return je(t.type)&&Fn(),De(t),null;case 3:return i=t.stateNode,fi(),ce($e),ce(Oe),hc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Bs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pt!==null&&(Il(pt),pt=null))),yl(e,t),De(t),null;case 5:cc(t);var s=xr(fs.current);if(r=t.type,e!==null&&t.stateNode!=null)Yp(e,t,r,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(W(166));return De(t),null}if(e=xr(Et.current),Bs(t)){i=t.stateNode,r=t.type;var a=t.memoizedProps;switch(i[wt]=t,i[hs]=a,e=(t.mode&1)!==0,r){case"dialog":le("cancel",i),le("close",i);break;case"iframe":case"object":case"embed":le("load",i);break;case"video":case"audio":for(s=0;s<Vi.length;s++)le(Vi[s],i);break;case"source":le("error",i);break;case"img":case"image":case"link":le("error",i),le("load",i);break;case"details":le("toggle",i);break;case"input":Fc(i,a),le("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},le("invalid",i);break;case"textarea":Uc(i,a),le("invalid",i)}Xa(r,a),s=null;for(var u in a)if(a.hasOwnProperty(u)){var n=a[u];u==="children"?typeof n=="string"?i.textContent!==n&&(a.suppressHydrationWarning!==!0&&Fs(i.textContent,n,e),s=["children",n]):typeof n=="number"&&i.textContent!==""+n&&(a.suppressHydrationWarning!==!0&&Fs(i.textContent,n,e),s=["children",""+n]):es.hasOwnProperty(u)&&n!=null&&u==="onScroll"&&le("scroll",i)}switch(r){case"input":Is(i),Bc(i,a,!0);break;case"textarea":Is(i),Nc(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Mn)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=R2(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=u.createElement(r,{is:i.is}):(e=u.createElement(r),r==="select"&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,r),e[wt]=t,e[hs]=i,Gp(e,t,!1,!1),t.stateNode=e;e:{switch(u=qa(r,i),r){case"dialog":le("cancel",e),le("close",e),s=i;break;case"iframe":case"object":case"embed":le("load",e),s=i;break;case"video":case"audio":for(s=0;s<Vi.length;s++)le(Vi[s],e);s=i;break;case"source":le("error",e),s=i;break;case"img":case"image":case"link":le("error",e),le("load",e),s=i;break;case"details":le("toggle",e),s=i;break;case"input":Fc(e,i),s=za(e,i),le("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=pe({},i,{value:void 0}),le("invalid",e);break;case"textarea":Uc(e,i),s=ja(e,i),le("invalid",e);break;default:s=i}Xa(r,s),n=s;for(a in n)if(n.hasOwnProperty(a)){var o=n[a];a==="style"?I2(e,o):a==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&b2(e,o)):a==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&ts(e,o):typeof o=="number"&&ts(e,""+o):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(es.hasOwnProperty(a)?o!=null&&a==="onScroll"&&le("scroll",e):o!=null&&Hl(e,a,o,u))}switch(r){case"input":Is(e),Bc(e,i,!1);break;case"textarea":Is(e),Nc(e);break;case"option":i.value!=null&&e.setAttribute("value",""+hr(i.value));break;case"select":e.multiple=!!i.multiple,a=i.value,a!=null?ri(e,!!i.multiple,a,!1):i.defaultValue!=null&&ri(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Mn)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return De(t),null;case 6:if(e&&t.stateNode!=null)Qp(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(W(166));if(r=xr(fs.current),xr(Et.current),Bs(t)){if(i=t.stateNode,r=t.memoizedProps,i[wt]=t,(a=i.nodeValue!==r)&&(e=Ye,e!==null))switch(e.tag){case 3:Fs(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fs(i.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[wt]=t,t.stateNode=i}return De(t),null;case 13:if(ce(fe),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&Ge!==null&&t.mode&1&&!(t.flags&128))_p(),hi(),t.flags|=98560,a=!1;else if(a=Bs(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(W(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(W(317));a[wt]=t}else hi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;De(t),a=!1}else pt!==null&&(Il(pt),pt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||fe.current&1?Ce===0&&(Ce=3):wc())),t.updateQueue!==null&&(t.flags|=4),De(t),null);case 4:return fi(),yl(e,t),e===null&&ls(t.stateNode.containerInfo),De(t),null;case 10:return nc(t.type._context),De(t),null;case 17:return je(t.type)&&Fn(),De(t),null;case 19:if(ce(fe),a=t.memoizedState,a===null)return De(t),null;if(i=(t.flags&128)!==0,u=a.rendering,u===null)if(i)Ai(a,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Wn(e),u!==null){for(t.flags|=128,Ai(a,!1),i=u.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)a=r,e=i,a.flags&=14680066,u=a.alternate,u===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ae(fe,fe.current&1|2),t.child}e=e.sibling}a.tail!==null&&ve()>pi&&(t.flags|=128,i=!0,Ai(a,!1),t.lanes=4194304)}else{if(!i)if(e=Wn(u),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ai(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!he)return De(t),null}else 2*ve()-a.renderingStartTime>pi&&r!==1073741824&&(t.flags|=128,i=!0,Ai(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(r=a.last,r!==null?r.sibling=u:t.child=u,a.last=u)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ve(),t.sibling=null,r=fe.current,ae(fe,i?r&1|2:r&1),t):(De(t),null);case 22:case 23:return Cc(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Xe&1073741824&&(De(t),t.subtreeFlags&6&&(t.flags|=8192)):De(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function Q4(e,t){switch(tc(t),t.tag){case 1:return je(t.type)&&Fn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fi(),ce($e),ce(Oe),hc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cc(t),null;case 13:if(ce(fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(fe),null;case 4:return fi(),null;case 10:return nc(t.type._context),null;case 22:case 23:return Cc(),null;case 24:return null;default:return null}}var Hs=!1,Le=!1,Z4=typeof WeakSet=="function"?WeakSet:Set,K=null;function Jr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){_e(e,t,i)}else r.current=null}function Cl(e,t,r){try{r()}catch(i){_e(e,t,i)}}var Ih=!1;function J4(e,t){if(sl=An,e=rp(),Jl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var u=0,n=-1,o=-1,d=0,m=0,p=e,v=null;t:for(;;){for(var C;p!==r||s!==0&&p.nodeType!==3||(n=u+s),p!==a||i!==0&&p.nodeType!==3||(o=u+i),p.nodeType===3&&(u+=p.nodeValue.length),(C=p.firstChild)!==null;)v=p,p=C;for(;;){if(p===e)break t;if(v===r&&++d===s&&(n=u),v===a&&++m===i&&(o=u),(C=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=C}r=n===-1||o===-1?null:{start:n,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(nl={focusedElem:e,selectionRange:r},An=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,f=w.memoizedState,c=t.stateNode,l=c.getSnapshotBeforeUpdate(t.elementType===t.type?y:ft(t.type,y),f);c.__reactInternalSnapshotBeforeUpdate=l}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(_){_e(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return w=Ih,Ih=!1,w}function Gi(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Cl(t,r,a)}s=s.next}while(s!==i)}}function ho(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function wl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Zp(e){var t=e.alternate;t!==null&&(e.alternate=null,Zp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wt],delete t[hs],delete t[ll],delete t[M4],delete t[F4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jp(e){return e.tag===5||e.tag===3||e.tag===4}function Th(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Mn));else if(i!==4&&(e=e.child,e!==null))for(xl(e,t,r),e=e.sibling;e!==null;)xl(e,t,r),e=e.sibling}function El(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(El(e,t,r),e=e.sibling;e!==null;)El(e,t,r),e=e.sibling}var ke=null,dt=!1;function Vt(e,t,r){for(r=r.child;r!==null;)e_(e,t,r),r=r.sibling}function e_(e,t,r){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(ro,r)}catch{}switch(r.tag){case 5:Le||Jr(r,t);case 6:var i=ke,s=dt;ke=null,Vt(e,t,r),ke=i,dt=s,ke!==null&&(dt?(e=ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ke.removeChild(r.stateNode));break;case 18:ke!==null&&(dt?(e=ke,r=r.stateNode,e.nodeType===8?zo(e.parentNode,r):e.nodeType===1&&zo(e,r),ns(e)):zo(ke,r.stateNode));break;case 4:i=ke,s=dt,ke=r.stateNode.containerInfo,dt=!0,Vt(e,t,r),ke=i,dt=s;break;case 0:case 11:case 14:case 15:if(!Le&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,u=a.destroy;a=a.tag,u!==void 0&&(a&2||a&4)&&Cl(r,t,u),s=s.next}while(s!==i)}Vt(e,t,r);break;case 1:if(!Le&&(Jr(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(n){_e(r,t,n)}Vt(e,t,r);break;case 21:Vt(e,t,r);break;case 22:r.mode&1?(Le=(i=Le)||r.memoizedState!==null,Vt(e,t,r),Le=i):Vt(e,t,r);break;default:Vt(e,t,r)}}function Ph(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Z4),t.forEach(function(i){var s=lg.bind(null,e,i);r.has(i)||(r.add(i),i.then(s,s))})}}function ut(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var a=e,u=t,n=u;e:for(;n!==null;){switch(n.tag){case 5:ke=n.stateNode,dt=!1;break e;case 3:ke=n.stateNode.containerInfo,dt=!0;break e;case 4:ke=n.stateNode.containerInfo,dt=!0;break e}n=n.return}if(ke===null)throw Error(W(160));e_(a,u,s),ke=null,dt=!1;var o=s.alternate;o!==null&&(o.return=null),s.return=null}catch(d){_e(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)t_(t,e),t=t.sibling}function t_(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ut(t,e),St(e),i&4){try{Gi(3,e,e.return),ho(3,e)}catch(y){_e(e,e.return,y)}try{Gi(5,e,e.return)}catch(y){_e(e,e.return,y)}}break;case 1:ut(t,e),St(e),i&512&&r!==null&&Jr(r,r.return);break;case 5:if(ut(t,e),St(e),i&512&&r!==null&&Jr(r,r.return),e.flags&32){var s=e.stateNode;try{ts(s,"")}catch(y){_e(e,e.return,y)}}if(i&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,u=r!==null?r.memoizedProps:a,n=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{n==="input"&&a.type==="radio"&&a.name!=null&&x2(s,a),qa(n,u);var d=qa(n,a);for(u=0;u<o.length;u+=2){var m=o[u],p=o[u+1];m==="style"?I2(s,p):m==="dangerouslySetInnerHTML"?b2(s,p):m==="children"?ts(s,p):Hl(s,m,p,d)}switch(n){case"input":Wa(s,a);break;case"textarea":E2(s,a);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var C=a.value;C!=null?ri(s,!!a.multiple,C,!1):v!==!!a.multiple&&(a.defaultValue!=null?ri(s,!!a.multiple,a.defaultValue,!0):ri(s,!!a.multiple,a.multiple?[]:"",!1))}s[hs]=a}catch(y){_e(e,e.return,y)}}break;case 6:if(ut(t,e),St(e),i&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(y){_e(e,e.return,y)}}break;case 3:if(ut(t,e),St(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{ns(t.containerInfo)}catch(y){_e(e,e.return,y)}break;case 4:ut(t,e),St(e);break;case 13:ut(t,e),St(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Sc=ve())),i&4&&Ph(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(Le=(d=Le)||m,ut(t,e),Le=d):ut(t,e),St(e),i&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(K=e,m=e.child;m!==null;){for(p=K=m;K!==null;){switch(v=K,C=v.child,v.tag){case 0:case 11:case 14:case 15:Gi(4,v,v.return);break;case 1:Jr(v,v.return);var w=v.stateNode;if(typeof w.componentWillUnmount=="function"){i=v,r=v.return;try{t=i,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){_e(i,r,y)}}break;case 5:Jr(v,v.return);break;case 22:if(v.memoizedState!==null){Ah(p);continue}}C!==null?(C.return=v,K=C):Ah(p)}m=m.sibling}e:for(m=null,p=e;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(n=p.stateNode,o=p.memoizedProps.style,u=o!=null&&o.hasOwnProperty("display")?o.display:null,n.style.display=k2("display",u))}catch(y){_e(e,e.return,y)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(y){_e(e,e.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ut(t,e),St(e),i&4&&Ph(e);break;case 21:break;default:ut(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Jp(r)){var i=r;break e}r=r.return}throw Error(W(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ts(s,""),i.flags&=-33);var a=Th(e);El(e,a,s);break;case 3:case 4:var u=i.stateNode.containerInfo,n=Th(e);xl(e,n,u);break;default:throw Error(W(161))}}catch(o){_e(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eg(e,t,r){K=e,r_(e)}function r_(e,t,r){for(var i=(e.mode&1)!==0;K!==null;){var s=K,a=s.child;if(s.tag===22&&i){var u=s.memoizedState!==null||Hs;if(!u){var n=s.alternate,o=n!==null&&n.memoizedState!==null||Le;n=Hs;var d=Le;if(Hs=u,(Le=o)&&!d)for(K=s;K!==null;)u=K,o=u.child,u.tag===22&&u.memoizedState!==null?Lh(s):o!==null?(o.return=u,K=o):Lh(s);for(;a!==null;)K=a,r_(a),a=a.sibling;K=s,Hs=n,Le=d}Dh(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,K=a):Dh(e)}}function Dh(e){for(;K!==null;){var t=K;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||ho(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Le)if(r===null)i.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ft(t.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&_h(t,a,i);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}_h(t,u,r)}break;case 5:var n=t.stateNode;if(r===null&&t.flags&4){r=n;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&ns(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Le||t.flags&512&&wl(t)}catch(v){_e(t,t.return,v)}}if(t===e){K=null;break}if(r=t.sibling,r!==null){r.return=t.return,K=r;break}K=t.return}}function Ah(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var r=t.sibling;if(r!==null){r.return=t.return,K=r;break}K=t.return}}function Lh(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ho(4,t)}catch(o){_e(t,r,o)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(o){_e(t,s,o)}}var a=t.return;try{wl(t)}catch(o){_e(t,a,o)}break;case 5:var u=t.return;try{wl(t)}catch(o){_e(t,u,o)}}}catch(o){_e(t,t.return,o)}if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}var tg=Math.ceil,Kn=Ut.ReactCurrentDispatcher,mc=Ut.ReactCurrentOwner,lt=Ut.ReactCurrentBatchConfig,te=0,Ee=null,Se=null,Ie=0,Xe=0,ei=dr(0),Ce=0,gs=null,Ar=0,uo=0,vc=0,Yi=null,ze=null,Sc=0,pi=1/0,bt=null,Xn=!1,Rl=null,or=null,Vs=!1,Qt=null,qn=0,Qi=0,bl=null,Sn=-1,yn=0;function Be(){return te&6?ve():Sn!==-1?Sn:Sn=ve()}function ar(e){return e.mode&1?te&2&&Ie!==0?Ie&-Ie:U4.transition!==null?(yn===0&&(yn=H2()),yn):(e=oe,e!==0||(e=window.event,e=e===void 0?16:X2(e.type)),e):1}function gt(e,t,r,i){if(50<Qi)throw Qi=0,bl=null,Error(W(185));ys(e,r,i),(!(te&2)||e!==Ee)&&(e===Ee&&(!(te&2)&&(uo|=r),Ce===4&&qt(e,Ie)),Ke(e,i),r===1&&te===0&&!(t.mode&1)&&(pi=ve()+500,ao&&pr()))}function Ke(e,t){var r=e.callbackNode;U3(e,t);var i=Dn(e,e===Ee?Ie:0);if(i===0)r!==null&&zc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&zc(r),t===1)e.tag===0?B4(Oh.bind(null,e)):fp(Oh.bind(null,e)),L4(function(){!(te&6)&&pr()}),r=null;else{switch(V2(i)){case 1:r=jl;break;case 4:r=U2;break;case 16:r=Pn;break;case 536870912:r=N2;break;default:r=Pn}r=h_(r,i_.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function i_(e,t){if(Sn=-1,yn=0,te&6)throw Error(W(327));var r=e.callbackNode;if(ai()&&e.callbackNode!==r)return null;var i=Dn(e,e===Ee?Ie:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Gn(e,i);else{t=i;var s=te;te|=2;var a=n_();(Ee!==e||Ie!==t)&&(bt=null,pi=ve()+500,Rr(e,t));do try{sg();break}catch(n){s_(e,n)}while(!0);sc(),Kn.current=a,te=s,Se!==null?t=0:(Ee=null,Ie=0,t=Ce)}if(t!==0){if(t===2&&(s=Ja(e),s!==0&&(i=s,t=kl(e,s))),t===1)throw r=gs,Rr(e,0),qt(e,i),Ke(e,ve()),r;if(t===6)qt(e,i);else{if(s=e.current.alternate,!(i&30)&&!rg(s)&&(t=Gn(e,i),t===2&&(a=Ja(e),a!==0&&(i=a,t=kl(e,a))),t===1))throw r=gs,Rr(e,0),qt(e,i),Ke(e,ve()),r;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(W(345));case 2:mr(e,ze,bt);break;case 3:if(qt(e,i),(i&130023424)===i&&(t=Sc+500-ve(),10<t)){if(Dn(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){Be(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=al(mr.bind(null,e,ze,bt),t);break}mr(e,ze,bt);break;case 4:if(qt(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var u=31-_t(i);a=1<<u,u=t[u],u>s&&(s=u),i&=~a}if(i=s,i=ve()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*tg(i/1960))-i,10<i){e.timeoutHandle=al(mr.bind(null,e,ze,bt),i);break}mr(e,ze,bt);break;case 5:mr(e,ze,bt);break;default:throw Error(W(329))}}}return Ke(e,ve()),e.callbackNode===r?i_.bind(null,e):null}function kl(e,t){var r=Yi;return e.current.memoizedState.isDehydrated&&(Rr(e,t).flags|=256),e=Gn(e,t),e!==2&&(t=ze,ze=r,t!==null&&Il(t)),e}function Il(e){ze===null?ze=e:ze.push.apply(ze,e)}function rg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],a=s.getSnapshot;s=s.value;try{if(!mt(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qt(e,t){for(t&=~vc,t&=~uo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-_t(t),i=1<<r;e[r]=-1,t&=~i}}function Oh(e){if(te&6)throw Error(W(327));ai();var t=Dn(e,0);if(!(t&1))return Ke(e,ve()),null;var r=Gn(e,t);if(e.tag!==0&&r===2){var i=Ja(e);i!==0&&(t=i,r=kl(e,i))}if(r===1)throw r=gs,Rr(e,0),qt(e,t),Ke(e,ve()),r;if(r===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mr(e,ze,bt),Ke(e,ve()),null}function yc(e,t){var r=te;te|=1;try{return e(t)}finally{te=r,te===0&&(pi=ve()+500,ao&&pr())}}function Lr(e){Qt!==null&&Qt.tag===0&&!(te&6)&&ai();var t=te;te|=1;var r=lt.transition,i=oe;try{if(lt.transition=null,oe=1,e)return e()}finally{oe=i,lt.transition=r,te=t,!(te&6)&&pr()}}function Cc(){Xe=ei.current,ce(ei)}function Rr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,A4(r)),Se!==null)for(r=Se.return;r!==null;){var i=r;switch(tc(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Fn();break;case 3:fi(),ce($e),ce(Oe),hc();break;case 5:cc(i);break;case 4:fi();break;case 13:ce(fe);break;case 19:ce(fe);break;case 10:nc(i.type._context);break;case 22:case 23:Cc()}r=r.return}if(Ee=e,Se=e=lr(e.current,null),Ie=Xe=t,Ce=0,gs=null,vc=uo=Ar=0,ze=Yi=null,wr!==null){for(t=0;t<wr.length;t++)if(r=wr[t],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,a=r.pending;if(a!==null){var u=a.next;a.next=s,i.next=u}r.pending=i}wr=null}return e}function s_(e,t){do{var r=Se;try{if(sc(),gn.current=jn,$n){for(var i=de.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}$n=!1}if(Dr=0,xe=ye=de=null,qi=!1,ds=0,mc.current=null,r===null||r.return===null){Ce=1,gs=t,Se=null;break}e:{var a=e,u=r.return,n=r,o=t;if(t=Ie,n.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=o,m=n,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var C=Ch(u);if(C!==null){C.flags&=-257,wh(C,u,n,a,t),C.mode&1&&yh(a,d,t),t=C,o=d;var w=t.updateQueue;if(w===null){var y=new Set;y.add(o),t.updateQueue=y}else w.add(o);break e}else{if(!(t&1)){yh(a,d,t),wc();break e}o=Error(W(426))}}else if(he&&n.mode&1){var f=Ch(u);if(f!==null){!(f.flags&65536)&&(f.flags|=256),wh(f,u,n,a,t),rc(di(o,n));break e}}a=o=di(o,n),Ce!==4&&(Ce=2),Yi===null?Yi=[a]:Yi.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var c=Vp(a,o,t);ph(a,c);break e;case 1:n=o;var l=a.type,h=a.stateNode;if(!(a.flags&128)&&(typeof l.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(or===null||!or.has(h)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=zp(a,n,t);ph(a,_);break e}}a=a.return}while(a!==null)}a_(r)}catch(S){t=S,Se===r&&r!==null&&(Se=r=r.return);continue}break}while(!0)}function n_(){var e=Kn.current;return Kn.current=jn,e===null?jn:e}function wc(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Ee===null||!(Ar&268435455)&&!(uo&268435455)||qt(Ee,Ie)}function Gn(e,t){var r=te;te|=2;var i=n_();(Ee!==e||Ie!==t)&&(bt=null,Rr(e,t));do try{ig();break}catch(s){s_(e,s)}while(!0);if(sc(),te=r,Kn.current=i,Se!==null)throw Error(W(261));return Ee=null,Ie=0,Ce}function ig(){for(;Se!==null;)o_(Se)}function sg(){for(;Se!==null&&!T3();)o_(Se)}function o_(e){var t=c_(e.alternate,e,Xe);e.memoizedProps=e.pendingProps,t===null?a_(e):Se=t,mc.current=null}function a_(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Q4(r,t),r!==null){r.flags&=32767,Se=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,Se=null;return}}else if(r=Y4(r,t,Xe),r!==null){Se=r;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ce===0&&(Ce=5)}function mr(e,t,r){var i=oe,s=lt.transition;try{lt.transition=null,oe=1,ng(e,t,r,i)}finally{lt.transition=s,oe=i}return null}function ng(e,t,r,i){do ai();while(Qt!==null);if(te&6)throw Error(W(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(N3(e,a),e===Ee&&(Se=Ee=null,Ie=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Vs||(Vs=!0,h_(Pn,function(){return ai(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=lt.transition,lt.transition=null;var u=oe;oe=1;var n=te;te|=4,mc.current=null,J4(e,r),t_(r,e),R4(nl),An=!!sl,nl=sl=null,e.current=r,eg(r),P3(),te=n,oe=u,lt.transition=a}else e.current=r;if(Vs&&(Vs=!1,Qt=e,qn=s),a=e.pendingLanes,a===0&&(or=null),L3(r.stateNode),Ke(e,ve()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(Xn)throw Xn=!1,e=Rl,Rl=null,e;return qn&1&&e.tag!==0&&ai(),a=e.pendingLanes,a&1?e===bl?Qi++:(Qi=0,bl=e):Qi=0,pr(),null}function ai(){if(Qt!==null){var e=V2(qn),t=lt.transition,r=oe;try{if(lt.transition=null,oe=16>e?16:e,Qt===null)var i=!1;else{if(e=Qt,Qt=null,qn=0,te&6)throw Error(W(331));var s=te;for(te|=4,K=e.current;K!==null;){var a=K,u=a.child;if(K.flags&16){var n=a.deletions;if(n!==null){for(var o=0;o<n.length;o++){var d=n[o];for(K=d;K!==null;){var m=K;switch(m.tag){case 0:case 11:case 15:Gi(8,m,a)}var p=m.child;if(p!==null)p.return=m,K=p;else for(;K!==null;){m=K;var v=m.sibling,C=m.return;if(Zp(m),m===d){K=null;break}if(v!==null){v.return=C,K=v;break}K=C}}}var w=a.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var f=y.sibling;y.sibling=null,y=f}while(y!==null)}}K=a}}if(a.subtreeFlags&2064&&u!==null)u.return=a,K=u;else e:for(;K!==null;){if(a=K,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Gi(9,a,a.return)}var c=a.sibling;if(c!==null){c.return=a.return,K=c;break e}K=a.return}}var l=e.current;for(K=l;K!==null;){u=K;var h=u.child;if(u.subtreeFlags&2064&&h!==null)h.return=u,K=h;else e:for(u=l;K!==null;){if(n=K,n.flags&2048)try{switch(n.tag){case 0:case 11:case 15:ho(9,n)}}catch(S){_e(n,n.return,S)}if(n===u){K=null;break e}var _=n.sibling;if(_!==null){_.return=n.return,K=_;break e}K=n.return}}if(te=s,pr(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(ro,e)}catch{}i=!0}return i}finally{oe=r,lt.transition=t}}return!1}function Mh(e,t,r){t=di(r,t),t=Vp(e,t,1),e=nr(e,t,1),t=Be(),e!==null&&(ys(e,1,t),Ke(e,t))}function _e(e,t,r){if(e.tag===3)Mh(e,e,r);else for(;t!==null;){if(t.tag===3){Mh(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(or===null||!or.has(i))){e=di(r,e),e=zp(t,e,1),t=nr(t,e,1),e=Be(),t!==null&&(ys(t,1,e),Ke(t,e));break}}t=t.return}}function og(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&r,Ee===e&&(Ie&r)===r&&(Ce===4||Ce===3&&(Ie&130023424)===Ie&&500>ve()-Sc?Rr(e,0):vc|=r),Ke(e,t)}function l_(e,t){t===0&&(e.mode&1?(t=Ds,Ds<<=1,!(Ds&130023424)&&(Ds=4194304)):t=1);var r=Be();e=Mt(e,t),e!==null&&(ys(e,t,r),Ke(e,r))}function ag(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),l_(e,r)}function lg(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(W(314))}i!==null&&i.delete(t),l_(e,r)}var c_;c_=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)We=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return We=!1,G4(e,t,r);We=!!(e.flags&131072)}else We=!1,he&&t.flags&1048576&&dp(t,Nn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;vn(e,t),e=t.pendingProps;var s=ci(t,Oe.current);oi(t,r),s=fc(null,t,i,e,s,r);var a=dc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,je(i)?(a=!0,Bn(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ac(t),s.updater=co,t.stateNode=s,s._reactInternals=t,pl(t,i,e,r),t=ml(null,t,i,!0,a,r)):(t.tag=0,he&&a&&ec(t),Fe(null,t,s,r),t=t.child),t;case 16:i=t.elementType;e:{switch(vn(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=hg(i),e=ft(i,e),s){case 0:t=gl(null,t,i,e,r);break e;case 1:t=Rh(null,t,i,e,r);break e;case 11:t=xh(null,t,i,e,r);break e;case 14:t=Eh(null,t,i,ft(i.type,e),r);break e}throw Error(W(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ft(i,s),gl(e,t,i,s,r);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ft(i,s),Rh(e,t,i,s,r);case 3:e:{if(Kp(t),e===null)throw Error(W(387));i=t.pendingProps,a=t.memoizedState,s=a.element,Sp(e,t),zn(t,i,null,r);var u=t.memoizedState;if(i=u.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=di(Error(W(423)),t),t=bh(e,t,i,r,s);break e}else if(i!==s){s=di(Error(W(424)),t),t=bh(e,t,i,r,s);break e}else for(Ge=sr(t.stateNode.containerInfo.firstChild),Ye=t,he=!0,pt=null,r=mp(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hi(),i===s){t=Ft(e,t,r);break e}Fe(e,t,i,r)}t=t.child}return t;case 5:return yp(t),e===null&&ul(t),i=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,u=s.children,ol(i,s)?u=null:a!==null&&ol(i,a)&&(t.flags|=32),jp(e,t),Fe(e,t,u,r),t.child;case 6:return e===null&&ul(t),null;case 13:return Xp(e,t,r);case 4:return lc(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ui(t,null,i,r):Fe(e,t,i,r),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ft(i,s),xh(e,t,i,s,r);case 7:return Fe(e,t,t.pendingProps,r),t.child;case 8:return Fe(e,t,t.pendingProps.children,r),t.child;case 12:return Fe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,u=s.value,ae(Hn,i._currentValue),i._currentValue=u,a!==null)if(mt(a.value,u)){if(a.children===s.children&&!$e.current){t=Ft(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var n=a.dependencies;if(n!==null){u=a.child;for(var o=n.firstContext;o!==null;){if(o.context===i){if(a.tag===1){o=At(-1,r&-r),o.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o}}a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),fl(a.return,r,t),n.lanes|=r;break}o=o.next}}else if(a.tag===10)u=a.type===t.type?null:a.child;else if(a.tag===18){if(u=a.return,u===null)throw Error(W(341));u.lanes|=r,n=u.alternate,n!==null&&(n.lanes|=r),fl(u,r,t),u=a.sibling}else u=a.child;if(u!==null)u.return=a;else for(u=a;u!==null;){if(u===t){u=null;break}if(a=u.sibling,a!==null){a.return=u.return,u=a;break}u=u.return}a=u}Fe(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,oi(t,r),s=ct(s),i=i(s),t.flags|=1,Fe(e,t,i,r),t.child;case 14:return i=t.type,s=ft(i,t.pendingProps),s=ft(i.type,s),Eh(e,t,i,s,r);case 15:return Wp(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ft(i,s),vn(e,t),t.tag=1,je(i)?(e=!0,Bn(t)):e=!1,oi(t,r),Hp(t,i,s),pl(t,i,s,r),ml(null,t,i,!0,e,r);case 19:return qp(e,t,r);case 22:return $p(e,t,r)}throw Error(W(156,t.tag))};function h_(e,t){return B2(e,t)}function cg(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(e,t,r,i){return new cg(e,t,r,i)}function xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hg(e){if(typeof e=="function")return xc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zl)return 11;if(e===Wl)return 14}return 2}function lr(e,t){var r=e.alternate;return r===null?(r=ot(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Cn(e,t,r,i,s,a){var u=2;if(i=e,typeof e=="function")xc(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case $r:return br(r.children,s,a,t);case Vl:u=8,s|=8;break;case Ua:return e=ot(12,r,t,s|2),e.elementType=Ua,e.lanes=a,e;case Na:return e=ot(13,r,t,s),e.elementType=Na,e.lanes=a,e;case Ha:return e=ot(19,r,t,s),e.elementType=Ha,e.lanes=a,e;case y2:return fo(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case v2:u=10;break e;case S2:u=9;break e;case zl:u=11;break e;case Wl:u=14;break e;case Wt:u=16,i=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=ot(u,r,t,s),t.elementType=e,t.type=i,t.lanes=a,t}function br(e,t,r,i){return e=ot(7,e,i,t),e.lanes=r,e}function fo(e,t,r,i){return e=ot(22,e,i,t),e.elementType=y2,e.lanes=r,e.stateNode={isHidden:!1},e}function Yo(e,t,r){return e=ot(6,e,null,t),e.lanes=r,e}function Qo(e,t,r){return t=ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ug(e,t,r,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Do(0),this.expirationTimes=Do(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Do(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ec(e,t,r,i,s,a,u,n,o){return e=new ug(e,t,r,n,o),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ot(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(a),e}function fg(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function u_(e){if(!e)return ur;e=e._reactInternals;e:{if(Mr(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var r=e.type;if(je(r))return up(e,r,t)}return t}function f_(e,t,r,i,s,a,u,n,o){return e=Ec(r,i,!0,e,s,a,u,n,o),e.context=u_(null),r=e.current,i=Be(),s=ar(r),a=At(i,s),a.callback=t??null,nr(r,a,s),e.current.lanes=s,ys(e,s,i),Ke(e,i),e}function po(e,t,r,i){var s=t.current,a=Be(),u=ar(s);return r=u_(r),t.context===null?t.context=r:t.pendingContext=r,t=At(a,u),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=nr(s,t,u),e!==null&&(gt(e,s,u,a),_n(e,s,u)),u}function Yn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Rc(e,t){Fh(e,t),(e=e.alternate)&&Fh(e,t)}function dg(){return null}var d_=typeof reportError=="function"?reportError:function(e){console.error(e)};function bc(e){this._internalRoot=e}_o.prototype.render=bc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));po(e,t,null,null)};_o.prototype.unmount=bc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lr(function(){po(null,e,null,null)}),t[Ot]=null}};function _o(e){this._internalRoot=e}_o.prototype.unstable_scheduleHydration=function(e){if(e){var t=$2();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xt.length&&t!==0&&t<Xt[r].priority;r++);Xt.splice(r,0,e),r===0&&K2(e)}};function kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function go(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bh(){}function pg(e,t,r,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var d=Yn(u);a.call(d)}}var u=f_(t,i,e,0,null,!1,!1,"",Bh);return e._reactRootContainer=u,e[Ot]=u.current,ls(e.nodeType===8?e.parentNode:e),Lr(),u}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var n=i;i=function(){var d=Yn(o);n.call(d)}}var o=Ec(e,0,!1,null,null,!1,!1,"",Bh);return e._reactRootContainer=o,e[Ot]=o.current,ls(e.nodeType===8?e.parentNode:e),Lr(function(){po(t,o,r,i)}),o}function mo(e,t,r,i,s){var a=r._reactRootContainer;if(a){var u=a;if(typeof s=="function"){var n=s;s=function(){var o=Yn(u);n.call(o)}}po(t,u,e,s)}else u=pg(r,t,e,s,i);return Yn(u)}z2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hi(t.pendingLanes);r!==0&&(Kl(t,r|1),Ke(t,ve()),!(te&6)&&(pi=ve()+500,pr()))}break;case 13:Lr(function(){var i=Mt(e,1);if(i!==null){var s=Be();gt(i,e,1,s)}}),Rc(e,1)}};Xl=function(e){if(e.tag===13){var t=Mt(e,134217728);if(t!==null){var r=Be();gt(t,e,134217728,r)}Rc(e,134217728)}};W2=function(e){if(e.tag===13){var t=ar(e),r=Mt(e,t);if(r!==null){var i=Be();gt(r,e,t,i)}Rc(e,t)}};$2=function(){return oe};j2=function(e,t){var r=oe;try{return oe=e,t()}finally{oe=r}};Ya=function(e,t,r){switch(t){case"input":if(Wa(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var s=oo(i);if(!s)throw Error(W(90));w2(i),Wa(i,s)}}}break;case"textarea":E2(e,r);break;case"select":t=r.value,t!=null&&ri(e,!!r.multiple,t,!1)}};D2=yc;A2=Lr;var _g={usingClientEntryPoint:!1,Events:[ws,qr,oo,T2,P2,yc]},Li={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gg={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=M2(e),e===null?null:e.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||dg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zs.isDisabled&&zs.supportsFiber)try{ro=zs.inject(gg),xt=zs}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_g;Ze.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kc(t))throw Error(W(200));return fg(e,t,null,r)};Ze.createRoot=function(e,t){if(!kc(e))throw Error(W(299));var r=!1,i="",s=d_;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ec(e,1,!1,null,null,r,!1,i,s),e[Ot]=t.current,ls(e.nodeType===8?e.parentNode:e),new bc(t)};Ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=M2(t),e=e===null?null:e.stateNode,e};Ze.flushSync=function(e){return Lr(e)};Ze.hydrate=function(e,t,r){if(!go(t))throw Error(W(200));return mo(null,e,t,!0,r)};Ze.hydrateRoot=function(e,t,r){if(!kc(e))throw Error(W(405));var i=r!=null&&r.hydratedSources||null,s=!1,a="",u=d_;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=f_(t,null,e,1,r??null,s,!1,a,u),e[Ot]=t.current,ls(e),i)for(e=0;e<i.length;e++)r=i[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new _o(t)};Ze.render=function(e,t,r){if(!go(t))throw Error(W(200));return mo(null,e,t,!1,r)};Ze.unmountComponentAtNode=function(e){if(!go(e))throw Error(W(40));return e._reactRootContainer?(Lr(function(){mo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ot]=null})}),!0):!1};Ze.unstable_batchedUpdates=yc;Ze.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!go(r))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return mo(e,t,r,!1,i)};Ze.version="18.3.1-next-f1338f8080-20240426";function p_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p_)}catch(e){console.error(e)}}p_(),p2.exports=Ze;var mg=p2.exports,Uh=mg;Fa.createRoot=Uh.createRoot,Fa.hydrateRoot=Uh.hydrateRoot;function Nh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function vg(e){if(Array.isArray(e))return e}function Sg(e,t,r){return(t=bg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yg(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,s,a,u,n=[],o=!0,d=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(o=(i=a.call(r)).done)&&(n.push(i.value),n.length!==t);o=!0);}catch(m){d=!0,s=m}finally{try{if(!o&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(d)throw s}}return n}}function Cg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Vh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hh(Object(r),!0).forEach(function(i){Sg(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hh(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function wg(e,t){if(e==null)return{};var r,i,s=xg(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xg(e,t){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;r[i]=e[i]}return r}function Eg(e,t){return vg(e)||yg(e,t)||kg(e,t)||Cg()}function Rg(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bg(e){var t=Rg(e,"string");return typeof t=="symbol"?t:t+""}function kg(e,t){if(e){if(typeof e=="string")return Nh(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nh(e,t):void 0}}function Ig(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zh(Object(r),!0).forEach(function(i){Ig(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zh(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Tg(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduceRight(function(s,a){return a(s)},i)}}function zi(e){return function t(){for(var r=this,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return s.length>=e.length?e.apply(this,s):function(){for(var u=arguments.length,n=new Array(u),o=0;o<u;o++)n[o]=arguments[o];return t.apply(r,[].concat(s,n))}}}function Qn(e){return{}.toString.call(e).includes("Object")}function Pg(e){return!Object.keys(e).length}function ms(e){return typeof e=="function"}function Dg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ag(e,t){return Qn(t)||cr("changeType"),Object.keys(t).some(function(r){return!Dg(e,r)})&&cr("changeField"),t}function Lg(e){ms(e)||cr("selectorType")}function Og(e){ms(e)||Qn(e)||cr("handlerType"),Qn(e)&&Object.values(e).some(function(t){return!ms(t)})&&cr("handlersType")}function Mg(e){e||cr("initialIsRequired"),Qn(e)||cr("initialType"),Pg(e)&&cr("initialContent")}function Fg(e,t){throw new Error(e[t]||e.default)}var Bg={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},cr=zi(Fg)(Bg),Ws={changes:Ag,selector:Lg,handler:Og,initial:Mg};function Ug(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ws.initial(e),Ws.handler(t);var r={current:e},i=zi(Vg)(r,t),s=zi(Hg)(r),a=zi(Ws.changes)(e),u=zi(Ng)(r);function n(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(m){return m};return Ws.selector(d),d(r.current)}function o(d){Tg(i,s,a,u)(d)}return[n,o]}function Ng(e,t){return ms(t)?t(e.current):t}function Hg(e,t){return e.current=Wh(Wh({},e.current),t),t}function Vg(e,t,r){return ms(t)?t(e.current):Object.keys(r).forEach(function(i){var s;return(s=t[i])===null||s===void 0?void 0:s.call(t,e.current[i])}),r}var zg={create:Ug},Wg={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function $g(e){return function t(){for(var r=this,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return s.length>=e.length?e.apply(this,s):function(){for(var u=arguments.length,n=new Array(u),o=0;o<u;o++)n[o]=arguments[o];return t.apply(r,[].concat(s,n))}}}function jg(e){return{}.toString.call(e).includes("Object")}function Kg(e){return e||$h("configIsRequired"),jg(e)||$h("configType"),e.urls?(Xg(),{paths:{vs:e.urls.monacoBase}}):e}function Xg(){console.warn(__.deprecation)}function qg(e,t){throw new Error(e[t]||e.default)}var __={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},$h=$g(qg)(__),Gg={config:Kg},Yg=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return function(s){return r.reduceRight(function(a,u){return u(a)},s)}};function g_(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],g_(e[r],t[r]))}),Vh(Vh({},e),t)}var Qg={type:"cancelation",msg:"operation is manually canceled"};function Zo(e){var t=!1,r=new Promise(function(i,s){e.then(function(a){return t?s(Qg):i(a)}),e.catch(s)});return r.cancel=function(){return t=!0},r}var Zg=["monaco"],Jg=zg.create({config:Wg,isInitialized:!1,resolve:null,reject:null,monaco:null}),m_=Eg(Jg,2),Es=m_[0],vo=m_[1];function em(e){var t=Gg.config(e),r=t.monaco,i=wg(t,Zg);vo(function(s){return{config:g_(s.config,i),monaco:r}})}function tm(){var e=Es(function(t){var r=t.monaco,i=t.isInitialized,s=t.resolve;return{monaco:r,isInitialized:i,resolve:s}});if(!e.isInitialized){if(vo({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Zo(Jo);if(window.monaco&&window.monaco.editor)return v_(window.monaco),e.resolve(window.monaco),Zo(Jo);Yg(rm,sm)(nm)}return Zo(Jo)}function rm(e){return document.body.appendChild(e)}function im(e){var t=document.createElement("script");return e&&(t.src=e),t}function sm(e){var t=Es(function(i){var s=i.config,a=i.reject;return{config:s,reject:a}}),r=im("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function nm(){var e=Es(function(r){var i=r.config,s=r.resolve,a=r.reject;return{config:i,resolve:s,reject:a}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){var i=r.m||r;v_(i),e.resolve(i)},function(r){e.reject(r)})}function v_(e){Es().monaco||vo({monaco:e})}function om(){return Es(function(e){var t=e.monaco;return t})}var Jo=new Promise(function(e,t){return vo({resolve:e,reject:t})}),S_={config:em,init:tm,__getMonacoInstance:om},am={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ea=am,lm={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},cm=lm;function hm({children:e}){return er.createElement("div",{style:cm.container},e)}var um=hm,fm=um;function dm({width:e,height:t,isEditorReady:r,loading:i,_ref:s,className:a,wrapperProps:u}){return er.createElement("section",{style:{...ea.wrapper,width:e,height:t},...u},!r&&er.createElement(fm,null,i),er.createElement("div",{ref:s,style:{...ea.fullWidth,...!r&&ea.hide},className:a}))}var pm=dm,y_=Y.memo(pm);function _m(e){Y.useEffect(e,[])}var C_=_m;function gm(e,t,r=!0){let i=Y.useRef(!0);Y.useEffect(i.current||!r?()=>{i.current=!1}:e,t)}var qe=gm;function Zi(){}function ti(e,t,r,i){return mm(e,i)||vm(e,t,r,i)}function mm(e,t){return e.editor.getModel(w_(e,t))}function vm(e,t,r,i){return e.editor.createModel(t,r,i?w_(e,i):void 0)}function w_(e,t){return e.Uri.parse(t)}function Sm({original:e,modified:t,language:r,originalLanguage:i,modifiedLanguage:s,originalModelPath:a,modifiedModelPath:u,keepCurrentOriginalModel:n=!1,keepCurrentModifiedModel:o=!1,theme:d="light",loading:m="Loading...",options:p={},height:v="100%",width:C="100%",className:w,wrapperProps:y={},beforeMount:f=Zi,onMount:c=Zi}){let[l,h]=Y.useState(!1),[_,S]=Y.useState(!0),x=Y.useRef(null),R=Y.useRef(null),g=Y.useRef(null),E=Y.useRef(c),k=Y.useRef(f),A=Y.useRef(!1);C_(()=>{let F=S_.init();return F.then(N=>(R.current=N)&&S(!1)).catch(N=>N?.type!=="cancelation"&&console.error("Monaco initialization: error:",N)),()=>x.current?B():F.cancel()}),qe(()=>{if(x.current&&R.current){let F=x.current.getOriginalEditor(),N=ti(R.current,e||"",i||r||"text",a||"");N!==F.getModel()&&F.setModel(N)}},[a],l),qe(()=>{if(x.current&&R.current){let F=x.current.getModifiedEditor(),N=ti(R.current,t||"",s||r||"text",u||"");N!==F.getModel()&&F.setModel(N)}},[u],l),qe(()=>{let F=x.current.getModifiedEditor();F.getOption(R.current.editor.EditorOption.readOnly)?F.setValue(t||""):t!==F.getValue()&&(F.executeEdits("",[{range:F.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),F.pushUndoStop())},[t],l),qe(()=>{x.current?.getModel()?.original.setValue(e||"")},[e],l),qe(()=>{let{original:F,modified:N}=x.current.getModel();R.current.editor.setModelLanguage(F,i||r||"text"),R.current.editor.setModelLanguage(N,s||r||"text")},[r,i,s],l),qe(()=>{R.current?.editor.setTheme(d)},[d],l),qe(()=>{x.current?.updateOptions(p)},[p],l);let D=Y.useCallback(()=>{if(!R.current)return;k.current(R.current);let F=ti(R.current,e||"",i||r||"text",a||""),N=ti(R.current,t||"",s||r||"text",u||"");x.current?.setModel({original:F,modified:N})},[r,t,s,e,i,a,u]),O=Y.useCallback(()=>{!A.current&&g.current&&(x.current=R.current.editor.createDiffEditor(g.current,{automaticLayout:!0,...p}),D(),R.current?.editor.setTheme(d),h(!0),A.current=!0)},[p,d,D]);Y.useEffect(()=>{l&&E.current(x.current,R.current)},[l]),Y.useEffect(()=>{!_&&!l&&O()},[_,l,O]);function B(){let F=x.current?.getModel();n||F?.original?.dispose(),o||F?.modified?.dispose(),x.current?.dispose()}return er.createElement(y_,{width:C,height:v,isEditorReady:l,loading:m,_ref:g,className:w,wrapperProps:y})}var ym=Sm;Y.memo(ym);function Cm(e){let t=Y.useRef();return Y.useEffect(()=>{t.current=e},[e]),t.current}var wm=Cm,$s=new Map;function xm({defaultValue:e,defaultLanguage:t,defaultPath:r,value:i,language:s,path:a,theme:u="light",line:n,loading:o="Loading...",options:d={},overrideServices:m={},saveViewState:p=!0,keepCurrentModel:v=!1,width:C="100%",height:w="100%",className:y,wrapperProps:f={},beforeMount:c=Zi,onMount:l=Zi,onChange:h,onValidate:_=Zi}){let[S,x]=Y.useState(!1),[R,g]=Y.useState(!0),E=Y.useRef(null),k=Y.useRef(null),A=Y.useRef(null),D=Y.useRef(l),O=Y.useRef(c),B=Y.useRef(),F=Y.useRef(i),N=wm(a),z=Y.useRef(!1),b=Y.useRef(!1);C_(()=>{let L=S_.init();return L.then(U=>(E.current=U)&&g(!1)).catch(U=>U?.type!=="cancelation"&&console.error("Monaco initialization: error:",U)),()=>k.current?P():L.cancel()}),qe(()=>{let L=ti(E.current,e||i||"",t||s||"",a||r||"");L!==k.current?.getModel()&&(p&&$s.set(N,k.current?.saveViewState()),k.current?.setModel(L),p&&k.current?.restoreViewState($s.get(a)))},[a],S),qe(()=>{k.current?.updateOptions(d)},[d],S),qe(()=>{!k.current||i===void 0||(k.current.getOption(E.current.editor.EditorOption.readOnly)?k.current.setValue(i):i!==k.current.getValue()&&(b.current=!0,k.current.executeEdits("",[{range:k.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),k.current.pushUndoStop(),b.current=!1))},[i],S),qe(()=>{let L=k.current?.getModel();L&&s&&E.current?.editor.setModelLanguage(L,s)},[s],S),qe(()=>{n!==void 0&&k.current?.revealLine(n)},[n],S),qe(()=>{E.current?.editor.setTheme(u)},[u],S);let T=Y.useCallback(()=>{if(!(!A.current||!E.current)&&!z.current){O.current(E.current);let L=a||r,U=ti(E.current,i||e||"",t||s||"",L||"");k.current=E.current?.editor.create(A.current,{model:U,automaticLayout:!0,...d},m),p&&k.current.restoreViewState($s.get(L)),E.current.editor.setTheme(u),n!==void 0&&k.current.revealLine(n),x(!0),z.current=!0}},[e,t,r,i,s,a,d,m,p,u,n]);Y.useEffect(()=>{S&&D.current(k.current,E.current)},[S]),Y.useEffect(()=>{!R&&!S&&T()},[R,S,T]),F.current=i,Y.useEffect(()=>{S&&h&&(B.current?.dispose(),B.current=k.current?.onDidChangeModelContent(L=>{b.current||h(k.current.getValue(),L)}))},[S,h]),Y.useEffect(()=>{if(S){let L=E.current.editor.onDidChangeMarkers(U=>{let $=k.current.getModel()?.uri;if($&&U.find(X=>X.path===$.path)){let X=E.current.editor.getModelMarkers({resource:$});_?.(X)}});return()=>{L?.dispose()}}return()=>{}},[S,_]);function P(){B.current?.dispose(),v?p&&$s.set(a,k.current.saveViewState()):k.current.getModel()?.dispose(),k.current.dispose()}return er.createElement(y_,{width:C,height:w,isEditorReady:S,loading:o,_ref:A,className:y,wrapperProps:f})}var Em=xm,Rm=Y.memo(Em),bm=Rm;const km=({value:e,onChange:t,height:r="400px"})=>{const i=Y.useRef(null),s=u=>{i.current=u,u.languages.register({id:"ruby"}),u.languages.setLanguageConfiguration("ruby",{comments:{lineComment:"#",blockComment:["=begin","=end"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}),u.languages.setMonarchTokensProvider("ruby",{keywords:["class","module","def","end","if","elsif","else","unless","case","when","then","while","until","for","break","next","return","yield","super","self","nil","true","false","and","or","not","begin","rescue","ensure","retry","puts","print","p","require","include","extend"],operators:["=","+=","-=","*=","/=","%=","**=","==","!=","<",">","<=",">=","<=>","&&","||","!","&","|","^","~","+","-","*","/","%","**","<<",">>","=~","!~"],symbols:/[=><!~?:&|+\-*\/\^%]+/,tokenizer:{root:[[/[a-zA-Z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w$]*/,"type.identifier"],[/#.*$/,"comment"],[/".*?"/,"string"],[/'.*?'/,"string"],[/\d+/,"number"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}]]}})},a=u=>{u!==void 0&&t(u)};return G.jsxs("div",{style:{border:"1px solid #ccc",borderRadius:"4px"},children:[G.jsx("div",{style:{background:"#f5f5f5",padding:"8px 12px",borderBottom:"1px solid #ccc",fontSize:"14px",fontWeight:"bold"},children:"main.rb"}),G.jsx(bm,{height:r,language:"ruby",theme:"vs-dark",value:e,onChange:a,beforeMount:s,options:{fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0}})]})};var x_={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={4567:function(u,n,o){var d=this&&this.__decorate||function(h,_,S,x){var R,g=arguments.length,E=g<3?_:x===null?x=Object.getOwnPropertyDescriptor(_,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,_,S,x);else for(var k=h.length-1;k>=0;k--)(R=h[k])&&(E=(g<3?R(E):g>3?R(_,S,E):R(_,S))||E);return g>3&&E&&Object.defineProperty(_,S,E),E},m=this&&this.__param||function(h,_){return function(S,x){_(S,x,h)}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccessibilityManager=void 0;const p=o(9042),v=o(6114),C=o(9924),w=o(844),y=o(5596),f=o(4725),c=o(3656);let l=n.AccessibilityManager=class extends w.Disposable{constructor(h,_){super(),this._terminal=h,this._renderService=_,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new C.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new y.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,c.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let _=0;_<h;_++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=p.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(h){this._clearLiveRegion(),/\p{Control}/u.test(h)||this._charsToConsume.push(h)}_refreshRows(h,_){this._liveRegionDebouncer.refresh(h,_,this._terminal.rows)}_renderRows(h,_){const S=this._terminal.buffer,x=S.lines.length.toString();for(let R=h;R<=_;R++){const g=S.translateBufferLineToString(S.ydisp+R,!0),E=(S.ydisp+R+1).toString(),k=this._rowElements[R];k&&(g.length===0?k.innerText="":k.textContent=g,k.setAttribute("aria-posinset",E),k.setAttribute("aria-setsize",x))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,_){const S=h.target,x=this._rowElements[_===0?1:this._rowElements.length-2];if(S.getAttribute("aria-posinset")===(_===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==x)return;let R,g;if(_===0?(R=S,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(R=this._rowElements.shift(),g=S,this._rowContainer.removeChild(R)),R.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),_===0){const E=this._createAccessibilityTreeNode();this._rowElements.unshift(E),this._rowContainer.insertAdjacentElement("afterbegin",E)}else{const E=this._createAccessibilityTreeNode();this._rowElements.push(E),this._rowContainer.appendChild(E)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(_===0?-1:1),this._rowElements[_===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let _=this._rowContainer.children.length;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};n.AccessibilityManager=l=d([m(1,f.IRenderService)],l)},3614:(u,n)=>{function o(v){return v.replace(/\r?\n/g,"\r")}function d(v,C){return C?"\x1B[200~"+v+"\x1B[201~":v}function m(v,C,w,y){v=d(v=o(v),w.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(v,!0),C.value=""}function p(v,C,w){const y=w.getBoundingClientRect(),f=v.clientX-y.left-10,c=v.clientY-y.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${f}px`,C.style.top=`${c}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(n,"__esModule",{value:!0}),n.rightClickHandler=n.moveTextAreaUnderMouseCursor=n.paste=n.handlePasteEvent=n.copyHandler=n.bracketTextForPaste=n.prepareTextForTerminal=void 0,n.prepareTextForTerminal=o,n.bracketTextForPaste=d,n.copyHandler=function(v,C){v.clipboardData&&v.clipboardData.setData("text/plain",C.selectionText),v.preventDefault()},n.handlePasteEvent=function(v,C,w,y){v.stopPropagation(),v.clipboardData&&m(v.clipboardData.getData("text/plain"),C,w,y)},n.paste=m,n.moveTextAreaUnderMouseCursor=p,n.rightClickHandler=function(v,C,w,y,f){p(v,C,w),f&&y.rightClickSelect(v),C.value=y.selectionText,C.select()}},7239:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorContrastCache=void 0;const d=o(1505);n.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(m,p,v){this._css.set(m,p,v)}getCss(m,p){return this._css.get(m,p)}setColor(m,p,v){this._color.set(m,p,v)}getColor(m,p){return this._color.get(m,p)}clear(){this._color.clear(),this._css.clear()}}},3656:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.addDisposableDomListener=void 0,n.addDisposableDomListener=function(o,d,m,p){o.addEventListener(d,m,p);let v=!1;return{dispose:()=>{v||(v=!0,o.removeEventListener(d,m,p))}}}},6465:function(u,n,o){var d=this&&this.__decorate||function(f,c,l,h){var _,S=arguments.length,x=S<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(f,c,l,h);else for(var R=f.length-1;R>=0;R--)(_=f[R])&&(x=(S<3?_(x):S>3?_(c,l,x):_(c,l))||x);return S>3&&x&&Object.defineProperty(c,l,x),x},m=this&&this.__param||function(f,c){return function(l,h){c(l,h,f)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Linkifier2=void 0;const p=o(3656),v=o(8460),C=o(844),w=o(2585);let y=n.Linkifier2=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(f){super(),this._bufferService=f,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(f){return this._linkProviders.push(f),{dispose:()=>{const c=this._linkProviders.indexOf(f);c!==-1&&this._linkProviders.splice(c,1)}}}attachToDom(f,c,l){this._element=f,this._mouseService=c,this._renderService=l,this.register((0,p.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,p.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,p.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(f){if(this._lastMouseEvent=f,!this._element||!this._mouseService)return;const c=this._positionFromMouseEvent(f,this._element,this._mouseService);if(!c)return;this._isMouseOut=!1;const l=f.composedPath();for(let h=0;h<l.length;h++){const _=l[h];if(_.classList.contains("xterm"))break;if(_.classList.contains("xterm-hover"))return}this._lastBufferCell&&c.x===this._lastBufferCell.x&&c.y===this._lastBufferCell.y||(this._handleHover(c),this._lastBufferCell=c)}_handleHover(f){if(this._activeLine!==f.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(f,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,f)||(this._clearCurrentLink(),this._askForLink(f,!0))}_askForLink(f,c){var l,h;this._activeProviderReplies&&c||((l=this._activeProviderReplies)===null||l===void 0||l.forEach(S=>{S?.forEach(x=>{x.link.dispose&&x.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=f.y);let _=!1;for(const[S,x]of this._linkProviders.entries())c?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get(S)&&(_=this._checkLinkProviderResult(S,f,_)):x.provideLinks(f.y,R=>{var g,E;if(this._isMouseOut)return;const k=R?.map(A=>({link:A}));(g=this._activeProviderReplies)===null||g===void 0||g.set(S,k),_=this._checkLinkProviderResult(S,f,_),((E=this._activeProviderReplies)===null||E===void 0?void 0:E.size)===this._linkProviders.length&&this._removeIntersectingLinks(f.y,this._activeProviderReplies)})}_removeIntersectingLinks(f,c){const l=new Set;for(let h=0;h<c.size;h++){const _=c.get(h);if(_)for(let S=0;S<_.length;S++){const x=_[S],R=x.link.range.start.y<f?0:x.link.range.start.x,g=x.link.range.end.y>f?this._bufferService.cols:x.link.range.end.x;for(let E=R;E<=g;E++){if(l.has(E)){_.splice(S--,1);break}l.add(E)}}}}_checkLinkProviderResult(f,c,l){var h;if(!this._activeProviderReplies)return l;const _=this._activeProviderReplies.get(f);let S=!1;for(let x=0;x<f;x++)this._activeProviderReplies.has(x)&&!this._activeProviderReplies.get(x)||(S=!0);if(!S&&_){const x=_.find(R=>this._linkAtPosition(R.link,c));x&&(l=!0,this._handleNewLink(x))}if(this._activeProviderReplies.size===this._linkProviders.length&&!l)for(let x=0;x<this._activeProviderReplies.size;x++){const R=(h=this._activeProviderReplies.get(x))===null||h===void 0?void 0:h.find(g=>this._linkAtPosition(g.link,c));if(R){l=!0,this._handleNewLink(R);break}}return l}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(f){if(!this._element||!this._mouseService||!this._currentLink)return;const c=this._positionFromMouseEvent(f,this._element,this._mouseService);c&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,c)&&this._currentLink.link.activate(f,this._currentLink.link.text)}_clearCurrentLink(f,c){this._element&&this._currentLink&&this._lastMouseEvent&&(!f||!c||this._currentLink.link.range.start.y>=f&&this._currentLink.link.range.end.y<=c)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(f){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._linkAtPosition(f.link,c)&&(this._currentLink=f,this._currentLink.state={decorations:{underline:f.link.decorations===void 0||f.link.decorations.underline,pointerCursor:f.link.decorations===void 0||f.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,f.link,this._lastMouseEvent),f.link.decorations={},Object.defineProperties(f.link.decorations,{pointerCursor:{get:()=>{var l,h;return(h=(l=this._currentLink)===null||l===void 0?void 0:l.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:l=>{var h,_;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==l&&(this._currentLink.state.decorations.pointerCursor=l,this._currentLink.state.isHovered&&((_=this._element)===null||_===void 0||_.classList.toggle("xterm-cursor-pointer",l)))}},underline:{get:()=>{var l,h;return(h=(l=this._currentLink)===null||l===void 0?void 0:l.state)===null||h===void 0?void 0:h.decorations.underline},set:l=>{var h,_,S;!((h=this._currentLink)===null||h===void 0)&&h.state&&((S=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||S===void 0?void 0:S.decorations.underline)!==l&&(this._currentLink.state.decorations.underline=l,this._currentLink.state.isHovered&&this._fireUnderlineEvent(f.link,l))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(l=>{if(!this._currentLink)return;const h=l.start===0?0:l.start+1+this._bufferService.buffer.ydisp,_=this._bufferService.buffer.ydisp+1+l.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=_&&(this._clearCurrentLink(h,_),this._lastMouseEvent&&this._element)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(f,c,l){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(c,!0),this._currentLink.state.decorations.pointerCursor&&f.classList.add("xterm-cursor-pointer")),c.hover&&c.hover(l,c.text)}_fireUnderlineEvent(f,c){const l=f.range,h=this._bufferService.buffer.ydisp,_=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-h-1,l.end.x,l.end.y-h-1,void 0);(c?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(_)}_linkLeave(f,c,l){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(c,!1),this._currentLink.state.decorations.pointerCursor&&f.classList.remove("xterm-cursor-pointer")),c.leave&&c.leave(l,c.text)}_linkAtPosition(f,c){const l=f.range.start.y*this._bufferService.cols+f.range.start.x,h=f.range.end.y*this._bufferService.cols+f.range.end.x,_=c.y*this._bufferService.cols+c.x;return l<=_&&_<=h}_positionFromMouseEvent(f,c,l){const h=l.getCoords(f,c,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(f,c,l,h,_){return{x1:f,y1:c,x2:l,y2:h,cols:this._bufferService.cols,fg:_}}};n.Linkifier2=y=d([m(0,w.IBufferService)],y)},9042:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tooMuchOutput=n.promptLabel=void 0,n.promptLabel="Terminal input",n.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(u,n,o){var d=this&&this.__decorate||function(y,f,c,l){var h,_=arguments.length,S=_<3?f:l===null?l=Object.getOwnPropertyDescriptor(f,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(y,f,c,l);else for(var x=y.length-1;x>=0;x--)(h=y[x])&&(S=(_<3?h(S):_>3?h(f,c,S):h(f,c))||S);return _>3&&S&&Object.defineProperty(f,c,S),S},m=this&&this.__param||function(y,f){return function(c,l){f(c,l,y)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkProvider=void 0;const p=o(511),v=o(2585);let C=n.OscLinkProvider=class{constructor(y,f,c){this._bufferService=y,this._optionsService=f,this._oscLinkService=c}provideLinks(y,f){var c;const l=this._bufferService.buffer.lines.get(y-1);if(!l)return void f(void 0);const h=[],_=this._optionsService.rawOptions.linkHandler,S=new p.CellData,x=l.getTrimmedLength();let R=-1,g=-1,E=!1;for(let k=0;k<x;k++)if(g!==-1||l.hasContent(k)){if(l.loadCell(k,S),S.hasExtendedAttrs()&&S.extended.urlId){if(g===-1){g=k,R=S.extended.urlId;continue}E=S.extended.urlId!==R}else g!==-1&&(E=!0);if(E||g!==-1&&k===x-1){const A=(c=this._oscLinkService.getLinkData(R))===null||c===void 0?void 0:c.uri;if(A){const D={start:{x:g+1,y},end:{x:k+(E||k!==x-1?0:1),y}};let O=!1;if(!_?.allowNonHttpProtocols)try{const B=new URL(A);["http:","https:"].includes(B.protocol)||(O=!0)}catch{O=!0}O||h.push({text:A,range:D,activate:(B,F)=>_?_.activate(B,F,D):w(0,F),hover:(B,F)=>{var N;return(N=_?.hover)===null||N===void 0?void 0:N.call(_,B,F,D)},leave:(B,F)=>{var N;return(N=_?.leave)===null||N===void 0?void 0:N.call(_,B,F,D)}})}E=!1,S.hasExtendedAttrs()&&S.extended.urlId?(g=k,R=S.extended.urlId):(g=-1,R=-1)}}f(h)}};function w(y,f){if(confirm(`Do you want to navigate to ${f}?

WARNING: This link could potentially be dangerous`)){const c=window.open();if(c){try{c.opener=null}catch{}c.location.href=f}else console.warn("Opening link blocked as opener could not be cleared")}}n.OscLinkProvider=C=d([m(0,v.IBufferService),m(1,v.IOptionsService),m(2,v.IOscLinkService)],C)},6193:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.RenderDebouncer=void 0,n.RenderDebouncer=class{constructor(o,d){this._parentWindow=o,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,d,m){this._rowCount=m,o=o!==void 0?o:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ScreenDprMonitor=void 0;const d=o(844);class m extends d.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}n.ScreenDprMonitor=m},3236:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;const d=o(3614),m=o(3656),p=o(6465),v=o(9042),C=o(3730),w=o(1680),y=o(3107),f=o(5744),c=o(2950),l=o(1296),h=o(428),_=o(4269),S=o(5114),x=o(8934),R=o(3230),g=o(9312),E=o(4725),k=o(6731),A=o(8055),D=o(8969),O=o(8460),B=o(844),F=o(6114),N=o(8437),z=o(2584),b=o(7399),T=o(5941),P=o(9074),L=o(2585),U=o(5435),$=o(4567),X=typeof window<"u"?window.document:null;class q extends D.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(I={}){super(I),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new B.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(p.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(L.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((M,V)=>this.refresh(M,V))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(M=>this._reportWindowsOptions(M))),this.register(this._inputHandler.onColor(M=>this._handleColorEvent(M))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(M=>this._afterResize(M.cols,M.rows))),this.register((0,B.toDisposable)(()=>{var M,V;this._customKeyEventHandler=void 0,(V=(M=this.element)===null||M===void 0?void 0:M.parentNode)===null||V===void 0||V.removeChild(this.element)}))}_handleColorEvent(I){if(this._themeService)for(const M of I){let V,H="";switch(M.index){case 256:V="foreground",H="10";break;case 257:V="background",H="11";break;case 258:V="cursor",H="12";break;default:V="ansi",H="4;"+M.index}switch(M.type){case 0:const Q=A.color.toColorRGB(V==="ansi"?this._themeService.colors.ansi[M.index]:this._themeService.colors[V]);this.coreService.triggerDataEvent(`${z.C0.ESC}]${H};${(0,T.toRgbString)(Q)}${z.C1_ESCAPED.ST}`);break;case 1:if(V==="ansi")this._themeService.modifyColors(j=>j.ansi[M.index]=A.rgba.toColor(...M.color));else{const j=V;this._themeService.modifyColors(se=>se[j]=A.rgba.toColor(...M.color))}break;case 2:this._themeService.restoreColor(M.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(I){I?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance($.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(I){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(z.C0.ESC+"[I"),this.updateCursorStyle(I),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var I;return(I=this.textarea)===null||I===void 0?void 0:I.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(z.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const I=this.buffer.ybase+this.buffer.y,M=this.buffer.lines.get(I);if(!M)return;const V=Math.min(this.buffer.x,this.cols-1),H=this._renderService.dimensions.css.cell.height,Q=M.getWidth(V),j=this._renderService.dimensions.css.cell.width*Q,se=this.buffer.y*this._renderService.dimensions.css.cell.height,Re=V*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Re+"px",this.textarea.style.top=se+"px",this.textarea.style.width=j+"px",this.textarea.style.height=H+"px",this.textarea.style.lineHeight=H+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,m.addDisposableDomListener)(this.element,"copy",M=>{this.hasSelection()&&(0,d.copyHandler)(M,this._selectionService)}));const I=M=>(0,d.handlePasteEvent)(M,this.textarea,this.coreService,this.optionsService);this.register((0,m.addDisposableDomListener)(this.textarea,"paste",I)),this.register((0,m.addDisposableDomListener)(this.element,"paste",I)),F.isFirefox?this.register((0,m.addDisposableDomListener)(this.element,"mousedown",M=>{M.button===2&&(0,d.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,m.addDisposableDomListener)(this.element,"contextmenu",M=>{(0,d.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,m.addDisposableDomListener)(this.element,"auxclick",M=>{M.button===1&&(0,d.moveTextAreaUnderMouseCursor)(M,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,m.addDisposableDomListener)(this.textarea,"keyup",I=>this._keyUp(I),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keydown",I=>this._keyDown(I),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keypress",I=>this._keyPress(I),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionupdate",I=>this._compositionHelper.compositionupdate(I))),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,m.addDisposableDomListener)(this.textarea,"input",I=>this._inputEvent(I),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(I){var M;if(!I)throw new Error("Terminal requires a parent element.");I.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=I.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),I.appendChild(this.element);const V=X.createDocumentFragment();this._viewportElement=X.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),V.appendChild(this._viewportElement),this._viewportScrollArea=X.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=X.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=X.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),V.appendChild(this.screenElement),this.textarea=X.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,(M=this._document.defaultView)!==null&&M!==void 0?M:window),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,m.addDisposableDomListener)(this.textarea,"focus",H=>this._handleTextAreaFocus(H))),this.register((0,m.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(k.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(_.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(R.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(H=>this._onRender.fire(H))),this.onResize(H=>this._renderService.resize(H.cols,H.rows)),this._compositionView=X.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(V);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(H=>this.scrollLines(H.amount,H.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(H=>this.scrollLines(H.amount,H.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(H=>this._renderService.handleSelectionChanged(H.start,H.end,H.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(H=>{this.textarea.value=H,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(H=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,m.addDisposableDomListener)(this.element,"mousedown",H=>this._selectionService.handleMouseDown(H))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance($.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",H=>this._handleScreenReaderModeOptionChange(H))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(f.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",H=>{!this._overviewRulerRenderer&&H&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(f.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const I=this,M=this.element;function V(j){const se=I._mouseService.getMouseReportCoords(j,I.screenElement);if(!se)return!1;let Re,He;switch(j.overrideType||j.type){case"mousemove":He=32,j.buttons===void 0?(Re=3,j.button!==void 0&&(Re=j.button<3?j.button:3)):Re=1&j.buttons?0:4&j.buttons?1:2&j.buttons?2:3;break;case"mouseup":He=0,Re=j.button<3?j.button:3;break;case"mousedown":He=1,Re=j.button<3?j.button:3;break;case"wheel":if(I.viewport.getLinesScrolled(j)===0)return!1;He=j.deltaY<0?0:1,Re=4;break;default:return!1}return!(He===void 0||Re===void 0||Re>4)&&I.coreMouseService.triggerMouseEvent({col:se.col,row:se.row,x:se.x,y:se.y,button:Re,action:He,ctrl:j.ctrlKey,alt:j.altKey,shift:j.shiftKey})}const H={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:j=>(V(j),j.buttons||(this._document.removeEventListener("mouseup",H.mouseup),H.mousedrag&&this._document.removeEventListener("mousemove",H.mousedrag)),this.cancel(j)),wheel:j=>(V(j),this.cancel(j,!0)),mousedrag:j=>{j.buttons&&V(j)},mousemove:j=>{j.buttons||V(j)}};this.register(this.coreMouseService.onProtocolChange(j=>{j?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(j)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&j?H.mousemove||(M.addEventListener("mousemove",Q.mousemove),H.mousemove=Q.mousemove):(M.removeEventListener("mousemove",H.mousemove),H.mousemove=null),16&j?H.wheel||(M.addEventListener("wheel",Q.wheel,{passive:!1}),H.wheel=Q.wheel):(M.removeEventListener("wheel",H.wheel),H.wheel=null),2&j?H.mouseup||(M.addEventListener("mouseup",Q.mouseup),H.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",H.mouseup),M.removeEventListener("mouseup",H.mouseup),H.mouseup=null),4&j?H.mousedrag||(H.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",H.mousedrag),H.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,m.addDisposableDomListener)(M,"mousedown",j=>{if(j.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(j))return V(j),H.mouseup&&this._document.addEventListener("mouseup",H.mouseup),H.mousedrag&&this._document.addEventListener("mousemove",H.mousedrag),this.cancel(j)})),this.register((0,m.addDisposableDomListener)(M,"wheel",j=>{if(!H.wheel){if(!this.buffer.hasScrollback){const se=this.viewport.getLinesScrolled(j);if(se===0)return;const Re=z.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(j.deltaY<0?"A":"B");let He="";for(let Fr=0;Fr<Math.abs(se);Fr++)He+=Re;return this.coreService.triggerDataEvent(He,!0),this.cancel(j,!0)}return this.viewport.handleWheel(j)?this.cancel(j):void 0}},{passive:!1})),this.register((0,m.addDisposableDomListener)(M,"touchstart",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(j),this.cancel(j)},{passive:!0})),this.register((0,m.addDisposableDomListener)(M,"touchmove",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(j)?void 0:this.cancel(j)},{passive:!1}))}refresh(I,M){var V;(V=this._renderService)===null||V===void 0||V.refreshRows(I,M)}updateCursorStyle(I){var M;!((M=this._selectionService)===null||M===void 0)&&M.shouldColumnSelect(I)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(I,M,V=0){var H;V===1?(super.scrollLines(I,M,V),this.refresh(0,this.rows-1)):(H=this.viewport)===null||H===void 0||H.scrollLines(I)}paste(I){(0,d.paste)(I,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(I){this._customKeyEventHandler=I}registerLinkProvider(I){return this.linkifier2.registerLinkProvider(I)}registerCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const M=this._characterJoinerService.register(I);return this.refresh(0,this.rows-1),M}deregisterCharacterJoiner(I){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(I)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(I){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+I)}registerDecoration(I){return this._decorationService.registerDecoration(I)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(I,M,V){this._selectionService.setSelection(I,M,V)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var I;(I=this._selectionService)===null||I===void 0||I.clearSelection()}selectAll(){var I;(I=this._selectionService)===null||I===void 0||I.selectAll()}selectLines(I,M){var V;(V=this._selectionService)===null||V===void 0||V.selectLines(I,M)}_keyDown(I){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;const M=this.browser.isMac&&this.options.macOptionIsMeta&&I.altKey;if(!M&&!this._compositionHelper.keydown(I))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;M||I.key!=="Dead"&&I.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const V=(0,b.evaluateKeyboardEvent)(I,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(I),V.type===3||V.type===2){const H=this.rows-1;return this.scrollLines(V.type===2?-H:H),this.cancel(I,!0)}return V.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,I)||(V.cancel&&this.cancel(I,!0),!V.key||!!(I.key&&!I.ctrlKey&&!I.altKey&&!I.metaKey&&I.key.length===1&&I.key.charCodeAt(0)>=65&&I.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(V.key!==z.C0.ETX&&V.key!==z.C0.CR||(this.textarea.value=""),this._onKey.fire({key:V.key,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(V.key,!0),!this.optionsService.rawOptions.screenReaderMode||I.altKey||I.ctrlKey?this.cancel(I,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(I,M){const V=I.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||I.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey||I.isWindows&&M.getModifierState("AltGraph");return M.type==="keypress"?V:V&&(!M.keyCode||M.keyCode>47)}_keyUp(I){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1||(function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18}(I)||this.focus(),this.updateCursorStyle(I),this._keyPressHandled=!1)}_keyPress(I){let M;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(I)===!1)return!1;if(this.cancel(I),I.charCode)M=I.charCode;else if(I.which===null||I.which===void 0)M=I.keyCode;else{if(I.which===0||I.charCode===0)return!1;M=I.which}return!(!M||(I.altKey||I.ctrlKey||I.metaKey)&&!this._isThirdLevelShift(this.browser,I)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:I}),this._showCursor(),this.coreService.triggerDataEvent(M,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(I){if(I.data&&I.inputType==="insertText"&&(!I.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const M=I.data;return this.coreService.triggerDataEvent(M,!0),this.cancel(I),!0}return!1}resize(I,M){I!==this.cols||M!==this.rows?super.resize(I,M):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(I,M){var V,H;(V=this._charSizeService)===null||V===void 0||V.measure(),(H=this.viewport)===null||H===void 0||H.syncScrollArea(!0)}clear(){var I;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let M=1;M<this.rows;M++)this.buffer.lines.push(this.buffer.getBlankLine(N.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(I=this.viewport)===null||I===void 0||I.reset(),this.refresh(0,this.rows-1)}}reset(){var I,M;this.options.rows=this.rows,this.options.cols=this.cols;const V=this._customKeyEventHandler;this._setup(),super.reset(),(I=this._selectionService)===null||I===void 0||I.reset(),this._decorationService.reset(),(M=this.viewport)===null||M===void 0||M.reset(),this._customKeyEventHandler=V,this.refresh(0,this.rows-1)}clearTextureAtlas(){var I;(I=this._renderService)===null||I===void 0||I.clearTextureAtlas()}_reportFocus(){var I;!((I=this.element)===null||I===void 0)&&I.classList.contains("focus")?this.coreService.triggerDataEvent(z.C0.ESC+"[I"):this.coreService.triggerDataEvent(z.C0.ESC+"[O")}_reportWindowsOptions(I){if(this._renderService)switch(I){case U.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const M=this._renderService.dimensions.css.canvas.width.toFixed(0),V=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${z.C0.ESC}[4;${V};${M}t`);break;case U.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const H=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${z.C0.ESC}[6;${Q};${H}t`)}}cancel(I,M){if(this.options.cancelEvents||M)return I.preventDefault(),I.stopPropagation(),!1}}n.Terminal=q},9924:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TimeBasedDebouncer=void 0,n.TimeBasedDebouncer=class{constructor(o,d=1e3){this._renderCallback=o,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,d,m){this._rowCount=m,o=o!==void 0?o:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=p-this._lastRefreshMs,C=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,d)}}},1680:function(u,n,o){var d=this&&this.__decorate||function(c,l,h,_){var S,x=arguments.length,R=x<3?l:_===null?_=Object.getOwnPropertyDescriptor(l,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(c,l,h,_);else for(var g=c.length-1;g>=0;g--)(S=c[g])&&(R=(x<3?S(R):x>3?S(l,h,R):S(l,h))||R);return x>3&&R&&Object.defineProperty(l,h,R),R},m=this&&this.__param||function(c,l){return function(h,_){l(h,_,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Viewport=void 0;const p=o(3656),v=o(4725),C=o(8460),w=o(844),y=o(2585);let f=n.Viewport=class extends w.Disposable{constructor(c,l,h,_,S,x,R,g){super(),this._viewportElement=c,this._scrollArea=l,this._bufferService=h,this._optionsService=_,this._charSizeService=S,this._renderService=x,this._coreBrowserService=R,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(c){this._viewportElement.style.backgroundColor=c.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(c){if(c)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const c=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==c&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=c),this._refreshAnimationFrame=null}syncScrollArea(c=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(c);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(c)}_handleScroll(c){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const c=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(c*(this._smoothScrollState.target-this._smoothScrollState.origin)),c<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(c,l){const h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&h<this._lastRecordedBufferHeight)||(c.cancelable&&c.preventDefault(),!1)}handleWheel(c){const l=this._getPixelsScrolled(c);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(c,l))}scrollLines(c){if(c!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=c*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!1})}_getPixelsScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let l=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(c,l){var h;let _,S="";const x=[],R=l??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let E=c;E<R;E++){const k=g.get(E);if(!k)continue;const A=(h=g.get(E+1))===null||h===void 0?void 0:h.isWrapped;if(S+=k.translateToString(!A),!A||E===g.length-1){const D=document.createElement("div");D.textContent=S,x.push(D),S.length>0&&(_=D),S=""}}return{bufferElements:x,cursorElement:_}}getLinesScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let l=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(c,l){const h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&l.altKey||h==="ctrl"&&l.ctrlKey||h==="shift"&&l.shiftKey?c*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:c*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(c){this._lastTouchY=c.touches[0].pageY}handleTouchMove(c){const l=this._lastTouchY-c.touches[0].pageY;return this._lastTouchY=c.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(c,l))}};n.Viewport=f=d([m(2,y.IBufferService),m(3,y.IOptionsService),m(4,v.ICharSizeService),m(5,v.IRenderService),m(6,v.ICoreBrowserService),m(7,v.IThemeService)],f)},3107:function(u,n,o){var d=this&&this.__decorate||function(f,c,l,h){var _,S=arguments.length,x=S<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(f,c,l,h);else for(var R=f.length-1;R>=0;R--)(_=f[R])&&(x=(S<3?_(x):S>3?_(c,l,x):_(c,l))||x);return S>3&&x&&Object.defineProperty(c,l,x),x},m=this&&this.__param||function(f,c){return function(l,h){c(l,h,f)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferDecorationRenderer=void 0;const p=o(3656),v=o(4725),C=o(844),w=o(2585);let y=n.BufferDecorationRenderer=class extends C.Disposable{constructor(f,c,l,h){super(),this._screenElement=f,this._bufferService=c,this._decorationService=l,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,p.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(_=>this._removeDecoration(_))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const f of this._decorationService.decorations)this._renderDecoration(f);this._dimensionsChanged=!1}_renderDecoration(f){this._refreshStyle(f),this._dimensionsChanged&&this._refreshXPosition(f)}_createElement(f){var c,l;const h=document.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((c=f?.options)===null||c===void 0?void 0:c.layer)==="top"),h.style.width=`${Math.round((f.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(f.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(f.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const _=(l=f.options.x)!==null&&l!==void 0?l:0;return _&&_>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(f,h),h}_refreshStyle(f){const c=f.marker.line-this._bufferService.buffers.active.ydisp;if(c<0||c>=this._bufferService.rows)f.element&&(f.element.style.display="none",f.onRenderEmitter.fire(f.element));else{let l=this._decorationElements.get(f);l||(l=this._createElement(f),f.element=l,this._decorationElements.set(f,l),this._container.appendChild(l),f.onDispose(()=>{this._decorationElements.delete(f),l.remove()})),l.style.top=c*this._renderService.dimensions.css.cell.height+"px",l.style.display=this._altBufferIsActive?"none":"block",f.onRenderEmitter.fire(l)}}_refreshXPosition(f,c=f.element){var l;if(!c)return;const h=(l=f.options.x)!==null&&l!==void 0?l:0;(f.options.anchor||"left")==="right"?c.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":c.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(f){var c;(c=this._decorationElements.get(f))===null||c===void 0||c.remove(),this._decorationElements.delete(f),f.dispose()}};n.BufferDecorationRenderer=y=d([m(1,w.IBufferService),m(2,w.IDecorationService),m(3,v.IRenderService)],y)},5871:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorZoneStore=void 0,n.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const d of this._zones)if(d.color===o.options.overviewRulerOptions.color&&d.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,o.marker.line))return;if(this._lineAdjacentToZone(d,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(d,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,d){return d>=o.startBufferLine&&d<=o.endBufferLine}_lineAdjacentToZone(o,d,m){return d>=o.startBufferLine-this._linePadding[m||"full"]&&d<=o.endBufferLine+this._linePadding[m||"full"]}_addLineToZone(o,d){o.startBufferLine=Math.min(o.startBufferLine,d),o.endBufferLine=Math.max(o.endBufferLine,d)}}},5744:function(u,n,o){var d=this&&this.__decorate||function(_,S,x,R){var g,E=arguments.length,k=E<3?S:R===null?R=Object.getOwnPropertyDescriptor(S,x):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(_,S,x,R);else for(var A=_.length-1;A>=0;A--)(g=_[A])&&(k=(E<3?g(k):E>3?g(S,x,k):g(S,x))||k);return E>3&&k&&Object.defineProperty(S,x,k),k},m=this&&this.__param||function(_,S){return function(x,R){S(x,R,_)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OverviewRulerRenderer=void 0;const p=o(5871),v=o(3656),C=o(4725),w=o(844),y=o(2585),f={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0};let h=n.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(_,S,x,R,g,E,k){var A;super(),this._viewportElement=_,this._screenElement=S,this._bufferService=x,this._decorationService=R,this._renderService=g,this._optionsService=E,this._coreBrowseService=k,this._colorZoneStore=new p.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(A=this._viewportElement.parentElement)===null||A===void 0||A.insertBefore(this._canvas,this._viewportElement);const D=this._canvas.getContext("2d");if(!D)throw new Error("Ctx cannot be null");this._ctx=D,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var O;(O=this._canvas)===null||O===void 0||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const _=Math.floor(this._canvas.width/3),S=Math.ceil(this._canvas.width/3);c.full=this._canvas.width,c.left=_,c.center=S,c.right=_,this._refreshDrawHeightConstants(),l.full=0,l.left=0,l.center=c.left,l.right=c.left+c.center}_refreshDrawHeightConstants(){f.full=Math.round(2*this._coreBrowseService.dpr);const _=this._canvas.height/this._bufferService.buffer.lines.length,S=Math.round(Math.max(Math.min(_,12),6)*this._coreBrowseService.dpr);f.left=S,f.center=S,f.right=S}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const S of this._decorationService.decorations)this._colorZoneStore.addDecoration(S);this._ctx.lineWidth=1;const _=this._colorZoneStore.zones;for(const S of _)S.position!=="full"&&this._renderColorZone(S);for(const S of _)S.position==="full"&&this._renderColorZone(S);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(_){this._ctx.fillStyle=_.color,this._ctx.fillRect(l[_.position||"full"],Math.round((this._canvas.height-1)*(_.startBufferLine/this._bufferService.buffers.active.lines.length)-f[_.position||"full"]/2),c[_.position||"full"],Math.round((this._canvas.height-1)*((_.endBufferLine-_.startBufferLine)/this._bufferService.buffers.active.lines.length)+f[_.position||"full"]))}_queueRefresh(_,S){this._shouldUpdateDimensions=_||this._shouldUpdateDimensions,this._shouldUpdateAnchor=S||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};n.OverviewRulerRenderer=h=d([m(2,y.IBufferService),m(3,y.IDecorationService),m(4,C.IRenderService),m(5,y.IOptionsService),m(6,C.ICoreBrowserService)],h)},2950:function(u,n,o){var d=this&&this.__decorate||function(y,f,c,l){var h,_=arguments.length,S=_<3?f:l===null?l=Object.getOwnPropertyDescriptor(f,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(y,f,c,l);else for(var x=y.length-1;x>=0;x--)(h=y[x])&&(S=(_<3?h(S):_>3?h(f,c,S):h(f,c))||S);return _>3&&S&&Object.defineProperty(f,c,S),S},m=this&&this.__param||function(y,f){return function(c,l){f(c,l,y)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CompositionHelper=void 0;const p=o(4725),v=o(2585),C=o(2584);let w=n.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,f,c,l,h,_){this._textarea=y,this._compositionView=f,this._bufferService=c,this._optionsService=l,this._coreService=h,this._renderService=_,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const f={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let c;this._isSendingComposition=!1,f.start+=this._dataAlreadySent.length,c=this._isComposing?this._textarea.value.substring(f.start,f.end):this._textarea.value.substring(f.start),c.length>0&&this._coreService.triggerDataEvent(c,!0)}},0)}else{this._isSendingComposition=!1;const f=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(f,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const f=this._textarea.value,c=f.replace(y,"");this._dataAlreadySent=c,f.length>y.length?this._coreService.triggerDataEvent(c,!0):f.length<y.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):f.length===y.length&&f!==y&&this._coreService.triggerDataEvent(f,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const f=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),c=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=f*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=c+"px",this._compositionView.style.lineHeight=c+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const _=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(_.width,1)+"px",this._textarea.style.height=Math.max(_.height,1)+"px",this._textarea.style.lineHeight=_.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};n.CompositionHelper=w=d([m(2,v.IBufferService),m(3,v.IOptionsService),m(4,v.ICoreService),m(5,p.IRenderService)],w)},9806:(u,n)=>{function o(d,m,p){const v=p.getBoundingClientRect(),C=d.getComputedStyle(p),w=parseInt(C.getPropertyValue("padding-left")),y=parseInt(C.getPropertyValue("padding-top"));return[m.clientX-v.left-w,m.clientY-v.top-y]}Object.defineProperty(n,"__esModule",{value:!0}),n.getCoords=n.getCoordsRelativeToElement=void 0,n.getCoordsRelativeToElement=o,n.getCoords=function(d,m,p,v,C,w,y,f,c){if(!w)return;const l=o(d,m,p);return l?(l[0]=Math.ceil((l[0]+(c?y/2:0))/y),l[1]=Math.ceil(l[1]/f),l[0]=Math.min(Math.max(l[0],1),v+(c?1:0)),l[1]=Math.min(Math.max(l[1],1),C),l):void 0}},9504:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.moveToCellSequence=void 0;const d=o(2584);function m(f,c,l,h){const _=f-p(f,l),S=c-p(c,l),x=Math.abs(_-S)-function(R,g,E){let k=0;const A=R-p(R,E),D=g-p(g,E);for(let O=0;O<Math.abs(A-D);O++){const B=v(R,g)==="A"?-1:1,F=E.buffer.lines.get(A+B*O);F?.isWrapped&&k++}return k}(f,c,l);return y(x,w(v(f,c),h))}function p(f,c){let l=0,h=c.buffer.lines.get(f),_=h?.isWrapped;for(;_&&f>=0&&f<c.rows;)l++,h=c.buffer.lines.get(--f),_=h?.isWrapped;return l}function v(f,c){return f>c?"A":"B"}function C(f,c,l,h,_,S){let x=f,R=c,g="";for(;x!==l||R!==h;)x+=_?1:-1,_&&x>S.cols-1?(g+=S.buffer.translateBufferLineToString(R,!1,f,x),x=0,f=0,R++):!_&&x<0&&(g+=S.buffer.translateBufferLineToString(R,!1,0,f+1),x=S.cols-1,f=x,R--);return g+S.buffer.translateBufferLineToString(R,!1,f,x)}function w(f,c){const l=c?"O":"[";return d.C0.ESC+l+f}function y(f,c){f=Math.floor(f);let l="";for(let h=0;h<f;h++)l+=c;return l}n.moveToCellSequence=function(f,c,l,h){const _=l.buffer.x,S=l.buffer.y;if(!l.buffer.hasScrollback)return function(g,E,k,A,D,O){return m(E,A,D,O).length===0?"":y(C(g,E,g,E-p(E,D),!1,D).length,w("D",O))}(_,S,0,c,l,h)+m(S,c,l,h)+function(g,E,k,A,D,O){let B;B=m(E,A,D,O).length>0?A-p(A,D):E;const F=A,N=function(z,b,T,P,L,U){let $;return $=m(T,P,L,U).length>0?P-p(P,L):b,z<T&&$<=P||z>=T&&$<P?"C":"D"}(g,E,k,A,D,O);return y(C(g,B,k,F,N==="C",D).length,w(N,O))}(_,S,f,c,l,h);let x;if(S===c)return x=_>f?"D":"C",y(Math.abs(_-f),w(x,h));x=S>c?"D":"C";const R=Math.abs(S-c);return y(function(g,E){return E.cols-g}(S>c?f:_,l)+(R-1)*l.cols+1+((S>c?_:f)-1),w(x,h))}},1296:function(u,n,o){var d=this&&this.__decorate||function(D,O,B,F){var N,z=arguments.length,b=z<3?O:F===null?F=Object.getOwnPropertyDescriptor(O,B):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(D,O,B,F);else for(var T=D.length-1;T>=0;T--)(N=D[T])&&(b=(z<3?N(b):z>3?N(O,B,b):N(O,B))||b);return z>3&&b&&Object.defineProperty(O,B,b),b},m=this&&this.__param||function(D,O){return function(B,F){O(B,F,D)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRenderer=void 0;const p=o(3787),v=o(2550),C=o(2223),w=o(6171),y=o(4725),f=o(8055),c=o(8460),l=o(844),h=o(2585),_="xterm-dom-renderer-owner-",S="xterm-rows",x="xterm-fg-",R="xterm-bg-",g="xterm-focus",E="xterm-selection";let k=1,A=n.DomRenderer=class extends l.Disposable{constructor(D,O,B,F,N,z,b,T,P,L){super(),this._element=D,this._screenElement=O,this._viewportElement=B,this._linkifier2=F,this._charSizeService=z,this._optionsService=b,this._bufferService=T,this._coreBrowserService=P,this._themeService=L,this._terminalClass=k++,this._rowElements=[],this.onRequestRedraw=this.register(new c.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(E),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(U=>this._injectCss(U))),this._injectCss(this._themeService.colors),this._rowFactory=N.createInstance(p.DomRendererRowFactory,document),this._element.classList.add(_+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(U=>this._handleLinkHover(U))),this.register(this._linkifier2.onHideLinkUnderline(U=>this._handleLinkLeave(U))),this.register((0,l.toDisposable)(()=>{this._element.classList.remove(_+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const B of this._rowElements)B.style.width=`${this.dimensions.css.canvas.width}px`,B.style.height=`${this.dimensions.css.cell.height}px`,B.style.lineHeight=`${this.dimensions.css.cell.height}px`,B.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const O=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=O,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let O=`${this._terminalSelector} .${S} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;O+=`${this._terminalSelector} .${S} .xterm-dim { color: ${f.color.multiplyOpacity(D.foreground,.5).css};}`,O+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,O+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",O+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,O+=`${this._terminalSelector} .${S}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,O+=`${this._terminalSelector} .${E} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${E} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${E} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[B,F]of D.ansi.entries())O+=`${this._terminalSelector} .${x}${B} { color: ${F.css}; }${this._terminalSelector} .${x}${B}.xterm-dim { color: ${f.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${R}${B} { background-color: ${F.css}; }`;O+=`${this._terminalSelector} .${x}${C.INVERTED_DEFAULT_COLOR} { color: ${f.color.opaque(D.background).css}; }${this._terminalSelector} .${x}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${f.color.multiplyOpacity(f.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${R}${C.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=O}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,O){for(let B=this._rowElements.length;B<=O;B++){const F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>O;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,O){this._refreshRowElements(D,O),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,O,B){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,O,B),this.renderRows(0,this._bufferService.rows-1),!D||!O)return;const F=D[1]-this._bufferService.buffer.ydisp,N=O[1]-this._bufferService.buffer.ydisp,z=Math.max(F,0),b=Math.min(N,this._bufferService.rows-1);if(z>=this._bufferService.rows||b<0)return;const T=document.createDocumentFragment();if(B){const P=D[0]>O[0];T.appendChild(this._createSelectionElement(z,P?O[0]:D[0],P?D[0]:O[0],b-z+1))}else{const P=F===z?D[0]:0,L=z===N?O[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(z,P,L));const U=b-z-1;if(T.appendChild(this._createSelectionElement(z+1,0,this._bufferService.cols,U)),z!==b){const $=N===b?O[0]:this._bufferService.cols;T.appendChild(this._createSelectionElement(b,0,$))}}this._selectionContainer.appendChild(T)}_createSelectionElement(D,O,B,F=1){const N=document.createElement("div");return N.style.height=F*this.dimensions.css.cell.height+"px",N.style.top=D*this.dimensions.css.cell.height+"px",N.style.left=O*this.dimensions.css.cell.width+"px",N.style.width=this.dimensions.css.cell.width*(B-O)+"px",N}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,O){const B=this._bufferService.buffer,F=B.ybase+B.y,N=Math.min(B.x,this._bufferService.cols-1),z=this._optionsService.rawOptions.cursorBlink,b=this._optionsService.rawOptions.cursorStyle,T=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=D;P<=O;P++){const L=P+B.ydisp,U=this._rowElements[P],$=B.lines.get(L);if(!U||!$)break;U.replaceChildren(...this._rowFactory.createRow($,L,L===F,b,T,N,z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${_}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,O,B,F,N,z){B<0&&(D=0),F<0&&(O=0);const b=this._bufferService.rows-1;B=Math.max(Math.min(B,b),0),F=Math.max(Math.min(F,b),0),N=Math.min(N,this._bufferService.cols);const T=this._bufferService.buffer,P=T.ybase+T.y,L=Math.min(T.x,N-1),U=this._optionsService.rawOptions.cursorBlink,$=this._optionsService.rawOptions.cursorStyle,X=this._optionsService.rawOptions.cursorInactiveStyle;for(let q=B;q<=F;++q){const ie=q+T.ydisp,I=this._rowElements[q],M=T.lines.get(ie);if(!I||!M)break;I.replaceChildren(...this._rowFactory.createRow(M,ie,ie===P,$,X,L,U,this.dimensions.css.cell.width,this._widthCache,z?q===B?D:0:-1,z?(q===F?O:N)-1:-1))}}};n.DomRenderer=A=d([m(4,h.IInstantiationService),m(5,y.ICharSizeService),m(6,h.IOptionsService),m(7,h.IBufferService),m(8,y.ICoreBrowserService),m(9,y.IThemeService)],A)},3787:function(u,n,o){var d=this&&this.__decorate||function(x,R,g,E){var k,A=arguments.length,D=A<3?R:E===null?E=Object.getOwnPropertyDescriptor(R,g):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(x,R,g,E);else for(var O=x.length-1;O>=0;O--)(k=x[O])&&(D=(A<3?k(D):A>3?k(R,g,D):k(R,g))||D);return A>3&&D&&Object.defineProperty(R,g,D),D},m=this&&this.__param||function(x,R){return function(g,E){R(g,E,x)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRendererRowFactory=void 0;const p=o(2223),v=o(643),C=o(511),w=o(2585),y=o(8055),f=o(4725),c=o(4269),l=o(6171),h=o(3734);let _=n.DomRendererRowFactory=class{constructor(x,R,g,E,k,A,D){this._document=x,this._characterJoinerService=R,this._optionsService=g,this._coreBrowserService=E,this._coreService=k,this._decorationService=A,this._themeService=D,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,R,g){this._selectionStart=x,this._selectionEnd=R,this._columnSelectMode=g}createRow(x,R,g,E,k,A,D,O,B,F,N){const z=[],b=this._characterJoinerService.getJoinedCharacters(R),T=this._themeService.colors;let P,L=x.getNoBgTrimmedLength();g&&L<A+1&&(L=A+1);let U=0,$="",X=0,q=0,ie=0,I=!1,M=0,V=!1,H=0;const Q=[],j=F!==-1&&N!==-1;for(let se=0;se<L;se++){x.loadCell(se,this._workCell);let Re=this._workCell.getWidth();if(Re===0)continue;let He=!1,Fr=se,Z=this._workCell;if(b.length>0&&se===b[0][0]){He=!0;const ue=b.shift();Z=new c.JoinedCellData(this._workCell,x.translateToString(!0,ue[0],ue[1]),ue[1]-ue[0]),Fr=ue[1]-1,Re=Z.getWidth()}const wi=this._isCellInSelection(se,R),Co=g&&se===A,wo=j&&se>=F&&se<=N;let xo=!1;this._decorationService.forEachDecorationAtCell(se,R,void 0,ue=>{xo=!0});let Rs=Z.getChars()||v.WHITESPACE_CELL_CHAR;if(Rs===" "&&(Z.isUnderline()||Z.isOverline())&&(Rs=""),H=Re*O-B.get(Rs,Z.isBold(),Z.isItalic()),P){if(U&&(wi&&V||!wi&&!V&&Z.bg===X)&&(wi&&V&&T.selectionForeground||Z.fg===q)&&Z.extended.ext===ie&&wo===I&&H===M&&!Co&&!He&&!xo){$+=Rs,U++;continue}U&&(P.textContent=$),P=this._document.createElement("span"),U=0,$=""}else P=this._document.createElement("span");if(X=Z.bg,q=Z.fg,ie=Z.extended.ext,I=wo,M=H,V=wi,He&&A>=se&&A<=Fr&&(A=se),!this._coreService.isCursorHidden&&Co){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)D&&Q.push("xterm-cursor-blink"),Q.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(k)switch(k){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline")}}if(Z.isBold()&&Q.push("xterm-bold"),Z.isItalic()&&Q.push("xterm-italic"),Z.isDim()&&Q.push("xterm-dim"),$=Z.isInvisible()?v.WHITESPACE_CELL_CHAR:Z.getChars()||v.WHITESPACE_CELL_CHAR,Z.isUnderline()&&(Q.push(`xterm-underline-${Z.extended.underlineStyle}`),$===" "&&($=""),!Z.isUnderlineColorDefault()))if(Z.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(Z.getUnderlineColor()).join(",")})`;else{let ue=Z.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Z.isBold()&&ue<8&&(ue+=8),P.style.textDecorationColor=T.ansi[ue].css}Z.isOverline()&&(Q.push("xterm-overline"),$===" "&&($="")),Z.isStrikethrough()&&Q.push("xterm-strikethrough"),wo&&(P.style.textDecoration="underline");let et=Z.getFgColor(),xi=Z.getFgColorMode(),vt=Z.getBgColor(),Ei=Z.getBgColorMode();const Eo=!!Z.isInverse();if(Eo){const ue=et;et=vt,vt=ue;const $_=xi;xi=Ei,Ei=$_}let Nt,Ro,Ht,Ri=!1;switch(this._decorationService.forEachDecorationAtCell(se,R,void 0,ue=>{ue.options.layer!=="top"&&Ri||(ue.backgroundColorRGB&&(Ei=50331648,vt=ue.backgroundColorRGB.rgba>>8&16777215,Nt=ue.backgroundColorRGB),ue.foregroundColorRGB&&(xi=50331648,et=ue.foregroundColorRGB.rgba>>8&16777215,Ro=ue.foregroundColorRGB),Ri=ue.options.layer==="top")}),!Ri&&wi&&(Nt=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,vt=Nt.rgba>>8&16777215,Ei=50331648,Ri=!0,T.selectionForeground&&(xi=50331648,et=T.selectionForeground.rgba>>8&16777215,Ro=T.selectionForeground)),Ri&&Q.push("xterm-decoration-top"),Ei){case 16777216:case 33554432:Ht=T.ansi[vt],Q.push(`xterm-bg-${vt}`);break;case 50331648:Ht=y.rgba.toColor(vt>>16,vt>>8&255,255&vt),this._addStyle(P,`background-color:#${S((vt>>>0).toString(16),"0",6)}`);break;default:Eo?(Ht=T.foreground,Q.push(`xterm-bg-${p.INVERTED_DEFAULT_COLOR}`)):Ht=T.background}switch(Nt||Z.isDim()&&(Nt=y.color.multiplyOpacity(Ht,.5)),xi){case 16777216:case 33554432:Z.isBold()&&et<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(et+=8),this._applyMinimumContrast(P,Ht,T.ansi[et],Z,Nt,void 0)||Q.push(`xterm-fg-${et}`);break;case 50331648:const ue=y.rgba.toColor(et>>16&255,et>>8&255,255&et);this._applyMinimumContrast(P,Ht,ue,Z,Nt,Ro)||this._addStyle(P,`color:#${S(et.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,Ht,T.foreground,Z,Nt,void 0)||Eo&&Q.push(`xterm-fg-${p.INVERTED_DEFAULT_COLOR}`)}Q.length&&(P.className=Q.join(" "),Q.length=0),Co||He||xo?P.textContent=$:U++,H!==this.defaultSpacing&&(P.style.letterSpacing=`${H}px`),z.push(P),se=Fr}return P&&U&&(P.textContent=$),z}_applyMinimumContrast(x,R,g,E,k,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.excludeFromContrastRatioDemands)(E.getCode()))return!1;const D=this._getContrastCache(E);let O;if(k||A||(O=D.getColor(R.rgba,g.rgba)),O===void 0){const B=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);O=y.color.ensureContrastRatio(k||R,A||g,B),D.setColor((k||R).rgba,(A||g).rgba,O??null)}return!!O&&(this._addStyle(x,`color:${O.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,R){x.setAttribute("style",`${x.getAttribute("style")||""}${R};`)}_isCellInSelection(x,R){const g=this._selectionStart,E=this._selectionEnd;return!(!g||!E)&&(this._columnSelectMode?g[0]<=E[0]?x>=g[0]&&R>=g[1]&&x<E[0]&&R<=E[1]:x<g[0]&&R>=g[1]&&x>=E[0]&&R<=E[1]:R>g[1]&&R<E[1]||g[1]===E[1]&&R===g[1]&&x>=g[0]&&x<E[0]||g[1]<E[1]&&R===E[1]&&x<E[0]||g[1]<E[1]&&R===g[1]&&x>=g[0])}};function S(x,R,g){for(;x.length<g;)x=R+x;return x}n.DomRendererRowFactory=_=d([m(1,f.ICharacterJoinerService),m(2,w.IOptionsService),m(3,f.ICoreBrowserService),m(4,w.ICoreService),m(5,w.IDecorationService),m(6,f.IThemeService)],_)},2550:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WidthCache=void 0,n.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=o.createElement("span"),m=o.createElement("span");m.style.fontWeight="bold";const p=o.createElement("span");p.style.fontStyle="italic";const v=o.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[d,m,p,v],this._container.appendChild(d),this._container.appendChild(m),this._container.appendChild(p),this._container.appendChild(v),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,d,m,p){o===this._font&&d===this._fontSize&&m===this._weight&&p===this._weightBold||(this._font=o,this._fontSize=d,this._weight=m,this._weightBold=p,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${m}`,this._measureElements[1].style.fontWeight=`${p}`,this._measureElements[2].style.fontWeight=`${m}`,this._measureElements[3].style.fontWeight=`${p}`,this.clear())}get(o,d,m){let p=0;if(!d&&!m&&o.length===1&&(p=o.charCodeAt(0))<256)return this._flat[p]!==-9999?this._flat[p]:this._flat[p]=this._measure(o,0);let v=o;d&&(v+="B"),m&&(v+="I");let C=this._holey.get(v);if(C===void 0){let w=0;d&&(w|=1),m&&(w|=2),C=this._measure(o,w),this._holey.set(v,C)}return C}_measure(o,d){const m=this._measureElements[d];return m.textContent=o.repeat(32),m.offsetWidth/32}}},2223:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;const d=o(6114);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(u,n)=>{function o(d){return 57508<=d&&d<=57558}Object.defineProperty(n,"__esModule",{value:!0}),n.createRenderDimensions=n.excludeFromContrastRatioDemands=n.isRestrictedPowerlineGlyph=n.isPowerlineGlyph=n.throwIfFalsy=void 0,n.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},n.isPowerlineGlyph=o,n.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},n.excludeFromContrastRatioDemands=function(d){return o(d)||function(m){return 9472<=m&&m<=9631}(d)},n.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionModel=void 0,n.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,d=this.selectionEnd;return!(!o||!d)&&(o[1]>d[1]||o[1]===d[1]&&o[0]>d[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(u,n,o){var d=this&&this.__decorate||function(f,c,l,h){var _,S=arguments.length,x=S<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(f,c,l,h);else for(var R=f.length-1;R>=0;R--)(_=f[R])&&(x=(S<3?_(x):S>3?_(c,l,x):_(c,l))||x);return S>3&&x&&Object.defineProperty(c,l,x),x},m=this&&this.__param||function(f,c){return function(l,h){c(l,h,f)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharSizeService=void 0;const p=o(2585),v=o(8460),C=o(844);let w=n.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(f,c,l){super(),this._optionsService=l,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new y(f,c,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const f=this._measureStrategy.measure();f.width===this.width&&f.height===this.height||(this.width=f.width,this.height=f.height,this._onCharSizeChange.fire())}};n.CharSizeService=w=d([m(2,p.IOptionsService)],w);class y{constructor(c,l,h){this._document=c,this._parentElement=l,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const c={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return c.width!==0&&c.height!==0&&(this._result.width=c.width/32,this._result.height=Math.ceil(c.height)),this._result}}},4269:function(u,n,o){var d=this&&this.__decorate||function(c,l,h,_){var S,x=arguments.length,R=x<3?l:_===null?_=Object.getOwnPropertyDescriptor(l,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(c,l,h,_);else for(var g=c.length-1;g>=0;g--)(S=c[g])&&(R=(x<3?S(R):x>3?S(l,h,R):S(l,h))||R);return x>3&&R&&Object.defineProperty(l,h,R),R},m=this&&this.__param||function(c,l){return function(h,_){l(h,_,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterJoinerService=n.JoinedCellData=void 0;const p=o(3734),v=o(643),C=o(511),w=o(2585);class y extends p.AttributeData{constructor(l,h,_){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=h,this._width=_}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.JoinedCellData=y;let f=n.CharacterJoinerService=class E_{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(l){const h={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(h),h.id}deregister(l){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===l)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(l);if(!h||h.length===0)return[];const _=[],S=h.translateToString(!0);let x=0,R=0,g=0,E=h.getFg(0),k=h.getBg(0);for(let A=0;A<h.getTrimmedLength();A++)if(h.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==k){if(A-x>1){const D=this._getJoinedRanges(S,g,R,h,x);for(let O=0;O<D.length;O++)_.push(D[O])}x=A,g=R,E=this._workCell.fg,k=this._workCell.bg}R+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const A=this._getJoinedRanges(S,g,R,h,x);for(let D=0;D<A.length;D++)_.push(A[D])}return _}_getJoinedRanges(l,h,_,S,x){const R=l.substring(h,_);let g=[];try{g=this._characterJoiners[0].handler(R)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const k=this._characterJoiners[E].handler(R);for(let A=0;A<k.length;A++)E_._mergeRanges(g,k[A])}catch(k){console.error(k)}return this._stringRangesToCellRanges(g,S,x),g}_stringRangesToCellRanges(l,h,_){let S=0,x=!1,R=0,g=l[S];if(g){for(let E=_;E<this._bufferService.cols;E++){const k=h.getWidth(E),A=h.getString(E).length||v.WHITESPACE_CELL_CHAR.length;if(k!==0){if(!x&&g[0]<=R&&(g[0]=E,x=!0),g[1]<=R){if(g[1]=E,g=l[++S],!g)break;g[0]<=R?(g[0]=E,x=!0):x=!1}R+=A}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(l,h){let _=!1;for(let S=0;S<l.length;S++){const x=l[S];if(_){if(h[1]<=x[0])return l[S-1][1]=h[1],l;if(h[1]<=x[1])return l[S-1][1]=Math.max(h[1],x[1]),l.splice(S,1),l;l.splice(S,1),S--}else{if(h[1]<=x[0])return l.splice(S,0,h),l;if(h[1]<=x[1])return x[0]=Math.min(h[0],x[0]),l;h[0]<x[1]&&(x[0]=Math.min(h[0],x[0]),_=!0)}}return _?l[l.length-1][1]=h[1]:l.push(h),l}};n.CharacterJoinerService=f=d([m(0,w.IBufferService)],f)},5114:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreBrowserService=void 0,n.CoreBrowserService=class{constructor(o,d){this._textarea=o,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(u,n,o){var d=this&&this.__decorate||function(w,y,f,c){var l,h=arguments.length,_=h<3?y:c===null?c=Object.getOwnPropertyDescriptor(y,f):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(w,y,f,c);else for(var S=w.length-1;S>=0;S--)(l=w[S])&&(_=(h<3?l(_):h>3?l(y,f,_):l(y,f))||_);return h>3&&_&&Object.defineProperty(y,f,_),_},m=this&&this.__param||function(w,y){return function(f,c){y(f,c,w)}};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseService=void 0;const p=o(4725),v=o(9806);let C=n.MouseService=class{constructor(w,y){this._renderService=w,this._charSizeService=y}getCoords(w,y,f,c,l){return(0,v.getCoords)(window,w,y,f,c,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(w,y){const f=(0,v.getCoordsRelativeToElement)(window,w,y);if(this._charSizeService.hasValidSize)return f[0]=Math.min(Math.max(f[0],0),this._renderService.dimensions.css.canvas.width-1),f[1]=Math.min(Math.max(f[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(f[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(f[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(f[0]),y:Math.floor(f[1])}}};n.MouseService=C=d([m(0,p.IRenderService),m(1,p.ICharSizeService)],C)},3230:function(u,n,o){var d=this&&this.__decorate||function(_,S,x,R){var g,E=arguments.length,k=E<3?S:R===null?R=Object.getOwnPropertyDescriptor(S,x):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(_,S,x,R);else for(var A=_.length-1;A>=0;A--)(g=_[A])&&(k=(E<3?g(k):E>3?g(S,x,k):g(S,x))||k);return E>3&&k&&Object.defineProperty(S,x,k),k},m=this&&this.__param||function(_,S){return function(x,R){S(x,R,_)}};Object.defineProperty(n,"__esModule",{value:!0}),n.RenderService=void 0;const p=o(3656),v=o(6193),C=o(5596),w=o(4725),y=o(8460),f=o(844),c=o(7226),l=o(2585);let h=n.RenderService=class extends f.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(_,S,x,R,g,E,k,A){if(super(),this._rowCount=_,this._charSizeService=R,this._renderer=this.register(new f.MutableDisposable),this._pausedResizeTask=new c.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(k.window,(D,O)=>this._renderRows(D,O)),this.register(this._renderDebouncer),this._screenDprMonitor=new C.ScreenDprMonitor(k.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var D;return(D=this._renderer.value)===null||D===void 0?void 0:D.clear()})),this.register(x.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(x.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(x.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register((0,p.addDisposableDomListener)(k.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(A.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in k.window){const D=new k.window.IntersectionObserver(O=>this._handleIntersectionChange(O[O.length-1]),{threshold:0});D.observe(S),this.register({dispose:()=>D.disconnect()})}}_handleIntersectionChange(_){this._isPaused=_.isIntersecting===void 0?_.intersectionRatio===0:!_.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(_,S,x=!1){this._isPaused?this._needsFullRefresh=!0:(x||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(_,S,this._rowCount))}_renderRows(_,S){this._renderer.value&&(_=Math.min(_,this._rowCount-1),S=Math.min(S,this._rowCount-1),this._renderer.value.renderRows(_,S),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:_,end:S}),this._onRender.fire({start:_,end:S}),this._isNextRenderRedrawOnly=!0)}resize(_,S){this._rowCount=S,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(_){this._renderer.value=_,this._renderer.value.onRequestRedraw(S=>this.refreshRows(S.start,S.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(_){return this._renderDebouncer.addRefreshCallback(_)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var _,S;this._renderer.value&&((S=(_=this._renderer.value).clearTextureAtlas)===null||S===void 0||S.call(_),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(_,S){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(_,S)):this._renderer.value.handleResize(_,S),this._fullRefresh())}handleCharSizeChanged(){var _;(_=this._renderer.value)===null||_===void 0||_.handleCharSizeChanged()}handleBlur(){var _;(_=this._renderer.value)===null||_===void 0||_.handleBlur()}handleFocus(){var _;(_=this._renderer.value)===null||_===void 0||_.handleFocus()}handleSelectionChanged(_,S,x){var R;this._selectionState.start=_,this._selectionState.end=S,this._selectionState.columnSelectMode=x,(R=this._renderer.value)===null||R===void 0||R.handleSelectionChanged(_,S,x)}handleCursorMove(){var _;(_=this._renderer.value)===null||_===void 0||_.handleCursorMove()}clear(){var _;(_=this._renderer.value)===null||_===void 0||_.clear()}};n.RenderService=h=d([m(2,l.IOptionsService),m(3,w.ICharSizeService),m(4,l.IDecorationService),m(5,l.IBufferService),m(6,w.ICoreBrowserService),m(7,w.IThemeService)],h)},9312:function(u,n,o){var d=this&&this.__decorate||function(g,E,k,A){var D,O=arguments.length,B=O<3?E:A===null?A=Object.getOwnPropertyDescriptor(E,k):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(g,E,k,A);else for(var F=g.length-1;F>=0;F--)(D=g[F])&&(B=(O<3?D(B):O>3?D(E,k,B):D(E,k))||B);return O>3&&B&&Object.defineProperty(E,k,B),B},m=this&&this.__param||function(g,E){return function(k,A){E(k,A,g)}};Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionService=void 0;const p=o(9806),v=o(9504),C=o(456),w=o(4725),y=o(8460),f=o(844),c=o(6114),l=o(4841),h=o(511),_=o(2585),S="",x=new RegExp(S,"g");let R=n.SelectionService=class extends f.Disposable{constructor(g,E,k,A,D,O,B,F,N){super(),this._element=g,this._screenElement=E,this._linkifier=k,this._bufferService=A,this._coreService=D,this._mouseService=O,this._optionsService=B,this._renderService=F,this._coreBrowserService=N,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=z=>this._handleMouseMove(z),this._mouseUpListener=z=>this._handleMouseUp(z),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(z=>this._handleTrim(z)),this.register(this._bufferService.buffers.onBufferActivate(z=>this._handleBufferActivate(z))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,f.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const g=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!g||!E||g[0]===E[0]&&g[1]===E[1])}get selectionText(){const g=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!g||!E)return"";const k=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(g[0]===E[0])return"";const D=g[0]<E[0]?g[0]:E[0],O=g[0]<E[0]?E[0]:g[0];for(let B=g[1];B<=E[1];B++){const F=k.translateBufferLineToString(B,!0,D,O);A.push(F)}}else{const D=g[1]===E[1]?E[0]:void 0;A.push(k.translateBufferLineToString(g[1],!0,g[0],D));for(let O=g[1]+1;O<=E[1]-1;O++){const B=k.lines.get(O),F=k.translateBufferLineToString(O,!0);B?.isWrapped?A[A.length-1]+=F:A.push(F)}if(g[1]!==E[1]){const O=k.lines.get(E[1]),B=k.translateBufferLineToString(E[1],!0,0,E[0]);O&&O.isWrapped?A[A.length-1]+=B:A.push(B)}}return A.map(D=>D.replace(x," ")).join(c.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),c.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){const E=this._getMouseBufferCoords(g),k=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(k&&A&&E)&&this._areCoordsInSelection(E,k,A)}isCellInSelection(g,E){const k=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!k||!A)&&this._areCoordsInSelection([g,E],k,A)}_areCoordsInSelection(g,E,k){return g[1]>E[1]&&g[1]<k[1]||E[1]===k[1]&&g[1]===E[1]&&g[0]>=E[0]&&g[0]<k[0]||E[1]<k[1]&&g[1]===k[1]&&g[0]<k[0]||E[1]<k[1]&&g[1]===E[1]&&g[0]>=E[0]}_selectWordAtCursor(g,E){var k,A;const D=(A=(k=this._linkifier.currentLink)===null||k===void 0?void 0:k.link)===null||A===void 0?void 0:A.range;if(D)return this._model.selectionStart=[D.start.x-1,D.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(D,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(g);return!!O&&(this._selectWordAt(O,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,E){this._model.clearSelection(),g=Math.max(g,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){const E=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(g){let E=(0,p.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1];const k=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=k?0:(E>k&&(E-=k),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(g){return c.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){const E=this._getMouseBufferCoords(g);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(g){return g.altKey&&!(c.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const k=this._bufferService.buffer;if(this._model.selectionEnd[1]<k.lines.length){const A=k.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){const E=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const k=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(k&&k[0]!==void 0&&k[1]!==void 0){const A=(0,v.moveToCellSequence)(k[0]-1,k[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const g=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,k=!(!g||!E||g[0]===E[0]&&g[1]===E[1]);k?g&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,E,k)):this._oldHasSelection&&this._fireOnSelectionChange(g,E,k)}_fireOnSelectionChange(g,E,k){this._oldSelectionStart=g,this._oldSelectionEnd=E,this._oldHasSelection=k,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(g,E){let k=E;for(let A=0;E>=A;A++){const D=g.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?k--:D>1&&E!==A&&(k+=D-1)}return k}setSelection(g,E,k){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,E],this._model.selectionStartLength=k,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,E,k=!0,A=!0){if(g[0]>=this._bufferService.cols)return;const D=this._bufferService.buffer,O=D.lines.get(g[1]);if(!O)return;const B=D.translateBufferLineToString(g[1],!1);let F=this._convertViewportColToCharacterIndex(O,g[0]),N=F;const z=g[0]-F;let b=0,T=0,P=0,L=0;if(B.charAt(F)===" "){for(;F>0&&B.charAt(F-1)===" ";)F--;for(;N<B.length&&B.charAt(N+1)===" ";)N++}else{let X=g[0],q=g[0];O.getWidth(X)===0&&(b++,X--),O.getWidth(q)===2&&(T++,q++);const ie=O.getString(q).length;for(ie>1&&(L+=ie-1,N+=ie-1);X>0&&F>0&&!this._isCharWordSeparator(O.loadCell(X-1,this._workCell));){O.loadCell(X-1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===0?(b++,X--):I>1&&(P+=I-1,F-=I-1),F--,X--}for(;q<O.length&&N+1<B.length&&!this._isCharWordSeparator(O.loadCell(q+1,this._workCell));){O.loadCell(q+1,this._workCell);const I=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,q++):I>1&&(L+=I-1,N+=I-1),N++,q++}}N++;let U=F+z-b+P,$=Math.min(this._bufferService.cols,N-F+b+T-P-L);if(E||B.slice(F,N).trim()!==""){if(k&&U===0&&O.getCodePoint(0)!==32){const X=D.lines.get(g[1]-1);if(X&&O.isWrapped&&X.getCodePoint(this._bufferService.cols-1)!==32){const q=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(q){const ie=this._bufferService.cols-q.start;U-=ie,$+=ie}}}if(A&&U+$===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const X=D.lines.get(g[1]+1);if(X?.isWrapped&&X.getCodePoint(0)!==32){const q=this._getWordAt([0,g[1]+1],!1,!1,!0);q&&($+=q.length)}}return{start:U,length:$}}}_selectWordAt(g,E){const k=this._getWordAt(g,E);if(k){for(;k.start<0;)k.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[k.start,g[1]],this._model.selectionStartLength=k.length}}_selectToWordAt(g){const E=this._getWordAt(g,!0);if(E){let k=g[1];for(;E.start<0;)E.start+=this._bufferService.cols,k--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,k++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,k]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){const E=this._bufferService.buffer.getWrappedRangeForLine(g),k={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(k,this._bufferService.cols)}};n.SelectionService=R=d([m(3,_.IBufferService),m(4,_.ICoreService),m(5,w.IMouseService),m(6,_.IOptionsService),m(7,w.IRenderService),m(8,w.ICoreBrowserService)],R)},4725:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IThemeService=n.ICharacterJoinerService=n.ISelectionService=n.IRenderService=n.IMouseService=n.ICoreBrowserService=n.ICharSizeService=void 0;const d=o(8343);n.ICharSizeService=(0,d.createDecorator)("CharSizeService"),n.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),n.IMouseService=(0,d.createDecorator)("MouseService"),n.IRenderService=(0,d.createDecorator)("RenderService"),n.ISelectionService=(0,d.createDecorator)("SelectionService"),n.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),n.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(u,n,o){var d=this&&this.__decorate||function(R,g,E,k){var A,D=arguments.length,O=D<3?g:k===null?k=Object.getOwnPropertyDescriptor(g,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(R,g,E,k);else for(var B=R.length-1;B>=0;B--)(A=R[B])&&(O=(D<3?A(O):D>3?A(g,E,O):A(g,E))||O);return D>3&&O&&Object.defineProperty(g,E,O),O},m=this&&this.__param||function(R,g){return function(E,k){g(E,k,R)}};Object.defineProperty(n,"__esModule",{value:!0}),n.ThemeService=n.DEFAULT_ANSI_COLORS=void 0;const p=o(7239),v=o(8055),C=o(8460),w=o(844),y=o(2585),f=v.css.toColor("#ffffff"),c=v.css.toColor("#000000"),l=v.css.toColor("#ffffff"),h=v.css.toColor("#000000"),_={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};n.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const R=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let E=0;E<216;E++){const k=g[E/36%6|0],A=g[E/6%6|0],D=g[E%6];R.push({css:v.channels.toCss(k,A,D),rgba:v.channels.toRgba(k,A,D)})}for(let E=0;E<24;E++){const k=8+10*E;R.push({css:v.channels.toCss(k,k,k),rgba:v.channels.toRgba(k,k,k)})}return R})());let S=n.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(R){super(),this._optionsService=R,this._contrastCache=new p.ColorContrastCache,this._halfContrastCache=new p.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:f,background:c,cursor:l,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:_,selectionBackgroundOpaque:v.color.blend(c,_),selectionInactiveBackgroundTransparent:_,selectionInactiveBackgroundOpaque:v.color.blend(c,_),ansi:n.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(R={}){const g=this._colors;if(g.foreground=x(R.foreground,f),g.background=x(R.background,c),g.cursor=x(R.cursor,l),g.cursorAccent=x(R.cursorAccent,h),g.selectionBackgroundTransparent=x(R.selectionBackground,_),g.selectionBackgroundOpaque=v.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=x(R.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=v.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=R.selectionForeground?x(R.selectionForeground,v.NULL_COLOR):void 0,g.selectionForeground===v.NULL_COLOR&&(g.selectionForeground=void 0),v.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=v.color.opacity(g.selectionBackgroundTransparent,.3)),v.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=v.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=n.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=x(R.black,n.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=x(R.red,n.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=x(R.green,n.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=x(R.yellow,n.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=x(R.blue,n.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=x(R.magenta,n.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=x(R.cyan,n.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=x(R.white,n.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=x(R.brightBlack,n.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=x(R.brightRed,n.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=x(R.brightGreen,n.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=x(R.brightYellow,n.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=x(R.brightBlue,n.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=x(R.brightMagenta,n.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=x(R.brightCyan,n.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=x(R.brightWhite,n.DEFAULT_ANSI_COLORS[15]),R.extendedAnsi){const E=Math.min(g.ansi.length-16,R.extendedAnsi.length);for(let k=0;k<E;k++)g.ansi[k+16]=x(R.extendedAnsi[k],n.DEFAULT_ANSI_COLORS[k+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(R){this._restoreColor(R),this._onChangeColors.fire(this.colors)}_restoreColor(R){if(R!==void 0)switch(R){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[R]=this._restoreColors.ansi[R]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(R){R(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(R,g){if(R!==void 0)try{return v.css.toColor(R)}catch{}return g}n.ThemeService=S=d([m(0,y.IOptionsService)],S)},6349:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CircularList=void 0;const d=o(8460),m=o(844);class p extends m.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const w=new Array(C);for(let y=0;y<Math.min(C,this.length);y++)w[y]=this._array[this._getCyclicIndex(y)];this._array=w,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let w=this._length;w<C;w++)this._array[w]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,w){this._array[this._getCyclicIndex(C)]=w}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,w,...y){if(w){for(let f=C;f<this._length-w;f++)this._array[this._getCyclicIndex(f)]=this._array[this._getCyclicIndex(f+w)];this._length-=w,this.onDeleteEmitter.fire({index:C,amount:w})}for(let f=this._length-1;f>=C;f--)this._array[this._getCyclicIndex(f+y.length)]=this._array[this._getCyclicIndex(f)];for(let f=0;f<y.length;f++)this._array[this._getCyclicIndex(C+f)]=y[f];if(y.length&&this.onInsertEmitter.fire({index:C,amount:y.length}),this._length+y.length>this._maxLength){const f=this._length+y.length-this._maxLength;this._startIndex+=f,this._length=this._maxLength,this.onTrimEmitter.fire(f)}else this._length+=y.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,w,y){if(!(w<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let c=w-1;c>=0;c--)this.set(C+c+y,this.get(C+c));const f=C+w+y-this._length;if(f>0)for(this._length+=f;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let f=0;f<w;f++)this.set(C+f+y,this.get(C+f))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}n.CircularList=p},1439:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.clone=void 0,n.clone=function o(d,m=5){if(typeof d!="object")return d;const p=Array.isArray(d)?[]:{};for(const v in d)p[v]=m<=1?d[v]:d[v]&&o(d[v],m-1);return p}},8055:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=n.NULL_COLOR=void 0;const d=o(6114);let m=0,p=0,v=0,C=0;var w,y,f,c,l;function h(S){const x=S.toString(16);return x.length<2?"0"+x:x}function _(S,x){return S<x?(x+.05)/(S+.05):(S+.05)/(x+.05)}n.NULL_COLOR={css:"#00000000",rgba:0},function(S){S.toCss=function(x,R,g,E){return E!==void 0?`#${h(x)}${h(R)}${h(g)}${h(E)}`:`#${h(x)}${h(R)}${h(g)}`},S.toRgba=function(x,R,g,E=255){return(x<<24|R<<16|g<<8|E)>>>0}}(w||(n.channels=w={})),function(S){function x(R,g){return C=Math.round(255*g),[m,p,v]=l.toChannels(R.rgba),{css:w.toCss(m,p,v,C),rgba:w.toRgba(m,p,v,C)}}S.blend=function(R,g){if(C=(255&g.rgba)/255,C===1)return{css:g.css,rgba:g.rgba};const E=g.rgba>>24&255,k=g.rgba>>16&255,A=g.rgba>>8&255,D=R.rgba>>24&255,O=R.rgba>>16&255,B=R.rgba>>8&255;return m=D+Math.round((E-D)*C),p=O+Math.round((k-O)*C),v=B+Math.round((A-B)*C),{css:w.toCss(m,p,v),rgba:w.toRgba(m,p,v)}},S.isOpaque=function(R){return(255&R.rgba)==255},S.ensureContrastRatio=function(R,g,E){const k=l.ensureContrastRatio(R.rgba,g.rgba,E);if(k)return l.toColor(k>>24&255,k>>16&255,k>>8&255)},S.opaque=function(R){const g=(255|R.rgba)>>>0;return[m,p,v]=l.toChannels(g),{css:w.toCss(m,p,v),rgba:g}},S.opacity=x,S.multiplyOpacity=function(R,g){return C=255&R.rgba,x(R,C*g/255)},S.toColorRGB=function(R){return[R.rgba>>24&255,R.rgba>>16&255,R.rgba>>8&255]}}(y||(n.color=y={})),function(S){let x,R;if(!d.isNode){const g=document.createElement("canvas");g.width=1,g.height=1;const E=g.getContext("2d",{willReadFrequently:!0});E&&(x=E,x.globalCompositeOperation="copy",R=x.createLinearGradient(0,0,1,1))}S.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return m=parseInt(g.slice(1,2).repeat(2),16),p=parseInt(g.slice(2,3).repeat(2),16),v=parseInt(g.slice(3,4).repeat(2),16),l.toColor(m,p,v);case 5:return m=parseInt(g.slice(1,2).repeat(2),16),p=parseInt(g.slice(2,3).repeat(2),16),v=parseInt(g.slice(3,4).repeat(2),16),C=parseInt(g.slice(4,5).repeat(2),16),l.toColor(m,p,v,C);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const E=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return m=parseInt(E[1]),p=parseInt(E[2]),v=parseInt(E[3]),C=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),l.toColor(m,p,v,C);if(!x||!R)throw new Error("css.toColor: Unsupported css format");if(x.fillStyle=R,x.fillStyle=g,typeof x.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(x.fillRect(0,0,1,1),[m,p,v,C]=x.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(m,p,v,C),css:g}}}(f||(n.css=f={})),function(S){function x(R,g,E){const k=R/255,A=g/255,D=E/255;return .2126*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.7152*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}S.relativeLuminance=function(R){return x(R>>16&255,R>>8&255,255&R)},S.relativeLuminance2=x}(c||(n.rgb=c={})),function(S){function x(g,E,k){const A=g>>24&255,D=g>>16&255,O=g>>8&255;let B=E>>24&255,F=E>>16&255,N=E>>8&255,z=_(c.relativeLuminance2(B,F,N),c.relativeLuminance2(A,D,O));for(;z<k&&(B>0||F>0||N>0);)B-=Math.max(0,Math.ceil(.1*B)),F-=Math.max(0,Math.ceil(.1*F)),N-=Math.max(0,Math.ceil(.1*N)),z=_(c.relativeLuminance2(B,F,N),c.relativeLuminance2(A,D,O));return(B<<24|F<<16|N<<8|255)>>>0}function R(g,E,k){const A=g>>24&255,D=g>>16&255,O=g>>8&255;let B=E>>24&255,F=E>>16&255,N=E>>8&255,z=_(c.relativeLuminance2(B,F,N),c.relativeLuminance2(A,D,O));for(;z<k&&(B<255||F<255||N<255);)B=Math.min(255,B+Math.ceil(.1*(255-B))),F=Math.min(255,F+Math.ceil(.1*(255-F))),N=Math.min(255,N+Math.ceil(.1*(255-N))),z=_(c.relativeLuminance2(B,F,N),c.relativeLuminance2(A,D,O));return(B<<24|F<<16|N<<8|255)>>>0}S.ensureContrastRatio=function(g,E,k){const A=c.relativeLuminance(g>>8),D=c.relativeLuminance(E>>8);if(_(A,D)<k){if(D<A){const F=x(g,E,k),N=_(A,c.relativeLuminance(F>>8));if(N<k){const z=R(g,E,k);return N>_(A,c.relativeLuminance(z>>8))?F:z}return F}const O=R(g,E,k),B=_(A,c.relativeLuminance(O>>8));if(B<k){const F=x(g,E,k);return B>_(A,c.relativeLuminance(F>>8))?O:F}return O}},S.reduceLuminance=x,S.increaseLuminance=R,S.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},S.toColor=function(g,E,k,A){return{css:w.toCss(g,E,k,A),rgba:w.toRgba(g,E,k,A)}}}(l||(n.rgba=l={})),n.toPaddedHex=h,n.contrastRatio=_},8969:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreTerminal=void 0;const d=o(844),m=o(2585),p=o(4348),v=o(7866),C=o(744),w=o(7302),y=o(6975),f=o(8460),c=o(1753),l=o(1480),h=o(7994),_=o(9282),S=o(5435),x=o(5981),R=o(2660);let g=!1;class E extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new f.EventEmitter),this._onScroll.event(A=>{var D;(D=this._onScrollApi)===null||D===void 0||D.fire(A.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(const D in A)this.optionsService.options[D]=A[D]}constructor(A){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new f.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new f.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new f.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new f.EventEmitter),this._instantiationService=new p.InstantiationService,this.optionsService=this.register(new w.OptionsService(A)),this._instantiationService.setService(m.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(m.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(m.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(m.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(c.CoreMouseService)),this._instantiationService.setService(m.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(m.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(m.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(R.OscLinkService),this._instantiationService.setService(m.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,f.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,f.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,f.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,f.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(D=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new x.WriteBuffer((D,O)=>this._inputHandler.parse(D,O))),this.register((0,f.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(A,D){this._writeBuffer.write(A,D)}writeSync(A,D){this._logService.logLevel<=m.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(A,D)}resize(A,D){isNaN(A)||isNaN(D)||(A=Math.max(A,C.MINIMUM_COLS),D=Math.max(D,C.MINIMUM_ROWS),this._bufferService.resize(A,D))}scroll(A,D=!1){this._bufferService.scroll(A,D)}scrollLines(A,D,O){this._bufferService.scrollLines(A,D,O)}scrollPages(A){this.scrollLines(A*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(A){const D=A-this._bufferService.buffer.ydisp;D!==0&&this.scrollLines(D)}registerEscHandler(A,D){return this._inputHandler.registerEscHandler(A,D)}registerDcsHandler(A,D){return this._inputHandler.registerDcsHandler(A,D)}registerCsiHandler(A,D){return this._inputHandler.registerCsiHandler(A,D)}registerOscHandler(A,D){return this._inputHandler.registerOscHandler(A,D)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let A=!1;const D=this.optionsService.rawOptions.windowsPty;D&&D.buildNumber!==void 0&&D.buildNumber!==void 0?A=D.backend==="conpty"&&D.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const A=[];A.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},()=>((0,_.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const D of A)D.dispose()})}}}n.CoreTerminal=E},8460:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===o)return void this._listeners.splice(d,1)}}})),this._event}fire(o,d){const m=[];for(let p=0;p<this._listeners.length;p++)m.push(this._listeners[p]);for(let p=0;p<m.length;p++)m[p].call(void 0,o,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},n.forwardEvent=function(o,d){return o(m=>d.fire(m))}},5435:function(u,n,o){var d=this&&this.__decorate||function(z,b,T,P){var L,U=arguments.length,$=U<3?b:P===null?P=Object.getOwnPropertyDescriptor(b,T):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(z,b,T,P);else for(var X=z.length-1;X>=0;X--)(L=z[X])&&($=(U<3?L($):U>3?L(b,T,$):L(b,T))||$);return U>3&&$&&Object.defineProperty(b,T,$),$},m=this&&this.__param||function(z,b){return function(T,P){b(T,P,z)}};Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandler=n.WindowsOptionsReportType=void 0;const p=o(2584),v=o(7116),C=o(2015),w=o(844),y=o(482),f=o(8437),c=o(8460),l=o(643),h=o(511),_=o(3734),S=o(2585),x=o(6242),R=o(6351),g=o(5941),E={"(":0,")":1,"*":2,"+":3,"-":1,".":2},k=131072;function A(z,b){if(z>24)return b.setWinLines||!1;switch(z){case 1:return!!b.restoreWin;case 2:return!!b.minimizeWin;case 3:return!!b.setWinPosition;case 4:return!!b.setWinSizePixels;case 5:return!!b.raiseWin;case 6:return!!b.lowerWin;case 7:return!!b.refreshWin;case 8:return!!b.setWinSizeChars;case 9:return!!b.maximizeWin;case 10:return!!b.fullscreenWin;case 11:return!!b.getWinState;case 13:return!!b.getWinPosition;case 14:return!!b.getWinSizePixels;case 15:return!!b.getScreenSizePixels;case 16:return!!b.getCellSizePixels;case 18:return!!b.getWinSizeChars;case 19:return!!b.getScreenSizeChars;case 20:return!!b.getIconTitle;case 21:return!!b.getWinTitle;case 22:return!!b.pushTitle;case 23:return!!b.popTitle;case 24:return!!b.setWinLines}return!1}var D;(function(z){z[z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",z[z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(n.WindowsOptionsReportType=D={}));let O=0;class B extends w.Disposable{getAttrData(){return this._curAttrData}constructor(b,T,P,L,U,$,X,q,ie=new C.EscapeSequenceParser){super(),this._bufferService=b,this._charsetService=T,this._coreService=P,this._logService=L,this._optionsService=U,this._oscLinkService=$,this._coreMouseService=X,this._unicodeService=q,this._parser=ie,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new c.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new c.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new c.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new c.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new c.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new c.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new c.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new c.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new c.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new c.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new c.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._parser.setCsiHandlerFallback((I,M)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(I),params:M.toArray()})}),this._parser.setEscHandlerFallback(I=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(I)})}),this._parser.setExecuteHandlerFallback(I=>{this._logService.debug("Unknown EXECUTE code: ",{code:I})}),this._parser.setOscHandlerFallback((I,M,V)=>{this._logService.debug("Unknown OSC code: ",{identifier:I,action:M,data:V})}),this._parser.setDcsHandlerFallback((I,M,V)=>{M==="HOOK"&&(V=V.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(I),action:M,payload:V})}),this._parser.setPrintHandler((I,M,V)=>this.print(I,M,V)),this._parser.registerCsiHandler({final:"@"},I=>this.insertChars(I)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},I=>this.scrollLeft(I)),this._parser.registerCsiHandler({final:"A"},I=>this.cursorUp(I)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},I=>this.scrollRight(I)),this._parser.registerCsiHandler({final:"B"},I=>this.cursorDown(I)),this._parser.registerCsiHandler({final:"C"},I=>this.cursorForward(I)),this._parser.registerCsiHandler({final:"D"},I=>this.cursorBackward(I)),this._parser.registerCsiHandler({final:"E"},I=>this.cursorNextLine(I)),this._parser.registerCsiHandler({final:"F"},I=>this.cursorPrecedingLine(I)),this._parser.registerCsiHandler({final:"G"},I=>this.cursorCharAbsolute(I)),this._parser.registerCsiHandler({final:"H"},I=>this.cursorPosition(I)),this._parser.registerCsiHandler({final:"I"},I=>this.cursorForwardTab(I)),this._parser.registerCsiHandler({final:"J"},I=>this.eraseInDisplay(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},I=>this.eraseInDisplay(I,!0)),this._parser.registerCsiHandler({final:"K"},I=>this.eraseInLine(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},I=>this.eraseInLine(I,!0)),this._parser.registerCsiHandler({final:"L"},I=>this.insertLines(I)),this._parser.registerCsiHandler({final:"M"},I=>this.deleteLines(I)),this._parser.registerCsiHandler({final:"P"},I=>this.deleteChars(I)),this._parser.registerCsiHandler({final:"S"},I=>this.scrollUp(I)),this._parser.registerCsiHandler({final:"T"},I=>this.scrollDown(I)),this._parser.registerCsiHandler({final:"X"},I=>this.eraseChars(I)),this._parser.registerCsiHandler({final:"Z"},I=>this.cursorBackwardTab(I)),this._parser.registerCsiHandler({final:"`"},I=>this.charPosAbsolute(I)),this._parser.registerCsiHandler({final:"a"},I=>this.hPositionRelative(I)),this._parser.registerCsiHandler({final:"b"},I=>this.repeatPrecedingCharacter(I)),this._parser.registerCsiHandler({final:"c"},I=>this.sendDeviceAttributesPrimary(I)),this._parser.registerCsiHandler({prefix:">",final:"c"},I=>this.sendDeviceAttributesSecondary(I)),this._parser.registerCsiHandler({final:"d"},I=>this.linePosAbsolute(I)),this._parser.registerCsiHandler({final:"e"},I=>this.vPositionRelative(I)),this._parser.registerCsiHandler({final:"f"},I=>this.hVPosition(I)),this._parser.registerCsiHandler({final:"g"},I=>this.tabClear(I)),this._parser.registerCsiHandler({final:"h"},I=>this.setMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"h"},I=>this.setModePrivate(I)),this._parser.registerCsiHandler({final:"l"},I=>this.resetMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"l"},I=>this.resetModePrivate(I)),this._parser.registerCsiHandler({final:"m"},I=>this.charAttributes(I)),this._parser.registerCsiHandler({final:"n"},I=>this.deviceStatus(I)),this._parser.registerCsiHandler({prefix:"?",final:"n"},I=>this.deviceStatusPrivate(I)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},I=>this.softReset(I)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},I=>this.setCursorStyle(I)),this._parser.registerCsiHandler({final:"r"},I=>this.setScrollRegion(I)),this._parser.registerCsiHandler({final:"s"},I=>this.saveCursor(I)),this._parser.registerCsiHandler({final:"t"},I=>this.windowOptions(I)),this._parser.registerCsiHandler({final:"u"},I=>this.restoreCursor(I)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},I=>this.insertColumns(I)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},I=>this.deleteColumns(I)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},I=>this.selectProtected(I)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},I=>this.requestMode(I,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},I=>this.requestMode(I,!1)),this._parser.setExecuteHandler(p.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(p.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(p.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(p.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(p.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(p.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(p.C1.IND,()=>this.index()),this._parser.setExecuteHandler(p.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(p.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(I=>(this.setTitle(I),this.setIconName(I),!0))),this._parser.registerOscHandler(1,new x.OscHandler(I=>this.setIconName(I))),this._parser.registerOscHandler(2,new x.OscHandler(I=>this.setTitle(I))),this._parser.registerOscHandler(4,new x.OscHandler(I=>this.setOrReportIndexedColor(I))),this._parser.registerOscHandler(8,new x.OscHandler(I=>this.setHyperlink(I))),this._parser.registerOscHandler(10,new x.OscHandler(I=>this.setOrReportFgColor(I))),this._parser.registerOscHandler(11,new x.OscHandler(I=>this.setOrReportBgColor(I))),this._parser.registerOscHandler(12,new x.OscHandler(I=>this.setOrReportCursorColor(I))),this._parser.registerOscHandler(104,new x.OscHandler(I=>this.restoreIndexedColor(I))),this._parser.registerOscHandler(110,new x.OscHandler(I=>this.restoreFgColor(I))),this._parser.registerOscHandler(111,new x.OscHandler(I=>this.restoreBgColor(I))),this._parser.registerOscHandler(112,new x.OscHandler(I=>this.restoreCursorColor(I))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const I in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:I},()=>this.selectCharset("("+I)),this._parser.registerEscHandler({intermediates:")",final:I},()=>this.selectCharset(")"+I)),this._parser.registerEscHandler({intermediates:"*",final:I},()=>this.selectCharset("*"+I)),this._parser.registerEscHandler({intermediates:"+",final:I},()=>this.selectCharset("+"+I)),this._parser.registerEscHandler({intermediates:"-",final:I},()=>this.selectCharset("-"+I)),this._parser.registerEscHandler({intermediates:".",final:I},()=>this.selectCharset("."+I)),this._parser.registerEscHandler({intermediates:"/",final:I},()=>this.selectCharset("/"+I));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(I=>(this._logService.error("Parsing error: ",I),I)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new R.DcsHandler((I,M)=>this.requestStatusString(I,M)))}_preserveStack(b,T,P,L){this._parseStack.paused=!0,this._parseStack.cursorStartX=b,this._parseStack.cursorStartY=T,this._parseStack.decodedLength=P,this._parseStack.position=L}_logSlowResolvingAsync(b){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([b,new Promise((T,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(T=>{if(T!=="#SLOW_TIMEOUT")throw T;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(b,T){let P,L=this._activeBuffer.x,U=this._activeBuffer.y,$=0;const X=this._parseStack.paused;if(X){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,T))return this._logSlowResolvingAsync(P),P;L=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,b.length>k&&($=this._parseStack.position+k)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof b=="string"?` "${b}"`:` "${Array.prototype.map.call(b,q=>String.fromCharCode(q)).join("")}"`),typeof b=="string"?b.split("").map(q=>q.charCodeAt(0)):b),this._parseBuffer.length<b.length&&this._parseBuffer.length<k&&(this._parseBuffer=new Uint32Array(Math.min(b.length,k))),X||this._dirtyRowTracker.clearRange(),b.length>k)for(let q=$;q<b.length;q+=k){const ie=q+k<b.length?q+k:b.length,I=typeof b=="string"?this._stringDecoder.decode(b.substring(q,ie),this._parseBuffer):this._utf8Decoder.decode(b.subarray(q,ie),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,I))return this._preserveStack(L,U,I,q),this._logSlowResolvingAsync(P),P}else if(!X){const q=typeof b=="string"?this._stringDecoder.decode(b,this._parseBuffer):this._utf8Decoder.decode(b,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,q))return this._preserveStack(L,U,q,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===L&&this._activeBuffer.y===U||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(b,T,P){let L,U;const $=this._charsetService.charset,X=this._optionsService.rawOptions.screenReaderMode,q=this._bufferService.cols,ie=this._coreService.decPrivateModes.wraparound,I=this._coreService.modes.insertMode,M=this._curAttrData;let V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-T>0&&V.getWidth(this._activeBuffer.x-1)===2&&V.setCellFromCodePoint(this._activeBuffer.x-1,0,1,M.fg,M.bg,M.extended);for(let H=T;H<P;++H){if(L=b[H],U=this._unicodeService.wcwidth(L),L<127&&$){const Q=$[String.fromCharCode(L)];Q&&(L=Q.charCodeAt(0))}if(X&&this._onA11yChar.fire((0,y.stringFromCodePoint)(L)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),U||!this._activeBuffer.x){if(this._activeBuffer.x+U-1>=q){if(ie){for(;this._activeBuffer.x<q;)V.setCellFromCodePoint(this._activeBuffer.x++,0,1,M.fg,M.bg,M.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=q-1,U===2)continue}if(I&&(V.insertCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(M),M),V.getWidth(q-1)===2&&V.setCellFromCodePoint(q-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,M.fg,M.bg,M.extended)),V.setCellFromCodePoint(this._activeBuffer.x++,L,U,M.fg,M.bg,M.extended),U>0)for(;--U;)V.setCellFromCodePoint(this._activeBuffer.x++,0,0,M.fg,M.bg,M.extended)}else V.getWidth(this._activeBuffer.x-1)?V.addCodepointToCell(this._activeBuffer.x-1,L):V.addCodepointToCell(this._activeBuffer.x-2,L)}P-T>0&&(V.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<q&&P-T>0&&V.getWidth(this._activeBuffer.x)===0&&!V.hasContent(this._activeBuffer.x)&&V.setCellFromCodePoint(this._activeBuffer.x,0,1,M.fg,M.bg,M.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(b,T){return b.final!=="t"||b.prefix||b.intermediates?this._parser.registerCsiHandler(b,T):this._parser.registerCsiHandler(b,P=>!A(P.params[0],this._optionsService.rawOptions.windowOptions)||T(P))}registerDcsHandler(b,T){return this._parser.registerDcsHandler(b,new R.DcsHandler(T))}registerEscHandler(b,T){return this._parser.registerEscHandler(b,T)}registerOscHandler(b,T){return this._parser.registerOscHandler(b,new x.OscHandler(T))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var b;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((b=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||b===void 0)&&b.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const b=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-b),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(b=this._bufferService.cols-1){this._activeBuffer.x=Math.min(b,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(b,T){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=b,this._activeBuffer.y=this._activeBuffer.scrollTop+T):(this._activeBuffer.x=b,this._activeBuffer.y=T),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(b,T){this._restrictCursor(),this._setCursor(this._activeBuffer.x+b,this._activeBuffer.y+T)}cursorUp(b){const T=this._activeBuffer.y-this._activeBuffer.scrollTop;return T>=0?this._moveCursor(0,-Math.min(T,b.params[0]||1)):this._moveCursor(0,-(b.params[0]||1)),!0}cursorDown(b){const T=this._activeBuffer.scrollBottom-this._activeBuffer.y;return T>=0?this._moveCursor(0,Math.min(T,b.params[0]||1)):this._moveCursor(0,b.params[0]||1),!0}cursorForward(b){return this._moveCursor(b.params[0]||1,0),!0}cursorBackward(b){return this._moveCursor(-(b.params[0]||1),0),!0}cursorNextLine(b){return this.cursorDown(b),this._activeBuffer.x=0,!0}cursorPrecedingLine(b){return this.cursorUp(b),this._activeBuffer.x=0,!0}cursorCharAbsolute(b){return this._setCursor((b.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(b){return this._setCursor(b.length>=2?(b.params[1]||1)-1:0,(b.params[0]||1)-1),!0}charPosAbsolute(b){return this._setCursor((b.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(b){return this._moveCursor(b.params[0]||1,0),!0}linePosAbsolute(b){return this._setCursor(this._activeBuffer.x,(b.params[0]||1)-1),!0}vPositionRelative(b){return this._moveCursor(0,b.params[0]||1),!0}hVPosition(b){return this.cursorPosition(b),!0}tabClear(b){const T=b.params[0];return T===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:T===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(b){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=b.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(b){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let T=b.params[0]||1;for(;T--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(b){const T=b.params[0];return T===1&&(this._curAttrData.bg|=536870912),T!==2&&T!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(b,T,P,L=!1,U=!1){const $=this._activeBuffer.lines.get(this._activeBuffer.ybase+b);$.replaceCells(T,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),U),L&&($.isWrapped=!1)}_resetBufferLine(b,T=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+b);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),T),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+b),P.isWrapped=!1)}eraseInDisplay(b,T=!1){let P;switch(this._restrictCursor(this._bufferService.cols),b.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);P<this._bufferService.rows;P++)this._resetBufferLine(P,T);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,T),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,T);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,T);this._dirtyRowTracker.markDirty(0);break;case 3:const L=this._activeBuffer.lines.length-this._bufferService.rows;L>0&&(this._activeBuffer.lines.trimStart(L),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-L,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-L,0),this._onScroll.fire(0))}return!0}eraseInLine(b,T=!1){switch(this._restrictCursor(this._bufferService.cols),b.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,T);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,T);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,T)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(b){this._restrictCursor();let T=b.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,L=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-L+1;for(;T--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(b){this._restrictCursor();let T=b.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let L;for(L=this._bufferService.rows-1-this._activeBuffer.scrollBottom,L=this._bufferService.rows-1+this._activeBuffer.ybase-L;T--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(L,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(b){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.insertCells(this._activeBuffer.x,b.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(b){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.deleteCells(this._activeBuffer.x,b.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(b){let T=b.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(b){let T=b.params[0]||1;for(;T--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(f.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(b){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=b.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);L.deleteCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(b){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=b.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);L.insertCells(0,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(b){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=b.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);L.insertCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(b){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const T=b.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);L.deleteCells(this._activeBuffer.x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),L.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(b){this._restrictCursor();const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return T&&(T.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(b.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(b){if(!this._parser.precedingCodepoint)return!0;const T=b.params[0]||1,P=new Uint32Array(T);for(let L=0;L<T;++L)P[L]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(b){return b.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(p.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(p.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(b){return b.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(p.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(p.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(b.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(p.C0.ESC+"[>83;40003;0c")),!0}_is(b){return(this._optionsService.rawOptions.termName+"").indexOf(b)===0}setMode(b){for(let T=0;T<b.length;T++)switch(b.params[T]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(b){for(let T=0;T<b.length;T++)switch(b.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(b){for(let T=0;T<b.length;T++)switch(b.params[T]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(b){for(let T=0;T<b.length;T++)switch(b.params[T]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),b.params[T]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(b,T){const P=this._coreService.decPrivateModes,{activeProtocol:L,activeEncoding:U}=this._coreMouseService,$=this._coreService,{buffers:X,cols:q}=this._bufferService,{active:ie,alt:I}=X,M=this._optionsService.rawOptions,V=se=>se?1:2,H=b.params[0];return Q=H,j=T?H===2?4:H===4?V($.modes.insertMode):H===12?3:H===20?V(M.convertEol):0:H===1?V(P.applicationCursorKeys):H===3?M.windowOptions.setWinLines?q===80?2:q===132?1:0:0:H===6?V(P.origin):H===7?V(P.wraparound):H===8?3:H===9?V(L==="X10"):H===12?V(M.cursorBlink):H===25?V(!$.isCursorHidden):H===45?V(P.reverseWraparound):H===66?V(P.applicationKeypad):H===67?4:H===1e3?V(L==="VT200"):H===1002?V(L==="DRAG"):H===1003?V(L==="ANY"):H===1004?V(P.sendFocus):H===1005?4:H===1006?V(U==="SGR"):H===1015?4:H===1016?V(U==="SGR_PIXELS"):H===1048?1:H===47||H===1047||H===1049?V(ie===I):H===2004?V(P.bracketedPasteMode):0,$.triggerDataEvent(`${p.C0.ESC}[${T?"":"?"}${Q};${j}$y`),!0;var Q,j}_updateAttrColor(b,T,P,L,U){return T===2?(b|=50331648,b&=-16777216,b|=_.AttributeData.fromColorRGB([P,L,U])):T===5&&(b&=-50331904,b|=33554432|255&P),b}_extractColor(b,T,P){const L=[0,0,-1,0,0,0];let U=0,$=0;do{if(L[$+U]=b.params[T+$],b.hasSubParams(T+$)){const X=b.getSubParams(T+$);let q=0;do L[1]===5&&(U=1),L[$+q+1+U]=X[q];while(++q<X.length&&q+$+1+U<L.length);break}if(L[1]===5&&$+U>=2||L[1]===2&&$+U>=5)break;L[1]&&(U=1)}while(++$+T<b.length&&$+U<L.length);for(let X=2;X<L.length;++X)L[X]===-1&&(L[X]=0);switch(L[0]){case 38:P.fg=this._updateAttrColor(P.fg,L[1],L[3],L[4],L[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,L[1],L[3],L[4],L[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,L[1],L[3],L[4],L[5])}return $}_processUnderline(b,T){T.extended=T.extended.clone(),(!~b||b>5)&&(b=1),T.extended.underlineStyle=b,T.fg|=268435456,b===0&&(T.fg&=-268435457),T.updateExtended()}_processSGR0(b){b.fg=f.DEFAULT_ATTR_DATA.fg,b.bg=f.DEFAULT_ATTR_DATA.bg,b.extended=b.extended.clone(),b.extended.underlineStyle=0,b.extended.underlineColor&=-67108864,b.updateExtended()}charAttributes(b){if(b.length===1&&b.params[0]===0)return this._processSGR0(this._curAttrData),!0;const T=b.length;let P;const L=this._curAttrData;for(let U=0;U<T;U++)P=b.params[U],P>=30&&P<=37?(L.fg&=-50331904,L.fg|=16777216|P-30):P>=40&&P<=47?(L.bg&=-50331904,L.bg|=16777216|P-40):P>=90&&P<=97?(L.fg&=-50331904,L.fg|=16777224|P-90):P>=100&&P<=107?(L.bg&=-50331904,L.bg|=16777224|P-100):P===0?this._processSGR0(L):P===1?L.fg|=134217728:P===3?L.bg|=67108864:P===4?(L.fg|=268435456,this._processUnderline(b.hasSubParams(U)?b.getSubParams(U)[0]:1,L)):P===5?L.fg|=536870912:P===7?L.fg|=67108864:P===8?L.fg|=1073741824:P===9?L.fg|=2147483648:P===2?L.bg|=134217728:P===21?this._processUnderline(2,L):P===22?(L.fg&=-134217729,L.bg&=-134217729):P===23?L.bg&=-67108865:P===24?(L.fg&=-268435457,this._processUnderline(0,L)):P===25?L.fg&=-536870913:P===27?L.fg&=-67108865:P===28?L.fg&=-1073741825:P===29?L.fg&=2147483647:P===39?(L.fg&=-67108864,L.fg|=16777215&f.DEFAULT_ATTR_DATA.fg):P===49?(L.bg&=-67108864,L.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?U+=this._extractColor(b,U,L):P===53?L.bg|=1073741824:P===55?L.bg&=-1073741825:P===59?(L.extended=L.extended.clone(),L.extended.underlineColor=-1,L.updateExtended()):P===100?(L.fg&=-67108864,L.fg|=16777215&f.DEFAULT_ATTR_DATA.fg,L.bg&=-67108864,L.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(b){switch(b.params[0]){case 5:this._coreService.triggerDataEvent(`${p.C0.ESC}[0n`);break;case 6:const T=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[${T};${P}R`)}return!0}deviceStatusPrivate(b){if(b.params[0]===6){const T=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[?${T};${P}R`)}return!0}softReset(b){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(b){const T=b.params[0]||1;switch(T){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=T%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(b){const T=b.params[0]||1;let P;return(b.length<2||(P=b.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>T&&(this._activeBuffer.scrollTop=T-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(b){if(!A(b.params[0],this._optionsService.rawOptions.windowOptions))return!0;const T=b.length>1?b.params[1]:0;switch(b.params[0]){case 14:T!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${p.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:T!==0&&T!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),T!==0&&T!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:T!==0&&T!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),T!==0&&T!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(b){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(b){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(b){return this._windowTitle=b,this._onTitleChange.fire(b),!0}setIconName(b){return this._iconName=b,!0}setOrReportIndexedColor(b){const T=[],P=b.split(";");for(;P.length>1;){const L=P.shift(),U=P.shift();if(/^\d+$/.exec(L)){const $=parseInt(L);if(N($))if(U==="?")T.push({type:0,index:$});else{const X=(0,g.parseColor)(U);X&&T.push({type:1,index:$,color:X})}}}return T.length&&this._onColor.fire(T),!0}setHyperlink(b){const T=b.split(";");return!(T.length<2)&&(T[1]?this._createHyperlink(T[0],T[1]):!T[0]&&this._finishHyperlink())}_createHyperlink(b,T){this._getCurrentLinkId()&&this._finishHyperlink();const P=b.split(":");let L;const U=P.findIndex($=>$.startsWith("id="));return U!==-1&&(L=P[U].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:L,uri:T}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(b,T){const P=b.split(";");for(let L=0;L<P.length&&!(T>=this._specialColors.length);++L,++T)if(P[L]==="?")this._onColor.fire([{type:0,index:this._specialColors[T]}]);else{const U=(0,g.parseColor)(P[L]);U&&this._onColor.fire([{type:1,index:this._specialColors[T],color:U}])}return!0}setOrReportFgColor(b){return this._setOrReportSpecialColor(b,0)}setOrReportBgColor(b){return this._setOrReportSpecialColor(b,1)}setOrReportCursorColor(b){return this._setOrReportSpecialColor(b,2)}restoreIndexedColor(b){if(!b)return this._onColor.fire([{type:2}]),!0;const T=[],P=b.split(";");for(let L=0;L<P.length;++L)if(/^\d+$/.exec(P[L])){const U=parseInt(P[L]);N(U)&&T.push({type:2,index:U})}return T.length&&this._onColor.fire(T),!0}restoreFgColor(b){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(b){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(b){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(b){return b.length!==2?(this.selectDefaultCharset(),!0):(b[0]==="/"||this._charsetService.setgCharset(E[b[0]],v.CHARSETS[b[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const b=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,b,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(b){return this._charsetService.setgLevel(b),!0}screenAlignmentPattern(){const b=new h.CellData;b.content=4194373,b.fg=this._curAttrData.fg,b.bg=this._curAttrData.bg,this._setCursor(0,0);for(let T=0;T<this._bufferService.rows;++T){const P=this._activeBuffer.ybase+this._activeBuffer.y+T,L=this._activeBuffer.lines.get(P);L&&(L.fill(b),L.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(b,T){const P=this._bufferService.buffer,L=this._optionsService.rawOptions;return(U=>(this._coreService.triggerDataEvent(`${p.C0.ESC}${U}${p.C0.ESC}\\`),!0))(b==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:b==='"p'?'P1$r61;1"p':b==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:b==="m"?"P1$r0m":b===" q"?`P1$r${{block:2,underline:4,bar:6}[L.cursorStyle]-(L.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(b,T){this._dirtyRowTracker.markRangeDirty(b,T)}}n.InputHandler=B;let F=class{constructor(z){this._bufferService=z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(z){z<this.start?this.start=z:z>this.end&&(this.end=z)}markRangeDirty(z,b){z>b&&(O=z,z=b,b=O),z<this.start&&(this.start=z),b>this.end&&(this.end=b)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function N(z){return 0<=z&&z<256}F=d([m(0,S.IBufferService)],F)},844:(u,n)=>{function o(d){for(const m of d)m.dispose();d.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.MutableDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const m=this._disposables.indexOf(d);m!==-1&&this._disposables.splice(m,1)}},n.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var m;this._isDisposed||d===this._value||((m=this._value)===null||m===void 0||m.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},n.toDisposable=function(d){return{dispose:d}},n.disposeArray=o,n.getDisposeArrayDisposable=function(d){return{dispose:()=>o(d)}}},1505:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FourKeyMap=n.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(m,p,v){this._data[m]||(this._data[m]={}),this._data[m][p]=v}get(m,p){return this._data[m]?this._data[m][p]:void 0}clear(){this._data={}}}n.TwoKeyMap=o,n.FourKeyMap=class{constructor(){this._data=new o}set(d,m,p,v,C){this._data.get(d,m)||this._data.set(d,m,new o),this._data.get(d,m).set(p,v,C)}get(d,m,p,v){var C;return(C=this._data.get(d,m))===null||C===void 0?void 0:C.get(p,v)}clear(){this._data.clear()}}},6114:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isChromeOS=n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.getSafariVersion=n.isSafari=n.isLegacyEdge=n.isFirefox=n.isNode=void 0,n.isNode=typeof navigator>"u";const o=n.isNode?"node":navigator.userAgent,d=n.isNode?"node":navigator.platform;n.isFirefox=o.includes("Firefox"),n.isLegacyEdge=o.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(o),n.getSafariVersion=function(){if(!n.isSafari)return 0;const m=o.match(/Version\/(\d+)/);return m===null||m.length<2?0:parseInt(m[1])},n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),n.isIpad=d==="iPad",n.isIphone=d==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),n.isLinux=d.indexOf("Linux")>=0,n.isChromeOS=/\bCrOS\b/.test(o)},6106:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SortedList=void 0;let o=0;n.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(o=this._search(this._getKey(d)),this._array.splice(o,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const m=this._getKey(d);if(m===void 0||(o=this._search(m),o===-1)||this._getKey(this._array[o])!==m)return!1;do if(this._array[o]===d)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===m);return!1}*getKeyIterator(d){if(this._array.length!==0&&(o=this._search(d),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===d))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===d)}forEachByKey(d,m){if(this._array.length!==0&&(o=this._search(d),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===d))do m(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===d)}values(){return[...this._array].values()}_search(d){let m=0,p=this._array.length-1;for(;p>=m;){let v=m+p>>1;const C=this._getKey(this._array[v]);if(C>d)p=v-1;else{if(!(C<d)){for(;v>0&&this._getKey(this._array[v-1])===d;)v--;return v}m=v+1}}return m}}},7226:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DebouncedIdleTask=n.IdleTaskQueue=n.PriorityTaskQueue=void 0;const d=o(6114);class m{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let w=0,y=0,f=C.timeRemaining(),c=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),y=Math.max(w,y),c=C.timeRemaining(),1.5*y>c)return f-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(f-w))}ms`),void this._start();f=c}this.clear()}}class p extends m{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const w=Date.now()+C;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}n.PriorityTaskQueue=p,n.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends m{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:p,n.DebouncedIdleTask=class{constructor(){this._queue=new n.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.updateWindowsModeWrappedState=void 0;const d=o(643);n.updateWindowsModeWrappedState=function(m){const p=m.buffer.lines.get(m.buffer.ybase+m.buffer.y-1),v=p?.get(m.cols-1),C=m.buffer.lines.get(m.buffer.ybase+m.buffer.y);C&&v&&(C.isWrapped=v[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&v[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(p){return[p>>>16&255,p>>>8&255,255&p]}static fromColorRGB(p){return(255&p[0])<<16|(255&p[1])<<8|255&p[2]}clone(){const p=new o;return p.fg=this.fg,p.bg=this.bg,p.extended=this.extended.clone(),p}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}n.AttributeData=o;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(p){this._ext=p}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(p){this._ext&=-469762049,this._ext|=p<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(p){this._ext&=-67108864,this._ext|=67108863&p}get urlId(){return this._urlId}set urlId(p){this._urlId=p}constructor(p=0,v=0){this._ext=0,this._urlId=0,this._ext=p,this._urlId=v}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}n.ExtendedAttrs=d},9092:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.MAX_BUFFER_SIZE=void 0;const d=o(6349),m=o(7226),p=o(3734),v=o(8437),C=o(4634),w=o(511),y=o(643),f=o(4863),c=o(7116);n.MAX_BUFFER_SIZE=4294967295,n.Buffer=class{constructor(l,h,_){this._hasScrollback=l,this._optionsService=h,this._bufferService=_,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new m.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new p.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new p.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,h){return new v.BufferLine(this._bufferService.cols,this.getNullCell(l),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const h=l+this._optionsService.rawOptions.scrollback;return h>n.MAX_BUFFER_SIZE?n.MAX_BUFFER_SIZE:h}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=v.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,h){const _=this.getNullCell(v.DEFAULT_ATTR_DATA);let S=0;const x=this._getCorrectBufferLength(h);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<l)for(let g=0;g<this.lines.length;g++)S+=+this.lines.get(g).resize(l,_);let R=0;if(this._rows<h)for(let g=this._rows;g<h;g++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(l,_)):this.ybase>0&&this.lines.length<=this.ybase+this.y+R+1?(this.ybase--,R++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(l,_)));else for(let g=this._rows;g>h;g--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const g=this.lines.length-x;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=x}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,h-1),R&&(this.y+=R),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(l,h),this._cols>l))for(let R=0;R<this.lines.length;R++)S+=+this.lines.get(R).resize(l,_);this._cols=l,this._rows=h,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,h){this._cols!==l&&(l>this._cols?this._reflowLarger(l,h):this._reflowSmaller(l,h))}_reflowLarger(l,h){const _=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(_.length>0){const S=(0,C.reflowLargerCreateNewLayout)(this.lines,_);(0,C.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(l,h,S.countRemoved)}}_reflowLargerAdjustViewport(l,h,_){const S=this.getNullCell(v.DEFAULT_ATTR_DATA);let x=_;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new v.BufferLine(l,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)}_reflowSmaller(l,h){const _=this.getNullCell(v.DEFAULT_ATTR_DATA),S=[];let x=0;for(let R=this.lines.length-1;R>=0;R--){let g=this.lines.get(R);if(!g||!g.isWrapped&&g.getTrimmedLength()<=l)continue;const E=[g];for(;g.isWrapped&&R>0;)g=this.lines.get(--R),E.unshift(g);const k=this.ybase+this.y;if(k>=R&&k<R+E.length)continue;const A=E[E.length-1].getTrimmedLength(),D=(0,C.reflowSmallerGetNewLineLengths)(E,this._cols,l),O=D.length-E.length;let B;B=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const F=[];for(let L=0;L<O;L++){const U=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);F.push(U)}F.length>0&&(S.push({start:R+E.length+x,newLines:F}),x+=F.length),E.push(...F);let N=D.length-1,z=D[N];z===0&&(N--,z=D[N]);let b=E.length-O-1,T=A;for(;b>=0;){const L=Math.min(T,z);if(E[N]===void 0)break;if(E[N].copyCellsFrom(E[b],T-L,z-L,L,!0),z-=L,z===0&&(N--,z=D[N]),T-=L,T===0){b--;const U=Math.max(b,0);T=(0,C.getWrappedLineTrimmedLength)(E,U,this._cols)}}for(let L=0;L<E.length;L++)D[L]<l&&E[L].setCell(D[L],_);let P=O-B;for(;P-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+h-1)}if(S.length>0){const R=[],g=[];for(let N=0;N<this.lines.length;N++)g.push(this.lines.get(N));const E=this.lines.length;let k=E-1,A=0,D=S[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let O=0;for(let N=Math.min(this.lines.maxLength-1,E+x-1);N>=0;N--)if(D&&D.start>k+O){for(let z=D.newLines.length-1;z>=0;z--)this.lines.set(N--,D.newLines[z]);N++,R.push({index:k+1,amount:D.newLines.length}),O+=D.newLines.length,D=S[++A]}else this.lines.set(N,g[k--]);let B=0;for(let N=R.length-1;N>=0;N--)R[N].index+=B,this.lines.onInsertEmitter.fire(R[N]),B+=R[N].amount;const F=Math.max(0,E+x-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(l,h,_=0,S){const x=this.lines.get(l);return x?x.translateToString(h,_,S):""}getWrappedRangeForLine(l){let h=l,_=l;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;_+1<this.lines.length&&this.lines.get(_+1).isWrapped;)_++;return{first:h,last:_}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===l&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const h=new f.Marker(l);return this.markers.push(h),h.register(this.lines.onTrim(_=>{h.line-=_,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(_=>{h.line>=_.index&&(h.line+=_.amount)})),h.register(this.lines.onDelete(_=>{h.line>=_.index&&h.line<_.index+_.amount&&h.dispose(),h.line>_.index&&(h.line-=_.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLine=n.DEFAULT_ATTR_DATA=void 0;const d=o(3734),m=o(511),p=o(643),v=o(482);n.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let C=0;class w{constructor(f,c,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*f);const h=c||m.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]);for(let _=0;_<f;++_)this.setCell(_,h);this.length=f}get(f){const c=this._data[3*f+0],l=2097151&c;return[this._data[3*f+1],2097152&c?this._combined[f]:l?(0,v.stringFromCodePoint)(l):"",c>>22,2097152&c?this._combined[f].charCodeAt(this._combined[f].length-1):l]}set(f,c){this._data[3*f+1]=c[p.CHAR_DATA_ATTR_INDEX],c[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[f]=c[1],this._data[3*f+0]=2097152|f|c[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*f+0]=c[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[p.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(f){return this._data[3*f+0]>>22}hasWidth(f){return 12582912&this._data[3*f+0]}getFg(f){return this._data[3*f+1]}getBg(f){return this._data[3*f+2]}hasContent(f){return 4194303&this._data[3*f+0]}getCodePoint(f){const c=this._data[3*f+0];return 2097152&c?this._combined[f].charCodeAt(this._combined[f].length-1):2097151&c}isCombined(f){return 2097152&this._data[3*f+0]}getString(f){const c=this._data[3*f+0];return 2097152&c?this._combined[f]:2097151&c?(0,v.stringFromCodePoint)(2097151&c):""}isProtected(f){return 536870912&this._data[3*f+2]}loadCell(f,c){return C=3*f,c.content=this._data[C+0],c.fg=this._data[C+1],c.bg=this._data[C+2],2097152&c.content&&(c.combinedData=this._combined[f]),268435456&c.bg&&(c.extended=this._extendedAttrs[f]),c}setCell(f,c){2097152&c.content&&(this._combined[f]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[f]=c.extended),this._data[3*f+0]=c.content,this._data[3*f+1]=c.fg,this._data[3*f+2]=c.bg}setCellFromCodePoint(f,c,l,h,_,S){268435456&_&&(this._extendedAttrs[f]=S),this._data[3*f+0]=c|l<<22,this._data[3*f+1]=h,this._data[3*f+2]=_}addCodepointToCell(f,c){let l=this._data[3*f+0];2097152&l?this._combined[f]+=(0,v.stringFromCodePoint)(c):(2097151&l?(this._combined[f]=(0,v.stringFromCodePoint)(2097151&l)+(0,v.stringFromCodePoint)(c),l&=-2097152,l|=2097152):l=c|4194304,this._data[3*f+0]=l)}insertCells(f,c,l,h){if((f%=this.length)&&this.getWidth(f-1)===2&&this.setCellFromCodePoint(f-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new d.ExtendedAttrs),c<this.length-f){const _=new m.CellData;for(let S=this.length-f-c-1;S>=0;--S)this.setCell(f+c+S,this.loadCell(f+S,_));for(let S=0;S<c;++S)this.setCell(f+S,l)}else for(let _=f;_<this.length;++_)this.setCell(_,l);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new d.ExtendedAttrs)}deleteCells(f,c,l,h){if(f%=this.length,c<this.length-f){const _=new m.CellData;for(let S=0;S<this.length-f-c;++S)this.setCell(f+S,this.loadCell(f+c+S,_));for(let S=this.length-c;S<this.length;++S)this.setCell(S,l)}else for(let _=f;_<this.length;++_)this.setCell(_,l);f&&this.getWidth(f-1)===2&&this.setCellFromCodePoint(f-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new d.ExtendedAttrs),this.getWidth(f)!==0||this.hasContent(f)||this.setCellFromCodePoint(f,0,1,h?.fg||0,h?.bg||0,h?.extended||new d.ExtendedAttrs)}replaceCells(f,c,l,h,_=!1){if(_)for(f&&this.getWidth(f-1)===2&&!this.isProtected(f-1)&&this.setCellFromCodePoint(f-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new d.ExtendedAttrs),c<this.length&&this.getWidth(c-1)===2&&!this.isProtected(c)&&this.setCellFromCodePoint(c,0,1,h?.fg||0,h?.bg||0,h?.extended||new d.ExtendedAttrs);f<c&&f<this.length;)this.isProtected(f)||this.setCell(f,l),f++;else for(f&&this.getWidth(f-1)===2&&this.setCellFromCodePoint(f-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new d.ExtendedAttrs),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c,0,1,h?.fg||0,h?.bg||0,h?.extended||new d.ExtendedAttrs);f<c&&f<this.length;)this.setCell(f++,l)}resize(f,c){if(f===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*f;if(f>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const h=new Uint32Array(l);h.set(this._data),this._data=h}for(let h=this.length;h<f;++h)this.setCell(h,c)}else{this._data=this._data.subarray(0,l);const h=Object.keys(this._combined);for(let S=0;S<h.length;S++){const x=parseInt(h[S],10);x>=f&&delete this._combined[x]}const _=Object.keys(this._extendedAttrs);for(let S=0;S<_.length;S++){const x=parseInt(_[S],10);x>=f&&delete this._extendedAttrs[x]}}return this.length=f,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const f=new Uint32Array(this._data.length);return f.set(this._data),this._data=f,1}return 0}fill(f,c=!1){if(c)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,f);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,f)}}copyFrom(f){this.length!==f.length?this._data=new Uint32Array(f._data):this._data.set(f._data),this.length=f.length,this._combined={};for(const c in f._combined)this._combined[c]=f._combined[c];this._extendedAttrs={};for(const c in f._extendedAttrs)this._extendedAttrs[c]=f._extendedAttrs[c];this.isWrapped=f.isWrapped}clone(){const f=new w(0);f._data=new Uint32Array(this._data),f.length=this.length;for(const c in this._combined)f._combined[c]=this._combined[c];for(const c in this._extendedAttrs)f._extendedAttrs[c]=this._extendedAttrs[c];return f.isWrapped=this.isWrapped,f}getTrimmedLength(){for(let f=this.length-1;f>=0;--f)if(4194303&this._data[3*f+0])return f+(this._data[3*f+0]>>22);return 0}getNoBgTrimmedLength(){for(let f=this.length-1;f>=0;--f)if(4194303&this._data[3*f+0]||50331648&this._data[3*f+2])return f+(this._data[3*f+0]>>22);return 0}copyCellsFrom(f,c,l,h,_){const S=f._data;if(_)for(let R=h-1;R>=0;R--){for(let g=0;g<3;g++)this._data[3*(l+R)+g]=S[3*(c+R)+g];268435456&S[3*(c+R)+2]&&(this._extendedAttrs[l+R]=f._extendedAttrs[c+R])}else for(let R=0;R<h;R++){for(let g=0;g<3;g++)this._data[3*(l+R)+g]=S[3*(c+R)+g];268435456&S[3*(c+R)+2]&&(this._extendedAttrs[l+R]=f._extendedAttrs[c+R])}const x=Object.keys(f._combined);for(let R=0;R<x.length;R++){const g=parseInt(x[R],10);g>=c&&(this._combined[g-c+l]=f._combined[g])}}translateToString(f=!1,c=0,l=this.length){f&&(l=Math.min(l,this.getTrimmedLength()));let h="";for(;c<l;){const _=this._data[3*c+0],S=2097151&_;h+=2097152&_?this._combined[c]:S?(0,v.stringFromCodePoint)(S):p.WHITESPACE_CELL_CHAR,c+=_>>22||1}return h}}n.BufferLine=w},4841:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getRangeLength=void 0,n.getRangeLength=function(o,d){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return d*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(u,n)=>{function o(d,m,p){if(m===d.length-1)return d[m].getTrimmedLength();const v=!d[m].hasContent(p-1)&&d[m].getWidth(p-1)===1,C=d[m+1].getWidth(0)===2;return v&&C?p-1:p}Object.defineProperty(n,"__esModule",{value:!0}),n.getWrappedLineTrimmedLength=n.reflowSmallerGetNewLineLengths=n.reflowLargerApplyNewLayout=n.reflowLargerCreateNewLayout=n.reflowLargerGetLinesToRemove=void 0,n.reflowLargerGetLinesToRemove=function(d,m,p,v,C){const w=[];for(let y=0;y<d.length-1;y++){let f=y,c=d.get(++f);if(!c.isWrapped)continue;const l=[d.get(y)];for(;f<d.length&&c.isWrapped;)l.push(c),c=d.get(++f);if(v>=y&&v<f){y+=l.length-1;continue}let h=0,_=o(l,h,m),S=1,x=0;for(;S<l.length;){const g=o(l,S,m),E=g-x,k=p-_,A=Math.min(E,k);l[h].copyCellsFrom(l[S],x,_,A,!1),_+=A,_===p&&(h++,_=0),x+=A,x===g&&(S++,x=0),_===0&&h!==0&&l[h-1].getWidth(p-1)===2&&(l[h].copyCellsFrom(l[h-1],p-1,_++,1,!1),l[h-1].setCell(p-1,C))}l[h].replaceCells(_,p,C);let R=0;for(let g=l.length-1;g>0&&(g>h||l[g].getTrimmedLength()===0);g--)R++;R>0&&(w.push(y+l.length-R),w.push(R)),y+=l.length-1}return w},n.reflowLargerCreateNewLayout=function(d,m){const p=[];let v=0,C=m[v],w=0;for(let y=0;y<d.length;y++)if(C===y){const f=m[++v];d.onDeleteEmitter.fire({index:y-w,amount:f}),y+=f-1,w+=f,C=m[++v]}else p.push(y);return{layout:p,countRemoved:w}},n.reflowLargerApplyNewLayout=function(d,m){const p=[];for(let v=0;v<m.length;v++)p.push(d.get(m[v]));for(let v=0;v<p.length;v++)d.set(v,p[v]);d.length=m.length},n.reflowSmallerGetNewLineLengths=function(d,m,p){const v=[],C=d.map((c,l)=>o(d,l,m)).reduce((c,l)=>c+l);let w=0,y=0,f=0;for(;f<C;){if(C-f<p){v.push(C-f);break}w+=p;const c=o(d,y,m);w>c&&(w-=c,y++);const l=d[y].getWidth(w-1)===2;l&&w--;const h=l?p-1:p;v.push(h),f+=h}return v},n.getWrappedLineTrimmedLength=o},5295:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferSet=void 0;const d=o(8460),m=o(844),p=o(9092);class v extends m.Disposable{constructor(w,y){super(),this._optionsService=w,this._bufferService=y,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new p.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new p.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,y){this._normal.resize(w,y),this._alt.resize(w,y),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}n.BufferSet=v},511:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;const d=o(482),m=o(643),p=o(3734);class v extends p.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new p.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const y=new v;return y.setFromCharData(w),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[m.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(w[m.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(w[m.CHAR_DATA_CHAR_INDEX].length===2){const f=w[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=f&&f<=56319){const c=w[m.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=c&&c<=57343?this.content=1024*(f-55296)+c-56320+65536|w[m.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=w[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[m.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=w[m.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[m.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.CellData=v},643:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_EXT=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=0,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.DEFAULT_EXT=0,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},4863:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Marker=void 0;const d=o(8460),m=o(844);class p{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=p._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,m.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}n.Marker=p,p._nextId=1},7116:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_CHARSET=n.CHARSETS=void 0,n.CHARSETS={},n.DEFAULT_CHARSET=n.CHARSETS.B,n.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},n.CHARSETS.A={"#":""},n.CHARSETS.B=void 0,n.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},n.CHARSETS.C=n.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},n.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},n.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.E=n.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},n.CHARSETS.H=n.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},n.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(u,n)=>{var o,d,m;Object.defineProperty(n,"__esModule",{value:!0}),n.C1_ESCAPED=n.C1=n.C0=void 0,function(p){p.NUL="\0",p.SOH="",p.STX="",p.ETX="",p.EOT="",p.ENQ="",p.ACK="",p.BEL="\x07",p.BS="\b",p.HT="	",p.LF=`
`,p.VT="\v",p.FF="\f",p.CR="\r",p.SO="",p.SI="",p.DLE="",p.DC1="",p.DC2="",p.DC3="",p.DC4="",p.NAK="",p.SYN="",p.ETB="",p.CAN="",p.EM="",p.SUB="",p.ESC="\x1B",p.FS="",p.GS="",p.RS="",p.US="",p.SP=" ",p.DEL=""}(o||(n.C0=o={})),function(p){p.PAD="",p.HOP="",p.BPH="",p.NBH="",p.IND="",p.NEL="",p.SSA="",p.ESA="",p.HTS="",p.HTJ="",p.VTS="",p.PLD="",p.PLU="",p.RI="",p.SS2="",p.SS3="",p.DCS="",p.PU1="",p.PU2="",p.STS="",p.CCH="",p.MW="",p.SPA="",p.EPA="",p.SOS="",p.SGCI="",p.SCI="",p.CSI="",p.ST="",p.OSC="",p.PM="",p.APC=""}(d||(n.C1=d={})),function(p){p.ST=`${o.ESC}\\`}(m||(n.C1_ESCAPED=m={}))},7399:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.evaluateKeyboardEvent=void 0;const d=o(2584),m={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};n.evaluateKeyboardEvent=function(p,v,C,w){const y={type:0,cancel:!1,key:void 0},f=(p.shiftKey?1:0)|(p.altKey?2:0)|(p.ctrlKey?4:0)|(p.metaKey?8:0);switch(p.keyCode){case 0:p.key==="UIKeyInputUpArrow"?y.key=v?d.C0.ESC+"OA":d.C0.ESC+"[A":p.key==="UIKeyInputLeftArrow"?y.key=v?d.C0.ESC+"OD":d.C0.ESC+"[D":p.key==="UIKeyInputRightArrow"?y.key=v?d.C0.ESC+"OC":d.C0.ESC+"[C":p.key==="UIKeyInputDownArrow"&&(y.key=v?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(p.altKey){y.key=d.C0.ESC+d.C0.DEL;break}y.key=d.C0.DEL;break;case 9:if(p.shiftKey){y.key=d.C0.ESC+"[Z";break}y.key=d.C0.HT,y.cancel=!0;break;case 13:y.key=p.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,y.cancel=!0;break;case 27:y.key=d.C0.ESC,p.altKey&&(y.key=d.C0.ESC+d.C0.ESC),y.cancel=!0;break;case 37:if(p.metaKey)break;f?(y.key=d.C0.ESC+"[1;"+(f+1)+"D",y.key===d.C0.ESC+"[1;3D"&&(y.key=d.C0.ESC+(C?"b":"[1;5D"))):y.key=v?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(p.metaKey)break;f?(y.key=d.C0.ESC+"[1;"+(f+1)+"C",y.key===d.C0.ESC+"[1;3C"&&(y.key=d.C0.ESC+(C?"f":"[1;5C"))):y.key=v?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(p.metaKey)break;f?(y.key=d.C0.ESC+"[1;"+(f+1)+"A",C||y.key!==d.C0.ESC+"[1;3A"||(y.key=d.C0.ESC+"[1;5A")):y.key=v?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(p.metaKey)break;f?(y.key=d.C0.ESC+"[1;"+(f+1)+"B",C||y.key!==d.C0.ESC+"[1;3B"||(y.key=d.C0.ESC+"[1;5B")):y.key=v?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:p.shiftKey||p.ctrlKey||(y.key=d.C0.ESC+"[2~");break;case 46:y.key=f?d.C0.ESC+"[3;"+(f+1)+"~":d.C0.ESC+"[3~";break;case 36:y.key=f?d.C0.ESC+"[1;"+(f+1)+"H":v?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:y.key=f?d.C0.ESC+"[1;"+(f+1)+"F":v?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:p.shiftKey?y.type=2:p.ctrlKey?y.key=d.C0.ESC+"[5;"+(f+1)+"~":y.key=d.C0.ESC+"[5~";break;case 34:p.shiftKey?y.type=3:p.ctrlKey?y.key=d.C0.ESC+"[6;"+(f+1)+"~":y.key=d.C0.ESC+"[6~";break;case 112:y.key=f?d.C0.ESC+"[1;"+(f+1)+"P":d.C0.ESC+"OP";break;case 113:y.key=f?d.C0.ESC+"[1;"+(f+1)+"Q":d.C0.ESC+"OQ";break;case 114:y.key=f?d.C0.ESC+"[1;"+(f+1)+"R":d.C0.ESC+"OR";break;case 115:y.key=f?d.C0.ESC+"[1;"+(f+1)+"S":d.C0.ESC+"OS";break;case 116:y.key=f?d.C0.ESC+"[15;"+(f+1)+"~":d.C0.ESC+"[15~";break;case 117:y.key=f?d.C0.ESC+"[17;"+(f+1)+"~":d.C0.ESC+"[17~";break;case 118:y.key=f?d.C0.ESC+"[18;"+(f+1)+"~":d.C0.ESC+"[18~";break;case 119:y.key=f?d.C0.ESC+"[19;"+(f+1)+"~":d.C0.ESC+"[19~";break;case 120:y.key=f?d.C0.ESC+"[20;"+(f+1)+"~":d.C0.ESC+"[20~";break;case 121:y.key=f?d.C0.ESC+"[21;"+(f+1)+"~":d.C0.ESC+"[21~";break;case 122:y.key=f?d.C0.ESC+"[23;"+(f+1)+"~":d.C0.ESC+"[23~";break;case 123:y.key=f?d.C0.ESC+"[24;"+(f+1)+"~":d.C0.ESC+"[24~";break;default:if(!p.ctrlKey||p.shiftKey||p.altKey||p.metaKey)if(C&&!w||!p.altKey||p.metaKey)!C||p.altKey||p.ctrlKey||p.shiftKey||!p.metaKey?p.key&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&p.keyCode>=48&&p.key.length===1?y.key=p.key:p.key&&p.ctrlKey&&(p.key==="_"&&(y.key=d.C0.US),p.key==="@"&&(y.key=d.C0.NUL)):p.keyCode===65&&(y.type=1);else{const c=m[p.keyCode],l=c?.[p.shiftKey?1:0];if(l)y.key=d.C0.ESC+l;else if(p.keyCode>=65&&p.keyCode<=90){const h=p.ctrlKey?p.keyCode-64:p.keyCode+32;let _=String.fromCharCode(h);p.shiftKey&&(_=_.toUpperCase()),y.key=d.C0.ESC+_}else if(p.keyCode===32)y.key=d.C0.ESC+(p.ctrlKey?d.C0.NUL:" ");else if(p.key==="Dead"&&p.code.startsWith("Key")){let h=p.code.slice(3,4);p.shiftKey||(h=h.toLowerCase()),y.key=d.C0.ESC+h,y.cancel=!0}}else p.keyCode>=65&&p.keyCode<=90?y.key=String.fromCharCode(p.keyCode-64):p.keyCode===32?y.key=d.C0.NUL:p.keyCode>=51&&p.keyCode<=55?y.key=String.fromCharCode(p.keyCode-51+27):p.keyCode===56?y.key=d.C0.DEL:p.keyCode===219?y.key=d.C0.ESC:p.keyCode===220?y.key=d.C0.FS:p.keyCode===221&&(y.key=d.C0.GS)}return y}},482:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},n.utf32ToString=function(o,d=0,m=o.length){let p="";for(let v=d;v<m;++v){let C=o[v];C>65535?(C-=65536,p+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):p+=String.fromCharCode(C)}return p},n.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,d){const m=o.length;if(!m)return 0;let p=0,v=0;if(this._interim){const C=o.charCodeAt(v++);56320<=C&&C<=57343?d[p++]=1024*(this._interim-55296)+C-56320+65536:(d[p++]=this._interim,d[p++]=C),this._interim=0}for(let C=v;C<m;++C){const w=o.charCodeAt(C);if(55296<=w&&w<=56319){if(++C>=m)return this._interim=w,p;const y=o.charCodeAt(C);56320<=y&&y<=57343?d[p++]=1024*(w-55296)+y-56320+65536:(d[p++]=w,d[p++]=y)}else w!==65279&&(d[p++]=w)}return p}},n.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,d){const m=o.length;if(!m)return 0;let p,v,C,w,y=0,f=0,c=0;if(this.interim[0]){let _=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let x,R=0;for(;(x=63&this.interim[++R])&&R<4;)S<<=6,S|=x;const g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=g-R;for(;c<E;){if(c>=m)return 0;if(x=o[c++],(192&x)!=128){c--,_=!0;break}this.interim[R++]=x,S<<=6,S|=63&x}_||(g===2?S<128?c--:d[y++]=S:g===3?S<2048||S>=55296&&S<=57343||S===65279||(d[y++]=S):S<65536||S>1114111||(d[y++]=S)),this.interim.fill(0)}const l=m-4;let h=c;for(;h<m;){for(;!(!(h<l)||128&(p=o[h])||128&(v=o[h+1])||128&(C=o[h+2])||128&(w=o[h+3]));)d[y++]=p,d[y++]=v,d[y++]=C,d[y++]=w,h+=4;if(p=o[h++],p<128)d[y++]=p;else if((224&p)==192){if(h>=m)return this.interim[0]=p,y;if(v=o[h++],(192&v)!=128){h--;continue}if(f=(31&p)<<6|63&v,f<128){h--;continue}d[y++]=f}else if((240&p)==224){if(h>=m)return this.interim[0]=p,y;if(v=o[h++],(192&v)!=128){h--;continue}if(h>=m)return this.interim[0]=p,this.interim[1]=v,y;if(C=o[h++],(192&C)!=128){h--;continue}if(f=(15&p)<<12|(63&v)<<6|63&C,f<2048||f>=55296&&f<=57343||f===65279)continue;d[y++]=f}else if((248&p)==240){if(h>=m)return this.interim[0]=p,y;if(v=o[h++],(192&v)!=128){h--;continue}if(h>=m)return this.interim[0]=p,this.interim[1]=v,y;if(C=o[h++],(192&C)!=128){h--;continue}if(h>=m)return this.interim[0]=p,this.interim[1]=v,this.interim[2]=C,y;if(w=o[h++],(192&w)!=128){h--;continue}if(f=(7&p)<<18|(63&v)<<12|(63&C)<<6|63&w,f<65536||f>1114111)continue;d[y++]=f}}return y}}},225:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeV6=void 0;const o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let m;n.UnicodeV6=class{constructor(){if(this.version="6",!m){m=new Uint8Array(65536),m.fill(1),m[0]=0,m.fill(0,1,32),m.fill(0,127,160),m.fill(2,4352,4448),m[9001]=2,m[9002]=2,m.fill(2,11904,42192),m[12351]=1,m.fill(2,44032,55204),m.fill(2,63744,64256),m.fill(2,65040,65050),m.fill(2,65072,65136),m.fill(2,65280,65377),m.fill(2,65504,65511);for(let p=0;p<o.length;++p)m.fill(0,o[p][0],o[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?m[p]:function(v,C){let w,y=0,f=C.length-1;if(v<C[0][0]||v>C[f][1])return!1;for(;f>=y;)if(w=y+f>>1,v>C[w][1])y=w+1;else{if(!(v<C[w][0]))return!0;f=w-1}return!1}(p,d)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1}}},5981:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WriteBuffer=void 0;const d=o(8460),m=o(844);class p extends m.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const f=this._callbacks.shift();f&&f()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w)}_innerWrite(C=0,w=!0){const y=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const f=this._writeBuffer[this._bufferOffset],c=this._action(f,w);if(c){const h=_=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(y,_);return void c.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(h)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=f.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}n.WriteBuffer=p},5941:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.toRgbString=n.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function m(p,v){const C=p.toString(16),w=C.length<2?"0"+C:C;switch(v){case 4:return C[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}n.parseColor=function(p){if(!p)return;let v=p.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const C=o.exec(v);if(C){const w=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/w*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/w*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/w*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),d.exec(v)&&[3,6,9,12].includes(v.length))){const C=v.length/3,w=[0,0,0];for(let y=0;y<3;++y){const f=parseInt(v.slice(C*y,C*y+C),16);w[y]=C===1?f<<4:C===2?f:C===3?f>>4:f>>8}return w}},n.toRgbString=function(p,v=16){const[C,w,y]=p;return`rgb:${m(C,v)}/${m(w,v)}/${m(y,v)}`}},5770:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PAYLOAD_LIMIT=void 0,n.PAYLOAD_LIMIT=1e7},6351:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DcsHandler=n.DcsParser=void 0;const d=o(482),m=o(8742),p=o(5770),v=[];n.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(w,y){this._handlers[w]===void 0&&(this._handlers[w]=[]);const f=this._handlers[w];return f.push(y),{dispose:()=>{const c=f.indexOf(y);c!==-1&&f.splice(c,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(w,y){if(this.reset(),this._ident=w,this._active=this._handlers[w]||v,this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(w,y,f){if(this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].put(w,y,f);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(w,y,f))}unhook(w,y=!0){if(this._active.length){let f=!1,c=this._active.length-1,l=!1;if(this._stack.paused&&(c=this._stack.loopPosition-1,f=y,l=this._stack.fallThrough,this._stack.paused=!1),!l&&f===!1){for(;c>=0&&(f=this._active[c].unhook(w),f!==!0);c--)if(f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!1,f;c--}for(;c>=0;c--)if(f=this._active[c].unhook(!1),f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!0,f}else this._handlerFb(this._ident,"UNHOOK",w);this._active=v,this._ident=0}};const C=new m.Params;C.addParam(0),n.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=C,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():C,this._data="",this._hitLimit=!1}put(w,y,f){this._hitLimit||(this._data+=(0,d.utf32ToString)(w,y,f),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let y=!1;if(this._hitLimit)y=!1;else if(w&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(f=>(this._params=C,this._data="",this._hitLimit=!1,f));return this._params=C,this._data="",this._hitLimit=!1,y}}},2015:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.EscapeSequenceParser=n.VT500_TRANSITION_TABLE=n.TransitionTable=void 0;const d=o(844),m=o(8742),p=o(6242),v=o(6351);class C{constructor(c){this.table=new Uint8Array(c)}setDefault(c,l){this.table.fill(c<<4|l)}add(c,l,h,_){this.table[l<<8|c]=h<<4|_}addMany(c,l,h,_){for(let S=0;S<c.length;S++)this.table[l<<8|c[S]]=h<<4|_}}n.TransitionTable=C;const w=160;n.VT500_TRANSITION_TABLE=function(){const f=new C(4095),c=Array.apply(null,Array(256)).map((R,g)=>g),l=(R,g)=>c.slice(R,g),h=l(32,127),_=l(0,24);_.push(25),_.push.apply(_,l(28,32));const S=l(0,14);let x;for(x in f.setDefault(1,0),f.addMany(h,0,2,0),S)f.addMany([24,26,153,154],x,3,0),f.addMany(l(128,144),x,3,0),f.addMany(l(144,152),x,3,0),f.add(156,x,0,0),f.add(27,x,11,1),f.add(157,x,4,8),f.addMany([152,158,159],x,0,7),f.add(155,x,11,3),f.add(144,x,11,9);return f.addMany(_,0,3,0),f.addMany(_,1,3,1),f.add(127,1,0,1),f.addMany(_,8,0,8),f.addMany(_,3,3,3),f.add(127,3,0,3),f.addMany(_,4,3,4),f.add(127,4,0,4),f.addMany(_,6,3,6),f.addMany(_,5,3,5),f.add(127,5,0,5),f.addMany(_,2,3,2),f.add(127,2,0,2),f.add(93,1,4,8),f.addMany(h,8,5,8),f.add(127,8,5,8),f.addMany([156,27,24,26,7],8,6,0),f.addMany(l(28,32),8,0,8),f.addMany([88,94,95],1,0,7),f.addMany(h,7,0,7),f.addMany(_,7,0,7),f.add(156,7,0,0),f.add(127,7,0,7),f.add(91,1,11,3),f.addMany(l(64,127),3,7,0),f.addMany(l(48,60),3,8,4),f.addMany([60,61,62,63],3,9,4),f.addMany(l(48,60),4,8,4),f.addMany(l(64,127),4,7,0),f.addMany([60,61,62,63],4,0,6),f.addMany(l(32,64),6,0,6),f.add(127,6,0,6),f.addMany(l(64,127),6,0,0),f.addMany(l(32,48),3,9,5),f.addMany(l(32,48),5,9,5),f.addMany(l(48,64),5,0,6),f.addMany(l(64,127),5,7,0),f.addMany(l(32,48),4,9,5),f.addMany(l(32,48),1,9,2),f.addMany(l(32,48),2,9,2),f.addMany(l(48,127),2,10,0),f.addMany(l(48,80),1,10,0),f.addMany(l(81,88),1,10,0),f.addMany([89,90,92],1,10,0),f.addMany(l(96,127),1,10,0),f.add(80,1,11,9),f.addMany(_,9,0,9),f.add(127,9,0,9),f.addMany(l(28,32),9,0,9),f.addMany(l(32,48),9,9,12),f.addMany(l(48,60),9,8,10),f.addMany([60,61,62,63],9,9,10),f.addMany(_,11,0,11),f.addMany(l(32,128),11,0,11),f.addMany(l(28,32),11,0,11),f.addMany(_,10,0,10),f.add(127,10,0,10),f.addMany(l(28,32),10,0,10),f.addMany(l(48,60),10,8,10),f.addMany([60,61,62,63],10,0,11),f.addMany(l(32,48),10,9,12),f.addMany(_,12,0,12),f.add(127,12,0,12),f.addMany(l(28,32),12,0,12),f.addMany(l(32,48),12,9,12),f.addMany(l(48,64),12,0,11),f.addMany(l(64,127),12,12,13),f.addMany(l(64,127),10,12,13),f.addMany(l(64,127),9,12,13),f.addMany(_,13,13,13),f.addMany(h,13,13,13),f.add(127,13,0,13),f.addMany([27,156,24,26],13,14,0),f.add(w,0,2,0),f.add(w,8,5,8),f.add(w,6,0,6),f.add(w,11,0,11),f.add(w,13,13,13),f}();class y extends d.Disposable{constructor(c=n.VT500_TRANSITION_TABLE){super(),this._transitions=c,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new m.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(l,h,_)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,h)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new p.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(c,l=[64,126]){let h=0;if(c.prefix){if(c.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=c.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(c.intermediates){if(c.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<c.intermediates.length;++S){const x=c.intermediates.charCodeAt(S);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=x}}if(c.final.length!==1)throw new Error("final must be a single byte");const _=c.final.charCodeAt(0);if(l[0]>_||_>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return h<<=8,h|=_,h}identToString(c){const l=[];for(;c;)l.push(String.fromCharCode(255&c)),c>>=8;return l.reverse().join("")}setPrintHandler(c){this._printHandler=c}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(c,l){const h=this._identifier(c,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);const _=this._escHandlers[h];return _.push(l),{dispose:()=>{const S=_.indexOf(l);S!==-1&&_.splice(S,1)}}}clearEscHandler(c){this._escHandlers[this._identifier(c,[48,126])]&&delete this._escHandlers[this._identifier(c,[48,126])]}setEscHandlerFallback(c){this._escHandlerFb=c}setExecuteHandler(c,l){this._executeHandlers[c.charCodeAt(0)]=l}clearExecuteHandler(c){this._executeHandlers[c.charCodeAt(0)]&&delete this._executeHandlers[c.charCodeAt(0)]}setExecuteHandlerFallback(c){this._executeHandlerFb=c}registerCsiHandler(c,l){const h=this._identifier(c);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);const _=this._csiHandlers[h];return _.push(l),{dispose:()=>{const S=_.indexOf(l);S!==-1&&_.splice(S,1)}}}clearCsiHandler(c){this._csiHandlers[this._identifier(c)]&&delete this._csiHandlers[this._identifier(c)]}setCsiHandlerFallback(c){this._csiHandlerFb=c}registerDcsHandler(c,l){return this._dcsParser.registerHandler(this._identifier(c),l)}clearDcsHandler(c){this._dcsParser.clearHandler(this._identifier(c))}setDcsHandlerFallback(c){this._dcsParser.setHandlerFallback(c)}registerOscHandler(c,l){return this._oscParser.registerHandler(c,l)}clearOscHandler(c){this._oscParser.clearHandler(c)}setOscHandlerFallback(c){this._oscParser.setHandlerFallback(c)}setErrorHandler(c){this._errorHandler=c}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(c,l,h,_,S){this._parseStack.state=c,this._parseStack.handlers=l,this._parseStack.handlerPos=h,this._parseStack.transition=_,this._parseStack.chunkPos=S}parse(c,l,h){let _,S=0,x=0,R=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const g=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&E>-1){for(;E>=0&&(_=g[E](this._params),_!==!0);E--)if(_ instanceof Promise)return this._parseStack.handlerPos=E,_}this._parseStack.handlers=[];break;case 4:if(h===!1&&E>-1){for(;E>=0&&(_=g[E](),_!==!0);E--)if(_ instanceof Promise)return this._parseStack.handlerPos=E,_}this._parseStack.handlers=[];break;case 6:if(S=c[this._parseStack.chunkPos],_=this._dcsParser.unhook(S!==24&&S!==26,h),_)return _;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=c[this._parseStack.chunkPos],_=this._oscParser.end(S!==24&&S!==26,h),_)return _;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=R;g<l;++g){switch(S=c[g],x=this._transitions.table[this.currentState<<8|(S<160?S:w)],x>>4){case 2:for(let O=g+1;;++O){if(O>=l||(S=c[O])<32||S>126&&S<w){this._printHandler(c,g,O),g=O-1;break}if(++O>=l||(S=c[O])<32||S>126&&S<w){this._printHandler(c,g,O),g=O-1;break}if(++O>=l||(S=c[O])<32||S>126&&S<w){this._printHandler(c,g,O),g=O-1;break}if(++O>=l||(S=c[O])<32||S>126&&S<w){this._printHandler(c,g,O),g=O-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|S];let k=E?E.length-1:-1;for(;k>=0&&(_=E[k](this._params),_!==!0);k--)if(_ instanceof Promise)return this._preserveStack(3,E,k,x,g),_;k<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingCodepoint=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++g<l&&(S=c[g])>47&&S<60);g--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const A=this._escHandlers[this._collect<<8|S];let D=A?A.length-1:-1;for(;D>=0&&(_=A[D](),_!==!0);D--)if(_ instanceof Promise)return this._preserveStack(4,A,D,x,g),_;D<0&&this._escHandlerFb(this._collect<<8|S),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let O=g+1;;++O)if(O>=l||(S=c[O])===24||S===26||S===27||S>127&&S<w){this._dcsParser.put(c,g,O),g=O-1;break}break;case 14:if(_=this._dcsParser.unhook(S!==24&&S!==26),_)return this._preserveStack(6,[],0,x,g),_;S===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let O=g+1;;O++)if(O>=l||(S=c[O])<32||S>127&&S<w){this._oscParser.put(c,g,O),g=O-1;break}break;case 6:if(_=this._oscParser.end(S!==24&&S!==26),_)return this._preserveStack(5,[],0,x,g),_;S===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&x}}}n.EscapeSequenceParser=y},6242:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OscHandler=n.OscParser=void 0;const d=o(5770),m=o(482),p=[];n.OscParser=class{constructor(){this._state=0,this._active=p,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,C){this._handlers[v]===void 0&&(this._handlers[v]=[]);const w=this._handlers[v];return w.push(C),{dispose:()=>{const y=w.indexOf(C);y!==-1&&w.splice(y,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=p,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||p,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,C,w){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(v,C,w);else this._handlerFb(this._id,"PUT",(0,m.utf32ToString)(v,C,w))}start(){this.reset(),this._state=1}put(v,C,w){if(this._state!==3){if(this._state===1)for(;C<w;){const y=v[C++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&w-C>0&&this._put(v,C,w)}}end(v,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,y=this._active.length-1,f=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,w=C,f=this._stack.fallThrough,this._stack.paused=!1),!f&&w===!1){for(;y>=0&&(w=this._active[y].end(v),w!==!0);y--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,w;y--}for(;y>=0;y--)if(w=this._active[y].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",v);this._active=p,this._id=-1,this._state=0}}},n.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,C,w){this._hitLimit||(this._data+=(0,m.utf32ToString)(v,C,w),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let C=!1;if(this._hitLimit)C=!1;else if(v&&(C=this._handler(this._data),C instanceof Promise))return C.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,C}}},8742:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Params=void 0;const o=2147483647;class d{static fromArray(p){const v=new d;if(!p.length)return v;for(let C=Array.isArray(p[0])?1:0;C<p.length;++C){const w=p[C];if(Array.isArray(w))for(let y=0;y<w.length;++y)v.addSubParam(w[y]);else v.addParam(w)}return v}constructor(p=32,v=32){if(this.maxLength=p,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(p),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(p),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const p=new d(this.maxLength,this.maxSubParamsLength);return p.params.set(this.params),p.length=this.length,p._subParams.set(this._subParams),p._subParamsLength=this._subParamsLength,p._subParamsIdx.set(this._subParamsIdx),p._rejectDigits=this._rejectDigits,p._rejectSubDigits=this._rejectSubDigits,p._digitIsSub=this._digitIsSub,p}toArray(){const p=[];for(let v=0;v<this.length;++v){p.push(this.params[v]);const C=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-C>0&&p.push(Array.prototype.slice.call(this._subParams,C,w))}return p}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(p){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=p>o?o:p}}addSubParam(p){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=p>o?o:p,this._subParamsIdx[this.length-1]++}}hasSubParams(p){return(255&this._subParamsIdx[p])-(this._subParamsIdx[p]>>8)>0}getSubParams(p){const v=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];return C-v>0?this._subParams.subarray(v,C):null}getSubParamsAll(){const p={};for(let v=0;v<this.length;++v){const C=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-C>0&&(p[v]=this._subParams.slice(C,w))}return p}addDigit(p){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,w=C[v-1];C[v-1]=~w?Math.min(10*w+p,o):p}}n.Params=d},5741:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AddonManager=void 0,n.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,d){const m={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(m),d.dispose=()=>this._wrappedAddonDispose(m),d.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let d=-1;for(let m=0;m<this._addons.length;m++)if(this._addons[m]===o){d=m;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(d,1)}}},8771:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferApiView=void 0;const d=o(3785),m=o(511);n.BufferApiView=class{constructor(p,v){this._buffer=p,this.type=v}init(p){return this._buffer=p,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(p){const v=this._buffer.lines.get(p);if(v)return new d.BufferLineApiView(v)}getNullCell(){return new m.CellData}}},3785:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLineApiView=void 0;const d=o(511);n.BufferLineApiView=class{constructor(m){this._line=m}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(m,p){if(!(m<0||m>=this._line.length))return p?(this._line.loadCell(m,p),p):this._line.loadCell(m,new d.CellData)}translateToString(m,p,v){return this._line.translateToString(m,p,v)}}},8285:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferNamespaceApi=void 0;const d=o(8771),m=o(8460),p=o(844);class v extends p.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new m.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}n.BufferNamespaceApi=v},7975:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ParserApi=void 0,n.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,d){return this._core.registerCsiHandler(o,m=>d(m.toArray()))}addCsiHandler(o,d){return this.registerCsiHandler(o,d)}registerDcsHandler(o,d){return this._core.registerDcsHandler(o,(m,p)=>d(m,p.toArray()))}addDcsHandler(o,d){return this.registerDcsHandler(o,d)}registerEscHandler(o,d){return this._core.registerEscHandler(o,d)}addEscHandler(o,d){return this.registerEscHandler(o,d)}registerOscHandler(o,d){return this._core.registerOscHandler(o,d)}addOscHandler(o,d){return this.registerOscHandler(o,d)}}},7090:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeApi=void 0,n.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(u,n,o){var d=this&&this.__decorate||function(f,c,l,h){var _,S=arguments.length,x=S<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(f,c,l,h);else for(var R=f.length-1;R>=0;R--)(_=f[R])&&(x=(S<3?_(x):S>3?_(c,l,x):_(c,l))||x);return S>3&&x&&Object.defineProperty(c,l,x),x},m=this&&this.__param||function(f,c){return function(l,h){c(l,h,f)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferService=n.MINIMUM_ROWS=n.MINIMUM_COLS=void 0;const p=o(8460),v=o(844),C=o(5295),w=o(2585);n.MINIMUM_COLS=2,n.MINIMUM_ROWS=1;let y=n.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(f){super(),this.isUserScrolling=!1,this._onResize=this.register(new p.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(f.rawOptions.cols||0,n.MINIMUM_COLS),this.rows=Math.max(f.rawOptions.rows||0,n.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(f,this))}resize(f,c){this.cols=f,this.rows=c,this.buffers.resize(f,c),this._onResize.fire({cols:f,rows:c})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(f,c=!1){const l=this.buffer;let h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===f.fg&&h.getBg(0)===f.bg||(h=l.getBlankLine(f,c),this._cachedBlankLine=h),h.isWrapped=c;const _=l.ybase+l.scrollTop,S=l.ybase+l.scrollBottom;if(l.scrollTop===0){const x=l.lines.isFull;S===l.lines.length-1?x?l.lines.recycle().copyFrom(h):l.lines.push(h.clone()):l.lines.splice(S+1,0,h.clone()),x?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const x=S-_+1;l.lines.shiftElements(_+1,x-1,-1),l.lines.set(S,h.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(f,c,l){const h=this.buffer;if(f<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else f+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);const _=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+f,h.ybase),0),_!==h.ydisp&&(c||this._onScroll.fire(h.ydisp))}};n.BufferService=y=d([m(0,w.IOptionsService)],y)},7994:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CharsetService=void 0,n.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,d){this._charsets[o]=d,this.glevel===o&&(this.charset=d)}}},1753:function(u,n,o){var d=this&&this.__decorate||function(h,_,S,x){var R,g=arguments.length,E=g<3?_:x===null?x=Object.getOwnPropertyDescriptor(_,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(h,_,S,x);else for(var k=h.length-1;k>=0;k--)(R=h[k])&&(E=(g<3?R(E):g>3?R(_,S,E):R(_,S))||E);return g>3&&E&&Object.defineProperty(_,S,E),E},m=this&&this.__param||function(h,_){return function(S,x){_(S,x,h)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreMouseService=void 0;const p=o(2585),v=o(8460),C=o(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function y(h,_){let S=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(S|=64,S|=h.action):(S|=3&h.button,4&h.button&&(S|=64),8&h.button&&(S|=128),h.action===32?S|=32:h.action!==0||_||(S|=3)),S}const f=String.fromCharCode,c={DEFAULT:h=>{const _=[y(h,!1)+32,h.col+32,h.row+32];return _[0]>255||_[1]>255||_[2]>255?"":`\x1B[M${f(_[0])}${f(_[1])}${f(_[2])}`},SGR:h=>{const _=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${y(h,!0)};${h.col};${h.row}${_}`},SGR_PIXELS:h=>{const _=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${y(h,!0)};${h.x};${h.y}${_}`}};let l=n.CoreMouseService=class extends C.Disposable{constructor(h,_){super(),this._bufferService=h,this._coreService=_,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(w))this.addProtocol(S,w[S]);for(const S of Object.keys(c))this.addEncoding(S,c[S]);this.reset()}addProtocol(h,_){this._protocols[h]=_}addEncoding(h,_){this._encodings[h]=_}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;const _=this._encodings[this._activeEncoding](h);return _&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(_):this._coreService.triggerDataEvent(_,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,_,S){if(S){if(h.x!==_.x||h.y!==_.y)return!1}else if(h.col!==_.col||h.row!==_.row)return!1;return h.button===_.button&&h.action===_.action&&h.ctrl===_.ctrl&&h.alt===_.alt&&h.shift===_.shift}};n.CoreMouseService=l=d([m(0,p.IBufferService),m(1,p.ICoreService)],l)},6975:function(u,n,o){var d=this&&this.__decorate||function(l,h,_,S){var x,R=arguments.length,g=R<3?h:S===null?S=Object.getOwnPropertyDescriptor(h,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(l,h,_,S);else for(var E=l.length-1;E>=0;E--)(x=l[E])&&(g=(R<3?x(g):R>3?x(h,_,g):x(h,_))||g);return R>3&&g&&Object.defineProperty(h,_,g),g},m=this&&this.__param||function(l,h){return function(_,S){h(_,S,l)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreService=void 0;const p=o(1439),v=o(8460),C=o(844),w=o(2585),y=Object.freeze({insertMode:!1}),f=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let c=n.CoreService=class extends C.Disposable{constructor(l,h,_){super(),this._bufferService=l,this._logService=h,this._optionsService=_,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,p.clone)(y),this.decPrivateModes=(0,p.clone)(f)}reset(){this.modes=(0,p.clone)(y),this.decPrivateModes=(0,p.clone)(f)}triggerDataEvent(l,h=!1){if(this._optionsService.rawOptions.disableStdin)return;const _=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&_.ybase!==_.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,()=>l.split("").map(S=>S.charCodeAt(0))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,()=>l.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(l))}};n.CoreService=c=d([m(0,w.IBufferService),m(1,w.ILogService),m(2,w.IOptionsService)],c)},9074:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DecorationService=void 0;const d=o(8055),m=o(8460),p=o(844),v=o(6106);let C=0,w=0;class y extends p.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(l=>l?.marker.line),this._onDecorationRegistered=this.register(new m.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new m.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,p.toDisposable)(()=>this.reset()))}registerDecoration(l){if(l.marker.isDisposed)return;const h=new f(l);if(h){const _=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),_.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,h,_){var S,x,R;let g=0,E=0;for(const k of this._decorations.getKeyIterator(h))g=(S=k.options.x)!==null&&S!==void 0?S:0,E=g+((x=k.options.width)!==null&&x!==void 0?x:1),l>=g&&l<E&&(!_||((R=k.options.layer)!==null&&R!==void 0?R:"bottom")===_)&&(yield k)}forEachDecorationAtCell(l,h,_,S){this._decorations.forEachByKey(h,x=>{var R,g,E;C=(R=x.options.x)!==null&&R!==void 0?R:0,w=C+((g=x.options.width)!==null&&g!==void 0?g:1),l>=C&&l<w&&(!_||((E=x.options.layer)!==null&&E!==void 0?E:"bottom")===_)&&S(x)})}}n.DecorationService=y;class f extends p.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new m.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.InstantiationService=n.ServiceCollection=void 0;const d=o(2585),m=o(8343);class p{constructor(...C){this._entries=new Map;for(const[w,y]of C)this.set(w,y)}set(C,w){const y=this._entries.get(C);return this._entries.set(C,w),y}forEach(C){for(const[w,y]of this._entries.entries())C(w,y)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}n.ServiceCollection=p,n.InstantiationService=class{constructor(){this._services=new p,this._services.set(d.IInstantiationService,this)}setService(v,C){this._services.set(v,C)}getService(v){return this._services.get(v)}createInstance(v,...C){const w=(0,m.getServiceDependencies)(v).sort((c,l)=>c.index-l.index),y=[];for(const c of w){const l=this._services.get(c.id);if(!l)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${c.id}.`);y.push(l)}const f=w.length>0?w[0].index:C.length;if(C.length!==f)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${f+1} conflicts with ${C.length} static arguments`);return new v(...C,...y)}}},7866:function(u,n,o){var d=this&&this.__decorate||function(f,c,l,h){var _,S=arguments.length,x=S<3?c:h===null?h=Object.getOwnPropertyDescriptor(c,l):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(f,c,l,h);else for(var R=f.length-1;R>=0;R--)(_=f[R])&&(x=(S<3?_(x):S>3?_(c,l,x):_(c,l))||x);return S>3&&x&&Object.defineProperty(c,l,x),x},m=this&&this.__param||function(f,c){return function(l,h){c(l,h,f)}};Object.defineProperty(n,"__esModule",{value:!0}),n.traceCall=n.setTraceLogger=n.LogService=void 0;const p=o(844),v=o(2585),C={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let w,y=n.LogService=class extends p.Disposable{get logLevel(){return this._logLevel}constructor(f){super(),this._optionsService=f,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(f){for(let c=0;c<f.length;c++)typeof f[c]=="function"&&(f[c]=f[c]())}_log(f,c,l){this._evalLazyOptionalParams(l),f.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+c,...l)}trace(f,...c){var l,h;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((h=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.trace.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,f,c)}debug(f,...c){var l,h;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((h=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.debug.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,f,c)}info(f,...c){var l,h;this._logLevel<=v.LogLevelEnum.INFO&&this._log((h=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.info.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.info,f,c)}warn(f,...c){var l,h;this._logLevel<=v.LogLevelEnum.WARN&&this._log((h=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.warn.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.warn,f,c)}error(f,...c){var l,h;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((h=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.error.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.error,f,c)}};n.LogService=y=d([m(0,v.IOptionsService)],y),n.setTraceLogger=function(f){w=f},n.traceCall=function(f,c,l){if(typeof l.value!="function")throw new Error("not supported");const h=l.value;l.value=function(..._){if(w.logLevel!==v.LogLevelEnum.TRACE)return h.apply(this,_);w.trace(`GlyphRenderer#${h.name}(${_.map(x=>JSON.stringify(x)).join(", ")})`);const S=h.apply(this,_);return w.trace(`GlyphRenderer#${h.name} return`,S),S}}},7302:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionsService=n.DEFAULT_OPTIONS=void 0;const d=o(8460),m=o(844),p=o(6114);n.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends m.Disposable{constructor(y){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const f=Object.assign({},n.DEFAULT_OPTIONS);for(const c in y)if(c in f)try{const l=y[c];f[c]=this._sanitizeAndValidateOption(c,l)}catch(l){console.error(l)}this.rawOptions=f,this.options=Object.assign({},f),this._setupOptions()}onSpecificOptionChange(y,f){return this.onOptionChange(c=>{c===y&&f(this.rawOptions[y])})}onMultipleOptionChange(y,f){return this.onOptionChange(c=>{y.indexOf(c)!==-1&&f()})}_setupOptions(){const y=c=>{if(!(c in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);return this.rawOptions[c]},f=(c,l)=>{if(!(c in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);l=this._sanitizeAndValidateOption(c,l),this.rawOptions[c]!==l&&(this.rawOptions[c]=l,this._onOptionChange.fire(c))};for(const c in this.rawOptions){const l={get:y.bind(this,c),set:f.bind(this,c)};Object.defineProperty(this.options,c,l)}}_sanitizeAndValidateOption(y,f){switch(y){case"cursorStyle":if(f||(f=n.DEFAULT_OPTIONS[y]),!function(c){return c==="block"||c==="underline"||c==="bar"}(f))throw new Error(`"${f}" is not a valid value for ${y}`);break;case"wordSeparator":f||(f=n.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof f=="number"&&1<=f&&f<=1e3)break;f=v.includes(f)?f:n.DEFAULT_OPTIONS[y];break;case"cursorWidth":f=Math.floor(f);case"lineHeight":case"tabStopWidth":if(f<1)throw new Error(`${y} cannot be less than 1, value: ${f}`);break;case"minimumContrastRatio":f=Math.max(1,Math.min(21,Math.round(10*f)/10));break;case"scrollback":if((f=Math.min(f,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${f}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(f<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${f}`);break;case"rows":case"cols":if(!f&&f!==0)throw new Error(`${y} must be numeric, value: ${f}`);break;case"windowsPty":f=f??{}}return f}}n.OptionsService=C},2660:function(u,n,o){var d=this&&this.__decorate||function(C,w,y,f){var c,l=arguments.length,h=l<3?w:f===null?f=Object.getOwnPropertyDescriptor(w,y):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(C,w,y,f);else for(var _=C.length-1;_>=0;_--)(c=C[_])&&(h=(l<3?c(h):l>3?c(w,y,h):c(w,y))||h);return l>3&&h&&Object.defineProperty(w,y,h),h},m=this&&this.__param||function(C,w){return function(y,f){w(y,f,C)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkService=void 0;const p=o(2585);let v=n.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const w=this._bufferService.buffer;if(C.id===void 0){const _=w.addMarker(w.ybase+w.y),S={data:C,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(S,_)),this._dataByLinkId.set(S.id,S),S.id}const y=C,f=this._getEntryIdKey(y),c=this._entriesWithId.get(f);if(c)return this.addLineToLink(c.id,w.ybase+w.y),c.id;const l=w.addMarker(w.ybase+w.y),h={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(h,l)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(C,w){const y=this._dataByLinkId.get(C);if(y&&y.lines.every(f=>f.line!==w)){const f=this._bufferService.buffer.addMarker(w);y.lines.push(f),f.onDispose(()=>this._removeMarkerFromLink(y,f))}}getLinkData(C){var w;return(w=this._dataByLinkId.get(C))===null||w===void 0?void 0:w.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,w){const y=C.lines.indexOf(w);y!==-1&&(C.lines.splice(y,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};n.OscLinkService=v=d([m(0,p.IBufferService)],v)},8343:(u,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0;const o="di$target",d="di$dependencies";n.serviceRegistry=new Map,n.getServiceDependencies=function(m){return m[d]||[]},n.createDecorator=function(m){if(n.serviceRegistry.has(m))return n.serviceRegistry.get(m);const p=function(v,C,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,f,c){f[o]===f?f[d].push({id:y,index:c}):(f[d]=[{id:y,index:c}],f[o]=f)})(p,v,w)};return p.toString=()=>m,n.serviceRegistry.set(m,p),p}},2585:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.IUnicodeService=n.IOscLinkService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;const d=o(8343);var m;n.IBufferService=(0,d.createDecorator)("BufferService"),n.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),n.ICoreService=(0,d.createDecorator)("CoreService"),n.ICharsetService=(0,d.createDecorator)("CharsetService"),n.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(p){p[p.TRACE=0]="TRACE",p[p.DEBUG=1]="DEBUG",p[p.INFO=2]="INFO",p[p.WARN=3]="WARN",p[p.ERROR=4]="ERROR",p[p.OFF=5]="OFF"}(m||(n.LogLevelEnum=m={})),n.ILogService=(0,d.createDecorator)("LogService"),n.IOptionsService=(0,d.createDecorator)("OptionsService"),n.IOscLinkService=(0,d.createDecorator)("OscLinkService"),n.IUnicodeService=(0,d.createDecorator)("UnicodeService"),n.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(u,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeService=void 0;const d=o(8460),m=o(225);n.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const p=new m.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(p){if(!this._providers[p])throw new Error(`unknown Unicode version "${p}"`);this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)}register(p){this._providers[p.version]=p}wcwidth(p){return this._activeProvider.wcwidth(p)}getStringCellWidth(p){let v=0;const C=p.length;for(let w=0;w<C;++w){let y=p.charCodeAt(w);if(55296<=y&&y<=56319){if(++w>=C)return v+this.wcwidth(y);const f=p.charCodeAt(w);56320<=f&&f<=57343?y=1024*(y-55296)+f-56320+65536:v+=this.wcwidth(f)}v+=this.wcwidth(y)}return v}}}},i={};function s(u){var n=i[u];if(n!==void 0)return n.exports;var o=i[u]={exports:{}};return r[u].call(o.exports,o,o.exports,s),o.exports}var a={};return(()=>{var u=a;Object.defineProperty(u,"__esModule",{value:!0}),u.Terminal=void 0;const n=s(9042),o=s(3236),d=s(844),m=s(5741),p=s(8285),v=s(7975),C=s(7090),w=["cols","rows"];class y extends d.Disposable{constructor(c){super(),this._core=this.register(new o.Terminal(c)),this._addonManager=this.register(new m.AddonManager),this._publicOptions=Object.assign({},this._core.options);const l=_=>this._core.options[_],h=(_,S)=>{this._checkReadonlyOptions(_),this._core.options[_]=S};for(const _ in this._core.options){const S={get:l.bind(this,_),set:h.bind(this,_)};Object.defineProperty(this._publicOptions,_,S)}}_checkReadonlyOptions(c){if(w.includes(c))throw new Error(`Option "${c}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new p.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const c=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:c.applicationCursorKeys,applicationKeypadMode:c.applicationKeypad,bracketedPasteMode:c.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:c.origin,reverseWraparoundMode:c.reverseWraparound,sendFocusMode:c.sendFocus,wraparoundMode:c.wraparound}}get options(){return this._publicOptions}set options(c){for(const l in c)this._publicOptions[l]=c[l]}blur(){this._core.blur()}focus(){this._core.focus()}resize(c,l){this._verifyIntegers(c,l),this._core.resize(c,l)}open(c){this._core.open(c)}attachCustomKeyEventHandler(c){this._core.attachCustomKeyEventHandler(c)}registerLinkProvider(c){return this._core.registerLinkProvider(c)}registerCharacterJoiner(c){return this._checkProposedApi(),this._core.registerCharacterJoiner(c)}deregisterCharacterJoiner(c){this._checkProposedApi(),this._core.deregisterCharacterJoiner(c)}registerMarker(c=0){return this._verifyIntegers(c),this._core.registerMarker(c)}registerDecoration(c){var l,h,_;return this._checkProposedApi(),this._verifyPositiveIntegers((l=c.x)!==null&&l!==void 0?l:0,(h=c.width)!==null&&h!==void 0?h:0,(_=c.height)!==null&&_!==void 0?_:0),this._core.registerDecoration(c)}hasSelection(){return this._core.hasSelection()}select(c,l,h){this._verifyIntegers(c,l,h),this._core.select(c,l,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(c,l){this._verifyIntegers(c,l),this._core.selectLines(c,l)}dispose(){super.dispose()}scrollLines(c){this._verifyIntegers(c),this._core.scrollLines(c)}scrollPages(c){this._verifyIntegers(c),this._core.scrollPages(c)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(c){this._verifyIntegers(c),this._core.scrollToLine(c)}clear(){this._core.clear()}write(c,l){this._core.write(c,l)}writeln(c,l){this._core.write(c),this._core.write(`\r
`,l)}paste(c){this._core.paste(c)}refresh(c,l){this._verifyIntegers(c,l),this._core.refresh(c,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(c){this._addonManager.loadAddon(this,c)}static get strings(){return n}_verifyIntegers(...c){for(const l of c)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...c){for(const l of c)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}u.Terminal=y})(),a})())})(x_);var Im=x_.exports,R_={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,function(){return(()=>{var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{constructor(){}activate(s){this._terminal=s}dispose(){}fit(){const s=this.proposeDimensions();if(!s||!this._terminal||isNaN(s.cols)||isNaN(s.rows))return;const a=this._terminal._core;this._terminal.rows===s.rows&&this._terminal.cols===s.cols||(a._renderService.clear(),this._terminal.resize(s.cols,s.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const s=this._terminal._core,a=s._renderService.dimensions;if(a.css.cell.width===0||a.css.cell.height===0)return;const u=this._terminal.options.scrollback===0?0:s.viewport.scrollBarWidth,n=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(n.getPropertyValue("height")),d=Math.max(0,parseInt(n.getPropertyValue("width"))),m=window.getComputedStyle(this._terminal.element),p=o-(parseInt(m.getPropertyValue("padding-top"))+parseInt(m.getPropertyValue("padding-bottom"))),v=d-(parseInt(m.getPropertyValue("padding-right"))+parseInt(m.getPropertyValue("padding-left")))-u;return{cols:Math.max(2,Math.floor(v/a.css.cell.width)),rows:Math.max(1,Math.floor(p/a.css.cell.height))}}}})(),r})()})})(R_);var Tm=R_.exports;const Pm=({output:e,onInput:t,height:r="300px"})=>{const i=Y.useRef(null),s=Y.useRef(null),a=Y.useRef(null);Y.useEffect(()=>{if(!i.current)return;const n=new Im.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',theme:{background:"#000000",foreground:"#ffffff",cursor:"#ffffff"}}),o=new Tm.FitAddon;n.loadAddon(o),n.onData(m=>{t&&t(m)}),n.open(i.current),o.fit(),s.current=n,a.current=o;const d=()=>{o.fit()};return window.addEventListener("resize",d),n.writeln("PicoRuby Simulator Console"),n.writeln("Ready to run your Ruby code..."),n.write(`\r
$ `),()=>{window.removeEventListener("resize",d),n.dispose()}},[t]),Y.useEffect(()=>{if(s.current&&e){const n=e.split(`
`);n.forEach((o,d)=>{o.trim()&&s.current.write(o),d<n.length-1&&s.current.write(`\r
`)})}},[e]);const u=()=>{s.current&&(s.current.clear(),s.current.writeln("Console cleared"),s.current.write("$ "))};return G.jsxs("div",{style:{border:"1px solid #ccc",borderRadius:"4px",height:r,display:"flex",flexDirection:"column"},children:[G.jsxs("div",{style:{background:"#f5f5f5",padding:"8px 12px",borderBottom:"1px solid #ccc",fontSize:"14px",fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[G.jsx("span",{children:"Console"}),G.jsx("button",{onClick:u,style:{background:"none",border:"1px solid #ccc",padding:"2px 8px",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:"Clear"})]}),G.jsx("div",{ref:i,style:{flex:1,padding:"8px"}})]})},Dm=({onRun:e,onStop:t,onReset:r,onLoadFirmware:i,onLoadLatestFirmware:s,isRunning:a,isLoading:u,firmwareLoaded:n,debugState:o})=>{const d=m=>{const p=m.target.files?.[0];p&&i(p)};return G.jsxs("div",{style:{padding:"16px",background:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"4px",marginBottom:"16px"},children:[G.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[G.jsx("h3",{style:{margin:0,color:"#495057"},children:"Try PicoRuby"}),G.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginLeft:"16px"},children:[G.jsx("label",{style:{fontSize:"14px",color:"#495057",fontWeight:"500"},children:"Mode:"}),G.jsx("span",{style:{padding:"6px 8px",borderRadius:"4px",border:"1px solid #ced4da",fontSize:"14px",background:"#f8f9fa",color:"#495057"},children:" R2P2 Compatible"})]}),G.jsxs("div",{style:{display:"flex",gap:"8px"},children:[G.jsx("button",{onClick:e,disabled:a||u,style:{background:a?"#6c757d":"#28a745",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:a||u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500"},children:a?"Running...":" Run"}),G.jsx("button",{onClick:t,disabled:!a,style:{background:a?"#dc3545":"#6c757d",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:a?"pointer":"not-allowed",fontSize:"14px",fontWeight:"500"},children:" Stop"}),G.jsx("button",{onClick:r,disabled:u,style:{background:u?"#6c757d":"#ffc107",color:"#212529",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500"},children:" Reset"})]}),G.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px"},children:[G.jsx("label",{style:{fontSize:"14px",color:"#495057"},children:"R2P2 Firmware:"}),G.jsx("button",{onClick:s,disabled:u,style:{background:"#007bff",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:u?"not-allowed":"pointer",fontSize:"12px",fontWeight:"500",marginRight:"8px"},children:" Load Latest (v0.5.0)"}),G.jsx("input",{type:"file",accept:".uf2",onChange:d,disabled:u,style:{fontSize:"14px",padding:"4px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),u&&G.jsxs("div",{style:{fontSize:"14px",color:"#6c757d",display:"flex",alignItems:"center",gap:"8px"},children:[G.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #f3f3f3",borderTop:"2px solid #6c757d",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Loading..."]})]}),o&&G.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#e9ecef",borderRadius:"4px",border:"1px solid #adb5bd"},children:[G.jsx("h4",{style:{margin:"0 0 8px 0",color:"#495057",fontSize:"14px",fontWeight:"600"},children:" Debug Information"}),G.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",fontSize:"13px"},children:[G.jsxs("div",{children:[G.jsx("strong",{style:{color:"#495057"},children:"MCU Status:"}),G.jsx("div",{style:{color:o.running?"#28a745":"#6c757d",fontWeight:"500"},children:o.running?" Running":" Stopped"})]}),G.jsxs("div",{children:[G.jsx("strong",{style:{color:"#495057"},children:"Firmware:"}),G.jsx("div",{style:{color:n?"#28a745":"#dc3545",fontWeight:"500"},children:n?" Loaded":" Not Loaded"})]}),G.jsxs("div",{children:[G.jsx("strong",{style:{color:"#495057"},children:"Program Counter:"}),G.jsxs("div",{style:{fontFamily:"monospace",color:"#495057"},children:["0x",o.pc.toString(16).toUpperCase().padStart(8,"0")]})]}),G.jsxs("div",{children:[G.jsx("strong",{style:{color:"#495057"},children:"Stack Pointer:"}),G.jsxs("div",{style:{fontFamily:"monospace",color:"#495057"},children:["0x",o.sp.toString(16).toUpperCase().padStart(8,"0")]})]}),o.flashLayout&&G.jsxs(G.Fragment,{children:[G.jsxs("div",{children:[G.jsx("strong",{style:{color:"#495057"},children:"Flash Start:"}),G.jsxs("div",{style:{fontFamily:"monospace",color:"#495057"},children:["0x",o.flashLayout.availableStart.toString(16).toUpperCase()]})]}),G.jsxs("div",{children:[G.jsx("strong",{style:{color:"#495057"},children:"Available Space:"}),G.jsxs("div",{style:{color:"#495057"},children:[Math.round(o.flashLayout.availableSize/1024),"KB"]})]})]})]})]}),G.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};var me;(function(e){e[e.TIMER_0=0]="TIMER_0",e[e.TIMER_1=1]="TIMER_1",e[e.TIMER_2=2]="TIMER_2",e[e.TIMER_3=3]="TIMER_3",e[e.PWM_WRAP=4]="PWM_WRAP",e[e.USBCTRL=5]="USBCTRL",e[e.XIP=6]="XIP",e[e.PIO0_IRQ0=7]="PIO0_IRQ0",e[e.PIO0_IRQ1=8]="PIO0_IRQ1",e[e.PIO1_IRQ0=9]="PIO1_IRQ0",e[e.PIO1_IRQ1=10]="PIO1_IRQ1",e[e.DMA_IRQ0=11]="DMA_IRQ0",e[e.DMA_IRQ1=12]="DMA_IRQ1",e[e.IO_BANK0=13]="IO_BANK0",e[e.IO_QSPI=14]="IO_QSPI",e[e.SIO_PROC0=15]="SIO_PROC0",e[e.SIO_PROC1=16]="SIO_PROC1",e[e.CLOCKS=17]="CLOCKS",e[e.SPI0=18]="SPI0",e[e.SPI1=19]="SPI1",e[e.UART0=20]="UART0",e[e.UART1=21]="UART1",e[e.ADC_FIFO=22]="ADC_FIFO",e[e.I2C0=23]="I2C0",e[e.I2C1=24]="I2C1",e[e.RTC=25]="RTC"})(me||(me={}));const b_=me.RTC;class Am{constructor(t,r){this.clock=t,this.callback=r,this.next=null,this.nanos=0,this.scheduled=!1}schedule(t){this.scheduled&&this.cancel(),this.clock.linkAlarm(t,this)}cancel(){this.clock.unlinkAlarm(this),this.scheduled=!1}}class Lm{constructor(t=125e6){this.frequency=t,this.nextAlarm=null,this.nanosCounter=0}get nanos(){return this.nanosCounter}get micros(){return this.nanos/1e3}createAlarm(t){return new Am(this,t)}linkAlarm(t,r){r.nanos=this.nanos+t;let i=this.nextAlarm,s=null;for(;i&&i.nanos<r.nanos;)s=i,i=i.next;return s?(s.next=r,r.next=i):(this.nextAlarm=r,r.next=i),r.scheduled=!0,r}unlinkAlarm(t){let r=this.nextAlarm;if(!r)return!1;let i=null;for(;r;){if(r===t)return i?i.next=r.next:this.nextAlarm=r.next,!0;i=r,r=r.next}return!1}tick(t){const r=this.nanosCounter+t;let i=this.nextAlarm;for(;i&&i.nanos<=r;)this.nextAlarm=i.next,this.nanosCounter=i.nanos,i.callback(),i=this.nextAlarm;this.nanosCounter=r}get nanosToNextAlarm(){return this.nextAlarm?this.nextAlarm.nanos-this.nanos:0}}class Bt{constructor(t){this.start=0,this.used=0,this.buffer=new Uint32Array(t)}get size(){return this.buffer.length}get itemCount(){return this.used}push(t){const{length:r}=this.buffer,{start:i,used:s}=this;this.used<r&&(this.buffer[(i+s)%r]=t,this.used++)}pull(){const{start:t,used:r}=this,{length:i}=this.buffer;return r?(this.start=(t+1)%i,this.used--,this.buffer[t]):0}peek(){return this.used?this.buffer[this.start]:0}reset(){this.used=0}get empty(){return this.used==0}get full(){return this.used===this.buffer.length}get items(){const{start:t,used:r,buffer:i}=this,{length:s}=i,a=[];for(let u=0;u<r;u++)a[u]=i[(t+u)%s];return a}}const Om=0,Mm=1,Fm=2,Bm=3;function Um(e,t,r){switch(t){case Mm:return e^r;case Fm:return e|r;case Bm:return e&~r;default:return console.warn("Atomic update called with invalid writeType",t),r}}class ge{constructor(t,r){this.rp2040=t,this.name=r,this.rawWriteValue=0}readUint32(t){return this.warn(`Unimplemented peripheral read from 0x${t.toString(16)}`),t>4096&&this.warn("Unimplemented read from peripheral in the atomic operation region"),4294967295}writeUint32(t,r){this.warn(`Unimplemented peripheral write to 0x${t.toString(16)}: 0x${r.toString(16)}`)}writeUint32Atomic(t,r,i){this.rawWriteValue=r;const s=i!=Om?Um(this.readUint32(t),i,r):r;this.writeUint32(t,s)}debug(t){this.rp2040.logger.debug(this.name,t)}info(t){this.rp2040.logger.info(this.name,t)}warn(t){this.rp2040.logger.warn(this.name,t)}error(t){this.rp2040.logger.error(this.name,t)}}class _r extends ge{}var ne;(function(e){e[e.DREQ_PIO0_TX0=0]="DREQ_PIO0_TX0",e[e.DREQ_PIO0_TX1=1]="DREQ_PIO0_TX1",e[e.DREQ_PIO0_TX2=2]="DREQ_PIO0_TX2",e[e.DREQ_PIO0_TX3=3]="DREQ_PIO0_TX3",e[e.DREQ_PIO0_RX0=4]="DREQ_PIO0_RX0",e[e.DREQ_PIO0_RX1=5]="DREQ_PIO0_RX1",e[e.DREQ_PIO0_RX2=6]="DREQ_PIO0_RX2",e[e.DREQ_PIO0_RX3=7]="DREQ_PIO0_RX3",e[e.DREQ_PIO1_TX0=8]="DREQ_PIO1_TX0",e[e.DREQ_PIO1_TX1=9]="DREQ_PIO1_TX1",e[e.DREQ_PIO1_TX2=10]="DREQ_PIO1_TX2",e[e.DREQ_PIO1_TX3=11]="DREQ_PIO1_TX3",e[e.DREQ_PIO1_RX0=12]="DREQ_PIO1_RX0",e[e.DREQ_PIO1_RX1=13]="DREQ_PIO1_RX1",e[e.DREQ_PIO1_RX2=14]="DREQ_PIO1_RX2",e[e.DREQ_PIO1_RX3=15]="DREQ_PIO1_RX3",e[e.DREQ_SPI0_TX=16]="DREQ_SPI0_TX",e[e.DREQ_SPI0_RX=17]="DREQ_SPI0_RX",e[e.DREQ_SPI1_TX=18]="DREQ_SPI1_TX",e[e.DREQ_SPI1_RX=19]="DREQ_SPI1_RX",e[e.DREQ_UART0_TX=20]="DREQ_UART0_TX",e[e.DREQ_UART0_RX=21]="DREQ_UART0_RX",e[e.DREQ_UART1_TX=22]="DREQ_UART1_TX",e[e.DREQ_UART1_RX=23]="DREQ_UART1_RX",e[e.DREQ_PWM_WRAP0=24]="DREQ_PWM_WRAP0",e[e.DREQ_PWM_WRAP1=25]="DREQ_PWM_WRAP1",e[e.DREQ_PWM_WRAP2=26]="DREQ_PWM_WRAP2",e[e.DREQ_PWM_WRAP3=27]="DREQ_PWM_WRAP3",e[e.DREQ_PWM_WRAP4=28]="DREQ_PWM_WRAP4",e[e.DREQ_PWM_WRAP5=29]="DREQ_PWM_WRAP5",e[e.DREQ_PWM_WRAP6=30]="DREQ_PWM_WRAP6",e[e.DREQ_PWM_WRAP7=31]="DREQ_PWM_WRAP7",e[e.DREQ_I2C0_TX=32]="DREQ_I2C0_TX",e[e.DREQ_I2C0_RX=33]="DREQ_I2C0_RX",e[e.DREQ_I2C1_TX=34]="DREQ_I2C1_TX",e[e.DREQ_I2C1_RX=35]="DREQ_I2C1_RX",e[e.DREQ_ADC=36]="DREQ_ADC",e[e.DREQ_XIP_STREAM=37]="DREQ_XIP_STREAM",e[e.DREQ_XIP_SSITX=38]="DREQ_XIP_SSITX",e[e.DREQ_XIP_SSIRX=39]="DREQ_XIP_SSIRX",e[e.DREQ_MAX=40]="DREQ_MAX"})(ne||(ne={}));var Gt;(function(e){e[e.Timer0=59]="Timer0",e[e.Timer1=60]="Timer1",e[e.Timer2=61]="Timer2",e[e.Timer3=62]="Timer3",e[e.Permanent=63]="Permanent"})(Gt||(Gt={}));const jh=0,Kh=4,Xh=8,js=12,qh=16,Gh=20,Yh=24,ta=28,Qh=32,Zh=36,Jh=40,ra=44,eu=48,tu=52,ru=56,ia=60,iu=2048,Nm=2052,su=12*64,nu=2111,ou=1024,au=1028,lu=1032,cu=1036,hu=1044,uu=1048,fu=1052,du=1056,pu=1060,_u=1064,gu=1068,Hm=1072,Vm=1092,zm=1096,Wm=1<<30,$m=1<<29,Ur=1<<24,mu=1<<22,vu=1<<21,jm=63,Km=15,Xm=15,Su=11,yu=1024,qm=15,Gm=6,Ym=32,Qm=16,Zm=3,Jm=2,Ks=1,Cu=16777215,e6=Wm|$m;class tt{constructor(t,r,i){this.dma=t,this.rp2040=r,this.index=i,this.ctrl=0,this.readAddr=0,this.writeAddr=0,this.transCount=0,this.dreqCounter=0,this.transCountReload=0,this.treqValue=0,this.dataSize=1,this.chainTo=0,this.ringMask=0,this.transferFn=()=>0,this.transfer8=()=>{const{rp2040:s}=this;s.writeUint8(this.writeAddr,s.readUint8(this.readAddr))},this.transfer16=()=>{const{rp2040:s}=this;s.writeUint16(this.writeAddr,s.readUint16(this.readAddr))},this.transferSwap16=()=>{const{rp2040:s}=this,a=s.readUint16(this.readAddr);s.writeUint16(this.writeAddr,(a&255)<<8|a>>8)},this.transfer32=()=>{const{rp2040:s}=this;s.writeUint32(this.writeAddr,s.readUint32(this.readAddr))},this.transferSwap32=()=>{const{rp2040:s}=this,a=s.readUint32(this.readAddr);s.writeUint32(this.writeAddr,(a&255)<<24|(a&65280)<<8|(a&16711680)>>8|a>>24&255)},this.transfer=()=>{var s;const{ctrl:a,dataSize:u,ringMask:n}=this;this.transferFn(),a&Qm&&(n&&!(a&yu)?this.readAddr=this.readAddr&~n|this.readAddr+u&n:this.readAddr+=u),a&Ym&&(n&&a&yu?this.writeAddr=this.writeAddr&~n|this.writeAddr+u&n:this.writeAddr+=u),this.transCount--,this.transCount>0?this.scheduleTransfer():(this.ctrl&=~Ur,this.ctrl&vu||(this.dma.intRaw|=1<<this.index,this.dma.checkInterrupts()),this.chainTo!==this.index&&((s=this.dma.channels[this.chainTo])===null||s===void 0||s.start()))},this.transferAlarm=r.clock.createAlarm(this.transfer),this.reset()}start(){!(this.ctrl&Ks)||this.ctrl&Ur||(this.ctrl|=Ur,this.transCount=this.transCountReload,this.transCount&&this.scheduleTransfer())}get treq(){return this.treqValue}get active(){return this.ctrl&Ks&&this.ctrl&Ur}scheduleTransfer(){if(this.dma.dreq[this.treqValue]||this.treqValue===Gt.Permanent)this.transferAlarm.schedule(0);else{const t=this.dma.getTimer(this.treqValue);t&&this.transferAlarm.schedule(t*1e3)}}abort(){this.ctrl&=~Ur,this.transferAlarm.cancel()}readUint32(t){switch(t){case jh:case Gh:case Jh:case ia:return this.readAddr;case Kh:case Yh:case ra:case tu:return this.writeAddr;case Xh:case ta:case Zh:case ru:return this.transCount;case js:case qh:case Qh:case eu:return this.ctrl;case iu:return this.dreqCounter;case Nm:return this.transCountReload}return 0}writeUint32(t,r){switch(t){case jh:case Gh:case Jh:case ia:this.readAddr=r;break;case Kh:case Yh:case ra:case tu:this.writeAddr=r;break;case Xh:case ta:case Zh:case ru:this.transCountReload=r;break;case js:case qh:case Qh:case eu:{this.ctrl=this.ctrl&~Cu|r&Cu,this.ctrl&=~(r&e6),this.treqValue=this.ctrl>>Km&jm,this.chainTo=this.ctrl>>Su&Xm;const i=this.ctrl>>Gm&qm;switch(this.ringMask=i?(1<<i)-1:0,this.ctrl>>Jm&Zm){case 1:this.dataSize=2,this.transferFn=this.ctrl&mu?this.transferSwap16:this.transfer16;break;case 2:this.dataSize=4,this.transferFn=this.ctrl&mu?this.transferSwap32:this.transfer32;break;case 0:default:this.transferFn=this.transfer8,this.dataSize=1}this.ctrl&Ks&&this.ctrl&Ur&&this.scheduleTransfer(),this.ctrl&Ks||this.transferAlarm.cancel();break}case iu:this.dreqCounter=0;break}(t===ia||t===ra||t===ta||t===js)&&(r?this.start():this.ctrl&vu&&(this.dma.intRaw|=1<<this.index,this.dma.checkInterrupts()))}reset(){this.writeUint32(js,this.index<<Su)}}class t6 extends ge{constructor(){super(...arguments),this.channels=[new tt(this,this.rp2040,0),new tt(this,this.rp2040,1),new tt(this,this.rp2040,2),new tt(this,this.rp2040,3),new tt(this,this.rp2040,4),new tt(this,this.rp2040,5),new tt(this,this.rp2040,6),new tt(this,this.rp2040,7),new tt(this,this.rp2040,8),new tt(this,this.rp2040,9),new tt(this,this.rp2040,10),new tt(this,this.rp2040,11)],this.intRaw=0,this.intEnable0=0,this.intForce0=0,this.intEnable1=0,this.intForce1=0,this.timer0=0,this.timer1=0,this.timer2=0,this.timer3=0,this.dreq=Array(ne.DREQ_MAX)}get intStatus0(){return this.intRaw&this.intEnable0|this.intForce0}get intStatus1(){return this.intRaw&this.intEnable1|this.intForce1}readUint32(t){if((t&2047)<=su){const r=(t&2047)>>6;return this.channels[r].readUint32(t&nu)}switch(t){case du:return this.timer0;case pu:return this.timer1;case _u:return this.timer2;case gu:return this.timer3;case ou:return this.intRaw;case au:return this.intEnable0;case lu:return this.intForce0;case cu:return this.intStatus0;case hu:return this.intEnable1;case uu:return this.intForce1;case fu:return this.intStatus1;case zm:return this.channels.length}return super.readUint32(t)}writeUint32(t,r){if((t&2047)<=su){const i=(t&2047)>>6;this.channels[i].writeUint32(t&nu,r);return}switch(t){case du:this.timer0=r;return;case pu:this.timer1=r;return;case _u:this.timer2=r;return;case gu:this.timer3=r;return;case ou:case cu:case fu:this.intRaw&=~this.rawWriteValue,this.checkInterrupts();return;case au:this.intEnable0=r&65535,this.checkInterrupts();return;case lu:this.intForce0=r&65535,this.checkInterrupts();return;case hu:this.intEnable1=r&65535,this.checkInterrupts();return;case uu:this.intForce1=r&65535,this.checkInterrupts();return;case Hm:for(const i of this.channels)r&1<<i.index&&i.start();return;case Vm:for(const i of this.channels)r&1<<i.index&&i.abort();return;default:super.writeUint32(t,r)}}setDREQ(t){const{dreq:r}=this;if(!r[t]){r[t]=!0;for(const i of this.channels)i.treq===t&&i.active&&i.scheduleTransfer()}}clearDREQ(t){this.dreq[t]=!1}getTimer(t){let r=0,i=1;switch(t){case Gt.Permanent:r=1,i=1;break;case Gt.Timer0:r=this.timer0>>>16,i=this.timer0&65535;break;case Gt.Timer1:r=this.timer1>>>16,i=this.timer1&65535;break;case Gt.Timer2:r=this.timer2>>>16,i=this.timer2&65535;break;case Gt.Timer3:r=this.timer3>>>36,i=this.timer3&65535;break}return i===0?0:r/i*1e6/this.rp2040.clkSys}checkInterrupts(){this.rp2040.setInterrupt(me.DMA_IRQ0,!!this.intStatus0),this.rp2040.setInterrupt(me.DMA_IRQ1,!!this.intStatus1)}}const wu=0,r6=4,xu=8,i6=12,Eu=48,Ru=52,bu=56,s6=60,n6=64,o6=68,ku=72,a6=196,l6=296,Iu=300,Tu=304,c6=308,Pu=312,Du=316,h6=320,u6=16,f6=20,d6=24,p6=28,_6=32,g6=36,m6=40,v6=44,Zt=200,Au=204,Lu=208,Ou=212,Mu=216,Zn=220,Xs=224,Fu=244,qs=248,Bu=268,Gs=272,Uu=292,S6=1<<24,y6=65536,C6=256,w6=1,sa=1<<24,x6=65536,E6=256,na=1,Nu=65536,Hu=1<<17,R6=1<<18,b6=1<<19,k6=16,I6=1<<29,T6=1<<30,Vu=1<<31;var be;(function(e){e[e.None=0]="None",e[e.Pin=1]="Pin",e[e.rxFIFO=2]="rxFIFO",e[e.txFIFO=3]="txFIFO",e[e.IRQ=4]="IRQ",e[e.Out=5]="Out"})(be||(be={}));function P6(e){return e=(e&1431655765)<<1|(e&2863311530)>>>1,e=(e&858993459)<<2|(e&3435973836)>>>2,e=(e&252645135)<<4|(e&4042322160)>>>4,e=(e&16711935)<<8|(e&4278255360)>>>8,e=(e&65535)<<16|(e&4294901760)>>>16,e>>>0}function zu(e,t){return!!(e&16)?e&4|(e&3)+t&3:e&7}const D6=[ne.DREQ_PIO0_RX0,ne.DREQ_PIO0_RX1,ne.DREQ_PIO0_RX2,ne.DREQ_PIO0_RX3],A6=[ne.DREQ_PIO0_TX0,ne.DREQ_PIO0_TX1,ne.DREQ_PIO0_TX2,ne.DREQ_PIO0_TX3],L6=[ne.DREQ_PIO1_RX0,ne.DREQ_PIO1_RX1,ne.DREQ_PIO1_RX2,ne.DREQ_PIO1_RX3],O6=[ne.DREQ_PIO1_TX0,ne.DREQ_PIO1_TX1,ne.DREQ_PIO1_TX2,ne.DREQ_PIO1_TX3];class Ys{constructor(t,r,i){this.rp2040=t,this.pio=r,this.index=i,this.enabled=!1,this.x=0,this.y=0,this.pc=0,this.inputShiftReg=0,this.inputShiftCount=0,this.outputShiftReg=0,this.outputShiftCount=0,this.cycles=0,this.execOpcode=0,this.execValid=!1,this.updatePC=!0,this.clockDivInt=1,this.clockDivFrac=0,this.execCtrl=126976,this.shiftCtrl=3<<18,this.pinCtrl=5<<26,this.rxFIFO=new Bt(4),this.txFIFO=new Bt(4),this.outPinValues=0,this.outPinDirection=0,this.waiting=!1,this.waitType=be.None,this.waitIndex=0,this.waitPolarity=!1,this.waitDelay=-1,this.dreqRx=this.pio.dreqRx[this.index],this.dreqTx=this.pio.dreqTx[this.index],this.updateDMARx(),this.updateDMATx()}updateDMATx(){this.txFIFO.full?this.rp2040.dma.clearDREQ(this.dreqTx):this.rp2040.dma.setDREQ(this.dreqTx)}updateDMARx(){this.rxFIFO.empty?this.rp2040.dma.clearDREQ(this.dreqRx):this.rp2040.dma.setDREQ(this.dreqRx)}writeFIFO(t){if(this.txFIFO.full){this.pio.fdebug|=x6<<this.index;return}this.txFIFO.push(t),this.pio.txStall&=~(sa<<this.index),this.updateDMATx(),this.checkWait(),this.txFIFO.full&&this.pio.checkInterrupts()}readFIFO(){if(this.rxFIFO.empty)return this.pio.fdebug|=E6<<this.index,0;const t=this.rxFIFO.pull();return this.pio.rxStall&=~(na<<this.index),this.updateDMARx(),this.checkWait(),this.rxFIFO.empty&&this.pio.checkInterrupts(),t}get status(){const t=this.execCtrl&15;return this.execCtrl&k6?this.rxFIFO.itemCount<t?4294967295:0:this.txFIFO.itemCount<t?4294967295:0}jmpCondition(t){switch(t){case 0:return!0;case 1:return this.x===0;case 2:{const r=this.x;return this.x=this.x-1>>>0,r!==0}case 3:return this.y===0;case 4:{const r=this.y;return this.y=this.y-1>>>0,r!==0}case 5:return this.x>>>0!==this.y>>>0;case 6:{const{gpio:r}=this.rp2040,{jmpPin:i}=this;return i<r.length?r[i].inputValue:!1}case 7:return this.outputShiftCount<this.pullThreshold}return this.pio.error(`jmpCondition with unsupported condition: ${t}`),!1}get inPins(){const{gpioValues:t}=this.rp2040,{inBase:r}=this;return r?t<<32-r|t>>>r:t}inSourceValue(t){switch(t){case 0:return this.inPins;case 1:return this.x;case 2:return this.y;case 3:return 0;case 4:return 0;case 5:return this.status;case 6:return this.inputShiftReg;case 7:return this.outputShiftReg}return this.pio.error(`inSourceValue with unsupported source: ${t}`),0}writeOutValue(t,r,i){switch(t){case 0:this.setOutPins(r);break;case 1:this.x=r;break;case 2:this.y=r;break;case 3:break;case 4:this.setOutPinDirs(r);break;case 5:this.pc=r&31,this.updatePC=!1;break;case 6:this.inputShiftReg=r,this.inputShiftCount=i;break;case 7:this.execOpcode=r,this.execValid=!0;break}}get pushThreshold(){const t=this.shiftCtrl>>20&31;return t||32}get pullThreshold(){const t=this.shiftCtrl>>25&31;return t||32}get sidesetCount(){return this.pinCtrl>>29&7}get setCount(){return this.pinCtrl>>26&7}get outCount(){return this.pinCtrl>>20&63}get inBase(){return this.pinCtrl>>15&31}get sidesetBase(){return this.pinCtrl>>10&31}get setBase(){return this.pinCtrl>>5&31}get outBase(){return this.pinCtrl>>0&31}get jmpPin(){return this.execCtrl>>24&31}get wrapTop(){return this.execCtrl>>12&31}get wrapBottom(){return this.execCtrl>>7&31}setOutPinDirs(t){this.outPinDirection=t,this.pio.pinDirectionsChanged(t,this.outBase,this.outCount)}setOutPins(t){this.outPinValues=t,this.pio.pinValuesChanged(t,this.outBase,this.outCount)}outInstruction(t){const r=t&31,i=t>>5;if(r===0)this.writeOutValue(i,this.outputShiftReg,32),this.outputShiftCount=32;else{if(this.shiftCtrl&b6){const s=this.outputShiftReg&(1<<r)-1;this.outputShiftReg>>>=r,this.writeOutValue(i,s,r)}else{const s=this.outputShiftReg>>>32-r;this.outputShiftReg<<=r,this.writeOutValue(i,s,r)}this.outputShiftCount+=r,this.outputShiftCount>32&&(this.outputShiftCount=32)}}executeInstruction(t){const r=t&255;switch(t>>>13){case 0:this.jmpCondition(r>>5)&&(this.pc=r&31,this.updatePC=!1);break;case 1:{const o=!!(r&128),d=r>>5&3,m=r&31;switch(d){case 0:this.wait(be.Pin,o,m);break;case 1:this.wait(be.Pin,o,(m+this.inBase)%32);break;case 2:this.wait(be.IRQ,o,zu(m,this.index));break}break}case 2:{const o=r&31;let d=this.inSourceValue(r>>5);o==0?(this.inputShiftReg=d,this.inputShiftCount=32):(d&=(1<<o)-1,this.shiftCtrl&R6?(this.inputShiftReg>>>=o,this.inputShiftReg|=d<<32-o):(this.inputShiftReg<<=o,this.inputShiftReg|=d),this.inputShiftCount+=o,this.inputShiftCount>32&&(this.inputShiftCount=32)),this.shiftCtrl&Nu&&this.inputShiftCount>=this.pushThreshold&&(this.rxFIFO.full?(this.pio.rxStall|=na<<this.index,this.pio.fdebug|=this.pio.rxStall,this.wait(be.rxFIFO,!1,this.inputShiftReg)):(this.rxFIFO.push(this.inputShiftReg),this.updateDMARx(),this.pio.checkInterrupts()),this.inputShiftCount=0,this.inputShiftReg=0);break}case 3:{this.shiftCtrl&Hu&&this.outputShiftCount>=this.pullThreshold&&(this.outputShiftCount=0,this.txFIFO.empty?(this.pio.txStall|=sa<<this.index,this.pio.fdebug|=this.pio.txStall,this.wait(be.Out,!1,r)):(this.outputShiftReg=this.txFIFO.pull(),this.updateDMATx(),this.pio.checkInterrupts())),this.waiting||this.outInstruction(r);break}case 4:{const o=!!(r&32),d=!!(r&64);if(r&31)break;if(r&128){if(d&&this.shiftCtrl&Hu&&this.outputShiftCount<this.pullThreshold)break;this.txFIFO.empty?(this.pio.txStall|=sa<<this.index,this.pio.fdebug|=this.pio.txStall,o?this.wait(be.txFIFO,!1,0):this.outputShiftReg=this.x):(this.outputShiftReg=this.txFIFO.pull(),this.updateDMATx(),this.pio.checkInterrupts()),this.outputShiftCount=0}else{if(d&&this.shiftCtrl&Nu&&this.inputShiftCount<this.pushThreshold)break;this.rxFIFO.full?(this.pio.rxStall|=na<<this.index,this.pio.fdebug|=this.pio.rxStall,o&&this.wait(be.rxFIFO,!1,this.inputShiftReg)):(this.rxFIFO.push(this.inputShiftReg),this.updateDMARx(),this.pio.checkInterrupts()),this.inputShiftReg=0,this.inputShiftCount=0}break}case 5:{const o=r&7,d=r>>3&3,m=r>>5&7,p=this.inSourceValue(o),v=this.transformMovValue(p,d)>>>0;this.setMovDestination(m,v);break}case 6:{if(r&128)break;const o=!!(r&64),d=!!(r&32),m=zu(r&31,this.index);o?(this.pio.irq&=~(1<<m),this.pio.irqUpdated()):(this.pio.irq|=1<<m,this.pio.irqUpdated(),d&&this.wait(be.IRQ,!1,m));break}case 7:{const o=r&31;switch(r>>5){case 0:this.setSetPins(o);break;case 1:this.x=o;break;case 2:this.y=o;break;case 4:this.setSetPinDirs(o);break}break}}this.cycles++;const{sidesetCount:i,execCtrl:s}=this,a=t>>8&31,u=!!(s&T6),n=a&(1<<5-i)-1;if(i&&(!u||a&16)){const o=a>>5-i;this.setSideset(o,u?i-1:i)}this.execValid?(this.execValid=!1,this.executeInstruction(this.execOpcode)):this.waiting?(this.waitDelay<0&&(this.waitDelay=n),this.checkWait()):this.cycles+=n}wait(t,r,i){this.waiting=!0,this.waitType=t,this.waitPolarity=r,this.waitIndex=i,this.waitDelay=-1,this.updatePC=!1}nextPC(){this.pc===this.wrapTop?this.pc=this.wrapBottom:this.pc=this.pc+1&31}step(){this.waiting&&(this.checkWait(),this.waiting)||(this.updatePC=!0,this.executeInstruction(this.pio.instructions[this.pc]),this.updatePC&&this.nextPC())}setSetPinDirs(t){this.pio.pinDirectionsChanged(t,this.setBase,this.setCount)}setSetPins(t){this.pio.pinValuesChanged(t,this.setBase,this.setCount)}setSideset(t,r){this.execCtrl&I6?this.pio.pinDirectionsChanged(t,this.sidesetBase,r):this.pio.pinValuesChanged(t,this.sidesetBase,r)}transformMovValue(t,r){switch(r){case 0:return t;case 1:return~t;case 2:return P6(t);case 3:default:return t}}setMovDestination(t,r){switch(t){case 0:this.setOutPins(r);break;case 1:this.x=r;break;case 2:this.y=r;break;case 3:break;case 4:this.execOpcode=r,this.execValid=!0;break;case 5:this.pc=r&31,this.updatePC=!1;break;case 6:this.inputShiftReg=r,this.inputShiftCount=0;break;case 7:this.outputShiftReg=r,this.outputShiftCount=0;break}}readUint32(t){switch(t+Zt){case Zt:return this.clockDivInt<<16|this.clockDivFrac<<8;case Au:return this.execCtrl;case Lu:return this.shiftCtrl;case Ou:return this.pc;case Mu:return this.pio.instructions[this.pc];case Zn:return this.pinCtrl}return this.pio.error(`Read from invalid state machine register: ${t}`),0}writeUint32(t,r){switch(t+Zt){case Zt:this.clockDivFrac=r>>>8&255,this.clockDivInt=r>>>16;break;case Au:this.execCtrl=(r&2147483647|this.execCtrl&2147483648)>>>0;break;case Lu:this.shiftCtrl=r;break;case Ou:break;case Mu:this.executeInstruction(r&65535),this.waiting&&(this.execCtrl|=Vu);break;case Zn:this.pinCtrl=r;break;default:this.pio.error(`Write to invalid state machine register: ${t}`)}}get fifoStat(){return((this.txFIFO.empty?S6:0)|(this.txFIFO.full?y6:0)|(this.rxFIFO.empty?C6:0)|(this.rxFIFO.full?w6:0))<<this.index}restart(){this.cycles=0,this.inputShiftCount=0,this.outputShiftCount=32,this.inputShiftReg=0,this.waiting=!1}clkDivRestart(){this.pio.warn("clkDivRestart not implemented")}checkWait(){if(this.waiting){switch(this.waitType){case be.IRQ:{const t=!!(this.pio.irq&1<<this.waitIndex);t===this.waitPolarity&&(this.waiting=!1,t&&(this.pio.irq&=~(1<<this.waitIndex)));break}case be.Pin:{this.waitIndex<this.rp2040.gpio.length&&this.rp2040.gpio[this.waitIndex].inputValue===this.waitPolarity&&(this.waiting=!1);break}case be.rxFIFO:{this.rxFIFO.full||(this.rxFIFO.push(this.waitIndex),this.waiting=!1,this.updateDMARx(),this.pio.checkInterrupts());break}case be.txFIFO:{this.txFIFO.empty||(this.outputShiftReg=this.txFIFO.pull(),this.waiting=!1,this.updateDMATx(),this.pio.checkInterrupts());break}case be.Out:{this.txFIFO.empty||(this.outputShiftReg=this.txFIFO.pull(),this.outInstruction(this.waitIndex),this.waiting=!1,this.updateDMATx(),this.pio.checkInterrupts());break}}this.waiting||(this.nextPC(),this.cycles+=this.waitDelay,this.execCtrl&=~Vu)}}}class Wu extends ge{constructor(t,r,i,s){super(t,r),this.firstIrq=i,this.index=s,this.instructions=new Uint32Array(32),this.dreqRx=this.index?L6:D6,this.dreqTx=this.index?O6:A6,this.machines=[new Ys(this.rp2040,this,0),new Ys(this.rp2040,this,1),new Ys(this.rp2040,this,2),new Ys(this.rp2040,this,3)],this.stopped=!0,this.fdebug=0,this.txStall=0,this.rxStall=0,this.inputSyncBypass=0,this.irq=0,this.pinValues=0,this.pinDirections=0,this.oldPinValues=0,this.oldPinDirections=0,this.runTimer=null,this.irq0IntEnable=0,this.irq0IntForce=0,this.irq1IntEnable=0,this.irq1IntForce=0}get intRaw(){return(this.irq&15)<<8|(this.machines[3].txFIFO.full?0:128)|(this.machines[2].txFIFO.full?0:64)|(this.machines[1].txFIFO.full?0:32)|(this.machines[0].txFIFO.full?0:16)|(this.machines[3].rxFIFO.empty?0:8)|(this.machines[2].rxFIFO.empty?0:4)|(this.machines[1].rxFIFO.empty?0:2)|(this.machines[0].rxFIFO.empty?0:1)}get irq0IntStatus(){return this.intRaw&this.irq0IntEnable|this.irq0IntForce}get irq1IntStatus(){return this.intRaw&this.irq1IntEnable|this.irq1IntForce}readUint32(t){if(t>=Zt&&t<=Zn)return this.machines[0].readUint32(t-Zt);if(t>=Xs&&t<=Fu)return this.machines[1].readUint32(t-Xs);if(t>=qs&&t<=Bu)return this.machines[2].readUint32(t-qs);if(t>=Gs&&t<=Uu)return this.machines[3].readUint32(t-Gs);switch(t){case wu:return(this.machines[0].enabled?1:0)|(this.machines[1].enabled?2:0)|(this.machines[2].enabled?4:0)|(this.machines[3].enabled?8:0);case r6:return this.machines[0].fifoStat|this.machines[1].fifoStat|this.machines[2].fifoStat|this.machines[3].fifoStat;case xu:return this.fdebug;case i6:return this.machines[0].txFIFO.itemCount&15|(this.machines[0].rxFIFO.itemCount&15)<<4|(this.machines[1].txFIFO.itemCount&15)<<8|(this.machines[1].rxFIFO.itemCount&15)<<12|(this.machines[2].txFIFO.itemCount&15)<<16|(this.machines[2].rxFIFO.itemCount&15)<<20|(this.machines[3].txFIFO.itemCount&15)<<24|(this.machines[3].rxFIFO.itemCount&15)<<28;case _6:return this.machines[0].readFIFO();case g6:return this.machines[1].readFIFO();case m6:return this.machines[2].readFIFO();case v6:return this.machines[3].readFIFO();case Eu:return this.irq;case Ru:return 0;case bu:return this.inputSyncBypass;case s6:return this.pinValues;case n6:return this.pinDirections;case o6:return 2098180;case l6:return this.intRaw;case Iu:return this.irq0IntEnable;case Tu:return this.irq0IntForce;case c6:return this.irq0IntStatus;case Pu:return this.irq1IntEnable;case Du:return this.irq1IntForce;case h6:return this.irq1IntStatus}return super.readUint32(t)}writeUint32(t,r){if(t>=ku&&t<=a6){const i=t-ku>>2;this.instructions[i]=r&65535;return}if(t>=Zt&&t<=Zn){this.machines[0].writeUint32(t-Zt,r);return}if(t>=Xs&&t<=Fu){this.machines[1].writeUint32(t-Xs,r);return}if(t>=qs&&t<=Bu){this.machines[2].writeUint32(t-qs,r);return}if(t>=Gs&&t<=Uu){this.machines[3].writeUint32(t-Gs,r);return}switch(t){case wu:{for(let s=0;s<4;s++)this.machines[s].enabled=!!(r&1<<s),r&1<<4+s&&this.machines[s].restart(),r&1<<8+s&&this.machines[s].clkDivRestart();const i=r&15;this.stopped&&i&&(this.stopped=!1,this.run()),i||(this.stopped=!0);break}case xu:this.fdebug&=~this.rawWriteValue,this.fdebug|=this.txStall|this.rxStall;break;case u6:this.machines[0].writeFIFO(r);break;case f6:this.machines[1].writeFIFO(r);break;case d6:this.machines[2].writeFIFO(r);break;case p6:this.machines[3].writeFIFO(r);break;case Eu:this.irq&=~this.rawWriteValue,this.irqUpdated();break;case bu:this.inputSyncBypass=r;break;case Ru:this.irq|=r,this.irqUpdated();break;case Iu:this.irq0IntEnable=r&4095,this.checkInterrupts();break;case Tu:this.irq0IntForce=r&4095,this.checkInterrupts();break;case Pu:this.irq1IntEnable=r&4095,this.checkInterrupts();break;case Du:this.irq1IntForce=r&4095,this.checkInterrupts();break;default:super.writeUint32(t,r)}}pinValuesChanged(t,r,i){const s=i>31?4294967295:(1<<i)-1<<r,a=(this.pinValues&~s|t<<r&s)&1073741823;this.pinValues=a}pinDirectionsChanged(t,r,i){const s=i>31?4294967295:(1<<i)-1<<r,a=(this.pinDirections&~s|t<<r&s)&1073741823;this.pinDirections=a}checkInterrupts(){const{firstIrq:t}=this;this.rp2040.setInterrupt(t,!!this.irq0IntStatus),this.rp2040.setInterrupt(t+1,!!this.irq1IntStatus)}irqUpdated(){for(const t of this.machines)t.checkWait();this.checkInterrupts()}checkChangedPins(){const t=this.oldPinDirections^this.pinDirections|this.oldPinValues^this.pinValues;if(t){this.oldPinDirections=this.pinDirections,this.oldPinValues=this.pinValues;const{gpio:r}=this.rp2040;for(let i=0;i<r.length;i++)t&1<<i&&r[i].checkForUpdates()}}step(){for(const t of this.machines)t.step();this.checkChangedPins()}run(){for(let t=0;t<1e3&&!this.stopped;t++)this.step();this.stopped||(this.runTimer=setTimeout(()=>this.run(),0))}stop(){for(const t of this.machines)t.enabled=!1;this.stopped=!0,this.runTimer&&(clearTimeout(this.runTimer),this.runTimer=null)}}var jt;(function(e){e[e.Low=0]="Low",e[e.High=1]="High",e[e.Input=2]="Input",e[e.InputPullUp=3]="InputPullUp",e[e.InputPullDown=4]="InputPullDown",e[e.InputBusKeeper=5]="InputBusKeeper"})(jt||(jt={}));const oa=4,$u=5,ju=6,Ku=7;function Qs(e,t){switch(t){case 0:return e;case 1:return!e;case 2:return!1;case 3:return!0}return console.error("applyOverride received invalid override type",t),e}const Zs=8,Js=4,Xu=2,qu=1;class ee{constructor(t,r,i=r.toString()){this.rp2040=t,this.index=r,this.name=i,this.rawInputValue=!1,this.lastValue=this.value,this.ctrl=31,this.padValue=54,this.irqEnableMask=0,this.irqForceMask=0,this.irqStatus=0,this.listeners=new Set}get rawInterrupt(){return!!(this.irqStatus&this.irqEnableMask|this.irqForceMask)}get isSlewFast(){return!!(this.padValue&1)}get schmittEnabled(){return!!(this.padValue&2)}get pulldownEnabled(){return!!(this.padValue&4)}get pullupEnabled(){return!!(this.padValue&8)}get driveStrength(){return this.padValue>>4&3}get inputEnable(){return!!(this.padValue&64)}get outputDisable(){return!!(this.padValue&128)}get functionSelect(){return this.ctrl&31}get outputOverride(){return this.ctrl>>8&3}get outputEnableOverride(){return this.ctrl>>12&3}get inputOverride(){return this.ctrl>>16&3}get irqOverride(){return this.ctrl>>28&3}get rawOutputEnable(){const{index:t,rp2040:r,functionSelect:i}=this,s=1<<t;switch(i){case oa:return!!(r.pwm.gpioDirection&s);case $u:return!!(r.sio.gpioOutputEnable&s);case ju:return!!(r.pio[0].pinDirections&s);case Ku:return!!(r.pio[1].pinDirections&s);default:return!1}}get rawOutputValue(){const{index:t,rp2040:r,functionSelect:i}=this,s=1<<t;switch(i){case oa:return!!(r.pwm.gpioValue&s);case $u:return!!(r.sio.gpioValue&s);case ju:return!!(r.pio[0].pinValues&s);case Ku:return!!(r.pio[1].pinValues&s);default:return!1}}get inputValue(){return Qs(this.rawInputValue&&this.inputEnable,this.inputOverride)}get irqValue(){return Qs(this.rawInterrupt,this.irqOverride)}get outputEnable(){return Qs(this.rawOutputEnable,this.outputEnableOverride)}get outputValue(){return Qs(this.rawOutputValue,this.outputOverride)}get status(){const t=this.irqValue?67108864:0,r=this.rawInterrupt?1<<24:0,i=this.inputValue?1<<19:0,s=this.rawInputValue?1<<17:0,a=this.outputEnable?8192:0,u=this.rawOutputEnable?4096:0,n=this.outputValue?512:0,o=this.rawOutputValue?256:0;return t|r|i|s|a|u|n|o}get value(){return this.outputEnable?this.outputValue?jt.High:jt.Low:this.pulldownEnabled&&this.pullupEnabled?jt.InputBusKeeper:this.pulldownEnabled?jt.InputPullDown:this.pullupEnabled?jt.InputPullUp:jt.Input}setInputValue(t){this.rawInputValue=t;const r=this.irqValue;t&&this.inputEnable?(this.irqStatus|=Zs|Xu,this.irqStatus&=~qu):(this.irqStatus|=Js|qu,this.irqStatus&=~Xu),this.irqValue!==r&&this.rp2040.updateIOInterrupt(),this.functionSelect===oa&&this.rp2040.pwm.gpioOnInput(this.index);for(const i of this.rp2040.pio)for(const s of i.machines)s.enabled&&s.waiting&&s.waitType===be.Pin&&s.waitIndex===this.index&&s.checkWait()}checkForUpdates(){const{lastValue:t,value:r}=this;if(r!==t){this.lastValue=r;for(const i of this.listeners)i(r,t)}}refreshInput(){this.setInputValue(this.rawInputValue)}updateIRQValue(t){t&Js&&this.irqStatus&Js&&(this.irqStatus&=~Js,this.rp2040.updateIOInterrupt()),t&Zs&&this.irqStatus&Zs&&(this.irqStatus&=~Zs,this.rp2040.updateIOInterrupt())}addListener(t){return this.listeners.add(t),()=>this.listeners.delete(t)}}const Gu=0,M6=4,Yu=8,F6=12,Qu=16,B6=20,Zu=24,Ju=28,U6=32,k_=31,I_=16,T_=7,wn=12,e0=1024,aa=512,N6=256,xn=8,P_=4,D_=2,Tl=1,t0=k_<<I_|T_<<wn|xn|P_|D_|Tl,Pl=15,Dl=24,H6=15,V6=16,r0=2048,i0=1024,z6=512,W6=256,A_=8,L_=4,O_=2,M_=1,s0=Pl<<Dl|A_|L_|O_|M_,$6=32768,j6=65535,K6=8,X6=255,q6=0,la=1;class G6 extends ge{get temperatueEnable(){return this.cs&D_}get enabled(){return this.cs&Tl}get divider(){return 1+(this.clockDiv>>K6&j6)+(this.clockDiv>>q6&X6)/256}get intRaw(){const t=this.fcs>>Dl&Pl;return this.fifo.itemCount>=t?la:0}get intStatus(){return this.intRaw&this.intEnable|this.intForce}get activeChannel(){return this.cs>>wn&T_}set activeChannel(t){this.cs&=-28673,this.cs|=(t&wn)<<wn}constructor(t,r){super(t,r),this.numChannels=5,this.resolution=12,this.sampleTime=2,this.channelValues=[0,0,0,0,0],this.onADCRead=i=>{this.currentChannel=i,this.sampleAlarm.schedule(this.sampleTime*1e3)},this.fifo=new Bt(4),this.dreq=ne.DREQ_ADC,this.cs=0,this.fcs=0,this.clockDiv=0,this.intEnable=0,this.intForce=0,this.result=0,this.busy=!1,this.err=!1,this.currentChannel=0,this.sampleAlarm=this.rp2040.clock.createAlarm(()=>this.completeADCRead(this.channelValues[this.currentChannel],!1)),this.multiShotAlarm=this.rp2040.clock.createAlarm(()=>{this.cs&xn&&this.startADCRead()})}checkInterrupts(){this.rp2040.setInterrupt(me.ADC_FIFO,!!this.intStatus)}startADCRead(){this.busy=!0,this.onADCRead(this.activeChannel)}updateDMA(){if(this.fcs&A_){const t=this.fcs>>Dl&Pl;this.fifo.itemCount>=t?this.rp2040.dma.setDREQ(this.dreq):this.rp2040.dma.clearDREQ(this.dreq)}}completeADCRead(t,r){this.busy=!1,this.result=t,r?this.cs|=e0|aa:this.cs&=~aa,this.fcs&M_&&(this.fifo.full?this.fcs|=r0:(t&=4095,this.fcs&O_&&(t>>=4),r&&this.fcs&L_&&(t|=$6),this.fifo.push(t),this.updateDMA(),this.checkInterrupts()));const i=this.cs>>I_&k_;if(i){let s=this.activeChannel+1;for(;!(i&1<<s);)s=(s+1)%this.numChannels;this.activeChannel=s}if(this.cs&xn){const a=48*this.sampleTime;if(this.divider>a){const u=(this.divider-a)/48;this.multiShotAlarm.schedule(u*1e3)}else this.startADCRead()}}readUint32(t){switch(t){case Gu:return this.cs|(this.err?aa:0)|(this.busy?0:N6);case M6:return this.result;case Yu:return this.fcs|(this.fifo.itemCount&H6)<<V6|(this.fifo.full?z6:0)|(this.fifo.empty?W6:0);case F6:if(this.fifo.empty)return this.fcs|=i0,0;{const r=this.fifo.pull();return this.updateDMA(),r}case Qu:return this.clockDiv;case B6:return this.intRaw;case Zu:return this.intEnable;case Ju:return this.intForce;case U6:return this.intStatus}return super.readUint32(t)}writeUint32(t,r){switch(t){case Gu:this.fcs&=~(r&e0),this.cs=this.cs&~t0|r&t0,r&Tl&&!this.busy&&(r&P_||r&xn)&&this.startADCRead();break;case Yu:this.fcs&=~(r&(r0|i0)),this.fcs=this.fcs&~s0|r&s0,this.checkInterrupts();break;case Qu:this.clockDiv=r;break;case Zu:this.intEnable=r&la,this.checkInterrupts();break;case Ju:this.intForce=r&la,this.checkInterrupts();break;default:super.writeUint32(t,r)}}}const Y6=4,n0=8,o0=12,a0=16,l0=20,c0=24,h0=28,u0=32,f0=36;class Q6 extends ge{constructor(t,r){super(t,r),this.voltageSelect=0,this.perfCtr=[0,0,0,0],this.perfSel=[31,31,31,31]}readUint32(t){switch(t){case Y6:return 1;case n0:return this.perfCtr[0];case o0:return this.perfSel[0];case a0:return this.perfCtr[1];case l0:return this.perfSel[1];case c0:return this.perfCtr[2];case h0:return this.perfSel[2];case u0:return this.perfCtr[3];case f0:return this.perfSel[3]}return super.readUint32(t)}writeUint32(t,r){switch(t){case n0:this.perfCtr[0]=0;break;case o0:this.perfSel[0]=r&31;break;case a0:this.perfCtr[1]=0;break;case l0:this.perfSel[1]=r&31;break;case c0:this.perfCtr[2]=0;break;case h0:this.perfSel[2]=r&31;break;case u0:this.perfCtr[3]=0;break;case f0:this.perfSel[3]=r&31;break;default:super.writeUint32(t,r)}}}const d0=0,p0=4,Z6=8,_0=12,g0=16,J6=20,m0=24,v0=28,e5=32,S0=36,y0=40,t5=44,C0=48,w0=52,r5=56,x0=60,E0=64,i5=68,R0=72,b0=76,s5=80,k0=84,I0=88,n5=92,T0=96,P0=100,o5=104,D0=108,A0=112,a5=116,L0=120,l5=124;class c5 extends ge{constructor(t,r){super(t,r),this.gpout0Ctrl=0,this.gpout0Div=256,this.gpout1Ctrl=0,this.gpout1Div=256,this.gpout2Ctrl=0,this.gpout2Div=256,this.gpout3Ctrl=0,this.gpout3Div=256,this.refCtrl=0,this.refDiv=256,this.periCtrl=0,this.periDiv=256,this.usbCtrl=0,this.usbDiv=256,this.sysCtrl=0,this.sysDiv=256,this.adcCtrl=0,this.adcDiv=256,this.rtcCtrl=0,this.rtcDiv=256}readUint32(t){switch(t){case d0:return this.gpout0Ctrl&1252832;case p0:return this.gpout0Div;case Z6:return 1;case _0:return this.gpout1Ctrl&1252832;case g0:return this.gpout1Div;case J6:return 1;case m0:return this.gpout2Ctrl&1252832;case v0:return this.gpout2Div;case e5:return 1;case S0:return this.gpout3Ctrl&1252832;case y0:return this.gpout3Div;case t5:return 1;case C0:return this.refCtrl&99;case w0:return this.refDiv&48;case r5:return 1<<(this.refCtrl&3);case x0:return this.sysCtrl&225;case E0:return this.sysDiv;case i5:return 1<<(this.sysCtrl&1);case R0:return this.periCtrl&3296;case b0:return this.periDiv;case s5:return 1;case k0:return this.usbCtrl&1248480;case I0:return this.usbDiv;case n5:return 1;case T0:return this.adcCtrl&1248480;case P0:return this.adcDiv&48;case o5:return 1;case D0:return this.rtcCtrl&1248480;case A0:return this.rtcDiv&48;case a5:return 1;case L0:return 255;case l5:return 0}return super.readUint32(t)}writeUint32(t,r){switch(t){case d0:this.gpout0Ctrl=r;break;case p0:this.gpout0Div=r;break;case _0:this.gpout1Ctrl=r;break;case g0:this.gpout1Div=r;break;case m0:this.gpout2Ctrl=r;break;case v0:this.gpout2Div=r;break;case S0:this.gpout3Ctrl=r;break;case y0:this.gpout3Div=r;break;case C0:this.refCtrl=r;break;case w0:this.refDiv=r;break;case x0:this.sysCtrl=r;break;case E0:this.sysDiv=r;break;case R0:this.periCtrl=r;break;case b0:this.periDiv=r;break;case k0:this.usbCtrl=r;break;case I0:this.usbDiv=r;break;case T0:this.adcCtrl=r;break;case P0:this.adcDiv=r;break;case D0:this.rtcCtrl=r;break;case A0:this.rtcDiv=r;break;case L0:return;default:super.writeUint32(t,r);break}}}const O0=0,M0=4,F0=8,B0=16,U0=20,N0=24,H0=28,V0=32,h5=44,u5=48,f5=52,z0=56,W0=60,d5=64,p5=68,_5=72,g5=76,m5=80,v5=84,S5=88,y5=92,C5=96,w5=100,x5=104,$0=108,E5=112,R5=116,b5=120,j0=124,k5=128,I5=156,K0=160,T5=244,P5=248,D5=252,A5=64,L5=32,X0=16,en=1,q0=3,O5=1,M5=32,F5=16,B5=8,U5=4,N5=2,H5=1,V5=4,Oi=2,tn=1,z5=23,W5=65536,$5=4096,ca=512,j5=16,K5=8,X5=4,q5=2,G5=1;var Jn;(function(e){e[e.Write=0]="Write",e[e.Read=1]="Read"})(Jn||(Jn={}));var vr;(function(e){e[e.Invalid=0]="Invalid",e[e.Standard=1]="Standard",e[e.FastMode=2]="FastMode",e[e.HighSpeedMode=3]="HighSpeedMode"})(vr||(vr={}));var Me;(function(e){e[e.Idle=0]="Idle",e[e.Start=1]="Start",e[e.Connect=2]="Connect",e[e.Connected=3]="Connected",e[e.Stop=4]="Stop"})(Me||(Me={}));const G0=2048,ha=1024,ua=512,Y0=256,Q0=128,fa=64,Z0=32,J0=16,da=8,e1=4,pa=2,_a=1,Y5=1024,Q5=1024,Z5=512,t1=256;class r1 extends ge{get intStatus(){return this.intRaw&this.intEnable}get speed(){return this.control>>en&q0}get sclLowPeriod(){return this.speed===vr.Standard?this.ssClockLowPeriod:this.fsClockLowPeriod}get sclHighPeriod(){return this.speed===vr.Standard?this.ssClockHighPeriod:this.fsClockHighPeriod}get masterBits(){return this.control&X0?10:7}constructor(t,r,i){super(t,r),this.irq=i,this.state=Me.Idle,this.busy=!1,this.stop=!1,this.pendingRestart=!1,this.firstByte=!1,this.rxFIFO=new Bt(16),this.txFIFO=new Bt(16),this.onStart=()=>this.completeStart(),this.onConnect=()=>this.completeConnect(!1),this.onWriteByte=()=>this.completeWrite(!1),this.onReadByte=()=>this.completeRead(255),this.onStop=()=>this.completeStop(),this.enable=0,this.rxThreshold=0,this.txThreshold=0,this.control=A5|L5|vr.FastMode<<en|O5,this.ssClockHighPeriod=40,this.ssClockLowPeriod=47,this.fsClockHighPeriod=6,this.fsClockLowPeriod=13,this.targetAddress=85,this.slaveAddress=85,this.abortSource=0,this.intRaw=0,this.intEnable=0,this.spikelen=7}checkInterrupts(){this.rp2040.setInterrupt(this.irq,!!this.intStatus)}clearInterrupts(t){return this.intRaw&t?(this.intRaw&=~t,this.checkInterrupts(),1):0}setInterrupts(t){this.intRaw&t||(this.intRaw|=t,this.checkInterrupts())}abort(t){this.abortSource&=-512,this.abortSource|=t|this.txFIFO.itemCount<<z5,this.txFIFO.reset(),this.setInterrupts(fa)}nextCommand(){const t=this.enable&tn,r=this.enable&V5;if(this.txFIFO.empty||this.busy||r||!t)return;this.busy=!0;const i=!!(this.txFIFO.peek()&Q5)&&!this.pendingRestart&&!this.stop;if(this.state===Me.Idle||i){this.pendingRestart=i,this.stop=!1,this.state=Me.Start,this.onStart(i);return}this.pendingRestart=!1;const s=this.txFIFO.pull(),a=!!(s&t1);this.stop=!!(s&Z5),a?this.onReadByte(!this.stop):this.onWriteByte(s&255),this.txFIFO.itemCount<=this.txThreshold&&this.setInterrupts(J0)}pushRX(t){if(this.rxFIFO.full){this.setInterrupts(pa);return}this.rxFIFO.push(t),this.rxFIFO.itemCount>this.rxThreshold&&this.setInterrupts(e1)}completeStart(){if(this.txFIFO.empty||this.state!==Me.Start||this.stop){this.onStop();return}const t=this.txFIFO.peek()&t1?Jn.Read:Jn.Write;this.state=Me.Connect,this.setInterrupts(ha);const r=this.masterBits===10?1023:255;this.onConnect(this.targetAddress&r,t)}completeConnect(t,r=0){if(!t||this.stop){t||(this.targetAddress?this.control&X0?this.abort(r===0?q5:X5):this.abort(G5):this.abort(j5)),this.state=Me.Stop,this.onStop();return}this.state=Me.Connected,this.busy=!1,this.firstByte=!0,this.nextCommand()}completeWrite(t){if(!t||this.stop){t||this.abort(K5),this.state=Me.Stop,this.onStop();return}this.busy=!1,this.nextCommand()}completeRead(t){if(this.pushRX(t|(this.firstByte?Y5:0)),this.stop){this.state=Me.Stop,this.onStop();return}this.firstByte=!1,this.busy=!1,this.nextCommand()}completeStop(){this.state=Me.Idle,this.setInterrupts(ua),this.busy=!1,this.pendingRestart=!1,this.enable&Oi?this.enable&=~Oi:this.nextCommand()}arbitrationLost(){this.state=Me.Idle,this.busy=!1,this.abort($5)}readUint32(t){switch(t){case O0:return this.control;case M0:return this.targetAddress;case F0:return this.slaveAddress;case B0:return this.rxFIFO.empty?(this.setInterrupts(_a),0):(this.clearInterrupts(e1),this.rxFIFO.pull());case U0:return this.ssClockHighPeriod;case N0:return this.ssClockLowPeriod;case H0:return this.fsClockHighPeriod;case V0:return this.fsClockLowPeriod;case h5:return this.intStatus;case u5:return this.intEnable;case f5:return this.intRaw;case z0:return this.rxThreshold;case W0:return this.txThreshold;case d5:return this.abortSource&=ca,this.clearInterrupts(_a|pa|da|Z0|fa|Q0|Y0|ua|ha|G0);case p5:return this.clearInterrupts(_a);case _5:return this.clearInterrupts(pa);case g5:return this.clearInterrupts(da);case m5:return this.clearInterrupts(Z0);case v5:return this.abortSource&=ca,this.clearInterrupts(fa);case S5:return this.clearInterrupts(Q0);case y5:return this.clearInterrupts(Y0);case C5:return this.clearInterrupts(ua);case w5:return this.clearInterrupts(ha);case x5:return this.clearInterrupts(G0);case $0:return this.enable;case E5:return(this.state!==Me.Idle?M5|H5:0)|(this.rxFIFO.full?F5:0)|(this.rxFIFO.empty?0:B5)|(this.txFIFO.empty?U5:0)|(this.txFIFO.full?0:N5);case R5:return this.txFIFO.itemCount;case b5:return this.rxFIFO.itemCount;case j0:return 1;case k5:{const r=this.abortSource;return this.abortSource&=ca,r}case I5:return this.enable&1;case K0:return this.spikelen&255;case T5:return 0;case P5:return 842019114;case D5:return 1146552640}return super.readUint32(t)}writeUint32(t,r){switch(t){case O0:(r>>en&q0)===vr.Invalid&&(r=r&-7|vr.HighSpeedMode<<en),this.control=r;return;case M0:this.targetAddress=r&1023;return;case F0:this.slaveAddress=r&1023;return;case B0:this.txFIFO.full?this.setInterrupts(da):(this.txFIFO.push(r),this.clearInterrupts(J0),this.nextCommand());return;case U0:this.ssClockHighPeriod=r&65535;return;case N0:this.ssClockLowPeriod=r&65535;return;case H0:this.fsClockHighPeriod=r&65535;return;case V0:this.fsClockLowPeriod=r&65535;return;case j0:r&tn||r!=1&&this.warn("Unimplemented write to IC_SDA_HOLD");return;case z0:this.rxThreshold=r&255,this.rxThreshold>this.rxFIFO.size&&(this.rxThreshold=this.rxFIFO.size);return;case W0:this.txThreshold=r&255,this.txThreshold>this.txFIFO.size&&(this.txThreshold=this.txFIFO.size);return;case $0:r|=this.enable&Oi,r&Oi&&(this.state===Me.Idle?r&=~Oi:(this.abort(W5),this.stop=!0)),r&tn||(this.txFIFO.reset(),this.rxFIFO.reset()),this.enable=r,this.nextCommand();return;case K0:!(r&tn)&&r>0&&(this.spikelen=r);return;default:super.writeUint32(t,r)}}}const i1=236,rn=240,s1=256,n1=272,J5=288,o1=300;class e8 extends ge{constructor(t,r){super(t,r)}getPinFromOffset(t){const r=t>>>3;return{gpio:this.rp2040.gpio[r],isCtrl:!!(t&4)}}readUint32(t){if(t<=i1){const{gpio:r,isCtrl:i}=this.getPinFromOffset(t);return i?r.ctrl:r.status}if(t>=rn&&t<=o1){const r=(t&15)*2,i=t&-16,{gpio:s}=this.rp2040;let a=0;for(let u=7;u>=0;u--){const n=s[u+r];if(n)switch(a<<=4,i){case rn:a|=n.irqStatus;break;case s1:a|=n.irqEnableMask;break;case n1:a|=n.irqForceMask;break;case J5:a|=n.irqStatus&n.irqEnableMask|n.irqForceMask;break}}return a}return super.readUint32(t)}writeUint32(t,r){if(t<=i1){const{gpio:i,isCtrl:s}=this.getPinFromOffset(t);s&&(i.ctrl=r,i.checkForUpdates());return}if(t>=rn&&t<=o1){const i=(t&15)*2,s=t&-16,{gpio:a}=this.rp2040;for(let u=0;u<8;u++){const n=a[u+i];if(!n)continue;const o=r>>u*4&15,d=this.rawWriteValue>>u*4&15;switch(s){case rn:n.updateIRQValue(d);break;case s1:n.irqEnableMask!==o&&(n.irqEnableMask=o,this.rp2040.updateIOInterrupt());break;case n1:n.irqForceMask!==o&&(n.irqForceMask=o,this.rp2040.updateIOInterrupt());break}}return}super.writeUint32(t,r)}}const a1=0,t8=4,r8=120,i8=4,s8=24;class l1 extends ge{constructor(t,r,i){super(t,r),this.bank=i,this.voltageSelect=0,this.firstPadRegister=this.bank==="qspi"?i8:t8,this.lastPadRegister=this.bank==="qspi"?s8:r8}getPinFromOffset(t){const r=t-this.firstPadRegister>>>2;return this.bank==="qspi"?this.rp2040.qspi[r]:this.rp2040.gpio[r]}readUint32(t){if(t>=this.firstPadRegister&&t<=this.lastPadRegister)return this.getPinFromOffset(t).padValue;switch(t){case a1:return this.voltageSelect}return super.readUint32(t)}writeUint32(t,r){if(t>=this.firstPadRegister&&t<=this.lastPadRegister){const i=this.getPinFromOffset(t),s=i.inputEnable;i.padValue=r,i.checkForUpdates(),s!==i.inputEnable&&i.refreshInput();return}switch(t){case a1:this.voltageSelect=r&1;break;default:super.writeUint32(t,r)}}}var at;(function(e){e[e.Increment=0]="Increment",e[e.Decrement=1]="Decrement",e[e.ZigZag=2]="ZigZag"})(at||(at={}));class Ic{constructor(t,r){this.clock=t,this.baseFreq=r,this.baseValue=0,this.baseNanos=0,this.topValue=4294967295,this.prescalerValue=1,this.timerMode=at.Increment,this.enabled=!0,this.listeners=[]}reset(){this.baseNanos=this.clock.nanos,this.baseValue=0,this.updated()}set(t,r=!1){this.baseValue=r?this.topValue*2-t:t,this.baseNanos=this.clock.nanos,this.updated()}advance(t){this.baseValue+=t}get rawCounter(){const{baseFreq:t,prescalerValue:r,baseNanos:i,baseValue:s,enabled:a,timerMode:u}=this;if(!t||!r||!a)return this.baseValue;const n=u==at.ZigZag,o=(this.clock.nanos-i)/1e9*(t/r),d=n?this.topValue*2:this.topValue+1,m=u==at.Decrement?d-o%d:o;let p=Math.round(s+m);return this.topValue!=4294967295&&(p%=d),p}get counter(){let t=this.rawCounter;return this.timerMode==at.ZigZag&&t>this.topValue&&(t=this.topValue*2-t),t>>>0}get top(){return this.topValue}set top(t){const{counter:r}=this;this.topValue=t,this.set(r<=this.topValue?r:0)}get frequency(){return this.baseFreq}set frequency(t){this.baseValue=this.counter,this.baseNanos=this.clock.nanos,this.baseFreq=t,this.updated()}get prescaler(){return this.prescalerValue}set prescaler(t){this.baseValue=this.counter,this.baseNanos=this.clock.nanos,this.enabled=this.prescalerValue!==0,this.prescalerValue=t,this.updated()}toNanos(t){const{baseFreq:r,prescalerValue:i}=this;return t*1e9/(r/i)}get enable(){return this.enabled}set enable(t){t!==this.enabled&&(t?this.baseNanos=this.clock.nanos:this.baseValue=this.counter,this.enabled=t,this.updated())}get mode(){return this.timerMode}set mode(t){if(this.timerMode!==t){const{counter:r}=this;this.timerMode=t,this.set(r)}}updated(){for(const t of this.listeners)t()}}class Ji{constructor(t,r){this.timer=t,this.callback=r,this.targetValue=0,this.enabled=!1,this.handleAlarm=()=>{this.callback(),this.enabled&&this.timer.enable&&this.schedule()},this.update=()=>{this.cancel(),this.enabled&&this.timer.enable&&this.schedule()},this.clockAlarm=this.timer.clock.createAlarm(this.handleAlarm),t.listeners.push(this.update)}get enable(){return this.enabled}set enable(t){t!==this.enabled&&(this.enabled=t,t&&this.timer.enable?this.schedule():this.cancel())}get target(){return this.targetValue}set target(t){t!==this.targetValue&&(this.targetValue=t,this.enabled&&this.timer.enable&&(this.cancel(),this.schedule()))}schedule(){const{timer:t,targetValue:r}=this,{top:i,mode:s,rawCounter:a}=t;let u=r-a;if(s===at.ZigZag&&u<0&&(u<-i?u+=2*i:u=i*2-r-a),i!=4294967295&&(u<=0&&(u+=i+1),r>i))return;s===at.Decrement&&(u=i+1-u);const n=u>>>0,o=t.toNanos(n);this.clockAlarm.schedule(o)}cancel(){this.clockAlarm.cancel()}}const n8=3328,c1=3332,h1=3336,u1=3356,f1=3360,ga=16,ma=20,d1=24,o8=28,p1=256,_1=384,g1=512,m1=640,sn=1024,v1=1028,S1=1032,y1=1036,C1=1040,w1=1044,x1=1048,E1=1052,R1=1<<31,b1=1<<28,a8=1<<27,k1=1<<26,l8=1<<25,c8=1<<22,h8=12,u8=511,f8=0;class d8 extends ge{constructor(t,r){super(t,r),this.systickCountFlag=!1,this.systickClkSource=!1,this.systickIntEnable=!1,this.systickReload=0,this.systickTimer=new Ic(this.rp2040.clock,this.rp2040.clkSys),this.systickAlarm=new Ji(this.systickTimer,()=>{this.systickCountFlag=!0,this.systickIntEnable&&(this.rp2040.core.pendingSystick=!0,this.rp2040.core.interruptsUpdated=!0),this.systickTimer.set(this.systickReload)}),this.systickTimer.top=16777215,this.systickTimer.mode=at.Decrement,this.systickAlarm.target=0,this.systickAlarm.enable=!0,this.reset()}reset(){this.writeUint32(ga,0),this.writeUint32(ma,16777215),this.systickTimer.set(16777215)}readUint32(t){const{rp2040:r}=this,{core:i}=r;switch(t){case n8:return 1091356161;case c1:{const s=i.pendingInterrupts||i.pendingPendSV||i.pendingSystick||i.pendingSVCall,a=i.vectPending;return(i.pendingNMI?R1:0)|(i.pendingPendSV?b1:0)|(i.pendingSystick?k1:0)|(s?c8:0)|a<<h8|(i.IPSR&u8)<<f8}case h1:return i.VTOR;case g1:return i.pendingInterrupts>>>0;case m1:return i.pendingInterrupts>>>0;case p1:return i.enabledInterrupts>>>0;case _1:return i.enabledInterrupts>>>0;case sn:case v1:case S1:case y1:case C1:case w1:case x1:case E1:{const s=t-sn>>2;let a=0;for(let u=0;u<4;u++){const n=s*4+u;for(let o=0;o<i.interruptPriorities.length;o++)i.interruptPriorities[o]&1<<n&&(a|=o<<8*u+6)}return a}case u1:return i.SHPR2;case f1:return i.SHPR3;case ga:{const s=this.systickCountFlag?65536:0,a=this.systickClkSource?4:0,u=this.systickIntEnable?2:0,n=this.systickTimer.enable?1:0;return this.systickCountFlag=!1,s|a|u|n}case d1:return this.systickTimer.counter;case ma:return this.systickReload;case o8:return 9999}return super.readUint32(t)}writeUint32(t,r){const{rp2040:i}=this,{core:s}=i,a=(1<<b_)-1;switch(t){case c1:r&R1&&(s.pendingNMI=!0,s.interruptsUpdated=!0),r&b1&&(s.pendingPendSV=!0,s.interruptsUpdated=!0),r&a8&&(s.pendingPendSV=!1),r&k1&&(s.pendingSystick=!0,s.interruptsUpdated=!0),r&l8&&(s.pendingSystick=!1);return;case h1:s.VTOR=r;return;case g1:s.pendingInterrupts|=r,s.interruptsUpdated=!0;return;case m1:s.pendingInterrupts&=~r|a;return;case p1:s.enabledInterrupts|=r,s.interruptsUpdated=!0;return;case _1:s.enabledInterrupts&=~r;return;case sn:case v1:case S1:case y1:case C1:case w1:case x1:case E1:{const u=t-sn>>2;for(let n=0;n<4;n++){const o=u*4+n,d=r>>8*n+6&3;for(let m=0;m<s.interruptPriorities.length;m++)s.interruptPriorities[m]&=~(1<<o);s.interruptPriorities[d]|=1<<o}s.interruptsUpdated=!0;return}case u1:s.SHPR2=r;return;case f1:s.SHPR3=r;return;case ga:this.systickClkSource=!!(r&4),this.systickIntEnable=!!(r&2),this.systickTimer.enable=!!(r&1);return;case d1:this.systickTimer.set(0);return;case ma:this.systickReload=r;return;default:super.writeUint32(t,r)}}}const va=0,Sa=4,ya=8,Ca=12,wa=16,nn=160,I1=164,T1=168,P1=172,p8=176,xa=255,_8=128,g8=64,m8=4,v8=3,S8=8,y8=4,D1=2,Nr=1;var kt;(function(e){e[e.FreeRunning=0]="FreeRunning",e[e.BGated=1]="BGated",e[e.BRisingEdge=2]="BRisingEdge",e[e.BFallingEdge=3]="BFallingEdge"})(kt||(kt={}));class zt{constructor(t,r,i){this.pwm=t,this.clock=r,this.index=i,this.timer=new Ic(this.clock,this.pwm.clockFreq),this.alarmA=new Ji(this.timer,()=>{this.setA(!1)}),this.alarmB=new Ji(this.timer,()=>{this.setB(!1)}),this.alarmBottom=new Ji(this.timer,()=>this.wrap()),this.csr=0,this.div=0,this.cc=0,this.top=0,this.lastBValue=!1,this.countingUp=!0,this.ccUpdated=!1,this.topUpdated=!1,this.tickCounter=0,this.divMode=kt.FreeRunning,this.pinA1=this.index*2,this.pinB1=this.index*2+1,this.pinA2=this.index<7?16+this.index*2:-1,this.pinB2=this.index<7?16+this.index*2+1:-1,this.alarmA.enable=!0,this.alarmB.enable=!0,this.alarmBottom.enable=!0}readRegister(t){switch(t){case va:return this.csr;case Sa:return this.div;case ya:return this.timer.counter;case Ca:return this.cc;case wa:return this.top}return 0}writeRegister(t,r){switch(t){case va:r&Nr&&!(this.csr&Nr)&&this.updateDoubleBuffered(),this.csr=r&-193,this.csr&_8&&this.timer.advance(1),this.csr&g8&&this.timer.advance(-1),this.divMode=this.csr>>m8&v8,this.setBDirection(this.divMode===kt.FreeRunning),this.updateEnable(),this.lastBValue=this.gpioBValue,this.timer.mode=r&D1?at.ZigZag:at.Increment;break;case Sa:{this.div=r&1048575;const i=r>>4&255,s=r&15;this.timer.prescaler=(i||256)+s/16;break}case ya:this.timer.set(r&65535);break;case Ca:this.cc=r,this.ccUpdated=!0;break;case wa:this.top=r&65535,this.topUpdated=!0;break}}reset(){this.writeRegister(va,0),this.writeRegister(Sa,16),this.writeRegister(ya,0),this.writeRegister(Ca,0),this.writeRegister(wa,65535),this.countingUp=!0,this.timer.enable=!1,this.timer.reset()}updateDoubleBuffered(){this.ccUpdated&&(this.alarmB.target=this.cc>>>16,this.alarmA.target=this.cc&65535,this.ccUpdated=!1),this.topUpdated&&(this.timer.top=this.top,this.topUpdated=!1)}wrap(){this.pwm.channelInterrupt(this.index),this.updateDoubleBuffered(),this.csr&D1||(this.setA(this.alarmA.target>0),this.setB(this.alarmB.target>0))}setA(t){this.csr&y8&&(t=!t),this.pwm.gpioSet(this.pinA1,t),this.pinA2>=0&&this.pwm.gpioSet(this.pinA2,t)}setB(t){this.csr&S8&&(t=!t),this.pwm.gpioSet(this.pinB1,t),this.pinB2>=0&&this.pwm.gpioSet(this.pinB2,t)}get gpioBValue(){return this.pwm.gpioRead(this.pinB1)||(this.pinB2>0?this.pwm.gpioRead(this.pinB2):!1)}setBDirection(t){this.pwm.gpioSetDir(this.pinB1,t),this.pinB2>=0&&this.pwm.gpioSetDir(this.pinB2,t)}gpioBChanged(){const t=this.gpioBValue;if(t!==this.lastBValue){switch(this.lastBValue=t,this.divMode){case kt.BGated:this.updateEnable();break;case kt.BRisingEdge:t&&this.tickCounter++;break;case kt.BFallingEdge:t||this.tickCounter++;break}this.tickCounter>=this.timer.prescaler&&(this.timer.advance(1),this.tickCounter-=this.timer.prescaler)}}updateEnable(){const{csr:t,divMode:r}=this,i=!!(t&Nr);this.timer.enable=i&&(r===kt.FreeRunning||r===kt.BGated&&this.gpioBValue)}set en(t){t&&!(this.csr&Nr)&&this.updateDoubleBuffered(),t?this.csr|=Nr:this.csr&=~Nr,this.updateEnable()}}class C8 extends ge{constructor(){super(...arguments),this.channels=[new zt(this,this.rp2040.clock,0),new zt(this,this.rp2040.clock,1),new zt(this,this.rp2040.clock,2),new zt(this,this.rp2040.clock,3),new zt(this,this.rp2040.clock,4),new zt(this,this.rp2040.clock,5),new zt(this,this.rp2040.clock,6),new zt(this,this.rp2040.clock,7)],this.intRaw=0,this.intEnable=0,this.intForce=0,this.gpioValue=0,this.gpioDirection=0}get intStatus(){return this.intRaw&this.intEnable|this.intForce}readUint32(t){if(t<nn){const r=Math.floor(t/20);return this.channels[r].readRegister(t%20)}switch(t){case nn:return this.channels[7].en<<7|this.channels[6].en<<6|this.channels[5].en<<5|this.channels[4].en<<4|this.channels[3].en<<3|this.channels[2].en<<2|this.channels[1].en<<1|this.channels[0].en<<0;case I1:return this.intRaw;case T1:return this.intEnable;case P1:return this.intForce;case p8:return this.intStatus}return super.readUint32(t)}writeUint32(t,r){if(t<nn){const i=Math.floor(t/20);return this.channels[i].writeRegister(t%20,r)}switch(t){case nn:this.channels[7].en=r&128,this.channels[6].en=r&64,this.channels[5].en=r&32,this.channels[4].en=r&16,this.channels[3].en=r&8,this.channels[2].en=r&4,this.channels[1].en=r&2,this.channels[0].en=r&1;break;case I1:this.intRaw&=~(r&xa),this.checkInterrupts();break;case T1:this.intEnable=r&xa,this.checkInterrupts();break;case P1:this.intForce=r&xa,this.checkInterrupts();break;default:super.writeUint32(t,r)}}get clockFreq(){return this.rp2040.clkSys}channelInterrupt(t){this.intRaw|=1<<t,this.checkInterrupts(),this.rp2040.dma.setDREQ(ne.DREQ_PWM_WRAP0+t)}checkInterrupts(){this.rp2040.setInterrupt(me.PWM_WRAP,!!this.intStatus)}gpioSet(t,r){const i=1<<t,s=r?this.gpioValue|i:this.gpioValue&~i;this.gpioValue!=s&&(this.gpioValue=s,this.rp2040.gpio[t].checkForUpdates())}gpioSetDir(t,r){const i=1<<t,s=r?this.gpioDirection|i:this.gpioDirection&~i;this.gpioDirection!=s&&(this.gpioDirection=s,this.rp2040.gpio[t].checkForUpdates())}gpioRead(t){return this.rp2040.gpio[t].inputValue}gpioOnInput(t){if(!(this.gpioDirection&&1<<t))for(const r of this.channels)(r.pinB1===t||r.pinB2===t)&&r.gpioBChanged()}reset(){this.gpioDirection=4294967295;for(const t of this.channels)t.reset()}}const A1=0,L1=4,w8=8;class x8 extends ge{constructor(){super(...arguments),this.reset=0,this.wdsel=0,this.reset_done=33554431}readUint32(t){switch(t){case A1:return this.reset;case L1:return this.wdsel;case w8:return this.reset_done}return super.readUint32(t)}writeUint32(t,r){switch(t){case A1:this.reset=r&33554431;break;case L1:this.wdsel=r&33554431;break;default:super.writeUint32(t,r);break}}}const O1=4,M1=8,F1=12,E8=16,R8=24,b8=28,Ea=1,B1=2,on=16,k8=12,I8=4095,T8=8,P8=15,D8=0,A8=31,L8=16,O8=31,M8=8,F8=63,B8=0,U8=63,N8=12,H8=4095,V8=8,z8=15,W8=0,$8=31,j8=24,K8=7,X8=16,q8=31,G8=8,Y8=63,Q8=0,Z8=63;class J8 extends ge{constructor(){super(...arguments),this.setup0=0,this.setup1=0,this.ctrl=0,this.baseline=new Date(2021,0,1),this.baselineNanos=0}readUint32(t){const r=new Date(this.baseline.getTime()+(this.rp2040.clock.nanos-this.baselineNanos)/1e6);switch(t){case O1:return this.setup0;case M1:return this.setup1;case F1:return this.ctrl;case E8:return 0;case R8:return(r.getFullYear()&H8)<<N8|(r.getMonth()+1&z8)<<V8|(r.getDate()&$8)<<W8;case b8:return(r.getDay()&K8)<<j8|(r.getHours()&q8)<<X8|(r.getMinutes()&Y8)<<G8|(r.getSeconds()&Z8)<<Q8}return super.readUint32(t)}writeUint32(t,r){switch(t){case O1:this.setup0=r;break;case M1:this.setup1=r;break;case F1:if(r&on&&(this.ctrl|=on),r&Ea){if(this.ctrl|=Ea,this.ctrl|=B1,this.ctrl&on){const i=this.setup0>>k8&I8,s=this.setup0>>T8&P8,a=this.setup0>>D8&A8,u=this.setup1>>L8&O8,n=this.setup1>>M8&F8,o=this.setup1>>B8&U8;this.baseline=new Date(i,s-1,a,u,n,o),this.baselineNanos=this.rp2040.clock.nanos,this.ctrl&=~on}}else this.ctrl&=~Ea,this.ctrl&=~B1;break;default:super.writeUint32(t,r)}}}const U1=0,N1=4,H1=8,ev=12,V1=16,z1=20,tv=24,rv=28,iv=32,W1=36,sv=4064,nv=4068,ov=4072,av=4076,lv=4080,cv=4084,hv=4088,uv=4092,fv=255,dv=8,pv=128,_v=64,gv=15,mv=0,vv=4,Sv=2,yv=16,Cv=8,wv=4,xv=2,Ev=1,Rv=254,$1=8,j1=4,bv=2,K1=1;class X1 extends ge{get intStatus(){return this.intRaw&this.intEnable}get enabled(){return!!(this.control1&Sv)}get dataBits(){return(this.control0>>mv&gv)+1}get masterMode(){return!(this.control0&vv)}get spiMode(){const t=this.control0&_v,r=this.control0&pv;return t?r?2:3:r?1:0}get clockFrequency(){if(!this.clockDivisor)return 0;const t=this.control0>>dv&fv;return this.rp2040.clkPeri/(this.clockDivisor*(1+t))}updateDMATx(){this.txFIFO.full?this.rp2040.dma.clearDREQ(this.dreq.tx):this.rp2040.dma.setDREQ(this.dreq.tx)}updateDMARx(){this.rxFIFO.empty?this.rp2040.dma.clearDREQ(this.dreq.rx):this.rp2040.dma.setDREQ(this.dreq.rx)}constructor(t,r,i,s){super(t,r),this.irq=i,this.dreq=s,this.rxFIFO=new Bt(8),this.txFIFO=new Bt(8),this.onTransmit=()=>this.completeTransmit(0),this.busy=!1,this.control0=0,this.control1=0,this.dmaControl=0,this.clockDivisor=0,this.intRaw=0,this.intEnable=0,this.updateDMATx(),this.updateDMARx()}doTX(){if(!this.busy&&!this.txFIFO.empty){const t=this.txFIFO.pull();this.busy=!0,this.onTransmit(t),this.fifosUpdated()}}completeTransmit(t){this.busy=!1,this.rxFIFO.full?this.intRaw|=K1:this.rxFIFO.push(t),this.fifosUpdated(),this.doTX()}checkInterrupts(){this.rp2040.setInterrupt(this.irq,!!this.intStatus)}fifosUpdated(){const t=this.intStatus;this.txFIFO.itemCount<=this.txFIFO.size/2?this.intRaw|=$1:this.intRaw&=~$1,this.rxFIFO.itemCount>=this.rxFIFO.size/2?this.intRaw|=j1:this.intRaw&=~j1,this.intStatus!==t&&this.checkInterrupts(),this.updateDMATx(),this.updateDMARx()}readUint32(t){switch(t){case U1:return this.control0;case N1:return this.control1;case H1:if(!this.rxFIFO.empty){const r=this.rxFIFO.pull();return this.fifosUpdated(),r}return 0;case ev:return(this.busy||!this.txFIFO.empty?yv:0)|(this.rxFIFO.full?Cv:0)|(this.rxFIFO.empty?0:wv)|(this.txFIFO.full?0:xv)|(this.txFIFO.empty?Ev:0);case V1:return this.clockDivisor;case z1:return this.intEnable;case tv:return this.intRaw;case rv:return this.intStatus;case W1:return this.dmaControl;case sv:return 34;case nv:return 16;case ov:return 52;case av:return 0;case lv:return 13;case cv:return 240;case hv:return 5;case uv:return 177}return super.readUint32(t)}writeUint32(t,r){switch(t){case U1:this.control0=r;return;case N1:this.control1=r;return;case H1:this.txFIFO.full||(this.txFIFO.push(r&(1<<this.dataBits)-1),this.doTX(),this.fifosUpdated());return;case V1:this.clockDivisor=r&Rv;return;case z1:this.intEnable=r,this.checkInterrupts();return;case W1:this.dmaControl=r;return;case iv:this.intRaw&=~(r&(bv|K1)),this.checkInterrupts();return;default:super.writeUint32(t,r)}}}const q1=0,G1=4,Y1=8,Q1=20,Z1=32,J1=36,kv=40,Iv=2,Tv=4,Pv=8,Dv=88,Av=92,ef=96,tf=240,rf=244,sf=248,Lv=5;class Ov extends ge{constructor(){super(...arguments),this.dr0=0,this.txflr=0,this.rxflr=0,this.baudr=0,this.crtlr0=0,this.crtlr1=0,this.ssienr=0,this.spictlr0=0,this.rxsampldly=0,this.txddriveedge=0}readUint32(t){switch(t){case Z1:return this.txflr;case J1:return this.rxflr;case q1:return this.crtlr0;case G1:return this.crtlr1;case Y1:return this.ssienr;case Q1:return this.baudr;case kv:return Tv|Pv|Iv;case Dv:return 1364414537;case Av:return 875573546;case tf:return this.rxsampldly;case sf:return this.txddriveedge;case rf:return this.spictlr0;case ef:return this.dr0}return super.readUint32(t)}writeUint32(t,r){switch(t){case Z1:this.txflr=r;return;case J1:this.rxflr=r;return;case q1:this.crtlr0=r;return;case G1:this.crtlr1=r;return;case Y1:this.ssienr=r;return;case Q1:this.baudr=r;return;case tf:this.rxsampldly=r&255;return;case sf:this.txddriveedge=r&255;return;case rf:this.spictlr0=r;return;case ef:r===Lv&&(this.dr0=0);return;default:super.writeUint32(t,r)}}}const nf=0;class Mv extends ge{readUint32(t){switch(t){case nf:return this.rp2040.core.interruptNMIMask}return super.readUint32(t)}writeUint32(t,r){switch(t){case nf:this.rp2040.core.interruptNMIMask=r;break;default:super.writeUint32(t,r)}}}const Fv=0,Bv=4,Uv=64;let Nv=class extends ge{readUint32(t){switch(t){case Fv:return 268445991;case Bv:return 2;case Uv:return 3771273960}return super.readUint32(t)}};const Hv=0,Vv=1;class zv extends ge{readUint32(t){switch(t){case Hv:return Vv;default:return super.readUint32(t)}}}const Wv=8,$v=12,jv=36,Kv=40,Ra=16,of=20,af=24,lf=28,cf=32,hf=48,uf=52,ff=56,df=60,Xv=64,qv=1,Gv=2,Yv=4,Qv=8,Zv=[me.TIMER_0,me.TIMER_1,me.TIMER_2,me.TIMER_3];class an{constructor(t,r){this.bitValue=t,this.clockAlarm=r,this.armed=!1,this.targetMicros=0}}class Jv extends ge{constructor(t,r){super(t,r),this.latchedTimeHigh=0,this.intRaw=0,this.intEnable=0,this.intForce=0,this.paused=!1,this.clock=t.clock,this.alarms=[new an(qv,this.clock.createAlarm(()=>this.fireAlarm(0))),new an(Gv,this.clock.createAlarm(()=>this.fireAlarm(1))),new an(Yv,this.clock.createAlarm(()=>this.fireAlarm(2))),new an(Qv,this.clock.createAlarm(()=>this.fireAlarm(3)))]}get intStatus(){return this.intRaw&this.intEnable|this.intForce}readUint32(t){const r=this.clock.nanos/1e3;switch(t){case Wv:return this.latchedTimeHigh;case $v:return this.latchedTimeHigh=Math.floor(r/2**32),r>>>0;case jv:return Math.floor(r/2**32);case Kv:return r>>>0;case Ra:return this.alarms[0].targetMicros;case of:return this.alarms[1].targetMicros;case af:return this.alarms[2].targetMicros;case lf:return this.alarms[3].targetMicros;case hf:return this.paused?1:0;case uf:return this.intRaw;case ff:return this.intEnable;case df:return this.intForce;case Xv:return this.intStatus;case cf:return(this.alarms[0].armed?this.alarms[0].bitValue:0)|(this.alarms[1].armed?this.alarms[1].bitValue:0)|(this.alarms[2].armed?this.alarms[2].bitValue:0)|(this.alarms[3].armed?this.alarms[3].bitValue:0)}return super.readUint32(t)}writeUint32(t,r){switch(t){case Ra:case of:case af:case lf:{const i=(t-Ra)/4,s=this.alarms[i],a=r-this.clock.nanos/1e3>>>0;s.armed=!0,s.targetMicros=r,s.clockAlarm.schedule(a*1e3);break}case cf:for(const i of this.alarms)this.rawWriteValue&i.bitValue&&this.disarmAlarm(i);break;case hf:this.paused=!!(r&1),this.paused&&this.warn("Unimplemented Timer Pause");break;case uf:this.intRaw&=~this.rawWriteValue,this.checkInterrupts();break;case ff:this.intEnable=r&15,this.checkInterrupts();break;case df:this.intForce=r&15,this.checkInterrupts();break;default:super.writeUint32(t,r)}}fireAlarm(t){const r=this.alarms[t];this.disarmAlarm(r),this.intRaw|=r.bitValue,this.checkInterrupts()}checkInterrupts(){const{intStatus:t}=this;for(let r=0;r<this.alarms.length;r++)this.rp2040.setInterrupt(Zv[r],!!(t&1<<r))}disarmAlarm(t){t.clockAlarm.cancel(),t.armed=!1}}const pf=0,e7=24,_f=36,gf=40,mf=44,vf=48,Sf=56,t7=60,r7=64,i7=68,s7=4064,n7=4068,o7=4072,a7=4076,l7=4080,c7=4084,h7=4088,u7=4092,f7=128,d7=64,p7=16,_7=16,yf=512,Cf=256,g7=1,m7=32,ba=16;class wf extends ge{constructor(t,r,i,s){super(t,r),this.irq=i,this.dreq=s,this.ctrlRegister=yf|Cf,this.lineCtrlRegister=0,this.rxFIFO=new Bt(32),this.interruptMask=0,this.interruptStatus=0,this.intDivisor=0,this.fracDivisor=0}get enabled(){return!!(this.ctrlRegister&g7)}get txEnabled(){return!!(this.ctrlRegister&Cf)}get rxEnabled(){return!!(this.ctrlRegister&yf)}get fifosEnabled(){return!!(this.lineCtrlRegister&_7)}get wordLength(){switch(this.lineCtrlRegister>>>5&3){case 0:return 5;case 1:return 6;case 2:return 7;case 3:return 8}}get baudDivider(){return this.intDivisor+this.fracDivisor/64}get baudRate(){return Math.round(this.rp2040.clkPeri/(this.baudDivider*16))}get flags(){return(this.rxFIFO.full?d7:0)|(this.rxFIFO.empty?p7:0)|f7}checkInterrupts(){this.interruptStatus|=m7,this.rp2040.setInterrupt(this.irq,!!(this.interruptStatus&this.interruptMask))}feedByte(t){this.rxFIFO.push(t),this.interruptStatus|=ba,this.checkInterrupts()}readUint32(t){switch(t){case pf:{const r=this.rxFIFO.pull();return this.rxFIFO.empty?this.interruptStatus&=~ba:this.interruptStatus|=ba,this.checkInterrupts(),r}case e7:return this.flags;case _f:return this.intDivisor;case gf:return this.fracDivisor;case mf:return this.lineCtrlRegister;case vf:return this.ctrlRegister;case Sf:return this.interruptMask;case t7:return this.interruptStatus;case r7:return this.interruptStatus&this.interruptMask;case s7:return 17;case n7:return 16;case o7:return 52;case a7:return 0;case l7:return 13;case c7:return 240;case h7:return 5;case u7:return 177}return super.readUint32(t)}writeUint32(t,r){var i,s,a;switch(t){case pf:(i=this.onByte)===null||i===void 0||i.call(this,r&255);break;case _f:this.intDivisor=r&65535,(s=this.onBaudRateChange)===null||s===void 0||s.call(this,this.baudRate);break;case gf:this.fracDivisor=r&63,(a=this.onBaudRateChange)===null||a===void 0||a.call(this,this.baudRate);break;case mf:this.lineCtrlRegister=r;break;case vf:this.ctrlRegister=r,this.enabled?this.rp2040.dma.setDREQ(this.dreq.tx):this.rp2040.dma.clearDREQ(this.dreq.tx);break;case Sf:this.interruptMask=r&2047,this.checkInterrupts();break;case i7:this.interruptStatus&=~this.rawWriteValue,this.checkInterrupts();break;default:super.writeUint32(t,r)}}}const v7=16,S7=8,xf=128,y7=132,C7=252,w7=1<<30,x7=1<<29,ka=1024,Ef=32768,Mi=1023,Rf=16,E7=64,bf=0,kf=64,If=80,Tf=88,R7=92,b7=116,k7=140,Pf=144,Df=148,I7=152,T7=1<<31,Af=2,Lf=1,F_=1<<31,P7=1<<30,B_=1<<29,D7=1<<28,U_=1<<27,N_=1<<26,H_=1<<25,V_=1<<24,En=1<<19,A7=1<<18,Al=1<<17,Rn=65536,z_=2048,L7=16,O7=2,M7=1,F7=4,B7=1,Of=16;var Ll;(function(e){e[e.SE0=0]="SE0",e[e.J=1]="J",e[e.K=2]="K",e[e.SE1=3]="SE1"})(Ll||(Ll={}));const U7=F_|P7|B_|D7|U_|N_|H_|Rn|V_|En|A7|Al|z_;class Mf{constructor(t){this.alarm=t,this.buffers=[]}schedule(t,r){this.buffers.push(t),this.alarm.schedule(r)}}class N7 extends ge{get intStatus(){return this.intRaw&this.intEnable|this.intForce}constructor(t,r){super(t,r),this.addrEndp=0,this.mainCtrl=0,this.intRaw=0,this.intEnable=0,this.intForce=0,this.sieStatus=0,this.buffStatus=0,this.readDelayMicroseconds=10,this.writeDelayMicroseconds=10;const i=t.clock;this.endpointReadAlarms=[],this.endpointWriteAlarms=[];for(let s=0;s<v7;++s)this.endpointReadAlarms.push(new Mf(i.createAlarm(()=>{const a=this.endpointReadAlarms[s].buffers.shift();a&&this.finishRead(s,a)}))),this.endpointWriteAlarms.push(new Mf(i.createAlarm(()=>{var a;for(const u of this.endpointWriteAlarms[s].buffers)(a=this.onEndpointWrite)===null||a===void 0||a.call(this,s,u);this.endpointWriteAlarms[s].buffers=[]})));this.resetAlarm=i.createAlarm(()=>{this.sieStatus|=En,this.sieStatusUpdated()})}readUint32(t){switch(t){case bf:return this.addrEndp&491647;case kf:return this.mainCtrl;case If:return this.sieStatus;case Tf:return this.buffStatus;case R7:return 0;case k7:return this.intRaw;case Pf:return this.intEnable;case Df:return this.intForce;case I7:return this.intStatus}return super.readUint32(t)}writeUint32(t,r){var i,s;switch(t){case bf:this.addrEndp=r;break;case kf:this.mainCtrl=r&(T7|Lf|Af),r&Lf&&!(r&Af)&&((i=this.onUSBEnabled)===null||i===void 0||i.call(this));break;case Tf:this.buffStatus&=~this.rawWriteValue,this.buffStatusUpdated();break;case b7:r&F7&&!(r&B7)&&(this.sieStatus|=Rn);break;case If:this.sieStatus&=~(this.rawWriteValue&U7),this.rawWriteValue&En&&((s=this.onResetReceived)===null||s===void 0||s.call(this),this.sieStatus&=-13,this.sieStatus|=Ll.J<<O7|Rn),this.sieStatusUpdated();break;case Pf:this.intEnable=r&1048575,this.checkInterrupts();break;case Df:this.intForce=r&1048575,this.checkInterrupts();break;default:super.writeUint32(t,r)}}readEndpointControlReg(t,r){const i=S7+8*(t-1)+(r?4:0);return this.rp2040.usbDPRAMView.getUint32(i,!0)}getEndpointBufferOffset(t,r){return t===0?256:this.readEndpointControlReg(t,r)&65472}DPRAMUpdated(t,r){var i,s;if(r&ka&&t>=xf&&t<=C7){const a=t-xf>>3,u=!!(t&4);let n=!1,o=!0;if(a!=0){const p=this.readEndpointControlReg(a,u);n=!!(p&w7),o=!!(p&x7)}if(n&&r>>Rf&ka){const p=r>>Rf&Mi,v=this.getEndpointBufferOffset(a,u)+E7;if(this.debug(`Start USB transfer, endPoint=${a}, direction=${u?"out":"in"} buffer=${v.toString(16)} length=${p}`),r&=-67108865,this.rp2040.usbDPRAMView.setUint32(t,r,!0),u)(i=this.onEndpointRead)===null||i===void 0||i.call(this,a,p);else{r&=2147483647,this.rp2040.usbDPRAMView.setUint32(t,r,!0);const C=this.rp2040.usbDPRAM.slice(v,v+p);this.indicateBufferReady(a,!1),this.endpointWriteAlarms[a].schedule(C,this.writeDelayMicroseconds*1e3)}}const d=r&Mi,m=this.getEndpointBufferOffset(a,u);if(this.debug(`Start USB transfer, endPoint=${a}, direction=${u?"out":"in"} buffer=${m.toString(16)} length=${d}`),r&=~ka,this.rp2040.usbDPRAMView.setUint32(t,r,!0),u)(s=this.onEndpointRead)===null||s===void 0||s.call(this,a,d);else{r&=~Ef,this.rp2040.usbDPRAMView.setUint32(t,r,!0);const p=this.rp2040.usbDPRAM.slice(m,m+d);(o||!n)&&this.indicateBufferReady(a,!1),this.endpointWriteAlarms[a].schedule(p,this.writeDelayMicroseconds*1e3)}}}endpointReadDone(t,r,i=this.readDelayMicroseconds){this.endpointReadAlarms[t].schedule(r,i*1e3)}finishRead(t,r){const i=this.getEndpointBufferOffset(t,!0),s=y7+t*8;let a=this.rp2040.usbDPRAMView.getUint32(s,!0);const u=a&Mi,n=Math.min(r.length,u);a|=Ef,a=a&~Mi|n&Mi,this.rp2040.usbDPRAMView.setUint32(s,a,!0),this.rp2040.usbDPRAM.set(r.subarray(0,n),i),this.indicateBufferReady(t,!0)}checkInterrupts(){const{intStatus:t}=this;this.rp2040.setInterrupt(me.USBCTRL,!!t)}resetDevice(){this.resetAlarm.schedule(1e7)}sendSetupPacket(t){this.rp2040.usbDPRAM.set(t),this.sieStatus|=Al,this.sieStatusUpdated()}indicateBufferReady(t,r){this.buffStatus|=1<<t*2+(r?1:0),this.buffStatusUpdated()}buffStatusUpdated(){this.buffStatus?this.intRaw|=Of:this.intRaw&=~Of,this.checkInterrupts()}sieStatusUpdated(){const t=[[Al,65536],[z_,32768],[L7,16384],[Rn,8192],[En,4096],[M7,2048],[B_,1024],[V_,512],[H_,256],[N_,128],[U_,64],[F_,32]];for(const[r,i]of t)this.sieStatus&r?this.intRaw|=i:this.intRaw&=~i;this.checkInterrupts()}}const Ff=0,H7=4,V7=8,ln=12,Bf=16,Uf=20,Nf=24,Hf=28,Vf=32,zf=36,Wf=40,$f=44,z7=1<<31,jf=1<<30,Kf=1<<26,Xf=1<<25,qf=1<<24,W7=16777215,$7=0,j7=16777215,K7=0,X7=2,q7=1,G7=1024,Gf=512,Y7=2e6;class Q7 extends ge{constructor(t,r){super(t,r),this.scratchData=new Uint32Array(8),this.enable=!1,this.tickEnable=!0,this.reason=0,this.pauseDbg0=!0,this.pauseDbg1=!0,this.pauseJtag=!0,this.onWatchdogTrigger=()=>{this.rp2040.logger.warn(this.name,"Watchdog triggered, but no reset handler provided")},this.timer=new Ic(t.clock,Y7),this.timer.mode=at.Decrement,this.timer.enable=!1,this.alarm=new Ji(this.timer,()=>{var i;this.reason=q7,(i=this.onWatchdogTrigger)===null||i===void 0||i.call(this)}),this.alarm.target=0,this.alarm.enable=!1}readUint32(t){switch(t){case Ff:return(this.timer.enable?jf:0)|(this.pauseDbg0?Xf:0)|(this.pauseDbg1?Kf:0)|(this.pauseJtag?qf:0)|(this.timer.counter&W7)<<$7;case V7:return this.reason;case ln:case Bf:case Uf:case Nf:case Hf:case Vf:case zf:case Wf:return this.scratchData[t-ln>>2];case $f:return this.tickEnable?G7|Gf:0}return super.readUint32(t)}writeUint32(t,r){var i;switch(t){case Ff:r&z7&&(this.reason=X7,(i=this.onWatchdogTrigger)===null||i===void 0||i.call(this)),this.enable=!!(r&jf),this.timer.enable=this.enable&&this.tickEnable,this.alarm.enable=this.enable&&this.tickEnable,this.pauseDbg0=!!(r&Xf),this.pauseDbg1=!!(r&Kf),this.pauseJtag=!!(r&qf);break;case H7:this.timer.set(r>>>K7&j7);break;case ln:case Bf:case Uf:case Nf:case Hf:case Vf:case zf:case Wf:this.scratchData[t-ln>>2]=r;break;case $f:this.tickEnable=!!(r&Gf),this.timer.enable=this.enable&&this.tickEnable,this.alarm.enable=this.enable&&this.tickEnable;break;default:super.writeUint32(t,r)}}}function Rt(e){return e|0}function Ae(e){return e>>>0}class Hr{constructor(t){this.shift=0,this.maskLSB=0,this.maskMSB=0,this.signed=!1,this.crossInput=!1,this.crossResult=!1,this.addRaw=!1,this.forceMSB=0,this.blend=!1,this.clamp=!1,this.overf0=!1,this.overf1=!1,this.overf=!1,this.shift=t>>>0&31,this.maskLSB=t>>>5&31,this.maskMSB=t>>>10&31,this.signed=!!(t>>>15&1),this.crossInput=!!(t>>>16&1),this.crossResult=!!(t>>>17&1),this.addRaw=!!(t>>>18&1),this.forceMSB=t>>>19&3,this.blend=!!(t>>>21&1),this.clamp=!!(t>>>22&1),this.overf0=!!(t>>>23&1),this.overf1=!!(t>>>24&1),this.overf=!!(t>>>25&1)}toUint32(){return(this.shift&31)<<0|(this.maskLSB&31)<<5|(this.maskMSB&31)<<10|(Number(this.signed)&1)<<15|(Number(this.crossInput)&1)<<16|(Number(this.crossResult)&1)<<17|(Number(this.addRaw)&1)<<18|(this.forceMSB&3)<<19|(Number(this.blend)&1)<<21|(Number(this.clamp)&1)<<22|(Number(this.overf0)&1)<<23|(Number(this.overf1)&1)<<24|(Number(this.overf)&1)<<25}}class Yf{constructor(t){this.index=t,this.accum0=0,this.accum1=0,this.base0=0,this.base1=0,this.base2=0,this.ctrl0=0,this.ctrl1=0,this.result0=0,this.result1=0,this.result2=0,this.smresult0=0,this.smresult1=0,this.update()}update(){const t=this.index,r=new Hr(this.ctrl0),i=new Hr(this.ctrl1),s=r.clamp&&t==1,a=r.blend&&t==0;r.clamp=s,r.blend=a,i.clamp=!1,i.blend=!1,i.overf0=!1,i.overf1=!1,i.overf=!1;const u=Rt(r.crossInput?this.accum1:this.accum0),n=Rt(i.crossInput?this.accum0:this.accum1),o=r.maskMSB==31?4294967295:(1<<r.maskMSB+1)-1,d=i.maskMSB==31?4294967295:(1<<i.maskMSB+1)-1,m=o&~((1<<r.maskLSB)-1),p=d&~((1<<i.maskLSB)-1),v=u>>>r.shift&m,C=n>>>i.shift&p,w=!!(u>>>r.shift&~o),y=!!(n>>>i.shift&~d),f=w||y,c=v&1<<r.maskMSB?-1<<r.maskMSB:0,l=C&1<<i.maskMSB?-1<<i.maskMSB:0,h=v|c,_=C|l,S=r.signed?h:v,x=i.signed?_:C,R=this.base0+(r.addRaw?u:S),g=this.base1+(i.addRaw?n:x),E=this.base2+S+(a?0:x),k=Ae(S)<Ae(this.base0)?this.base0:Ae(S)>Ae(this.base1)?this.base1:S,A=Rt(S)<Rt(this.base0)?this.base0:Rt(S)>Rt(this.base1)?this.base1:S,D=r.signed?A:k,O=x&255,B=Ae(this.base0)+(Math.floor(O*(Ae(this.base1)-Ae(this.base0))/256)|0),F=Rt(this.base0)+(Math.floor(O*(Rt(this.base1)-Rt(this.base0))/256)|0),N=i.signed?F:B;this.smresult0=Ae(S),this.smresult1=Ae(x),this.result0=Ae(a?O:(s?D:R)|r.forceMSB<<28),this.result1=Ae((a?N:g)|r.forceMSB<<28),this.result2=Ae(E),r.overf0=w,r.overf1=y,r.overf=f,this.ctrl0=r.toUint32(),this.ctrl1=i.toUint32()}writeback(){const t=new Hr(this.ctrl0),r=new Hr(this.ctrl1);this.accum0=Ae(t.crossResult?this.result1:this.result0),this.accum1=Ae(r.crossResult?this.result0:this.result1),this.update()}setBase01(t){const r=this.index,i=new Hr(this.ctrl0),s=new Hr(this.ctrl1),a=i.blend&&r==0,u=t&65535,n=t>>>16&65535,o=u&32768?-32768:0,d=n&32768?-32768:0,m=(a?s.signed:i.signed)?u|o:u,p=s.signed?n|d:n;this.base0=Ae(m),this.base1=Ae(p),this.update()}}const Z7=0,J7=4,eS=8,Qf=16,Zf=20,Jf=24,ed=28,td=32,rd=36,id=40,sd=44,nd=48,od=52,ad=56,ld=60,cd=64,hd=68,ud=72,fd=76,rt=1073741823,dd=96,pd=100,_d=104,gd=108,md=112,vd=116,tS=120,Sd=128,yd=132,Cd=136,wd=140,xd=144,rS=148,iS=152,sS=156,nS=160,oS=164,aS=168,Ed=172,Rd=176,bd=180,kd=184,lS=188,Id=192,Td=196,Pd=200,Dd=204,Ad=208,cS=212,hS=216,uS=220,fS=224,dS=228,pS=232,Ld=236,Od=240,Md=244,Fd=248,_S=252,gS=92,cn=256,Bd=380;class mS{constructor(t){this.rp2040=t,this.gpioValue=0,this.gpioOutputEnable=0,this.qspiGpioValue=0,this.qspiGpioOutputEnable=0,this.divDividend=0,this.divDivisor=1,this.divQuotient=0,this.divRemainder=0,this.divCSR=0,this.spinLock=0,this.interp0=new Yf(0),this.interp1=new Yf(1)}updateHardwareDivider(t){this.divDivisor==0?(this.divQuotient=this.divDividend>0?-1:1,this.divRemainder=this.divDividend):t?(this.divQuotient=(this.divDividend|0)/(this.divDivisor|0),this.divRemainder=(this.divDividend|0)%(this.divDivisor|0)):(this.divQuotient=(this.divDividend>>>0)/(this.divDivisor>>>0),this.divRemainder=(this.divDividend>>>0)%(this.divDivisor>>>0)),this.divCSR=3,this.rp2040.core.cycles+=8}readUint32(t){if(t>=cn&&t<=Bd){const r=1<<(t-cn)/4;return this.spinLock&r?0:(this.spinLock|=r,r)}switch(t){case J7:return this.rp2040.gpioValues;case eS:{const{qspi:r}=this.rp2040;let i=0;for(let s=0;s<r.length;s++)r[s].inputValue&&(i|=1<<s);return i}case Qf:return this.gpioValue;case td:return this.gpioOutputEnable;case nd:return this.qspiGpioValue;case cd:return this.qspiGpioOutputEnable;case Zf:case Jf:case ed:case rd:case id:case sd:case od:case ad:case ld:case hd:case ud:case fd:return 0;case Z7:return 0;case gS:return this.spinLock;case dd:return this.divDividend;case _d:return this.divDividend;case pd:return this.divDivisor;case gd:return this.divDivisor;case md:return this.divCSR&=-3,this.divQuotient;case vd:return this.divRemainder;case tS:return this.divCSR;case Sd:return this.interp0.accum0;case yd:return this.interp0.accum1;case Cd:return this.interp0.base0;case wd:return this.interp0.base1;case xd:return this.interp0.base2;case Ed:return this.interp0.ctrl0;case Rd:return this.interp0.ctrl1;case nS:return this.interp0.result0;case oS:return this.interp0.result1;case aS:return this.interp0.result2;case rS:{const r=this.interp0.result0;return this.interp0.writeback(),r}case iS:{const r=this.interp0.result1;return this.interp0.writeback(),r}case sS:{const r=this.interp0.result2;return this.interp0.writeback(),r}case bd:return this.interp0.smresult0;case kd:return this.interp0.smresult1;case Id:return this.interp1.accum0;case Td:return this.interp1.accum1;case Pd:return this.interp1.base0;case Dd:return this.interp1.base1;case Ad:return this.interp1.base2;case Ld:return this.interp1.ctrl0;case Od:return this.interp1.ctrl1;case fS:return this.interp1.result0;case dS:return this.interp1.result1;case pS:return this.interp1.result2;case cS:{const r=this.interp1.result0;return this.interp1.writeback(),r}case hS:{const r=this.interp1.result1;return this.interp1.writeback(),r}case uS:{const r=this.interp1.result2;return this.interp1.writeback(),r}case Md:return this.interp1.smresult0;case Fd:return this.interp1.smresult1}return console.warn(`Read from invalid SIO address: ${t.toString(16)}`),4294967295}writeUint32(t,r){if(t>=cn&&t<=Bd){const u=~(1<<(t-cn)/4);this.spinLock&=u;return}const i=this.gpioValue,s=this.gpioOutputEnable;switch(t){case Qf:this.gpioValue=r&rt;break;case Zf:this.gpioValue|=r&rt;break;case Jf:this.gpioValue&=~r;break;case ed:this.gpioValue^=r&rt;break;case td:this.gpioOutputEnable=r&rt;break;case rd:this.gpioOutputEnable|=r&rt;break;case id:this.gpioOutputEnable&=~r;break;case sd:this.gpioOutputEnable^=r&rt;break;case nd:this.qspiGpioValue=r&rt;break;case od:this.qspiGpioValue|=r&rt;break;case ad:this.qspiGpioValue&=~r;break;case ld:this.qspiGpioValue^=r&rt;break;case cd:this.qspiGpioOutputEnable=r&rt;break;case hd:this.qspiGpioOutputEnable|=r&rt;break;case ud:this.qspiGpioOutputEnable&=~r;break;case fd:this.qspiGpioOutputEnable^=r&rt;break;case dd:this.divDividend=r,this.updateHardwareDivider(!1);break;case _d:this.divDividend=r,this.updateHardwareDivider(!0);break;case pd:this.divDivisor=r,this.updateHardwareDivider(!1);break;case gd:this.divDivisor=r,this.updateHardwareDivider(!0);break;case md:this.divQuotient=r,this.divCSR=3;break;case vd:this.divRemainder=r,this.divCSR=3;break;case Sd:this.interp0.accum0=r,this.interp0.update();break;case yd:this.interp0.accum1=r,this.interp0.update();break;case Cd:this.interp0.base0=r,this.interp0.update();break;case wd:this.interp0.base1=r,this.interp0.update();break;case xd:this.interp0.base2=r,this.interp0.update();break;case Ed:this.interp0.ctrl0=r,this.interp0.update();break;case Rd:this.interp0.ctrl1=r,this.interp0.update();break;case bd:this.interp0.accum0+=r,this.interp0.update();break;case kd:this.interp0.accum1+=r,this.interp0.update();break;case lS:this.interp0.setBase01(r);break;case Id:this.interp1.accum0=r,this.interp1.update();break;case Td:this.interp1.accum1=r,this.interp1.update();break;case Pd:this.interp1.base0=r,this.interp1.update();break;case Dd:this.interp1.base1=r,this.interp1.update();break;case Ad:this.interp1.base2=r,this.interp1.update();break;case Ld:this.interp1.ctrl0=r,this.interp1.update();break;case Od:this.interp1.ctrl1=r,this.interp1.update();break;case Md:this.interp1.accum0+=r,this.interp1.update();break;case Fd:this.interp1.accum1+=r,this.interp1.update();break;case _S:this.interp1.setBase01(r);break;default:console.warn(`Write to invalid SIO address: ${t.toString(16)}, value=${r.toString(16)}`)}const a=this.gpioValue^i|this.gpioOutputEnable^s;if(a){const{gpio:u}=this.rp2040;for(let n=0;n<u.length;n++)a&1<<n&&u[n].checkForUpdates()}}}function Ia(e,t,r=" "){return e.length<t&&(e=r+e),e}function vS(e,t,r=" "){return e.length<t&&(e+=r),e}function SS(e){const t=Ia(e.getHours().toString(),2,"0"),r=Ia(e.getMinutes().toString(),2,"0"),i=Ia(e.getSeconds().toString(),2,"0"),s=vS(e.getMilliseconds().toString(),3);return`${t}:${r}:${i}.${s}`}var Er;(function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"})(Er||(Er={}));let yS=class{constructor(t,r=!0){this.currentLogLevel=t,this.throwOnError=r}aboveLogLevel(t){return t>=this.currentLogLevel}formatMessage(t,r){return`${SS(new Date)} [${t}] ${r}`}debug(t,r){this.aboveLogLevel(Er.Debug)&&console.debug(this.formatMessage(t,r))}warn(t,r){this.aboveLogLevel(Er.Warn)&&console.warn(this.formatMessage(t,r))}error(t,r){if(this.aboveLogLevel(Er.Error)&&(console.error(this.formatMessage(t,r)),this.throwOnError))throw new Error(`[${t}] ${r}`)}info(t,r){this.aboveLogLevel(Er.Info)&&console.info(this.formatMessage(t,r))}};const yt=268435456,CS=335544320,we=536870912,Ud=1073741824,Vr=1343225856,Kt=3489660928,Ta="RP2040",bn=1024,wS=1024*bn,Nd=1e6;class xS{constructor(t=new Lm){this.clock=t,this.bootrom=new Uint32Array(4*bn),this.sram=new Uint8Array(264*bn),this.sramView=new DataView(this.sram.buffer),this.flash=new Uint8Array(16*wS),this.flash16=new Uint16Array(this.flash.buffer),this.flashView=new DataView(this.flash.buffer),this.usbDPRAM=new Uint8Array(4*bn),this.usbDPRAMView=new DataView(this.usbDPRAM.buffer),this.core=new bS(this),this.clkSys=125*Nd,this.clkPeri=125*Nd,this.ppb=new d8(this,"PPB"),this.sio=new mS(this),this.uart=[new wf(this,"UART0",me.UART0,{rx:ne.DREQ_UART0_RX,tx:ne.DREQ_UART0_TX}),new wf(this,"UART1",me.UART1,{rx:ne.DREQ_UART1_RX,tx:ne.DREQ_UART1_TX})],this.i2c=[new r1(this,"I2C0",me.I2C0),new r1(this,"I2C1",me.I2C1)],this.pwm=new C8(this,"PWM_BASE"),this.adc=new G6(this,"ADC"),this.gpio=[new ee(this,0),new ee(this,1),new ee(this,2),new ee(this,3),new ee(this,4),new ee(this,5),new ee(this,6),new ee(this,7),new ee(this,8),new ee(this,9),new ee(this,10),new ee(this,11),new ee(this,12),new ee(this,13),new ee(this,14),new ee(this,15),new ee(this,16),new ee(this,17),new ee(this,18),new ee(this,19),new ee(this,20),new ee(this,21),new ee(this,22),new ee(this,23),new ee(this,24),new ee(this,25),new ee(this,26),new ee(this,27),new ee(this,28),new ee(this,29)],this.qspi=[new ee(this,0,"SCLK"),new ee(this,1,"SS"),new ee(this,2,"SD0"),new ee(this,3,"SD1"),new ee(this,4,"SD2"),new ee(this,5,"SD3")],this.dma=new t6(this,"DMA"),this.pio=[new Wu(this,"PIO0",me.PIO0_IRQ0,0),new Wu(this,"PIO1",me.PIO1_IRQ0,1)],this.usbCtrl=new N7(this,"USB"),this.spi=[new X1(this,"SPI0",me.SPI0,{rx:ne.DREQ_SPI0_RX,tx:ne.DREQ_SPI0_TX}),new X1(this,"SPI1",me.SPI1,{rx:ne.DREQ_SPI1_RX,tx:ne.DREQ_SPI1_TX})],this.logger=new yS(Er.Debug,!0),this.peripherals={98304:new Ov(this,"SSI"),262144:new Nv(this,"SYSINFO_BASE"),262148:new Mv(this,"SYSCFG"),262152:new c5(this,"CLOCKS_BASE"),262156:new x8(this,"RESETS_BASE"),262160:new _r(this,"PSM_BASE"),262164:new e8(this,"IO_BANK0_BASE"),262168:new _r(this,"IO_QSPI_BASE"),262172:new l1(this,"PADS_BANK0_BASE","bank0"),262176:new l1(this,"PADS_QSPI_BASE","qspi"),262180:new _r(this,"XOSC_BASE"),262184:new _r(this,"PLL_SYS_BASE"),262188:new _r(this,"PLL_USB_BASE"),262192:new Q6(this,"BUSCTRL_BASE"),262196:this.uart[0],262200:this.uart[1],262204:this.spi[0],262208:this.spi[1],262212:this.i2c[0],262216:this.i2c[1],262220:this.adc,262224:this.pwm,262228:new Jv(this,"TIMER_BASE"),262232:new Q7(this,"WATCHDOG_BASE"),262236:new J8(this,"RTC_BASE"),262240:new _r(this,"ROSC_BASE"),262244:new _r(this,"VREG_AND_CHIP_RESET_BASE"),262252:new zv(this,"TBMAN_BASE"),327680:this.dma,327952:this.usbCtrl,328192:this.pio[0],328448:this.pio[1]},this.onBreak=r=>{},this.reset()}loadBootrom(t){this.bootrom.set(t),this.reset()}reset(){this.core.reset(),this.pwm.reset(),this.flash.fill(255)}readUint32(t){t=t>>>0,t&3&&this.logger.error(Ta,`read from address ${t.toString(16)}, which is not 32 bit aligned`);const{bootrom:r}=this;if(t<r.length*4)return r[t/4];if(t>=yt&&t<CS){const s=t&16777215;return this.flashView.getUint32(s,!0)}else{if(t>=we&&t<we+this.sram.length)return this.sramView.getUint32(t-we,!0);if(t>=Vr&&t<Vr+this.usbDPRAM.length)return this.usbDPRAMView.getUint32(t-Vr,!0);if(t>>>12===917518)return this.ppb.readUint32(t&4095);if(t>=Kt&&t<Kt+268435456)return this.sio.readUint32(t-Kt)}const i=this.findPeripheral(t);return i?i.readUint32(t&16383):(this.logger.warn(Ta,`Read from invalid memory address: ${t.toString(16)}`),4294967295)}findPeripheral(t){return this.peripherals[t>>>14<<2]}readUint16(t){if(t>=yt&&t<yt+this.flash.length)return this.flashView.getUint16(t-yt,!0);if(t>=we&&t<we+this.sram.length)return this.sramView.getUint16(t-we,!0);const r=this.readUint32(t&4294967292);return t&2?(r&4294901760)>>>16:r&65535}readUint8(t){if(t>=yt&&t<yt+this.flash.length)return this.flash[t-yt];if(t>=we&&t<we+this.sram.length)return this.sram[t-we];const r=this.readUint16(t&4294967294);return(t&1?(r&65280)>>>8:r&255)>>>0}writeUint32(t,r){t=t>>>0;const{bootrom:i}=this,s=this.findPeripheral(t);if(s){const a=(t&12288)>>12,u=t&4095;s.writeUint32Atomic(u,r,a)}else if(t<i.length*4)i[t/4]=r;else if(t>=yt&&t<yt+this.flash.length)this.flashView.setUint32(t-yt,r,!0);else if(t>=we&&t<we+this.sram.length)this.sramView.setUint32(t-we,r,!0);else if(t>=Vr&&t<Vr+this.usbDPRAM.length){const a=t-Vr;this.usbDPRAMView.setUint32(a,r,!0),this.usbCtrl.DPRAMUpdated(a,r)}else t>=Kt&&t<Kt+268435456?this.sio.writeUint32(t-Kt,r):t>>>12===917518?this.ppb.writeUint32(t&4095,r):this.logger.warn(Ta,`Write to undefined address: ${t.toString(16)}`)}writeUint8(t,r){if(t>=we&&t<we+this.sram.length){this.sram[t-we]=r;return}const i=(t&4294967292)>>>0,s=t&3,a=this.findPeripheral(t);if(a){const o=(i&12288)>>12,d=i&4095;a.writeUint32Atomic(d,r&255|(r&255)<<8|(r&255)<<16|(r&255)<<24,o);return}const u=this.readUint32(i),n=new Uint32Array([u]);new DataView(n.buffer).setUint8(s,r),this.writeUint32(i,n[0])}writeUint16(t,r){if(t>=we&&t<we+this.sram.length){this.sramView.setUint16(t-we,r,!0);return}const i=(t&4294967292)>>>0,s=t&3,a=this.findPeripheral(t);if(a){const o=(i&12288)>>12,d=i&4095;a.writeUint32Atomic(d,r&65535|(r&65535)<<16,o);return}const u=this.readUint32(i),n=new Uint32Array([u]);new DataView(n.buffer).setUint16(s,r,!0),this.writeUint32(i,n[0])}get gpioValues(){const{gpio:t}=this;let r=0;for(let i=0;i<t.length;i++)t[i].inputValue&&(r|=1<<i);return r}setInterrupt(t,r){this.core.setInterrupt(t,r)}updateIOInterrupt(){let t=!1;for(const r of this.gpio)r.irqValue&&(t=!0);this.setInterrupt(me.IO_BANK0,t)}step(){this.core.executeInstruction()}}const ES=1,Pa=2,RS=3,Da=11,Aa=14,La=15,Hd=0,Vd=3,zd=5,Wd=8,$d=9,jd=16,Kd=20,Fi=4;var it;(function(e){e[e.Mode_Thread=0]="Mode_Thread",e[e.Mode_Handler=1]="Mode_Handler"})(it||(it={}));function Xd(e){return e<<24>>24}function Oa(e){return e<<16>>16}const Ma=13,Bi=15;var Ve;(function(e){e[e.SPmain=0]="SPmain",e[e.SPprocess=1]="SPprocess"})(Ve||(Ve={}));const zr="CortexM0Core";class bS{constructor(t){this.rp2040=t,this.registers=new Uint32Array(16),this.bankedSP=0,this.cycles=0,this.eventRegistered=!1,this.waiting=!1,this.N=!1,this.C=!1,this.Z=!1,this.V=!1,this.breakRewind=0,this.PM=!1,this.SPSEL=Ve.SPmain,this.nPRIV=!1,this.currentMode=it.Mode_Thread,this.IPSR=0,this.interruptNMIMask=0,this.pendingInterrupts=0,this.enabledInterrupts=0,this.interruptPriorities=[4294967295,0,0,0],this.pendingNMI=!1,this.pendingPendSV=!1,this.pendingSVCall=!1,this.pendingSystick=!1,this.interruptsUpdated=!1,this.VTOR=0,this.SHPR2=0,this.SHPR3=0,this.blTaken=(r,i)=>{},this.SP=4294967292,this.bankedSP=4294967292}get logger(){return this.rp2040.logger}reset(){this.SP=this.rp2040.readUint32(this.VTOR),this.PC=this.rp2040.readUint32(this.VTOR+4)&4294967294,this.cycles=0}get SP(){return this.registers[13]}set SP(t){this.registers[13]=t&-4}get LR(){return this.registers[14]}set LR(t){this.registers[14]=t}get PC(){return this.registers[15]}set PC(t){this.registers[15]=t}get APSR(){return(this.N?2147483648:0)|(this.Z?1073741824:0)|(this.C?536870912:0)|(this.V?268435456:0)}set APSR(t){this.N=!!(t&2147483648),this.Z=!!(t&1073741824),this.C=!!(t&536870912),this.V=!!(t&268435456)}get xPSR(){return this.APSR|this.IPSR|1<<24}set xPSR(t){this.APSR=t,this.IPSR=t&63}checkCondition(t){let r=!1;switch(t>>1){case 0:r=this.Z;break;case 1:r=this.C;break;case 2:r=this.N;break;case 3:r=this.V;break;case 4:r=this.C&&!this.Z;break;case 5:r=this.N===this.V;break;case 6:r=this.N===this.V&&!this.Z;break;case 7:r=!0;break}return t&1&&t!=15?!r:r}readUint32(t){return this.rp2040.readUint32(t)}readUint16(t){return this.rp2040.readUint16(t)}readUint8(t){return this.rp2040.readUint8(t)}writeUint32(t,r){this.rp2040.writeUint32(t,r)}writeUint16(t,r){this.rp2040.writeUint16(t,r)}writeUint8(t,r){this.rp2040.writeUint8(t,r)}switchStack(t){if(this.SPSEL!==t){const r=this.SP;this.SP=this.bankedSP,this.bankedSP=r,this.SPSEL=t}}get SPprocess(){return this.SPSEL===Ve.SPprocess?this.SP:this.bankedSP}set SPprocess(t){this.SPSEL===Ve.SPprocess?this.SP=t:this.bankedSP=t>>>0}get SPmain(){return this.SPSEL===Ve.SPmain?this.SP:this.bankedSP}set SPmain(t){this.SPSEL===Ve.SPmain?this.SP=t:this.bankedSP=t>>>0}exceptionEntry(t){let r=0,i=0;this.SPSEL&&this.currentMode===it.Mode_Thread?(i=this.SPprocess&4?1:0,this.SPprocess=this.SPprocess-32&-5,r=this.SPprocess):(i=this.SPmain&4?1:0,this.SPmain=this.SPmain-32&-5,r=this.SPmain),this.writeUint32(r,this.registers[0]),this.writeUint32(r+4,this.registers[1]),this.writeUint32(r+8,this.registers[2]),this.writeUint32(r+12,this.registers[3]),this.writeUint32(r+16,this.registers[12]),this.writeUint32(r+20,this.LR),this.writeUint32(r+24,this.PC&-2),this.writeUint32(r+28,this.xPSR&-513|i<<9),this.currentMode==it.Mode_Handler?this.LR=4294967281:this.SPSEL?this.LR=4294967293:this.LR=4294967289,this.currentMode=it.Mode_Handler,this.IPSR=t,this.switchStack(Ve.SPmain),this.eventRegistered=!0;const s=this.VTOR;this.PC=this.readUint32(s+4*t)}exceptionReturn(t){let r=this.SPmain;switch(t&15){case 1:this.currentMode=it.Mode_Handler,this.switchStack(Ve.SPmain);break;case 9:this.currentMode=it.Mode_Thread,this.switchStack(Ve.SPmain);break;case 13:r=this.SPprocess,this.currentMode=it.Mode_Thread,this.switchStack(Ve.SPprocess);break}this.registers[0]=this.readUint32(r),this.registers[1]=this.readUint32(r+4),this.registers[2]=this.readUint32(r+8),this.registers[3]=this.readUint32(r+12),this.registers[12]=this.readUint32(r+16),this.LR=this.readUint32(r+20),this.PC=this.readUint32(r+24);const i=this.readUint32(r+28),s=i&512?4:0;switch(t&15){case 1:this.SPmain=this.SPmain+32|s;break;case 9:this.SPmain=this.SPmain+32|s;break;case 13:this.SPprocess=this.SPprocess+32|s;break}this.APSR=i&4026531840;const a=this.currentMode==it.Mode_Thread&&this.nPRIV;this.IPSR=a?0:i&63,this.interruptsUpdated=!0,this.eventRegistered=!0}get pendSVPriority(){return this.SHPR3>>22&3}get svCallPriority(){return this.SHPR2>>>30}get systickPriority(){return this.SHPR3>>>30}exceptionPriority(t){switch(t){case ES:return-3;case Pa:return-2;case RS:return-1;case Da:return this.svCallPriority;case Aa:return this.pendSVPriority;case La:return this.systickPriority;default:{if(t<16)return Fi;const r=t-16;for(let i=0;i<4;i++)if(this.interruptPriorities[i]&1<<r)return i;return Fi}}}get vectPending(){if(this.pendingNMI)return Pa;const{svCallPriority:t,systickPriority:r,pendSVPriority:i,pendingInterrupts:s}=this;for(let a=0;a<Fi;a++){const u=s&this.interruptPriorities[a];if(this.pendingSVCall&&a===t)return Da;if(this.pendingPendSV&&a===i)return Aa;if(this.pendingSystick&&a===r)return La;if(u){for(let n=0;n<32;n++)if(u&1<<n)return 16+n}}return 0}setInterrupt(t,r){const i=1<<t;r&&!(this.pendingInterrupts&i)?(this.pendingInterrupts|=i,this.interruptsUpdated=!0,this.waiting&&this.checkForInterrupts()&&(this.waiting=!1)):r||(this.pendingInterrupts&=~i)}checkForInterrupts(){const t=this.waiting?this.PM?this.exceptionPriority(this.IPSR):Fi:Math.min(this.exceptionPriority(this.IPSR),this.PM?0:Fi),r=this.pendingInterrupts&this.enabledInterrupts,{svCallPriority:i,systickPriority:s,pendSVPriority:a}=this;if(this.pendingNMI)return this.pendingNMI=!1,this.exceptionEntry(Pa),!0;for(let u=0;u<t;u++){const n=r&this.interruptPriorities[u];if(this.pendingSVCall&&u===i)return this.pendingSVCall=!1,this.exceptionEntry(Da),!0;if(this.pendingPendSV&&u===a)return this.pendingPendSV=!1,this.exceptionEntry(Aa),!0;if(this.pendingSystick&&u===s)return this.pendingSystick=!1,this.exceptionEntry(La),!0;if(n){for(let o=0;o<32;o++)if(n&1<<o)return o>b_&&(this.pendingInterrupts&=~(1<<o)),this.exceptionEntry(16+o),!0}}return this.interruptsUpdated=!1,!1}readSpecialRegister(t){switch(t){case Hd:return this.APSR;case Vd:return this.xPSR;case zd:return this.IPSR;case jd:return this.PM?1:0;case Wd:return this.SPmain;case $d:return this.SPprocess;case Kd:return(this.SPSEL===Ve.SPprocess?2:0)|(this.nPRIV?1:0);default:return this.logger.warn(zr,`MRS with unimplemented SYSm value: ${t}`),0}}writeSpecialRegister(t,r){switch(t){case Hd:this.APSR=r;break;case Vd:this.xPSR=r;break;case zd:this.IPSR=r;break;case jd:this.PM=!!(r&1),this.interruptsUpdated=!0;break;case Wd:this.SPmain=r;break;case $d:this.SPprocess=r;break;case Kd:this.nPRIV=!!(r&1),this.currentMode===it.Mode_Thread&&this.switchStack(r&2?Ve.SPprocess:Ve.SPmain);break;default:return this.logger.warn(zr,`MRS with unimplemented SYSm value: ${t}`),0}}BXWritePC(t){this.currentMode==it.Mode_Handler&&t>>>28==15?this.exceptionReturn(t&268435455):this.PC=t&-2}substractUpdateFlags(t,r){const i=t-r;return this.N=!!(i&2147483648),this.Z=(i&4294967295)===0,this.C=t>=r,this.V=!!(i&2147483648)&&!(t&2147483648)&&!!(r&2147483648)||!(i&2147483648)&&!!(t&2147483648)&&!(r&2147483648),i}addUpdateFlags(t,r){const i=t+r>>>0,s=(t|0)+(r|0),a=t+r;return this.N=!!(a&2147483648),this.Z=(a&4294967295)===0,this.C=a!==i,this.V=(a|0)!==s,a&4294967295}cyclesIO(t,r=!1){return t=t>>>0,t>=Kt&&t<Kt+268435456?0:t>=Ud&&t<Ud+268435456?r?4:3:1}executeInstruction(){this.interruptsUpdated&&this.checkForInterrupts()&&(this.waiting=!1);const t=this.PC&-2,r=this.readUint16(t),s=r>>12===15||r>>11===29?this.readUint16(t+2):0;this.PC+=2;let a=1;if(r>>6===261){const u=r>>3&7,n=r&7;this.registers[n]=this.addUpdateFlags(this.registers[u],this.registers[n]+(this.C?1:0))}else if(r>>11===21){const u=r&255,n=r>>8&7;this.registers[n]=this.SP+(u<<2)}else if(r>>7===352){const u=(r&127)<<2;this.SP+=u}else if(r>>9===14){const u=r>>6&7,n=r>>3&7,o=r&7;this.registers[o]=this.addUpdateFlags(this.registers[n],u)}else if(r>>11===6){const u=r&255,n=r>>8&7;this.registers[n]=this.addUpdateFlags(this.registers[n],u)}else if(r>>9===12){const u=r>>6&7,n=r>>3&7,o=r&7;this.registers[o]=this.addUpdateFlags(this.registers[n],this.registers[u])}else if(r>>8===68){const u=r>>3&15,n=(r&128)>>4|r&7,o=n===Bi?this.PC+2:this.registers[n],d=this.registers[u],m=o+d;n!==Ma&&n!==Bi?this.registers[n]=m:n===Bi?(this.registers[n]=m&-2,a++):n===Ma&&(this.registers[n]=m&-4)}else if(r>>11===20){const u=r&255,n=r>>8&7;this.registers[n]=(t&4294967292)+4+(u<<2)}else if(r>>6===256){const u=r>>3&7,n=r&7,o=this.registers[n]&this.registers[u];this.registers[n]=o,this.N=!!(o&2147483648),this.Z=(o&4294967295)===0}else if(r>>11===2){const u=r>>6&31,n=r>>3&7,o=r&7,d=this.registers[n],m=u||32,p=m<32?d>>m:(d&2147483648)>>31;this.registers[o]=p,this.N=!!(p&2147483648),this.Z=(p&4294967295)===0,this.C=!!(d&1<<m-1)}else if(r>>6===260){const u=r>>3&7,n=r&7,o=this.registers[n],d=(this.registers[u]&255)<32?this.registers[u]&255:32,m=d<32?o>>d:(o&2147483648)>>31;this.registers[n]=m,this.N=!!(m&2147483648),this.Z=(m&4294967295)===0,this.C=!!(o&1<<d-1)}else if(r>>12===13&&(r>>9&7)!==7){let u=(r&255)<<1;const n=r>>8&15;u&256&&(u=(u&511)-512),this.checkCondition(n)&&(this.PC+=u+2,a++)}else if(r>>11===28){let u=(r&2047)<<1;u&2048&&(u=(u&2047)-2048),this.PC+=u+2,a++}else if(r>>6===270){const u=r>>3&7,n=r&7,o=this.registers[n]&=~this.registers[u];this.N=!!(o&2147483648),this.Z=o===0}else if(r>>8===190){const u=r&255;this.breakRewind=2,this.rp2040.onBreak(u)}else if(r>>11===30&&s>>14===3&&(s>>12&1)==1){const u=s&2047,n=s>>11&1,o=s>>13&1,d=r&1023,m=r>>10&1,p=1-(m^o),v=1-(m^n),C=(m?255:0)<<24|(p<<23|v<<22|d<<12|u<<1);this.LR=this.PC+2|1,this.PC+=2+C,a+=2,this.blTaken(this,!1)}else if(r>>7===143&&!(r&7)){const u=r>>3&15;this.LR=this.PC|1,this.PC=this.registers[u]&-2,a++,this.blTaken(this,!0)}else if(r>>7===142&&!(r&7)){const u=r>>3&15;this.BXWritePC(this.registers[u]),a++}else if(r>>6===267){const u=r>>3&7,n=r&7;this.addUpdateFlags(this.registers[n],this.registers[u])}else if(r>>11===5){const u=r>>8&7,n=r&255;this.substractUpdateFlags(this.registers[u],n)}else if(r>>6===266){const u=r>>3&7,n=r&7;this.substractUpdateFlags(this.registers[n],this.registers[u])}else if(r>>8===69){const u=r>>3&15,n=r>>4&8|r&7;this.substractUpdateFlags(this.registers[n],this.registers[u])}else if(r===46706)this.PM=!0;else if(r===46690)this.PM=!1,this.interruptsUpdated=!0;else if(r===62399&&(s&65520)===36688)this.PC+=2,a+=2;else if(r===62399&&(s&65520)===36672)this.PC+=2,a+=2;else if(r>>6===257){const u=r>>3&7,n=r&7,o=this.registers[u]^this.registers[n];this.registers[n]=o,this.N=!!(o&2147483648),this.Z=o===0}else if(r===62399&&(s&65520)===36704)this.PC+=2,a+=2;else if(r>>11===25){const u=r>>8&7,n=r&255;let o=this.registers[u];for(let d=0;d<8;d++)n&1<<d&&(this.registers[d]=this.readUint32(o),o+=4,a++);n&1<<u||(this.registers[u]=o)}else if(r>>11===13){const u=(r>>6&31)<<2,n=r>>3&7,o=r&7,d=this.registers[n]+u;a+=this.cyclesIO(d),this.registers[o]=this.readUint32(d)}else if(r>>11===19){const u=r>>8&7,n=r&255,o=this.SP+(n<<2);a+=this.cyclesIO(o),this.registers[u]=this.readUint32(o)}else if(r>>11===9){const u=(r&255)<<2,n=r>>8&7,d=(this.PC+2&4294967292)+u;a+=this.cyclesIO(d),this.registers[n]=this.readUint32(d)}else if(r>>9===44){const u=r>>6&7,n=r>>3&7,o=r&7,d=this.registers[u]+this.registers[n];a+=this.cyclesIO(d),this.registers[o]=this.readUint32(d)}else if(r>>11===15){const u=r>>6&31,n=r>>3&7,o=r&7,d=this.registers[n]+u;a+=this.cyclesIO(d),this.registers[o]=this.readUint8(d)}else if(r>>9===46){const u=r>>6&7,n=r>>3&7,o=r&7,d=this.registers[u]+this.registers[n];a+=this.cyclesIO(d),this.registers[o]=this.readUint8(d)}else if(r>>11===17){const u=r>>6&31,n=r>>3&7,o=r&7,d=this.registers[n]+(u<<1);a+=this.cyclesIO(d),this.registers[o]=this.readUint16(d)}else if(r>>9===45){const u=r>>6&7,n=r>>3&7,o=r&7,d=this.registers[u]+this.registers[n];a+=this.cyclesIO(d),this.registers[o]=this.readUint16(d)}else if(r>>9===43){const u=r>>6&7,n=r>>3&7,o=r&7,d=this.registers[u]+this.registers[n];a+=this.cyclesIO(d),this.registers[o]=Xd(this.readUint8(d))}else if(r>>9===47){const u=r>>6&7,n=r>>3&7,o=r&7,d=this.registers[u]+this.registers[n];a+=this.cyclesIO(d),this.registers[o]=Oa(this.readUint16(d))}else if(r>>11){if(r>>6===258){const u=r>>3&7,n=r&7,o=this.registers[n],d=this.registers[u]&255,m=d>=32?0:o<<d;this.registers[n]=m,this.N=!!(m&2147483648),this.Z=m===0,this.C=d?!!(o&1<<32-d):this.C}else if(r>>11===1){const u=r>>6&31,n=r>>3&7,o=r&7,d=this.registers[n],m=u?d>>>u:0;this.registers[o]=m,this.N=!!(m&2147483648),this.Z=m===0,this.C=!!(d>>>(u?u-1:31)&1)}else if(r>>6===259){const u=r>>3&7,n=r&7,o=this.registers[u]&255,d=this.registers[n],m=o<32?d>>>o:0;this.registers[n]=m,this.N=!!(m&2147483648),this.Z=m===0,this.C=o<=32?!!(d>>>o-1&1):!1}else if(r>>8===70){const u=r>>3&15,n=r>>4&8|r&7;let o=u===Bi?this.PC+2:this.registers[u];n===Bi?(a++,o&=-2):n===Ma&&(o&=-4),this.registers[n]=o}else if(r>>11===4){const u=r&255,n=r>>8&7;this.registers[n]=u,this.N=!!(u&2147483648),this.Z=u===0}else if(r===62447&&s>>12==8){const u=s&255,n=s>>8&15;this.registers[n]=this.readSpecialRegister(u),this.PC+=2,a+=2}else if(r>>4===3896&&s>>8==136){const u=s&255,n=r&15;this.writeSpecialRegister(u,this.registers[n]),this.PC+=2,a+=2}else if(r>>6===269){const u=r>>3&7,n=r&7,o=Math.imul(this.registers[u],this.registers[n]);this.registers[n]=o,this.N=!!(o&2147483648),this.Z=(o&4294967295)===0}else if(r>>6===271){const u=r>>3&7,n=r&7,o=~this.registers[u];this.registers[n]=o,this.N=!!(o&2147483648),this.Z=o===0}else if(r>>6===268){const u=r>>3&7,n=r&7,o=this.registers[n]|this.registers[u];this.registers[n]=o,this.N=!!(o&2147483648),this.Z=(o&4294967295)===0}else if(r>>9===94){const u=r>>8&1;let n=this.SP;for(let o=0;o<=7;o++)r&1<<o&&(this.registers[o]=this.readUint32(n),n+=4,a++);u?(this.SP=n+4,this.BXWritePC(this.readUint32(n)),a+=2):this.SP=n}else if(r>>9===90){let u=0;for(let o=0;o<=8;o++)r&1<<o&&u++;let n=this.SP-4*u;for(let o=0;o<=7;o++)r&1<<o&&(this.writeUint32(n,this.registers[o]),a++,n+=4);r&256&&this.writeUint32(n,this.registers[14]),this.SP-=4*u}else if(r>>6===744){const u=r>>3&7,n=r&7,o=this.registers[u];this.registers[n]=(o&255)<<24|(o>>8&255)<<16|(o>>16&255)<<8|o>>24&255}else if(r>>6===745){const u=r>>3&7,n=r&7,o=this.registers[u];this.registers[n]=(o>>16&255)<<24|(o>>24&255)<<16|(o&255)<<8|o>>8&255}else if(r>>6===747){const u=r>>3&7,n=r&7,o=this.registers[u];this.registers[n]=Oa((o&255)<<8|o>>8&255)}else if(r>>6===263){const u=r>>3&7,n=r&7,o=this.registers[n],d=(this.registers[u]&255)%32,m=o>>>d|o<<32-d;this.registers[n]=m,this.N=!!(m&2147483648),this.Z=m===0,this.C=!!(m&2147483648)}else if(r>>6===265){const u=r>>3&7,n=r&7;this.registers[n]=this.substractUpdateFlags(0,this.registers[u])}else if(r!==48896)if(r>>6===262){const u=r>>3&7,n=r&7;this.registers[n]=this.substractUpdateFlags(this.registers[n],this.registers[u]+(1-(this.C?1:0)))}else if(r===48960)this.logger.info(zr,"SEV");else if(r>>11===24){const u=r>>8&7,n=r&255;let o=this.registers[u];for(let d=0;d<8;d++)n&1<<d&&(this.writeUint32(o,this.registers[d]),o+=4,a++);n&1<<u||(this.registers[u]=o)}else if(r>>11===12){const u=(r>>6&31)<<2,n=r>>3&7,o=r&7,d=this.registers[n]+u;a+=this.cyclesIO(d,!0),this.writeUint32(d,this.registers[o])}else if(r>>11===18){const u=r>>8&7,n=r&255,o=this.SP+(n<<2);a+=this.cyclesIO(o,!0),this.writeUint32(o,this.registers[u])}else if(r>>9===40){const u=r>>6&7,n=r>>3&7,o=r&7,d=this.registers[u]+this.registers[n];a+=this.cyclesIO(d,!0),this.writeUint32(d,this.registers[o])}else if(r>>11===14){const u=r>>6&31,n=r>>3&7,o=r&7,d=this.registers[n]+u;a+=this.cyclesIO(d,!0),this.writeUint8(d,this.registers[o])}else if(r>>9===42){const u=r>>6&7,n=r>>3&7,o=r&7,d=this.registers[u]+this.registers[n];a+=this.cyclesIO(d,!0),this.writeUint8(d,this.registers[o])}else if(r>>11===16){const u=(r>>6&31)<<1,n=r>>3&7,o=r&7,d=this.registers[n]+u;a+=this.cyclesIO(d,!0),this.writeUint16(d,this.registers[o])}else if(r>>9===41){const u=r>>6&7,n=r>>3&7,o=r&7,d=this.registers[u]+this.registers[n];a+=this.cyclesIO(d,!0),this.writeUint16(d,this.registers[o])}else if(r>>7===353){const u=(r&127)<<2;this.SP-=u}else if(r>>9===15){const u=r>>6&7,n=r>>3&7,o=r&7;this.registers[o]=this.substractUpdateFlags(this.registers[n],u)}else if(r>>11===7){const u=r&255,n=r>>8&7;this.registers[n]=this.substractUpdateFlags(this.registers[n],u)}else if(r>>9===13){const u=r>>6&7,n=r>>3&7,o=r&7;this.registers[o]=this.substractUpdateFlags(this.registers[n],this.registers[u])}else if(r>>8===223)this.pendingSVCall=!0,this.interruptsUpdated=!0;else if(r>>6===713){const u=r>>3&7,n=r&7;this.registers[n]=Xd(this.registers[u])}else if(r>>6===712){const u=r>>3&7,n=r&7;this.registers[n]=Oa(this.registers[u])}else if(r>>6==264){const u=r>>3&7,n=r&7,o=this.registers[n]&this.registers[u];this.N=!!(o&2147483648),this.Z=o===0}else if(r>>8==222){const u=r&255;this.breakRewind=2,this.rp2040.onBreak(u)}else if(r>>4===3967&&s>>12===10){const u=r&15,n=s&4095;this.breakRewind=4,this.rp2040.onBreak(u<<12|n),this.PC+=2}else if(r>>6==715){const u=r>>3&7,n=r&7;this.registers[n]=this.registers[u]&255}else if(r>>6==714){const u=r>>3&7,n=r&7;this.registers[n]=this.registers[u]&65535}else r===48928?(a++,this.eventRegistered?this.eventRegistered=!1:this.waiting=!0):r===48944?(a++,this.waiting=!0):r===48912?this.logger.info(zr,"Yield"):(this.logger.warn(zr,`Warning: Instruction at ${t.toString(16)} is not implemented yet!`),this.logger.warn(zr,`Opcode: 0x${r.toString(16)} (0x${s.toString(16)})`))}else{const u=r>>6&31,n=r>>3&7,o=r&7,d=this.registers[n],m=d<<u;this.registers[o]=m,this.N=!!(m&2147483648),this.Z=m===0,this.C=u?!!(d&1<<32-u):this.C}return this.cycles+=a,a}}var _i;(function(e){e[e.HostToDevice=0]="HostToDevice",e[e.DeviceToHost=1]="DeviceToHost"})(_i||(_i={}));var gi;(function(e){e[e.Standard=0]="Standard",e[e.Class=1]="Class",e[e.Vendor=2]="Vendor",e[e.Reserved=3]="Reserved"})(gi||(gi={}));var mi;(function(e){e[e.Device=0]="Device",e[e.Interface=1]="Interface",e[e.Endpoint=2]="Endpoint",e[e.Other=3]="Other"})(mi||(mi={}));var vs;(function(e){e[e.GetStatus=0]="GetStatus",e[e.ClearFeature=1]="ClearFeature",e[e.Reserved1=2]="Reserved1",e[e.SetFeature=3]="SetFeature",e[e.Reserved2=4]="Reserved2",e[e.SetAddress=5]="SetAddress",e[e.GetDescriptor=6]="GetDescriptor",e[e.SetDescriptor=7]="SetDescriptor",e[e.GetConfiguration=8]="GetConfiguration",e[e.SetDeviceConfiguration=9]="SetDeviceConfiguration",e[e.GetInterface=10]="GetInterface",e[e.SetInterface=11]="SetInterface",e[e.SynchFrame=12]="SynchFrame"})(vs||(vs={}));var kr;(function(e){e[e.Device=1]="Device",e[e.Configration=2]="Configration",e[e.String=3]="String",e[e.Interface=4]="Interface",e[e.Endpoint=5]="Endpoint"})(kr||(kr={}));function So(e){const t=new Uint8Array(8);return t[0]=e.dataDirection<<7|e.type<<5|e.recipient,t[1]=e.bRequest,t[2]=e.wValue&255,t[3]=e.wValue>>8&255,t[4]=e.wIndex&255,t[5]=e.wIndex>>8&255,t[6]=e.wLength&255,t[7]=e.wLength>>8&255,t}function kS(e){return So({dataDirection:_i.HostToDevice,type:gi.Standard,recipient:mi.Device,bRequest:vs.SetAddress,wValue:e,wIndex:0,wLength:0})}function qd(e,t,r=0){return So({dataDirection:_i.DeviceToHost,type:gi.Standard,recipient:mi.Device,bRequest:vs.GetDescriptor,wValue:e<<8,wIndex:r,wLength:t})}function IS(e){return So({dataDirection:_i.HostToDevice,type:gi.Standard,recipient:mi.Device,bRequest:vs.SetDeviceConfiguration,wValue:e,wIndex:0,wLength:0})}const TS=34,PS=1,DS=2,AS=10,LS=2,OS=512,Gd=0,Yd=9;function MS(e){let t=0,r=!1;const i={in:-1,out:-1};for(;t<e.length;){const s=e[t];if(s<2||e.length<t+s)break;const a=e[t+1];if(a===kr.Interface&&s===9){const u=e[t+4],n=e[t+5];r=u===2&&n===AS}if(r&&a===kr.Endpoint&&s===7){const u=e[t+2];(e[t+3]&3)===LS&&(u&128?i.in=u&15:i.out=u&15)}t+=e[t]}return i}class FS{constructor(t){this.usb=t,this.txFIFO=new Bt(OS),this.initialized=!1,this.descriptorsSize=null,this.descriptors=[],this.outEndpoint=-1,this.inEndpoint=-1,this.usb.onUSBEnabled=()=>{this.usb.resetDevice()},this.usb.onResetReceived=()=>{this.usb.sendSetupPacket(kS(1))},this.usb.onEndpointWrite=(r,i)=>{var s,a;if(r===Gd&&i.length===0&&(this.descriptorsSize==null?this.usb.sendSetupPacket(qd(kr.Configration,Yd)):this.initialized||(this.cdcSetControlLineState(),(s=this.onDeviceConnected)===null||s===void 0||s.call(this))),r===Gd&&i.length>1&&(i.length===Yd&&i[1]===kr.Configration&&this.descriptorsSize==null?(this.descriptorsSize=i[3]<<8|i[2],this.usb.sendSetupPacket(qd(kr.Configration,this.descriptorsSize))):this.descriptorsSize!=null&&this.descriptors.length<this.descriptorsSize&&this.descriptors.push(...i),this.descriptorsSize===this.descriptors.length)){const u=MS(this.descriptors);this.inEndpoint=u.in,this.outEndpoint=u.out,this.usb.sendSetupPacket(IS(1))}r===this.inEndpoint&&((a=this.onSerialData)===null||a===void 0||a.call(this,i))},this.usb.onEndpointRead=(r,i)=>{if(r===this.outEndpoint){const s=new Uint8Array(Math.min(i,this.txFIFO.itemCount));for(let a=0;a<s.length;a++)s[a]=this.txFIFO.pull();this.usb.endpointReadDone(this.outEndpoint,s)}}}cdcSetControlLineState(t=PS|DS,r=0){this.usb.sendSetupPacket(So({dataDirection:_i.HostToDevice,type:gi.Class,recipient:mi.Device,bRequest:TS,wValue:t,wIndex:r,wLength:0})),this.initialized=!0}sendSerialByte(t){this.txFIFO.push(t)}}var W_=(e=>(e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e))(W_||{});class BS{constructor(t=1){this.logLevel=t}shouldLog(t){return t>=this.logLevel}log(t,r,...i){if(!this.shouldLog(t))return;const s=`[RP2040:${W_[t]}]`;switch(t){case 0:console.debug(s,r,...i);break;case 1:console.info(s,r,...i);break;case 2:console.warn(s,r,...i);break;case 3:console.error(s,r,...i);break}}debug(t,...r){this.log(0,t,...r)}info(t,...r){this.log(1,t,...r)}warn(t,...r){this.log(2,t,...r)}error(t,...r){this.log(3,t,...r)}}const US=new Uint32Array([537140992,239,53,49,33649997,13107322,29,2281841408,3489874586,805603395,3522642577,1198529560,3892166448,4026550004,1218377733,1610686720,1189568577,553666716,1610695625,1198547009,10789265,7689,539575080,808595506,1935757856,1919246960,1344305522,1918115945,1852400737,1951146087,860880996,861012697,860619517,861143847,1397556063,877864669,1129129681,876815937,1112876585,1413752245,1162084741,1448542603,1179189559,1480926369,1163011061,1347560317,1128670149,1480794977,1128604465,69,5263943,5788227,27805267,36193363,27679302,660099910,776750406,777278276,1034700100,1215496192,687892481,4160737567,1232207773,1745505137,3489743386,3885195275,1315983215,1118883599,1079628039,3506706496,1614298896,2282288002,4026681240,3206609377,143224097,1700844539,477019968,1281443632,553930597,1839292729,139029793,2769015547,4160692224,671219693,4160737782,1622736873,4293326847,2282288e3,4293064703,4160726273,1187053535,1631133952,3881650048,1830862624,3556444224,671116704,1198575838,1127687681,3187689400,940697594,3170925248,1078113536,4026542592,3539400706,1181763214,2115328,11113,11109,11313,11517,10279,10279,11697,10317,10319,10369,10371,10455,10457,10471,10473,10687,10613,10717,49,10725,10831,10251,10867,10415,10417,10397,10399,13697,13699,13707,13709,13885,11873,11861,12221,12569,13419,13419,13021,13669,13671,13683,13685,14019,14021,14011,14013,14385,14401,14353,49,15173,15329,13423,14641,14033,14035,14027,14029,13761,13763,13787,13789,13923,4085270538,4026632200,65307,1073758208,1073774752,3489660928,1074151432,16777216,1074102300,2953298131,3758157056,1343228080,138561843,142819338,1074282507,415242368,406849729,1074284847,406849921,1128810798,1198526080,139545133,4407377,1074282507,1125648448,1074987139,142622736,1244152579,1074790680,152780819,3120579352,2737129328,3507227649,3506702977,3506768129,807033880,1549289328,1198534672,806771800,176703344,151572740,1549324548,1198534666,1198545944,805723160,2737260400,3490644993,3489989e3,3490120065,823136009,1198546008,1549274761,1198534666,1545080448,1198534660,3490054529,3490185608,806358784,806378520,243287920,807033880,243877744,806640728,18288,1227133513,3340530119,67125252,3435973836,4042322160,67372294,50529027,33686018,33686018,16843009,16843009,16843009,16843009,0,0,0,0,0,0,0,0,65542,65538,65539,65538,65540,65538,65539,65538,65541,65538,65539,65538,65540,65538,65539,65538,551616561,474554729,499981225,3187679997,1754483202,1620261696,1187006320,1343228540,2106804738,1241675027,1198546963,1343228396,1343291392,1610687232,1614962947,1623423051,1198547075,1753434372,1947869697,2015062043,1125341899,18200,1084,3044042755,3489799705,588216473,603996185,1242703104,412745931,1616207892,1309671428,2335323176,2015724162,754984e3,421842944,2201229588,3490588928,754983252,824233984,807994953,2013337682,404441094,3489868032,570449946,3178258522,3892011033,1343225984,1343228396,1343225856,474330416,2011804361,1881814312,230083,2015669251,1880896296,4793089,411648090,2010717379,3187719472,3052404755,786438,2961506325,1610691336,2015597315,2019760356,3522833157,2032236899,1124794907,553723663,2432727202,3751959,164784168,4291885055,1241894152,1612447935,2600685755,3521397419,2953117744,1187036656,1343228424,2145066051,2013409321,14371075,704649304,1241698305,1198528664,1343225988,1343225984,439664,294787,721434136,2328088863,227139,2014917417,687873347,495177984,2325970909,508559402,1208631682,404423058,1638078619,1117332224,2150662,4291885055,423952493,3000731691,587298595,3176355,1187036528,1343225856,3044024832,2010783171,275201,1116766168,595644719,1125712091,858325027,721451035,595644418,1125712411,2144541858,1910273,1099243112,2010333299,57475104,4160701197,493092771,2997714906,411058354,2147820032,2007112993,973176778,1755412426,1753887784,1619671553,704673826,2145046530,2011054166,547405168,1124139328,3889002458,308592,721447075,1755041813,3490851584,2146770214,3490589952,2145066467,3507104512,858325027,721451035,2150406,4277204991,1118535667,3178287590,2330001440,4288870399,3044075488,262157,2621457,4160684058,587267799,855728355,2121893,4160713899,3178299343,242960,1224952322,4160702467,3172007912,16217,1343228452,1343229376,1753442369,1116452112,587255811,4160710666,3172007896,3037724675,2145071923,721432620,4160737537,3172007917,3044016131,2015048489,851972,721420310,4160737283,587267895,3371267,2097193,4160702977,3178299322,16217,570471696,1208174850,4293195775,1187036432,1343228356,1343229800,570471696,1208174850,4292409343,1187036432,1343228376,1343229844,1258534160,1225017859,4160702468,3172007832,1885,16217,1343228356,1343229800,499365136,1753317338,3506776576,721447115,2081149194,3506907904,587211777,1619227852,3489809050,1619747019,1749794064,3489737472,3891873688,721447107,1619251446,1956405442,4283234303,3187730416,499561840,294899,721420301,474206490,721453019,250119,2015048489,1095975514,855722506,2123411,4273666047,1744970624,1125318939,2012569603,721447203,2150401,3178252184,3539747467,3891951601,1343299584,671135088,1259917326,1489240192,2144017697,2009805569,755001509,553832713,4160684064,3178299335,687885329,1276236272,2083252206,3489803008,1953178369,497281011,857962458,721451035,1756090370,3489803008,4160684064,2095840769,3521391360,2124011,1626028801,4286773247,1187047389,1343228424,1343229800,1343229844,3044025088,288901,4160713771,2095841139,3508218624,908656678,721451059,2150403,4160716577,587267735,2087352227,3490595482,488797291,989954003,570521555,2145066403,2016490497,1079672800,4288739327,2145648,4273928191,3187730426,308728,4265539583,1744961573,891833113,3491578394,721451051,488886275,721518555,587321604,2144410786,2010333259,2145000675,1083384577,1242646800,1309820945,1712023123,1111191159,939643138,3507562496,1716741651,4160684064,2016149015,509157888,488718731,1610756865,587298763,872973474,3187177443,3890570763,67109888,1343299584,1343303680,1e5,1343291392,1292416368,4160684072,1275592631,4160684064,2686899,4160692481,553778977,4160684064,3178299165,1343229800,1343229844,620803440,942213,4160684036,1118764959,480432129,2007332821,2144411106,3489999104,1763932117,3489737472,1201143840,2103134983,3490261760,687892577,1755566086,3506645760,1745485856,4267702271,1187036528,1343228396,1260303632,1612467230,1260266624,1612449252,82060512,1260150812,3492554752,1126179841,1641827354,1113876956,1646018628,1654153817,8987130,1616528202,1745963541,1108419074,1226101003,1745438740,553861194,1225998346,570712074,1108437889,571265276,1259365082,855585525,578838554,97667854,570515482,1880771341,1641594128,1187047386,1073807368,131068,1074114560,1074102272,2953298131,1074184192,1073774640,1073774592,1073778736,1074110508,1074110464,1343229620,308592,536877125,3523297964,3489671168,1258601840,1746599968,1201170651,22750080,3891337444,1343229372,101851872,579082369,47316995,1116807169,585881863,412812818,536879744,1117389266,1198539072,495301936,3001159436,859242515,3623889929,1879259911,17379329,3522380456,3187719472,3037733376,1208371973,2048619098,3623889791,1241860100,4160702725,3172007413,1343228600,1343229528,1343229476,2909,1343228080,1778535172,3037752539,3506520730,4292933631,1187036432,1343228616,1208268048,2145066435,3506514688,4257413119,1187036432,1343229528,1208221699,3624086275,989940227,1486356635,1187006320,15799,16104,33573634,1746624536,1187006320,1073840140,308592,860162,4294113279,587473600,1126762017,235406674,1712339713,721420809,3178287609,1241795331,90136,1134127251,1198576123,1073803264,1073790976,808039927,1283094531,3490327296,1617109761,2232480751,2143858,1201170595,2282812293,1265942007,2015043591,3507038976,2145262947,2992340955,3659868928,132868325,537253122,3890569312,4160684072,671154005,537186561,602662902,102442880,33495275,3656794811,807141416,4282841087,3505399808,418073442,3656139451,2630172,4026616160,1264647411,1612343522,3574466291,2144935331,508755978,1264337306,858370770,688025626,570544387,856116057,133396442,108254232,587912221,3490464286,2145000931,856162339,1263763417,3489868032,537294873,3518579345,129200154,588043280,3508879902,3887144960,1746619208,1201170587,3504351232,587327402,1125345506,3889973144,84109600,1768018337,3516794123,578823664,423822893,1116931410,407099551,1116936539,1262147739,1763403803,671106968,3884830935,2648293,4276418559,3489998848,417884643,4276025343,3508411911,3557426995,26354304,3523625621,418081251,3540009619,654436221,569434129,101261952,89266283,3640672915,1776543603,408623339,3640672915,3002066797,3489672960,120842081,1260442904,1184655777,788555803,1776472099,1118541057,2466371840,413676316,3523232387,2600534040,3523363459,1259685472,2646019,4233818113,3574007667,1772120291,3490721536,1776418841,4233162753,3582396083,1746619149,1201170523,2680630,1201170779,3504941056,1242097456,1746010113,1771175960,671106960,3878146282,1343229324,1343229620,3942645788,16076,1343229372,1343229888,1343228540,1343228444,1783019e3,3342340,2015048489,721420336,4160737315,1768160205,2058722,1772093445,926948945,1075388992,3640672903,1898584770,1747479075,4026603609,2032925709,2124130,1633884371,1746627235,1258702744,1746534448,1612335877,4247713791,4160732664,392105,1187047403,1343229796,3489660952,1275901296,1826777603,1116930053,1749274897,1618169353,3489999616,1784684802,4239587327,1920148224,1805806059,416481312,4160709539,3178299313,1343228616,1343228600,308592,1292510721,1258976616,1490026674,3489802240,4160692481,906100095,3522440709,1099177568,2648171,1201189601,1187036528,1343228396,1343228424,536917264,4292933631,1241850624,1241871635,570515475,1112689412,1696228762,1187036432,1343228396,1343291392,1343303680,1259217440,1612363024,1746422541,102441936,1649959256,4196923391,1258955328,10164419,1124755481,1612325248,1133144090,1258709018,587536576,1615003840,1187036432,1073803264,1343229796,268464129,134227968,701712,4026605824,3172006855,3044035345,1276213274,3506907648,1225869840,1611752226,1629637136,1880760833,556289295,4160684072,594608103,996569963,620786987,2706187,1629290528,4245747711,2687008,4160696364,3178298635,1343229472,1343229376,1343228472,15834,5197,1343228540,1343229244,2013995616,1075492112,706749440,2992361748,1118009418,721345042,2286670094,3507176099,1118013643,1209257992,4208916479,1880909827,1896100865,4223989759,3171942432,3522898687,721455179,2294993400,704643100,1259000308,2144411098,3506514179,2010200321,2014982994,3506514435,1880766977,4288215039,4160693249,3890346895,1343229800,1343229376,898551,1057152,1310857,4286773247,3508546816,818085920,1229922827,4026609919,603978487,5972565,1263293666,1424103570,2031766347,3506711040,1787972170,570515482,2126106,817457179,822055681,2835423748,4208914433,755097635,1262604561,704674074,1245761795,1897753234,1746624538,2105920,2466335037,4207734785,807862304,578938854,5381803,3524018835,3640667008,721435521,990433541,856129571,2158198883,536903907,527154686,723467263,721475641,1227805175,824910347,4026597408,589888171,2323171,2105956,1294618153,1880765229,978929961,2250606054,2267383526,4026609696,2357913,858464545,587362329,871335779,2581475,576978979,926954318,1226797946,2153611294,2170388766,3684953,4202885121,555810851,861544963,2149217017,1709384510,1025894335,124468735,149803451,2281744,1209213343,4199542785,1293025312,2695692,4026609762,2161255,2695692,3884003522,3517328641,2105918,3883616523,15864,511,1343229364,1074085888,15980,4294935193,14629,15788,15800,16378,1343229621,16116,1267054064,1746010134,2416160901,3489809050,2953125888,1266793968,1117415538,587125240,1266614354,1117411506,1756615154,3589211290,1777420924,3521856145,1909249,1108557845,595644902,5990706,3521200794,3696887,4234344447,3489933312,822018104,4233951231,1773338629,721439856,586207241,414844434,755012097,1167622,1116818028,536926471,3888537888,1153537,1116818024,3003111426,3522440960,841566822,704673810,838980079,2449621034,654862626,3493151379,558891040,4268554239,2583822371,1214133068,755003418,547934465,1114178880,597705065,1112100186,1076429019,1616976073,1612712137,4267112447,1743617,1117408081,1213519878,1230326612,1625514144,4266326015,1751280051,3640672915,1629742982,654320385,2583773787,1262969315,1116955047,923287935,860618787,2583853083,3517727379,1773300083,3534242451,556269600,4160696356,2293291,843619075,1650682225,1760780643,1245736983,1184112641,578839266,1679949906,843710498,572485648,1083195402,155871269,1646330002,413819683,908093461,2416010214,3489677829,629204810,95250918,3523953331,1103053483,3687039,1103053486,2533507711,2550267911,3489874567,3523363502,3540009643,2449891,2016228684,3508153600,97059342,889261769,208748685,9005222,1745754225,3507372590,52103963,595616611,1671627099,1126000651,2187277,826811138,1126922253,1772318731,855742465,1746100643,1125646369,1292781155,891838480,573072099,1208693028,4026628139,537000255,3208671272,1881158731,1187047165,171066965,2656915799,179400496,3834380118,1343229244,268435201,1343229888,1343229636,122080,352336956,7710,963,5681,898416,4173920255,2686980,4160710656,1746992535,3178262821,3037733376,554519559,1208425891,4160714714,571342827,4026597409,1208285445,4182571007,1187036432,1343228540,1343229376,1797,499365136,721453019,1258672393,3506848408,856050436,721453019,4160737281,3172007897,1343229376,1343228540,1242346768,2144935251,3506907393,5972864,2224244745,4160696577,3172006311,3506776322,1208295936,808220634,4187944959,4290574335,1187047411,1343228540,1343229376,3044025088,493177873,1646491627,855735045,3623890303,1117401857,493015047,587364307,4160713507,536936399,1753473039,3490202251,2009210208,3523297931,1931616770,3640672907,536936459,721445411,3178287339,1343228540,2088941048,34765891,2093171482,68878351,2097365786,102464961,2105688851,1125188105,3125366304,3122331698,788640393,841797632,38358045,3826274,4160709347,671154105,1260048425,759130653,1243207976,1746075680,855722264,591355923,1259815837,1654874533,1243040534,595616291,1642266779,1633886976,4286511102,1755526463,425396653,1759731875,1625626973,3506908929,3154688,1626562740,4160713895,3187210349,3892077492,4285200383,1187047417,1343229376,1343228492,1343228540,1343228448,15895,15844,1343228700,5237,374128,4160636940,1755971559,293123,3640672921,570490905,4160684072,671154023,1241960457,1779648518,1754362147,449557211,4160708755,3178297453,1343229376,1343228540,5237,1258823936,492483856,1753380817,3490071178,570522369,3623889279,855971986,4160714714,3172007717,1343228540,1744980762,3037751641,1116340228,1749078289,3507365888,1763273114,3507110538,843841562,704673810,1775816704,1225859834,4160684178,3423271373,2215703535,1242478194,1116825618,721473809,570544140,1931102987,1943679494,1985622553,1989818910,2010788613,4277336063,4160702470,4085578667,3171977232,1343229244,537141248,1343228448,1343228540,1343228492,3037733120,4160702479,1209006457,4160692480,1208940917,721451587,578867203,43141900,554721306,4231460863,570444554,858325017,1879716136,1258844186,858325017,1879716136,3171971098,1343229528,1343229476,1343228600,1073848348,1343229888,1343229572,1258627712,3037725330,687890458,4160737283,4160748569,3172007879,1073848348,2013995616,3037732864,708853786,2992361747,1115912266,709024272,2295124237,3507104784,1208549409,4267374591,1225261090,4285853696,4161599487,3171950593,3522964033,4289001471,4293720062,1187047414,1343229800,1343228600,1310242296,1385664,90457780,1125515294,3506651950,4160692227,3187210751,1785096743,3491047936,789387711,503830546,2013777921,1713844225,771766785,1848037608,3489737472,3890428673,3489736960,822177806,3890035969,3522309632,666912358,46098486,3503637054,1187047384,1073840156,832784,537067521,4191877119,587473536,536870945,4160684114,3172007871,3037733872,415237659,4293720063,3171950592,537048336,4190042111,570827712,1712981339,587276800,1048593,4289263615,3187719440,650163571,91628545,4160692226,587594155,1181443635,2235869,2687011,4160692224,2016149397,3490005539,1746553603,43721664,3504947738,1187036531,1073840156,374128,4160684044,2752461,4160684064,570489235,1123076,4160684048,4160749433,3178299345,3037733872,415237659,4160692512,536936423,3044064528,786437,4289918975,537002025,4185454591,587473536,2105600,4160684114,4160749405,3178299317,3037733872,415237659,4293392383,3171950592,1266819712,72529392,1249992730,1746010118,2961506317,3560507282,1249779715,1283410302,1249861649,1249861648,1738688639,989805311,1818255362,3506192912,5382784,1705141282,1611745914,687892561,545315580,1612185920,4182702079,1266033153,1612325153,1620718179,47325866,1249075418,1746493457,3673958656,1611866888,1675830016,570499970,1700987163,1612335981,1818370818,3506192922,71311488,4180604927,1265181196,1658462592,854936424,1612329727,1265050113,1612335207,4160684361,1265040095,1139499038,3506440091,771761408,4160737281,1281555119,2116450,4160710681,1264711847,1746476448,4171429887,1281304065,3491704064,572542814,3670049,4265537536,1891312416,637608704,2846971,2466463795,3490136629,3670049,824189463,4026544137,637599277,1899700993,1929061120,3971843,3506973440,1330577441,3689039,4160631049,1263467921,128671867,555209743,1313620849,1246507273,409010224,4253349886,1246448458,1246453786,1263231059,1263231091,3506449665,1296708356,1626098250,1330258944,1263165739,1613365281,570515627,2483036992,4160618552,1313275221,2162722,2483036992,4160618544,595656013,5963809,2200633400,4245878782,2171776,3145819,4160652075,599850251,2200633435,1262105601,1490026658,3489802240,4160626944,872545535,3522440197,536890165,1261789291,1854005,855900185,1116954632,587846138,855861091,990603171,4160709667,1261435395,1692617263,1612335919,1244603168,1244618771,4160643091,1187052517,1073799168,1074184192,1074135040,16429056,1073774592,1073786928,511,1073786940,1073889280,1073905664,1073917956,1073782844,1074102272,1074110508,335556608,1343225856,1343229796,1343229621,1073741888,80,15897,1343229212,1343229464,15836,4021,1343229520,16184,1343228580,15852,1343229528,5929,15972,1343228396,15952,1343229800,2933,1343229844,1343228424,5901,1343291392,1343291524,536936448,70640,1343291536,3758154368,3758153984,3037743874,1763272920,4271437823,1074102272,3052882724,1260677146,1612343428,1776615426,1768108585,510556178,2449555486,3491047936,3489869312,4160684064,3187144973,425290146,3640672913,754981589,1789120756,2031831575,1523777576,671106968,3891187948,4241684478,1772251489,471360,1116826083,1430290,1074601561,3506455050,771751965,1776406787,4160711200,1780742547,1748597050,4026538392,3889757451,3342365,1118516032,2634142445,1187047403,1343229796,3489660948,1084,439800,4238800894,723482883,3768635392,1263888389,1117415466,3768242176,721451883,3767980032,863992617,1075445770,3489677849,2074861711,722418433,3767195904,1263291467,1751867427,1756061795,2079023267,3489803011,1986163682,654341794,723743527,3625504839,3493538586,721672205,722653265,1119604773,587321434,855929635,857437155,587232867,723247196,723439708,2675187,4237883391,724230154,3624652841,3492883237,724050177,2675175,4228446207,4160618544,3187211733,3505007407,3504876341,556066779,4160702509,555350909,1210843140,406847522,4235587584,1885545344,4160684072,3890609233,1210392836,4218222591,1610818307,553838580,554493913,4160702496,571276131,4026550560,3890871421,1209803016,4217042943,1226646024,554887157,4160702488,2227027,822944274,4234997760,1986491367,3889526439,2144476642,3500943872,1931616769,1944197266,1986146872,3886315171,2095784451,721567763,872927647,2011380481,1275651995,2105603,4246534142,553844768,4160630828,3886021911,1128420181,1343228540,1396855637,1343229376,16192,15883,15875,1258927376,1784302601,2014458409,3506448896,1242057735,474507281,1611688665,1658461258,1201687045,1187036432,1343228492,4145,4537,1343228448,1343228700,1269478903,2466342939,3556770779,4089438344,1336381279,3678464,4160627713,1319501251,3154176,4257150974,481501471,1252161500,2010913979,1406995,1117863961,3768766720,3506448642,687923402,828428631,3511960075,721465947,3725900,4221368318,489579,721840134,721997837,721473598,2150879557,2297108772,3707781795,1899692067,4235655166,2288574538,721553923,721670157,721539094,1267388723,1746478098,3505006848,3145762,4224380928,2998986725,3508938752,1759071107,2022406348,1125909028,3891253467,671134400,1266601999,1754997762,805390232,2015043139,3506645760,1882469123,3888803955,872567603,604301299,3889777014,2103135092,3888148531,721778771,722063364,4160671800,3758882109,1456677634,721455185,1265425911,1972961336,1231899244,4227659774,1265377920,1696203410,115055361,637588746,1332290561,755002813,772460548,3766669312,1704807268,81500929,4160673029,578879423,51530592,603481370,10197505,3490202138,1830505309,3674221312,578871422,101862233,3187107098,671119504,1263718404,2036033755,3518907011,4287035390,4225562622,2291394504,2102479436,3501467904,1108025854,1762841009,10203867,671111320,1749274795,3507759872,2016092768,3517202963,168986794,2992361889,3667798784,738228332,3723675,4209440766,1612474371,1896030978,2746196,671106968,3890598302,704678034,713084993,1228263520,687897929,3884241152,10504504,1745246272,1118992566,872534068,3522571269,2020206457,3490326785,3489671427,2288772979,3489671936,553838447,4225431550,2288773038,3489671936,499312487,704806866,4160673794,3886283959,2009280514,1110239136,553766923,1260482042,1704738850,508758128,1135690138,4226217982,6570917,3882235393,4281399294,3204993,1108550240,3880046592,721465947,2020334279,3489671936,2288772925,3489671936,2297227065,3489672194,620881717,2143498247,1117585464,4160635309,1745091195,1612530285,3874058500,3890020408,1343291544,1343229800,1343229844,1343225856,1343228396,16178,1117,1343228356,1343303680,1343291392,1343228424,4160664848,3172006877,1243264504,1612335898,2232480751,4089427570,1276677983,925368359,3000924219,3507694336,2282812293,2232480751,4089427570,1276284767,925368359,721451067,573100051,1208942625,4203409408,3758518334,2171432,4026550283,587266691,4085608507,2131984,4249548798,4085639122,3206580240,1187047374,16076,1343229372,1343229888,1343229572,1343229324,2416031223,4195809278,723548419,3768504320,1263757318,1117415474,3768111104,556289105,808189984,4275763198,1746094671,1611873025,1659070578,2050188514,1263309568,1612355840,1918509568,1616523777,1914267954,1671586786,2246292,844196209,2083546145,578777104,1073911808,671620688,3765491968,1128407043,2054637631,1118788741,620810593,1616713856,2017491011,2990538765,3674220544,1760755741,3512091307,412764982,2023201536,3507038978,1773291104,4227266558,4236310526,4160657409,3187145539,3494326016,860880931,2322463,637608450,1880765266,1918782248,3492293888,1244220200,1646486627,5972864,587227619,1633903266,1638222373,1227161632,4178376702,1755526463,425396653,1759731875,425525306,1625629448,1109344282,1260310531,1625055843,1209919436,1650488486,1623351428,4193581054,1209722820,327713,891833113,573072227,2016096556,4191219712,3208671278,570615734,2600525828,3500878594,1258824195,553803866,4160636941,553843343,4160636938,3886414475,1126158603,1343228616,1343229616,1343228600,16044,1343228100,15856,2837,15895,1343229528,1343229476,1343229572,2885,1275704688,1688226569,2181129,1667432453,573060392,2016096556,4187287552,1881677825,877903680,3178262560,1343228616,3673,1343229572,570434496,1620706651,1225083396,1728538,1611739892,1620713985,1187006320,2032384,50332184,4160730384,536936427,3187719440,587276960,89306384,1750229075,536889858,4160643091,3172006925,335552512,308728,2031637,1119098950,583062021,43141900,1108568091,31872e5,1109139051,456380680,3540337323,3735584,4200527871,3890878820,555745312,4200134655,22750080,3890354404,1073840156,374264,262159,460920966,1119099145,583062021,43141893,1108568091,31872e5,872480800,4200200191,3891148031,1073840156,3052413697,1113305221,2151395075,570434496,1620706651,1822059162,1633296902,47325920,570515482,1629113375,1747345562,3285900,1134175620,1125457923,4222679038,2466325250,1613046656,1617232155,1625645221,3523033857,570696448,1572889,4187289599,554181388,537019293,4160635661,2567043993,3507890433,1613111820,1133928550,638058547,1621508894,1625694210,4220188670,570565376,3670041,4185454591,1258562048,2953142298,587316720,1187047373,1073872904,1073840140,1258758288,3037724800,4160643096,570489739,1616530180,1633312986,1650090458,3171967706,1073799168,1073840128,4160730384,4160749545,1258618769,721446939,4160671745,536935693,1187036432,1343229796,1244378616,1611877163,1611876907,1261117954,1108568091,554029064,1612270377,102441936,1679450906,1679434240,5972936,3523033857,604578e3,621027840,100671745,989921323,1753469437,140196865,416432139,3522505728,3642960388,4160693952,4160749487,91684695,583018240,1748197559,1133726998,1125364450,587292723,1622343721,4160684088,570554685,2630140,4026548818,1259337779,1117284379,595644424,26948672,3521200796,532736,4188338175,4276680703,1186870529,1187006248,1073799168,2097728,1073803264,1074184192,1073840140,537140992,537141244,3037743877,1624777226,1208246553,4160637188,3207658011,1187047421,1074102272,7065,537141248,403289392,3758902621,3121838084,103039068,6562568,1080873728,3522837249,1080164882,1116221441,470866928,3039870256,1547911753,169619969,3506782637,822194781,1101683780,1566776084,889279827,822202875,3174093295,705185412,3027292986,973201436,1417895051,1180750331,1187006320,705185412,440652590,3522299803,436843632,138615813,1548014338,805400580,3540125827,2147768900,403255298,424811053,3540204048,3229141368,3539679760,3540059986,3222849816,3540058194,3221801224,5427209,2282476292,3489955843,805449986,2014040065,3161485315,1198540384,9609993,855710363,1187006232,1904441739,1900247371,1896053003,1891858635,1887664267,1883469899,1879275531,1198540384,2999535236,1125712395,1187045393,705185412,138662698,1879167745,2999529473,1125712395,3540060291,805470209,437995107,3121289426,470500121,3540466192,470594608,1186995213,974176314,3157316348,3539994450,5423114,3221410560,5427206,2147603202,805490690,1879166976,1198540384,446407429,855710363,1904297752,1895919937,1887531201,1879142465,1198540384,79764919,1174975749,3171567130,37752258,604047936,1126172132,3000118015,1111546112,721304065,981389825,671106928,3573564960,981353024,847249554,264521584,3573811172,3489672448,1111502849,973198339,3490846720,847369723,813748481,813748741,755028483,4247567,721304065,838982150,172023047,1125123538,1198539552,96477439,536930298,101009264,172020205,3890938496,336376451,335823715,1131197069,2995001627,69550956,421202980,336139264,46154568,1124927193,406851929,4343664,3489730066,3506514687,96472512,236060746,721408001,231330049,570492361,3557376065,3573563457,1116226130,3674266626,1112678912,1198530064,407454465,671142136,3891714808,3037733120,4287035391,864157715,1141560336,3674683927,3709413895,1137252289,130031617,3171958856,706757202,572578560,3171959056,3171950592,3037733120,4285331455,82954,974640366,1136778222,3706268168,3171958928,3039830528,3573950720,1124403149,973146184,570482704,374064,3491054349,369891277,3506782892,239337929,29377313,3891671559,524293,842875474,553705476,572372272,620763730,4283824127,553696560,671135024,572447477,130357842,3891464256,1185162496,687923213,3758480386,3657640448,1115626377,3758168338,454171017,1130841700,3406830528,3523217508,1174811905,1175404846,140788015,3049277296,4293064703,4293326847,327603196,282203023,1129792342,1130841700,322900790,428415936,3049307584,4291885055,4291950591,687920124,428465154,3758168850,420617097,274993270,3891122677,555267376,4285134847,153373789,3674020608,3573356800,6619266,553666643,3674358434,1111497554,13821946,604087125,4291164159,570437897,620765952,4161597440,4277008383,4275107839,4161204224,3036735375,4292409343,3170911752,124003329,3691201184,1117799012,1198578944,1198522400,4160730480,3784114121,555267376,4281464831,1245451265,348734289,273232129,21148674,1128351801,1211701842,2739413248,4160701388,1141440400,3882138628,4160730416,130723,1228133397,4276025343,3540062289,272642305,1174516738,10177326,449386688,2738561536,4160701396,1175584648,1293316,587196233,3039881211,4292933631,3691653958,726024795,1210375174,822625112,436736265,3879215621,587154368,3039881013,4269078527,4268685311,4268816383,21561664,308549844,3557438465,3657767636,1092633188,3540790300,3758757824,740049185,671142663,1209260547,1078466505,399040531,570482705,3657574400,1112097344,2735557133,4160693249,1175519046,411322890,444912130,446747648,570439681,1187047169,326016436,5909,372130559,748557770,93569721,23258160,1686629713,995675660,526087672,267050316,134043372,67087032,33551700,16776876,8388564,4194300,2097148,1048576,524290,1179625964,1179625965,548494836,269846812,134392900,134392901,67130724,33557164,16777556,8388652,4194308,2097156,1048576,524288,524291,1079069369,398767472,236060738,721408081,399364178,236650571,738185297,1320407122,1076969520,1127233025,1080050481,453001321,446503753,3557628628,3657968670,1258784,1084882954,3758833953,532992,1302538,3758563840,3673632030,144416,1093157026,3491305536,3489861569,1112687552,805425408,1118837174,412275204,989937984,3556393648,3540125760,704655361,738119689,130667018,98255880,3178251288,3506186752,138471394,3891396672,130603521,34127216,96481535,975224176,3886815506,1143079442,992012201,3886815579,1143669275,1187047337,1174582656,265437258,1184237522,4784192,3493662210,3493604095,3493596683,3493538815,1065359575,34144768,172558912,1184110658,164301250,1128809306,3540126866,3556780032,37958145,38931904,1147148416,3507359169,3526045694,3540058203,805425157,100611841,1148208184,805420416,4196416,922871798,3524472830,3540125760,721432577,436195333,96417537,1148208184,138460544,3891658816,34748944,990963648,3888185883,922868242,805490958,671288768,3758477578,922868234,805425414,3489861056,96477185,3179299952,3179300464,96477439,3179299952,604091760,98845286,173146698,164840226,103622096,1718314542,3002273222,171967040,231293728,171327566,1865222134,687911625,704630832,721473580,738185273,442224682,167850877,201933673,1311680,453264204,1131156132,55120932,252451081,822464776,3540977932,41945289,440419153,3758674954,822686465,3540322636,37751049,440419153,872535040,3523816446,408946137,3178240384,3507235839,96477439,3178251056,475650810,241291525,536990467,1127220672,3194224,1187036528,4305936,34198074,570493513,411633106,3493465538,3493210879,273822333,4838144,223061018,164125924,1130382176,1130369792,35918656,883563044,1128267808,168496064,318784344,356533088,1130568228,1575899,38355776,289413640,31146820,806360032,1141051776,1176294150,1130643812,453575689,855757824,416286162,1198570512,3489926665,96475072,230746104,264300539,3891464128,3150568177,2543756976,2189855633,2147483648,8388607,604091888,1080231908,1187045377,218936816,510005199,461964598,3540190564,1111507913,822203136,3489860964,183901286,467980295,8331264,126426233,1015026313,220005156,510529503,463144246,3540190573,1112687579,855757568,3489860973,183901294,468570119,8331776,127605883,1031803547,456065837,3562543974,773867172,924899910,1086062612,1086128157,1093878002,411058986,264978777,1137299461,570442688,1095778916,1180844369,3509062989,3506900237,3491702784,1094719780,973160777,3505982733,3540385892,3540004865,738210049,138465537,973144128,479515659,3506703076,1141966098,1142491099,131710448,1125731104,131719168,3186630656,3520932096,3520801792,838974960,138414022,1126696909,771754057,3889811681,3660131900,926957088,1086062612,604098560,1125400818,1085997082,399721244,1185736620,3657969440,276e3,868532,1090011317,1126711609,792520613,1059117580,276032,3489677492,1090003969,541444,1124876465,3890878401,1638416,3885245440,2146435072,218936816,87432806,182852489,224658788,476434434,3489925869,553721856,1015022857,1185153828,510070044,467338559,90442471,3489795428,183311461,570478596,85664513,52706432,1147420791,2995041431,1131721366,1132334087,1131351061,1130934912,3540129846,67117057,70260799,419433525,1183072637,2996482696,202130256,203375458,2995667836,429015934,637653762,430179382,202834966,1097275446,2994846721,1129427610,1130499076,1130105883,1129886336,3540129810,67117057,68163620,406850579,405619043,536887646,3154526535,2996023944,202130264,202523491,2995340116,408634193,553767682,409207817,203031577,1096947721,1096161389,1095180288,49921048,1125191026,225051376,49103632,3506638090,1094719853,989937993,463162898,1119027318,7197198,805425927,1097934336,1127564902,138465537,85655616,132389065,3186639905,855759371,805425414,822202628,3489729871,3891398729,536872929,906083824,536872241,59371,1023,219985392,88022631,182918107,224658788,476499970,3489925878,587276800,1015022875,634389284,637535789,1714308086,1718487326,435556302,4802228,3489795407,183901310,536924163,1061167360,457048895,1152647350,92225281,139008969,906063662,43780214,1126501781,334316405,330122101,275592449,460719094,46969868,1126960453,2998121122,203899738,204817275,2997109615,421217132,604099330,423560228,203228188,1098717348,1097668900,2995886592,1130476204,1132203031,1130302507,1130017426,3540129956,68297217,69343423,408030243,2617327995,421217132,31002194,21250826,2994805408,1129427634,1129976835,1131613238,1131917959,433199062,1098786560,429589558,202769431,1096685695,418190963,637534707,1098199936,3506835369,174653540,173737448,3523822360,570744879,864044180,178864501,177931688,3542500120,1095319872,2583692324,891649,459555669,451167043,2995171989,202851189,201540478,2995929951,414597978,570544898,415171602,204670002,1098586450,1100759634,3556912128,805380608,138428753,1125124042,2952923209,131548770,1264128146,1264130258,3523429018,411632914,3186629065,704651264,3791873,855752176,3891594521,553703943,264888327,223479753,315215875,1229905921,536872201,1187006320,3539075146,973147474,1117408072,3052458730,453575956,3540060242,1095309312,416417947,1184105746,206218305,151739554,1129530195,1129517851,34739035,1252050,190530395,1130563660,1129518043,855709147,449974363,449973267,1130037267,226755209,2995602209,1131786910,1132334095,1130302491,1130148492,3540130102,69477377,70523199,425987123,27083131,1126960804,2997171232,337920853,204292948,295967076,454165458,2995696277,202851189,202130302,2995995495,418792291,587322114,419365915,204735539,1098651995,1097079003,587208923,2996715875,2996650870,1132268575,74204031,430181357,33964413,456525967,125649327,1097730294,2996155060,339166060,202523517,2998289239,401228630,637540781,68305266,70129855,422972458,839401850,3524858194,94112413,420485073,1147224425,48624,1021,2046,2047,3604999160,3099510221,2762517938,2509872288,2324533138,2172880264,173883730,399574492,1095571732,1130561579,1131852454,203928226,1132413818,198313041,1098520969,416422098,1112081792,3556917648,872489728,140525917,132974697,1147224872,3050356208,3050364945,5001139,3489729892,3506586300,218701824,6030601,3489729892,3506586300,219881984,637601051,3557572683,3573563467,1117340278,1116786947,3540113411,3690997248,506479222,1124842960,1124276443,3505734419,3673565440,1178920948,1180059213,3035645535,3169863536,1185498784,1186678450,1180845936,1184156184,704661082,3758414624,3390588514,687883924,415291930,1180385633,1180451131,1179795636,1126318330,1179469380,1097548130,1184450192,1085490731,1090273597,1179796252,1101153883,1183990187,1198540443,1101077184,1094403659,1085556300,1090143810,1179927330,1096959581,1183990123,1177241243,1094533299,1125925116,1179338306,1101742498,1184450192,536889200,1198530816,3036684800,4026544672,587818,570473728,841004288,4163956736,3170893832,3036684544,4161073152,553705502,3571848643,1183626512,4200387,3490319874,3490458367,981409361,440403465,448807e3,117444865,536928287,196609,1138277648,3171959769,3036684800,4161597440,1117394890,3170947328,553731032,1078003657,570473728,3569227019,1184150800,4172869632,872485908,553703936,1147279307,3557571124,3657902604,1083244548,1112686736,1087648288,3171959585,1138312152,841006352,1175245831,1112686740,1091645984,1126187216,572688,840964041,1112724483,1091580448,1621264,3171942425,131796931,235536449,721408007,151638024,411650621,121651993,1656688,1198530560,415844666,4909050,1262030162,3709016786,3659410175,264963538,1125779419,255852739,172557065,1125139208,3540058203,805425153,138626928,1198576379,264818690,1198524352,319947530,3522703873,705105730,570544629,587194368,33558472,96475264,553666416,553648138,553705476,398524426,570482691,3758433024,399188480,1079591e3,1100552896,1276949808,687872674,119043,536924176,357317152,3523531026,402668033,223101257,1276498938,3523494562,411632914,415827931,1137884464,536874322,3891601664,973198339,1095309312,839636475,180356420,1126696269,6556361,604033027,1096892768,3554732001,3891791940,2047,939524096,2146435072,896,1074,2046,265030922,85663315,89266889,1137300227,3540009536,223490305,475254787,3490122459,536877842,476119140,310970249,51526272,449989474,839010160,705483813,621926940,727725,839401771,406791,1083195630,1127301265,1130614e3,587207962,1129660762,1129792342,317981375,427165046,401424743,461379967,1198539193,536879628,4790217,84488449,34203611,1125715459,1112736256,3557306912,1092157452,1087914132,570442528,1095844176,542576,991958985,3589354016,553656320,1198531072,4160730608,4026596950,1183119389,4164874240,1180742659,4166578176,4160732172,3832872528,4160730608,4026596934,4026595341,3758553135,4160730608,4026596926,4026595333,4160747589,3186687550,4160730368,2754740095,4288149503,1294803968,131223085,1140249346,1097220717,3523477586,1185105570,1186023080,1184948227,1185564321,2758756019,654395044,4160693791,922877483,790707713,3170947577,2995013209,1131197069,1131746310,1130238987,1130017410,401217709,1137891072,414581778,204145706,1098062098,1179207232,396034205,1126829970,1100562832,3875283518,2995013193,1131197069,1131746310,1130238987,1130017410,401217709,1137891072,414581778,204145706,1098062098,1180255824,396034205,1126829970,1096368464,3873317438,1023,2649771451,922113733,20861,1335578,690309,1647099,4160730608,1296104902,1076625420,1118621697,218747138,536872201,1076625436,1118621697,219926786,570426651,49096192,3573820160,1080763906,3556786281,424624758,1117377796,906091788,3758309481,3657908923,1080770049,1048583,983098,3866649,704689216,721473807,6082570,872486244,5034249,872486244,956420354,3758242561,553656320,4160741422,574553009,4261672959,1183532674,553656320,570508928,1183909778,1185195037,639575809,4253153279,1040267009,3522768673,1179862602,604060172,654313316,1771602,1100207109,1098455296,3522627684,1096015876,1102650112,3522234468,273221582,1127221312,771800128,1275711498,3573632265,1139622884,3506505718,1097406720,1097406720,4160692797,4160749136,3186687308,2146435072,2287612045,843314856,1639665513,497837829,2520805041,263043836,2869681010,133525158,3852451129,67021686,3130483275,33543515,3722155222,16775850,1458498141,8388437,2864150382,4194282,1431681980,2097149,2863312350,1048575,4116010351,524287,4272597675,262143,4292171093,131071,4294617771,65535,4294923605,32767,4294961835,16383,4294966613,8191,4294967211,4095,4294967285,2047,4294967295,1023,0,512,0,256,0,128,0,64,0,32,0,16,0,8,0,4,0,2,0,1,2147483648,0,1073741824,0,4160730608,2757033479,4263507967,3657705728,1294027808,1097406720,3020175873,2790401793,587276800,3459254171,453002932,3557507497,908083838,1094516765,1085538332,1090387990,1096958772,3758178667,1097406720,922830438,3521654561,2996744837,336020341,202982270,2995012431,401687372,603986230,67715425,70523007,425987121,262422905,1126170760,411047817,3154395481,842941010,4253022207,48624,4101234283,744261117,5223920,360698448,922865742,4160737359,3020225971,230818377,37765905,2787845889,570443444,1115562752,865824,803133,409780,1127497982,1095582020,3506769838,2687008,3459270246,1101732626,1151607816,790705921,9032167,403837065,3162521931,3423839255,1131951873,1132217209,315163983,432019405,44515689,399316388,1097603529,411047901,1097613657,399319614,3490202284,118360320,151601968,1127286566,973345060,4160743411,3186687270,536889602,1224916464,3186630656,4293918720,2146435072,47274,1302123,1044387,726817,3214429171,435364844,3444379862,239598563,2327624058,126468571,36459724,65095192,3884134405,33040816,2279612190,16647493,2889981476,8356009,1164056449,4186133,2846560486,2095106,1430608008,1048064,178891460,524160,22365526,262112,2795947,131064,349509,65534,2147527338,32767,3758101845,16383,4160750251,8191,4261412949,4095,4286578699,2047,4292870145,1023,4294443008,511,4294836224,255,4294934528,127,4294959104,63,4294965248,31,4294966784,15,4294967168,7,4294967264,3,4294967288,1,4294967294,0,2147483648,0,1073741824,0,1162104393,538976344,5067848,1330007625,843470175,5527636,1886609746,1920099682,1766858873,844124672,1869562400,17170548,1343229376,1343229420,1101,10,3187671300,79,12,14,1,262143,16776963,512,0,50331395,134218240,922880256,66048,67762816,134348800,117460998,1073905925,84344832,4194818,17041664,16712192,84344832,4194819,2214921984,16386,17826066,1073741824,208522,33620224,3187671299,1343229464,1343229520,1301298411,1313429331,3223092,67586,131074,8517632,65537,1,262143,2686976,1375731712,1378699600,538980944,1095114784,540422484,4276822048,16777216,790528,33556480,134512648,2176,536870913,71303172,3187703808,28,9045,9417,6285,2729,6341,6141,15812,15825,1343229621,540165717,1953460034,1684107116,1981837925,170929714,1701080909,1377843820,1651536737,2037543525,543772704,171069522,1918988098,1145646436,1347559482,1347562825,50596402,3187672073,1343229528,1343229476,33685504,32,541675602,1347551740,537459506,4247914233,1006699030,1819112552,1701329982,1010721889,1635018093,1953785888,1902456176,1031170421,1717924386,1752393074,1868767266,1852142702,807550324,1280464187,637282109,791624307,1886609778,1920099682,778662009,795701091,1769366884,1378837859,1983853136,1769173605,1631415919,1667392097,1701078115,661022309,1010708258,1651374639,1048142959,1768187218,1952671090,543649385,1008758644,1702002685,1046529638,792498673,1651637601,792488956,3187731451,3187719680]),NS=268435456,Qd=3834380118;function HS(e){if(e.length!==512)return null;const t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(508,!0);if(r!==171066965||i!==2656915799||s!==179400496)return null;const a=t.getUint32(8,!0),u=t.getUint32(12,!0),n=t.getUint32(16,!0),o=t.getUint32(20,!0),d=t.getUint32(24,!0),m=t.getUint32(28,!0);if(n>476)return console.error(`Invalid payload size: ${n}`),null;if(a&1)return console.warn(`Skipping non-flash UF2 block ${o+1}/${d}`),null;if(d!==0&&o>=d)return console.warn(`UF2 block number ${o} is out of range for total blocks ${d}`),null;m!==0&&m!==Qd&&console.warn(`UF2 family ID mismatch: expected 0x${Qd.toString(16)}, got 0x${m.toString(16)}`);const p=e.slice(32,32+n);return{flashAddress:u,payload:p}}function VS(e,t){console.log(`Loading UF2 data: ${e.length} bytes`);const r=512,i=Math.floor(e.length/r);let s=0;for(let a=0;a<i;a++){const u=a*r,n=e.slice(u,u+r);try{const o=HS(n);if(o){const d=o.flashAddress-NS;if(d<0||d+o.payload.length>t.flash.length){console.error(`Flash address out of bounds: 0x${o.flashAddress.toString(16)}`);continue}t.flash.set(o.payload,d),s++,console.log(`Block ${a}: loaded ${o.payload.length} bytes at flash offset 0x${d.toString(16)}`)}}catch(o){console.error(`Error processing block ${a}:`,o)}}if(console.log(`UF2 loading complete: ${s}/${i} blocks loaded`),s===0)throw new Error("No valid UF2 blocks found in the provided data")}class zS{mcu;name;constructor(t,r){this.mcu=t,this.name=r}readUint32(t){switch(t){case 0:return 4096;case 4:return 1;case 8:return 0;default:return console.warn(`SysInfo: Unknown register read at offset 0x${t.toString(16)}`),0}}writeUint32(t,r){console.warn(`SysInfo: Attempted write to read-only register at offset 0x${t.toString(16)}, value: 0x${r.toString(16)}`)}writeUint32Atomic(t,r,i){const s=this.readUint32(t);switch(i){case 1:this.writeUint32(t,s^r);break;case 2:this.writeUint32(t,s|r);break;case 3:this.writeUint32(t,s&~r);break;default:this.writeUint32(t,r);break}}reset(){}getName(){return this.name}}class WS extends zS{readUint32(t){switch(t){case 4:return 16777218;default:return super.readUint32(t)}}}function Zd(e){console.log("Applying R2P2 patches to rp2040js...");const t=new WS(e,"SYSINFO_BASE");e.peripherals[262144]=t;const r=e.onBreak;e.onBreak=i=>{if(i===27){const s=e.core,a=536870912,u=s.registers[0],n=s.registers[1]-a,o=s.registers[2];if(console.log(`Flash write: ${u.toString(16)}, RAM: ${n.toString(16)}, count: ${o}`),n>=0&&n+o<=e.sram.length){const d=e.sram.slice(n,n+o);u<e.flash.length?(e.flash.set(d,u),console.log(`Flash write completed: ${o} bytes`)):console.error(`Flash write failed: address ${u.toString(16)} out of bounds`)}else console.error(`Flash write failed: invalid RAM address ${n.toString(16)}`);return}r&&r(i)},console.log("R2P2 patches applied successfully")}const $S=171066965,jS=2656915799,KS=179400496;function XS(e){const t=[],r=new DataView(e.buffer);for(let i=0;i<e.length&&!(i+512>e.length);i+=512){const s=r.getUint32(i,!0),a=r.getUint32(i+4,!0),u=r.getUint32(i+508,!0);if(s!==$S||a!==jS||u!==KS){console.warn(`Invalid UF2 block at offset ${i.toString(16)}`);continue}const n=r.getUint32(i+8,!0),o=r.getUint32(i+12,!0),d=r.getUint32(i+16,!0),m=r.getUint32(i+20,!0),p=r.getUint32(i+24,!0),v=new Uint8Array(e.buffer,i+32,Math.min(d,476));t.push({flags:n,targetAddr:o,payloadSize:d,blockNo:m,numBlocks:p,data:v})}return t}function qS(e){const t=XS(e);if(t.length===0)throw new Error("No valid UF2 blocks found");let r=Number.MAX_SAFE_INTEGER,i=0;for(const o of t)o.targetAddr<r&&(r=o.targetAddr),o.targetAddr+o.payloadSize>i&&(i=o.targetAddr+o.payloadSize);const s=4096,a=Math.ceil(i/s)*s,u=268435456,n=2*1024*1024;return{firmwareStart:r,firmwareEnd:a,firmwareSize:a-r,availableStart:a,availableSize:n-(a-u),flashSize:n}}function GS(e){console.log("Flash Memory Layout Analysis:"),console.log(`  Firmware: 0x${e.firmwareStart.toString(16)} - 0x${e.firmwareEnd.toString(16)} (${Math.round(e.firmwareSize/1024)}KB)`),console.log(`  Available: 0x${e.availableStart.toString(16)} - 0x${(e.availableStart+e.availableSize).toString(16)} (${Math.round(e.availableSize/1024)}KB)`),console.log(`  Flash Total: ${Math.round(e.flashSize/1024)}KB`)}const YS="modulepreload",QS=function(e){return"/"+e},Jd={},e2=function(t,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),n=u?.nonce||u?.getAttribute("nonce");s=Promise.allSettled(r.map(o=>{if(o=QS(o),o in Jd)return;Jd[o]=!0;const d=o.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":YS,d||(p.as="script"),p.crossOrigin="",p.href=o,n&&p.setAttribute("nonce",n),document.head.appendChild(p),d)return new Promise((v,C)=>{p.addEventListener("load",v),p.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${o}`)))})}))}function a(u){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=u,window.dispatchEvent(n),!n.defaultPrevented)throw u}return s.then(u=>{for(const n of u||[])n.status==="rejected"&&a(n.reason);return t().catch(a)})};var Sr,eo,Tt,yr,Ir;(function(e){e[e.CTRL_SYNC=0]="CTRL_SYNC",e[e.GET_SECTOR_COUNT=1]="GET_SECTOR_COUNT",e[e.GET_SECTOR_SIZE=2]="GET_SECTOR_SIZE",e[e.GET_BLOCK_SIZE=3]="GET_BLOCK_SIZE",e[e.CTRL_TRIM=4]="CTRL_TRIM"})(Sr||(Sr={})),function(e){e[e.FAT=1]="FAT",e[e.FAT32=2]="FAT32",e[e.EXFAT=4]="EXFAT",e[e.ANY=7]="ANY",e[e.SFD=8]="SFD"}(eo||(eo={})),function(e){e[e.OK=0]="OK",e[e.DISK_ERR=1]="DISK_ERR",e[e.INT_ERR=2]="INT_ERR",e[e.NOT_READY=3]="NOT_READY",e[e.NO_FILE=4]="NO_FILE",e[e.NO_PATH=5]="NO_PATH",e[e.INVALID_NAME=6]="INVALID_NAME",e[e.DENIED=7]="DENIED",e[e.EXIST=8]="EXIST",e[e.INVALID_OBJECT=9]="INVALID_OBJECT",e[e.WRITE_PROTECTED=10]="WRITE_PROTECTED",e[e.INVALID_DRIVE=11]="INVALID_DRIVE",e[e.NOT_ENABLED=12]="NOT_ENABLED",e[e.NO_FILESYSTEM=13]="NO_FILESYSTEM",e[e.MKFS_ABORTED=14]="MKFS_ABORTED",e[e.TIMEOUT=15]="TIMEOUT",e[e.LOCKED=16]="LOCKED",e[e.NOT_ENOUGH_CORE=17]="NOT_ENOUGH_CORE",e[e.TOO_MANY_OPEN_FILES=18]="TOO_MANY_OPEN_FILES",e[e.INVALID_PARAMETER=19]="INVALID_PARAMETER"}(Tt||(Tt={})),function(e){e[e.RDO=1]="RDO",e[e.HID=2]="HID",e[e.SYS=4]="SYS",e[e.DIR=16]="DIR",e[e.ARC=32]="ARC"}(yr||(yr={})),function(e){e[e.READ=1]="READ",e[e.WRITE=2]="WRITE",e[e.OPEN_EXISTING=0]="OPEN_EXISTING",e[e.CREATE_NEW=4]="CREATE_NEW",e[e.CREATE_ALWAYS=8]="CREATE_ALWAYS",e[e.OPEN_ALWAYS=16]="OPEN_ALWAYS",e[e.OPEN_APPEND=48]="OPEN_APPEND"}(Ir||(Ir={}));const Jt=24,ZS=new URL(new URL("/assets/ff_multi-DauRTzqn-DauRTzqn.wasm",import.meta.url).href,import.meta.url),JS=new URL(new URL("/assets/ff_single-BRr2adYw-BRr2adYw.wasm",import.meta.url).href,import.meta.url);function re(e,t,r){const i=t();if(i!==Tt.OK)throw r?.(),new Tc(e,i)}class t2{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get ptr(){return this.#e}get cSize(){return this.#t.view.getUint16(this.#e+10,!0)}}class e9{#e;#t;constructor(t,r){this.#e=t,this.#t=r}get heap(){return new Uint8Array(this.#e.buffer)}get view(){return new DataView(this.#e.buffer)}allocString(t){if(t==null)return 0;const r=new TextEncoder().encode(t),i=this.alloc(r.length+1),s=this.heap.subarray(i,i+r.length+1);return s.set(r),s[s.length-1]=0,i}alloc(t){return this.#t.malloc(t)}free(t){this.#t.free(t)}decodeString(t,r){const i=this.heap.subarray(t,t+r),s=i.indexOf(0),a=s>=0?i.subarray(0,s):i;return new TextDecoder().decode(a)}enterScope(t){const r=[],i={alloc:s=>{const a=this.alloc(s);return r.unshift(a),a},allocString:s=>{const a=this.allocString(s);return r.unshift(a),a}};try{return t(i)}finally{for(const s of r)this.free(s)}}}class vi{size;date;attrib;name;constructor(t,r,i,s){this.size=t,this.date=r,this.attrib=i,this.name=s}static fromFilInfo(t){const r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=r.getUint32(0,!0),s=r.getUint16(4,!0),a=1980+((65024&s)>>9),u=((480&s)>>5)-1,n=31&s,o=r.getUint16(6,!0),d=new Date(a,u,n,(63488&o)>>11,(2016&o)>>5,2*(31&o)),m=t[8],p=t.subarray(9,22),v=p.indexOf(0),C=v>=0?p.subarray(0,v):p,w=new TextDecoder().decode(C);return new vi(i,d,m,w)}get isReadOnly(){return!!(this.attrib&yr.RDO)}get isDirectory(){return!!(this.attrib&yr.DIR)}get isHidden(){return!!(this.attrib&yr.HID)}get isArchive(){return!!(this.attrib&yr.ARC)}get isSystem(){return!!(this.attrib&yr.SYS)}}class Tc extends Error{result;constructor(t,r){super(`Error ${t}: ${Tt[r]} (${r})`),Object.setPrototypeOf(this,Tc.prototype),this.result=r}}class t9{#e;#t;#r;constructor(t,r,i){this.#e=t,this.#t=r,this.#r=i}get fp(){return this.#e}read(t,r){const i=this.#t.f_read,s=this.#e,a=r??t.length;return this.#r.enterScope(u=>{const n=u.alloc(a),o=u.alloc(4);re("reading file",()=>i(s,n,a,o));const d=this.#r.view.getUint32(o,!0);return t.set(this.#r.heap.subarray(n,n+d)),d})}write(t,r){return this.#r.enterScope(i=>{const s=r??t.length,a=i.alloc(s),u=i.alloc(4);return this.#r.heap.subarray(a,a+s).set(t),re("writing file",()=>this.#t.f_write(this.#e,a,s,u)),this.#r.view.getUint32(u,!0)})}close(){try{re("closing file",()=>this.#t.f_close(this.#e))}finally{this.#t.free(this.#e)}}sync(){re("syncing disk",()=>this.#t.f_sync(this.#e))}lseek(t){re("seeking",()=>this.#t.f_lseek(this.#e,t))}rewind(){this.lseek(0)}truncate(){re("truncating file",()=>this.#t.f_truncate(this.#e))}expand(t,r){re("expanding file",()=>this.#t.f_expand(this.#e,t,r))}gets(t){return this.#r.enterScope(r=>{const i=r.alloc(t+1);return re("reading string from file",()=>this.#t.f_gets(i,t,this.#e)),this.#r.decodeString(i,t+1)})}putc(t){const r=t%256;return this.#t.f_putc(r,this.#e)}puts(t){const r=this.#t.f_puts;return this.#r.enterScope(i=>{const s=i.allocString(t);return r(s,this.#e)})}tell(){return this.#t.f_tell(this.#e)}eof(t){return this.#t.f_eof(this.#e)}size(){return this.#t.f_size(this.#e)}error(t){return this.#t.f_error(this.#e)}}class r2{#e;#t;#r;constructor(t,r,i){this.#e=t,this.#t=r,this.#r=i}get dp(){return this.#e}close(){re("closing directory",()=>this.#t.f_closedir(this.#e)),this.#r.free(this.#e)}read(){return this.#r.enterScope(t=>{const r=t.alloc(Jt);re("reading directory",()=>this.#t.f_readdir(this.#e,r));const i=this.#r.heap.subarray(r,r+Jt);return vi.fromFilInfo(i)})}rewind(){re("rewinding directory",()=>this.#t.f_readdir(this.#e,0))}findNext(){return this.#r.enterScope(t=>{const r=t.alloc(Jt);re("searching directory for next match",()=>this.#t.f_findnext(this.#e,r));const i=this.#r.heap.subarray(r,r+Jt);return vi.fromFilInfo(i)})}*[Symbol.iterator](){let t;for(this.rewind();(t=this.read()).name!=="";)yield t}}const r9={multiPartition:!1,sectorSize:512};class yo{#e;#t;static async create(t,r){const i=new WebAssembly.Memory({initial:8}),s={...r9,...r??{}},a=function(d,m,p){const v=0|(p??512),C=m.byteLength/v|0;return{env:{memory:d,disk_initialize:w=>Tt.OK,disk_status:w=>Tt.OK,disk_read:(w,y,f,c)=>{const l=m.subarray(f*v,(f+c)*v);return new Uint8Array(d.buffer).set(l,y),Tt.OK},disk_write:(w,y,f,c)=>{const l=new Uint8Array(d.buffer).subarray(y,y+c*v);return m.set(l,f*v),Tt.OK},disk_ioctl:(w,y,f)=>{const c=new DataView(d.buffer);switch(y){case Sr.CTRL_SYNC:break;case Sr.GET_SECTOR_SIZE:c.setUint16(f,v,!0);break;case Sr.GET_SECTOR_COUNT:c.setUint32(f,C,!0);break;case Sr.GET_BLOCK_SIZE:return 1;case Sr.CTRL_TRIM:}return Tt.OK},get_fattime:()=>{const w=new Date;return(w.getFullYear()-1980)%128<<25|w.getMonth()+1<<21|w.getDay()<<16|w.getHours()<<11|w.getMinutes()<<5|w.getSeconds()>>1}}}}(i,t,s.sectorSize),u=await async function(d,m){const p=m?.multiPartition?ZS:JS;if(typeof window<"u")return await WebAssembly.instantiateStreaming(fetch(p),d);{const{readFile:v}=await e2(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),{fileURLToPath:C}=await e2(async()=>{const{fileURLToPath:y}=await import("./__vite-browser-external-BIHI7g3E.js");return{fileURLToPath:y}},[]),w=await v(C(p));return await WebAssembly.instantiate(w,d)}}(a,s),n=u.instance.exports,o=new e9(i,n);return s.multiPartition?new i9(o,n):new yo(o,n)}constructor(t,r){this.#e=t,this.#t=r}mkfs(t){this.#e.enterScope(r=>{const i=r.allocString(t?.path??"");let s=0;if(t!=null){s=r.alloc(16);const u=this.#e.view;u.setUint8(s,t?.fmt??0),u.setUint8(s+1,t?.nFat??0),u.setUint32(s+2,t?.align??0,!0),u.setUint32(s+6,t?.nRoot??0,!0),u.setUint32(s+10,t?.auSize??0,!0)}const a=r.alloc(4096);re("formatting disk",()=>this.#t.f_mkfs(i,s,a,4096))})}mount(t,r){const i=s=>this.#e.alloc(s);return this.#e.enterScope(s=>{const a=i(560);for(let n=0;n<560;n++)this.#e.heap[a+n]=0;const u=s.allocString(t??"");return re("mounting workspace",()=>this.#t.f_mount(a,u,r??0),()=>this.#e.free(a)),new t2(a,this.#e)})}unmount(t){return this.#e.enterScope(r=>{try{const i=r.allocString(t??"");re("unmounting workspace",()=>this.#t.f_mount(0,i,0))}finally{}})}open(t,r){return this.#e.enterScope(i=>{const s=i.allocString(t),a=this.#e.alloc(576);return re("opening file",()=>this.#t.f_open(a,s,r),()=>this.#e.free(a)),new t9(a,this.#t,this.#e)})}session(t,r=""){this.mount(r);try{return t()}finally{this.unmount(r)}}readFile(t){const r=this.stat(t),i=new Uint8Array(r.size),s=this.open(t,Ir.READ);try{return s.read(i),i}finally{s.close()}}writeFile(t,r){const i=this.open(t,Ir.WRITE|Ir.OPEN_ALWAYS);try{i.write(r)}finally{i.close()}}openDir(t){return this.#e.enterScope(r=>{const i=r.allocString(t),s=this.#e.alloc(64);return re("opening directory",()=>this.#t.f_opendir(s,i),()=>this.#e.free(s)),new r2(s,this.#t,this.#e)})}findFirst(t,r){return this.#e.enterScope(i=>{const s=i.allocString(t),a=i.allocString(r),u=i.alloc(Jt),n=this.#e.alloc(64);re("searching directory",()=>this.#t.f_findfirst(n,u,s,a));const o=this.#e.heap.subarray(u,u+Jt);return[new r2(n,this.#t,this.#e),vi.fromFilInfo(o)]})}*find(t,r){let i,s;for([i,s]=this.findFirst(t,r);s.name!=="";)yield s,s=i.findNext()}stat(t){return this.#e.enterScope(r=>{const i=r.allocString(t),s=r.alloc(Jt);re("getting file information",()=>this.#t.f_stat(i,s));const a=this.#e.heap.subarray(s,s+Jt);return vi.fromFilInfo(a)})}unlink(t){this.#e.enterScope(r=>{const i=r.allocString(t);re("deleting file or directory",()=>this.#t.f_unlink(i))})}rename(t,r){this.#e.enterScope(i=>{const s=i.allocString(t),a=i.allocString(r);re("renaming file or directory",()=>this.#t.f_rename(s,a))})}chmod(t,r,i){this.#e.enterScope(s=>{const a=s.allocString(t);re("changing file or directory permissions",()=>this.#t.f_chmod(a,r,i))})}utime(t,r){this.#e.enterScope(i=>{const s=i.allocString(t),a=i.alloc(24),u=(r.getFullYear()-1980&127)<<9|r.getMonth()+1<<5|r.getDay();this.#e.view.setUint16(a+4,u,!0);const n=r.getHours()<<11|r.getMinutes()<<5|r.getSeconds()>>>1;this.#e.view.setUint16(a+6,n,!0),re("changing timestamp of file or directory",()=>this.#t.f_utime(s,a))})}mkdir(t){this.#t.f_mkdir,this.#e.enterScope(r=>{const i=r.allocString(t);re("creating directory",()=>this.#t.f_mkdir(i))})}chdir(t){this.#e.enterScope(r=>{const i=r.allocString(t);re("changing current directory",()=>this.#t.f_chdir(i))})}chdrive(t){this.#e.enterScope(r=>{const i=r.allocString(t);re("changing current drive",()=>this.#t.f_chdrive(i))})}getcwd(){return this.#e.enterScope(t=>{const r=t.alloc(260);return re("getting current directory",()=>this.#t.f_getcwd(r,260)),this.#e.decodeString(r,260)})}getFree(t){return this.#e.enterScope(r=>{const i=r.allocString(t??""),s=r.alloc(4),a=r.alloc(4);return re("getting free space on drive",()=>this.#t.f_getfree(i,s,a)),[this.#e.view.getUint32(s,!0),new t2(a,this.#e)]})}getLabel(t){return this.#e.enterScope(r=>{const i=r.allocString(t??""),s=r.alloc(13);this.#e.heap[s+12]=0;const a=r.alloc(4);return re("getting volume label",()=>this.#t.f_getlabel(i,s,a)),[this.#e.decodeString(s,13),this.#e.view.getUint32(a,!0)]})}setLabel(t){this.#e.enterScope(r=>{const i=r.allocString(t);re("setting volume label",()=>this.#t.f_setlabel(i))})}setCP(t){const r=this.#t.f_setcp;re("setting active code page",()=>r(t))}}class i9 extends yo{#e;#t;constructor(t,r){super(t,r),this.#e=t,this.#t=r}fdisk(t,r){this.#e.enterScope(i=>{const s=i.alloc(512),a=i.alloc(4*t.length);for(let u=0;u<t.length;u++)this.#e.view.setUint32(a+4*u,t[u]);re("partitioning disk",()=>this.#t.f_fdisk(r??0,a,s))})}}async function s9(e,t={}){try{return await yo.create(e,t)}catch(r){return console.warn("Failed to load fatfs-wasm with default loader:",r),console.log("Attempting to use custom WASM loader..."),await n9(e,t)}}async function n9(e,t={}){console.warn(`Using mock FAT filesystem implementation - disk size: ${e.length} bytes`);const r={};return{mkfs:i=>{console.log("Mock mkfs called with options:",i),Object.keys(r).forEach(s=>delete r[s])},mkdir:i=>{console.log("Mock mkdir called for:",i)},open:(i,s)=>(console.log(`Mock open called for: ${i} (mode: ${s})`),{write:a=>(console.log(`Mock write: ${a.length} bytes to ${i}`),r[i]=new Uint8Array(a),console.log(`Registered file ${i} in mock filesystem`),a.length),close:()=>{console.log(`Mock close called for ${i}`)}}),setLabel:i=>{console.log("Mock setLabel:",i)},getFree:i=>{console.log("Mock getFree called for:",i);const s=Object.values(r).reduce((n,o)=>n+o.length,0),a=e.length-s;return[Math.floor(a/(t.sectorSize||512)),{cSize:1}]},_debug_getFiles:()=>(console.log("Mock filesystem contents:",Object.keys(r)),r)}}class o9{config;disk;diskImage;constructor(t){this.config=t}async init(){try{console.log("Initializing FAT filesystem..."),this.diskImage=new Uint8Array(this.config.size),this.disk=await s9(this.diskImage,{sectorSize:this.config.sectorSize}),this.disk.mkfs({fmt:this.config.size>32*1024*1024?eo.FAT32:eo.FAT,auSize:4096}),this.config.label&&this.disk.setLabel(this.config.label),console.log("FAT filesystem initialized successfully")}catch(t){throw new Error(`Failed to initialize FAT filesystem: ${t instanceof Error?t.message:String(t)}`)}}async addFiles(t){if(!this.disk)throw new Error("Filesystem not initialized");try{for(const r of t){const i=r.directory?`${r.directory}/${r.name}`:r.name;if(console.log(`Adding file: ${i} (${r.content.length} bytes)`),r.directory)try{this.disk.mkdir(r.directory)}catch{}const s=this.disk.open(i,Ir.WRITE|Ir.CREATE_ALWAYS);s&&s.write&&(s.write(r.content),s.close())}}catch(r){throw new Error(`Failed to add files: ${r instanceof Error?r.message:String(r)}`)}}async generate(t){if(await this.init(),await this.addFiles(t),!this.disk)throw new Error("Filesystem not initialized");if(console.log("Generating FAT filesystem image..."),!this.diskImage)throw new Error("Filesystem image not available");return new Uint8Array(this.diskImage)}async getStats(){if(!this.disk)throw new Error("Filesystem not initialized");try{const[t,r]=this.disk.getFree("/"),i=r.cSize*this.config.sectorSize,s=Math.floor(this.config.size/i);return{totalSize:this.config.size,freeBytes:t*i,usedBytes:this.config.size-t*i,totalClusters:s,freeClusters:t}}catch{return{totalSize:this.config.size,freeBytes:0,usedBytes:this.config.size,totalClusters:0,freeClusters:0}}}}async function a9(e,t){const r=Math.min(t,1048576),i=4096,s=new o9({size:r,sectorSize:i,label:"R2P2FS"}),a=[{name:"app.rb",content:e,directory:"home"}];console.log(`Creating R2P2 filesystem: ${Math.round(r/1024)}KB`),console.log(`App Ruby source: ${e.length} bytes`);const u=await s.generate(a);return console.log(`Generated filesystem image: ${u.length} bytes`),u}function l9(e,t){if(e.length>=t)return e;const r=new Uint8Array(t);r.set(e,0);for(let i=e.length;i<t;i++)r[i]=255;return r}class c9{mcu;running=!1;usbCDC;config;flashLayout;warningCount=0;lastWarningTime=0;constructor(t={}){this.config=t,this.mcu=new xS,this.mcu.loadBootrom(US),Zd(this.mcu),this.setupUSBCDC(),t.logLevel!==void 0&&(this.mcu.logger=new BS(t.logLevel))}setupUSBCDC(){this.usbCDC=new FS(this.mcu.usbCtrl),this.usbCDC.onSerialData=t=>{const r=new TextDecoder().decode(t);this.config.onConsoleOutput&&this.config.onConsoleOutput(r)}}async loadFirmware(t){try{console.log("Loading R2P2 firmware..."),VS(t,this.mcu),this.flashLayout=qS(t),GS(this.flashLayout),console.log("R2P2 firmware loaded successfully")}catch(r){const i=r instanceof Error?r:new Error(String(r));throw console.error("Failed to load firmware:",i.message),this.config.onError&&this.config.onError(i),i}}async flashFilesystem(t){if(!this.flashLayout)throw new Error("Firmware not loaded. Load firmware first.");try{console.log("Creating FAT filesystem with app.rb...");const r=await a9(t,this.flashLayout.availableSize),i=l9(r,this.flashLayout.availableSize),s=this.flashLayout.availableStart-268435456;if(console.log(`Flashing filesystem at offset 0x${this.flashLayout.availableStart.toString(16)} (${Math.round(i.length/1024)}KB)`),s+i.length>this.mcu.flash.length)throw new Error(`Filesystem too large: ${i.length} bytes, available: ${this.mcu.flash.length-s}`);this.mcu.flash.set(i,s),console.log("Filesystem flashed successfully")}catch(r){const i=r instanceof Error?r:new Error(String(r));throw console.error("Failed to flash filesystem:",i.message),this.config.onError&&this.config.onError(i),i}}injectBytecode(t,r=268697600){console.warn("injectBytecode() is deprecated. Use flashFilesystem() instead.");try{if(console.log(`Injecting bytecode at offset 0x${r.toString(16)}, size: ${t.length} bytes`),r+t.length>this.mcu.flash.length)throw new Error(`Bytecode too large: ${t.length} bytes, available: ${this.mcu.flash.length-r}`);this.mcu.flash.set(t,r),console.log("Bytecode injection completed")}catch(i){const s=i instanceof Error?i:new Error(String(i));throw console.error("Failed to inject bytecode:",s.message),this.config.onError&&this.config.onError(s),s}}start(){if(this.running){console.warn("Simulator is already running");return}console.log("Starting PicoRuby simulation..."),this.running=!0,this.warningCount=0,this.lastWarningTime=0,this.mcu.core.PC=268435456,this.executeLoop()}stop(){console.log("Stopping simulation..."),this.running=!1}reset(){console.log("Resetting MCU..."),this.stop(),this.warningCount=0,this.lastWarningTime=0,this.mcu.reset(),Zd(this.mcu)}sendSerialData(t){if(this.usbCDC)try{const r=new TextEncoder().encode(t);for(const i of r)this.usbCDC.sendSerialByte(i);console.log("Serial data sent:",t)}catch(r){console.warn("Failed to send serial data:",r),console.log("Serial data to send:",t)}}getState(){return{pc:this.mcu.core.PC,sp:this.mcu.core.SP,running:this.running,registers:Array.from(this.mcu.core.registers),flashLayout:this.flashLayout}}getFlashLayout(){return this.flashLayout}async executeLoop(){try{for(;this.running;){for(let t=0;t<1e3&&this.running;t++)try{this.mcu.step()}catch(r){if(r instanceof Error)if(r.message.includes("BKPT")||r.message.includes("breakpoint")){console.log("Breakpoint hit, pausing execution"),this.stop();break}else{if(r.message.includes("illegal")||r.message.includes("undefined"))throw new Error(`Illegal instruction: ${r.message}`);r.message.includes("not implemented")?this.handleUnimplementedInstruction(r.message):console.warn("Instruction warning:",r.message)}}await new Promise(t=>setTimeout(t,0))}}catch(t){const r=t instanceof Error?t:new Error(String(t));console.error("Simulation error:",r.message),this.running=!1,this.config.onError&&this.config.onError(r)}}handleUnimplementedInstruction(t){const r=Date.now();if(r-this.lastWarningTime>1e3&&(this.warningCount=0),this.lastWarningTime=r,this.warningCount++,this.warningCount>50){console.warn("Too many unimplemented instruction warnings - likely executing uninitialized flash"),console.warn("Stopping execution to prevent infinite warning loop"),console.warn(`PC: 0x${this.mcu.core.PC.toString(16)}, Last warning: ${t}`),this.stop(),this.config.onError&&this.config.onError(new Error("Execution stopped: Too many unimplemented instruction warnings (likely executing uninitialized flash)"));return}(this.warningCount<=5||this.warningCount%10===0)&&console.warn(`[${this.warningCount}] ${t}`)}}class h9{config;initialized=!1;mode;constructor(t={}){this.config=t,this.mode="r2p2-compatible"}async init(){try{this.config.onOutput?.("Initializing R2P2 compatible executor..."),this.initialized=!0,this.config.onOutput?.(`R2P2 executor ready! Mode: ${this.mode}`)}catch(t){const r=`Failed to initialize R2P2 executor: ${t instanceof Error?t.message:String(t)}`;throw this.config.onError?.(r),new Error(r)}}async executeRuby(t,r="app.rb"){try{return this.config.onOutput?.(`Generating R2P2 compatible files for ${r}...`),await this.generateR2P2Compatible(t,r)}catch(i){const s=`Execution failed: ${i instanceof Error?i.message:String(i)}`;return this.config.onError?.(s),{success:!1,error:s}}}async generateR2P2Compatible(t,r){try{this.config.onOutput?.("Generating R2P2 compatible Ruby source file...");const i=new TextEncoder().encode(t);return this.config.onOutput?.(`Generated /home/app.rb (${i.length} bytes)`),{success:!0,bytecode:i,output:"",warnings:["R2P2 compatible mode - Ruby source ready for filesystem",`Source file size: ${i.length} bytes`,"Ready for flashing to simulated R2P2 filesystem as /home/app.rb"]}}catch(i){throw new Error(`R2P2 generation failed: ${i instanceof Error?i.message:String(i)}`)}}isReady(){return this.initialized}getVersion(){return"PicoRuby R2P2 Compatible"}setMode(t){this.mode="r2p2-compatible",this.config.onOutput?.(`Execution mode: ${this.mode}`)}getMode(){return this.mode}}const u9=`# PicoRuby Hello World
puts "Hello, PicoRuby!"

# Simple LED blink example
# led = GPIO.new(25, GPIO::OUT)
# 5.times do |i|
#   puts "Blink #{i + 1}"
#   led.write(1)
#   sleep(0.5)
#   led.write(0)
#   sleep(0.5)
# end

puts "Program completed!"
`,f9=()=>{const[e,t]=Y.useState(u9),[r,i]=Y.useState(""),[s,a]=Y.useState(!1),[u,n]=Y.useState(!1),[o,d]=Y.useState(!1),[m,p]=Y.useState(!1),[v,C]=Y.useState(null),w=Y.useRef(null),y=Y.useRef(null),f=Y.useCallback(()=>{w.current&&w.current.stop(),w.current=new c9({onConsoleOutput:g=>{i(E=>E+g)},onError:g=>{console.error("Simulator error:",g),i(E=>E+`
ERROR: ${g.message}
`),a(!1)}})},[]),c=Y.useCallback(()=>{y.current||(y.current=new h9({onOutput:g=>{i(E=>E+`[EXECUTOR] ${g}
`)},onError:g=>{i(E=>E+`[EXECUTOR ERROR] ${g}
`)}}))},[]);er.useEffect(()=>{f(),c()},[f,c]),Y.useEffect(()=>{const g=()=>{if(w.current){const k=w.current.getState();C({pc:k.pc,sp:k.sp,running:k.running,flashLayout:k.flashLayout})}};g();const E=setInterval(g,1e3);return()=>clearInterval(E)},[o,s]);const l=async()=>{if(!w.current||!o){i(g=>g+`
ERROR: Please load R2P2 firmware first
`);return}if(!y.current){i(g=>g+`
ERROR: Executor not initialized
`);return}try{a(!0),p(!0),i(E=>E+`
=== Starting PicoRuby execution (R2P2 Compatible) ===
`),y.current.isReady()||(i(E=>E+`Initializing PicoRuby executor...
`),await y.current.init()),i(E=>E+`Executing Ruby code in R2P2 compatible mode...
`);const g=await y.current.executeRuby(e,"app.rb");if(!g.success)throw new Error(`Execution failed: ${g.error}`);if(g.warnings&&g.warnings.length>0&&g.warnings.forEach(E=>{i(k=>k+`[WARNING] ${E}
`)}),w.current&&o&&g.bytecode){const E=g.bytecode;i(k=>k+`Flashing ${E.length} bytes to R2P2 filesystem...
`),await w.current.flashFilesystem(E),i(k=>k+`Starting R2P2 simulation...
`),w.current.reset(),w.current.start(),i(k=>k+`R2P2 simulation started!
`)}else i(E=>E+`R2P2 compatible files generated. Load firmware to simulate.
`);p(!1)}catch(g){console.error("Failed to run code:",g);const E=g instanceof Error?g.message:String(g);i(k=>k+`
ERROR: ${E}
`),a(!1),p(!1)}},h=()=>{w.current&&(w.current.stop(),a(!1),i(g=>g+`
=== Execution stopped ===
`))},_=()=>{w.current&&(w.current.reset(),a(!1),i(g=>g+`
=== MCU Reset ===
`))},S=async g=>{if(!g.name.endsWith(".uf2")){i(E=>E+`
ERROR: Please select a .uf2 firmware file
`);return}try{n(!0),i(A=>A+`
Loading firmware: ${g.name}...
`);const E=await g.arrayBuffer(),k=new Uint8Array(E);w.current||f(),await w.current.loadFirmware(k),d(!0),i(A=>A+`Firmware loaded successfully!
`)}catch(E){console.error("Failed to load firmware:",E);const k=E instanceof Error?E.message:String(E);i(A=>A+`
ERROR: Failed to load firmware: ${k}
`),d(!1)}finally{n(!1)}},x=async()=>{try{n(!0),i(A=>A+`
Downloading latest R2P2 firmware v0.5.0...
`);const g=await fetch("/firmware/r2p2-latest.uf2");if(!g.ok)throw new Error(`Failed to download firmware: ${g.status}`);const E=await g.arrayBuffer(),k=new Uint8Array(E);w.current||f(),await w.current.loadFirmware(k),d(!0),i(A=>A+`Latest R2P2 firmware loaded successfully!
`)}catch(g){console.error("Failed to load latest firmware:",g);const E=g instanceof Error?g.message:String(g);i(k=>k+`
ERROR: Failed to load latest firmware: ${E}
`),d(!1)}finally{n(!1)}},R=g=>{w.current&&w.current.sendSerialData(g)};return G.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",padding:"16px",background:"#ffffff",fontFamily:"Arial, sans-serif"},children:[G.jsx(Dm,{onRun:l,onStop:h,onReset:_,onLoadFirmware:S,onLoadLatestFirmware:x,isRunning:s,isLoading:u||m,firmwareLoaded:o,debugState:v}),G.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",minHeight:0},children:[G.jsx("div",{style:{display:"flex",flexDirection:"column"},children:G.jsx(km,{value:e,onChange:t,height:"100%"})}),G.jsx("div",{style:{display:"flex",flexDirection:"column"},children:G.jsx(Pm,{output:r,onInput:R,height:"100%"})})]}),G.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"4px",fontSize:"12px",color:"#6c757d",textAlign:"center"},children:["Try PicoRuby v1.0 | Mode:  R2P2 Compatible | Status: ",o?" Firmware Loaded":" Load firmware for R2P2"," |",s?" Running":" Stopped"]})]})};Fa.createRoot(document.getElementById("root")).render(G.jsx(er.StrictMode,{children:G.jsx(f9,{})}));
