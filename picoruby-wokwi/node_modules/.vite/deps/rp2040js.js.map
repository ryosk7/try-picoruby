{
  "version": 3,
  "sources": ["../../rp2040js/dist/esm/irq.js", "../../rp2040js/dist/esm/clock/simulation-clock.js", "../../rp2040js/dist/esm/utils/fifo.js", "../../rp2040js/dist/esm/peripherals/peripheral.js", "../../rp2040js/dist/esm/peripherals/dma.js", "../../rp2040js/dist/esm/peripherals/pio.js", "../../rp2040js/dist/esm/gpio-pin.js", "../../rp2040js/dist/esm/peripherals/adc.js", "../../rp2040js/dist/esm/peripherals/busctrl.js", "../../rp2040js/dist/esm/peripherals/clocks.js", "../../rp2040js/dist/esm/peripherals/i2c.js", "../../rp2040js/dist/esm/peripherals/io.js", "../../rp2040js/dist/esm/peripherals/pads.js", "../../rp2040js/dist/esm/utils/timer32.js", "../../rp2040js/dist/esm/peripherals/ppb.js", "../../rp2040js/dist/esm/peripherals/pwm.js", "../../rp2040js/dist/esm/peripherals/reset.js", "../../rp2040js/dist/esm/peripherals/rtc.js", "../../rp2040js/dist/esm/peripherals/spi.js", "../../rp2040js/dist/esm/peripherals/ssi.js", "../../rp2040js/dist/esm/peripherals/syscfg.js", "../../rp2040js/dist/esm/peripherals/sysinfo.js", "../../rp2040js/dist/esm/peripherals/tbman.js", "../../rp2040js/dist/esm/peripherals/timer.js", "../../rp2040js/dist/esm/peripherals/uart.js", "../../rp2040js/dist/esm/peripherals/usb.js", "../../rp2040js/dist/esm/peripherals/watchdog.js", "../../rp2040js/dist/esm/utils/bit.js", "../../rp2040js/dist/esm/interpolator.js", "../../rp2040js/dist/esm/sio.js", "../../rp2040js/dist/esm/utils/time.js", "../../rp2040js/dist/esm/utils/logging.js", "../../rp2040js/dist/esm/rp2040.js", "../../rp2040js/dist/esm/cortex-m0-core.js", "../../rp2040js/dist/esm/gdb/gdb-utils.js", "../../rp2040js/dist/esm/gdb/gdb-server.js", "../../rp2040js/dist/esm/gdb/gdb-connection.js", "../../rp2040js/dist/esm/simulator.js", "../../rp2040js/dist/esm/usb/interfaces.js", "../../rp2040js/dist/esm/usb/setup.js", "../../rp2040js/dist/esm/usb/cdc.js"],
  "sourcesContent": ["export var IRQ;\n(function (IRQ) {\n    IRQ[IRQ[\"TIMER_0\"] = 0] = \"TIMER_0\";\n    IRQ[IRQ[\"TIMER_1\"] = 1] = \"TIMER_1\";\n    IRQ[IRQ[\"TIMER_2\"] = 2] = \"TIMER_2\";\n    IRQ[IRQ[\"TIMER_3\"] = 3] = \"TIMER_3\";\n    IRQ[IRQ[\"PWM_WRAP\"] = 4] = \"PWM_WRAP\";\n    IRQ[IRQ[\"USBCTRL\"] = 5] = \"USBCTRL\";\n    IRQ[IRQ[\"XIP\"] = 6] = \"XIP\";\n    IRQ[IRQ[\"PIO0_IRQ0\"] = 7] = \"PIO0_IRQ0\";\n    IRQ[IRQ[\"PIO0_IRQ1\"] = 8] = \"PIO0_IRQ1\";\n    IRQ[IRQ[\"PIO1_IRQ0\"] = 9] = \"PIO1_IRQ0\";\n    IRQ[IRQ[\"PIO1_IRQ1\"] = 10] = \"PIO1_IRQ1\";\n    IRQ[IRQ[\"DMA_IRQ0\"] = 11] = \"DMA_IRQ0\";\n    IRQ[IRQ[\"DMA_IRQ1\"] = 12] = \"DMA_IRQ1\";\n    IRQ[IRQ[\"IO_BANK0\"] = 13] = \"IO_BANK0\";\n    IRQ[IRQ[\"IO_QSPI\"] = 14] = \"IO_QSPI\";\n    IRQ[IRQ[\"SIO_PROC0\"] = 15] = \"SIO_PROC0\";\n    IRQ[IRQ[\"SIO_PROC1\"] = 16] = \"SIO_PROC1\";\n    IRQ[IRQ[\"CLOCKS\"] = 17] = \"CLOCKS\";\n    IRQ[IRQ[\"SPI0\"] = 18] = \"SPI0\";\n    IRQ[IRQ[\"SPI1\"] = 19] = \"SPI1\";\n    IRQ[IRQ[\"UART0\"] = 20] = \"UART0\";\n    IRQ[IRQ[\"UART1\"] = 21] = \"UART1\";\n    IRQ[IRQ[\"ADC_FIFO\"] = 22] = \"ADC_FIFO\";\n    IRQ[IRQ[\"I2C0\"] = 23] = \"I2C0\";\n    IRQ[IRQ[\"I2C1\"] = 24] = \"I2C1\";\n    IRQ[IRQ[\"RTC\"] = 25] = \"RTC\";\n})(IRQ || (IRQ = {}));\nexport const MAX_HARDWARE_IRQ = IRQ.RTC;\n", "export class ClockAlarm {\n    constructor(clock, callback) {\n        this.clock = clock;\n        this.callback = callback;\n        this.next = null;\n        this.nanos = 0;\n        this.scheduled = false;\n    }\n    schedule(deltaNanos) {\n        if (this.scheduled) {\n            this.cancel();\n        }\n        this.clock.linkAlarm(deltaNanos, this);\n    }\n    cancel() {\n        this.clock.unlinkAlarm(this);\n        this.scheduled = false;\n    }\n}\nexport class SimulationClock {\n    constructor(frequency = 125e6) {\n        this.frequency = frequency;\n        this.nextAlarm = null;\n        this.nanosCounter = 0;\n    }\n    get nanos() {\n        return this.nanosCounter;\n    }\n    get micros() {\n        return this.nanos / 1000;\n    }\n    createAlarm(callback) {\n        return new ClockAlarm(this, callback);\n    }\n    linkAlarm(nanos, alarm) {\n        alarm.nanos = this.nanos + nanos;\n        let alarmListItem = this.nextAlarm;\n        let lastItem = null;\n        while (alarmListItem && alarmListItem.nanos < alarm.nanos) {\n            lastItem = alarmListItem;\n            alarmListItem = alarmListItem.next;\n        }\n        if (lastItem) {\n            lastItem.next = alarm;\n            alarm.next = alarmListItem;\n        }\n        else {\n            this.nextAlarm = alarm;\n            alarm.next = alarmListItem;\n        }\n        alarm.scheduled = true;\n        return alarm;\n    }\n    unlinkAlarm(alarm) {\n        let alarmListItem = this.nextAlarm;\n        if (!alarmListItem) {\n            return false;\n        }\n        let lastItem = null;\n        while (alarmListItem) {\n            if (alarmListItem === alarm) {\n                if (lastItem) {\n                    lastItem.next = alarmListItem.next;\n                }\n                else {\n                    this.nextAlarm = alarmListItem.next;\n                }\n                return true;\n            }\n            lastItem = alarmListItem;\n            alarmListItem = alarmListItem.next;\n        }\n        return false;\n    }\n    tick(deltaNanos) {\n        const targetNanos = this.nanosCounter + deltaNanos;\n        let alarm = this.nextAlarm;\n        while (alarm && alarm.nanos <= targetNanos) {\n            this.nextAlarm = alarm.next;\n            this.nanosCounter = alarm.nanos;\n            alarm.callback();\n            alarm = this.nextAlarm;\n        }\n        this.nanosCounter = targetNanos;\n    }\n    get nanosToNextAlarm() {\n        if (this.nextAlarm) {\n            return this.nextAlarm.nanos - this.nanos;\n        }\n        return 0;\n    }\n}\n", "export class FIFO {\n    constructor(size) {\n        this.start = 0;\n        this.used = 0;\n        this.buffer = new Uint32Array(size);\n    }\n    get size() {\n        return this.buffer.length;\n    }\n    get itemCount() {\n        return this.used;\n    }\n    push(value) {\n        const { length } = this.buffer;\n        const { start, used } = this;\n        if (this.used < length) {\n            this.buffer[(start + used) % length] = value;\n            this.used++;\n        }\n    }\n    pull() {\n        const { start, used } = this;\n        const { length } = this.buffer;\n        if (used) {\n            this.start = (start + 1) % length;\n            this.used--;\n            return this.buffer[start];\n        }\n        return 0;\n    }\n    peek() {\n        return this.used ? this.buffer[this.start] : 0;\n    }\n    reset() {\n        this.used = 0;\n    }\n    get empty() {\n        return this.used == 0;\n    }\n    get full() {\n        return this.used === this.buffer.length;\n    }\n    get items() {\n        const { start, used, buffer } = this;\n        const { length } = buffer;\n        const result = [];\n        for (let i = 0; i < used; i++) {\n            result[i] = buffer[(start + i) % length];\n        }\n        return result;\n    }\n}\n", "const ATOMIC_NORMAL = 0;\nconst ATOMIC_XOR = 1;\nconst ATOMIC_SET = 2;\nconst ATOMIC_CLEAR = 3;\nexport function atomicUpdate(currentValue, atomicType, newValue) {\n    switch (atomicType) {\n        case ATOMIC_XOR:\n            return currentValue ^ newValue;\n        case ATOMIC_SET:\n            return currentValue | newValue;\n        case ATOMIC_CLEAR:\n            return currentValue & ~newValue;\n        default:\n            console.warn('Atomic update called with invalid writeType', atomicType);\n            return newValue;\n    }\n}\nexport class BasePeripheral {\n    constructor(rp2040, name) {\n        this.rp2040 = rp2040;\n        this.name = name;\n        this.rawWriteValue = 0;\n    }\n    readUint32(offset) {\n        this.warn(`Unimplemented peripheral read from 0x${offset.toString(16)}`);\n        if (offset > 0x1000) {\n            this.warn('Unimplemented read from peripheral in the atomic operation region');\n        }\n        return 0xffffffff;\n    }\n    writeUint32(offset, value) {\n        this.warn(`Unimplemented peripheral write to 0x${offset.toString(16)}: 0x${value.toString(16)}`);\n    }\n    writeUint32Atomic(offset, value, atomicType) {\n        this.rawWriteValue = value;\n        const newValue = atomicType != ATOMIC_NORMAL\n            ? atomicUpdate(this.readUint32(offset), atomicType, value)\n            : value;\n        this.writeUint32(offset, newValue);\n    }\n    debug(msg) {\n        this.rp2040.logger.debug(this.name, msg);\n    }\n    info(msg) {\n        this.rp2040.logger.info(this.name, msg);\n    }\n    warn(msg) {\n        this.rp2040.logger.warn(this.name, msg);\n    }\n    error(msg) {\n        this.rp2040.logger.error(this.name, msg);\n    }\n}\nexport class UnimplementedPeripheral extends BasePeripheral {\n}\n", "import { IRQ } from '../irq.js';\nimport { BasePeripheral } from './peripheral.js';\nexport var DREQChannel;\n(function (DREQChannel) {\n    DREQChannel[DREQChannel[\"DREQ_PIO0_TX0\"] = 0] = \"DREQ_PIO0_TX0\";\n    DREQChannel[DREQChannel[\"DREQ_PIO0_TX1\"] = 1] = \"DREQ_PIO0_TX1\";\n    DREQChannel[DREQChannel[\"DREQ_PIO0_TX2\"] = 2] = \"DREQ_PIO0_TX2\";\n    DREQChannel[DREQChannel[\"DREQ_PIO0_TX3\"] = 3] = \"DREQ_PIO0_TX3\";\n    DREQChannel[DREQChannel[\"DREQ_PIO0_RX0\"] = 4] = \"DREQ_PIO0_RX0\";\n    DREQChannel[DREQChannel[\"DREQ_PIO0_RX1\"] = 5] = \"DREQ_PIO0_RX1\";\n    DREQChannel[DREQChannel[\"DREQ_PIO0_RX2\"] = 6] = \"DREQ_PIO0_RX2\";\n    DREQChannel[DREQChannel[\"DREQ_PIO0_RX3\"] = 7] = \"DREQ_PIO0_RX3\";\n    DREQChannel[DREQChannel[\"DREQ_PIO1_TX0\"] = 8] = \"DREQ_PIO1_TX0\";\n    DREQChannel[DREQChannel[\"DREQ_PIO1_TX1\"] = 9] = \"DREQ_PIO1_TX1\";\n    DREQChannel[DREQChannel[\"DREQ_PIO1_TX2\"] = 10] = \"DREQ_PIO1_TX2\";\n    DREQChannel[DREQChannel[\"DREQ_PIO1_TX3\"] = 11] = \"DREQ_PIO1_TX3\";\n    DREQChannel[DREQChannel[\"DREQ_PIO1_RX0\"] = 12] = \"DREQ_PIO1_RX0\";\n    DREQChannel[DREQChannel[\"DREQ_PIO1_RX1\"] = 13] = \"DREQ_PIO1_RX1\";\n    DREQChannel[DREQChannel[\"DREQ_PIO1_RX2\"] = 14] = \"DREQ_PIO1_RX2\";\n    DREQChannel[DREQChannel[\"DREQ_PIO1_RX3\"] = 15] = \"DREQ_PIO1_RX3\";\n    DREQChannel[DREQChannel[\"DREQ_SPI0_TX\"] = 16] = \"DREQ_SPI0_TX\";\n    DREQChannel[DREQChannel[\"DREQ_SPI0_RX\"] = 17] = \"DREQ_SPI0_RX\";\n    DREQChannel[DREQChannel[\"DREQ_SPI1_TX\"] = 18] = \"DREQ_SPI1_TX\";\n    DREQChannel[DREQChannel[\"DREQ_SPI1_RX\"] = 19] = \"DREQ_SPI1_RX\";\n    DREQChannel[DREQChannel[\"DREQ_UART0_TX\"] = 20] = \"DREQ_UART0_TX\";\n    DREQChannel[DREQChannel[\"DREQ_UART0_RX\"] = 21] = \"DREQ_UART0_RX\";\n    DREQChannel[DREQChannel[\"DREQ_UART1_TX\"] = 22] = \"DREQ_UART1_TX\";\n    DREQChannel[DREQChannel[\"DREQ_UART1_RX\"] = 23] = \"DREQ_UART1_RX\";\n    DREQChannel[DREQChannel[\"DREQ_PWM_WRAP0\"] = 24] = \"DREQ_PWM_WRAP0\";\n    DREQChannel[DREQChannel[\"DREQ_PWM_WRAP1\"] = 25] = \"DREQ_PWM_WRAP1\";\n    DREQChannel[DREQChannel[\"DREQ_PWM_WRAP2\"] = 26] = \"DREQ_PWM_WRAP2\";\n    DREQChannel[DREQChannel[\"DREQ_PWM_WRAP3\"] = 27] = \"DREQ_PWM_WRAP3\";\n    DREQChannel[DREQChannel[\"DREQ_PWM_WRAP4\"] = 28] = \"DREQ_PWM_WRAP4\";\n    DREQChannel[DREQChannel[\"DREQ_PWM_WRAP5\"] = 29] = \"DREQ_PWM_WRAP5\";\n    DREQChannel[DREQChannel[\"DREQ_PWM_WRAP6\"] = 30] = \"DREQ_PWM_WRAP6\";\n    DREQChannel[DREQChannel[\"DREQ_PWM_WRAP7\"] = 31] = \"DREQ_PWM_WRAP7\";\n    DREQChannel[DREQChannel[\"DREQ_I2C0_TX\"] = 32] = \"DREQ_I2C0_TX\";\n    DREQChannel[DREQChannel[\"DREQ_I2C0_RX\"] = 33] = \"DREQ_I2C0_RX\";\n    DREQChannel[DREQChannel[\"DREQ_I2C1_TX\"] = 34] = \"DREQ_I2C1_TX\";\n    DREQChannel[DREQChannel[\"DREQ_I2C1_RX\"] = 35] = \"DREQ_I2C1_RX\";\n    DREQChannel[DREQChannel[\"DREQ_ADC\"] = 36] = \"DREQ_ADC\";\n    DREQChannel[DREQChannel[\"DREQ_XIP_STREAM\"] = 37] = \"DREQ_XIP_STREAM\";\n    DREQChannel[DREQChannel[\"DREQ_XIP_SSITX\"] = 38] = \"DREQ_XIP_SSITX\";\n    DREQChannel[DREQChannel[\"DREQ_XIP_SSIRX\"] = 39] = \"DREQ_XIP_SSIRX\";\n    DREQChannel[DREQChannel[\"DREQ_MAX\"] = 40] = \"DREQ_MAX\";\n})(DREQChannel || (DREQChannel = {}));\nvar TREQ;\n(function (TREQ) {\n    TREQ[TREQ[\"Timer0\"] = 59] = \"Timer0\";\n    TREQ[TREQ[\"Timer1\"] = 60] = \"Timer1\";\n    TREQ[TREQ[\"Timer2\"] = 61] = \"Timer2\";\n    TREQ[TREQ[\"Timer3\"] = 62] = \"Timer3\";\n    TREQ[TREQ[\"Permanent\"] = 63] = \"Permanent\";\n})(TREQ || (TREQ = {}));\n// Per-channel registers\nconst CHn_READ_ADDR = 0x000; // DMA Channel n Read Address pointer\nconst CHn_WRITE_ADDR = 0x004; // DMA Channel n Write Address pointer\nconst CHn_TRANS_COUNT = 0x008; // DMA Channel n Transfer Count\nconst CHn_CTRL_TRIG = 0x00c; // DMA Channel n Control and Status\nconst CHn_AL1_CTRL = 0x010; // Alias for channel n CTRL register\nconst CHn_AL1_READ_ADDR = 0x014; // Alias for channel n READ_ADDR register\nconst CHn_AL1_WRITE_ADDR = 0x018; // Alias for channel n WRITE_ADDR register\nconst CHn_AL1_TRANS_COUNT_TRIG = 0x01c; // Alias for channel n TRANS_COUNT register\nconst CHn_AL2_CTRL = 0x020; // Alias for channel n CTRL register\nconst CHn_AL2_TRANS_COUNT = 0x024; // Alias for channel n TRANS_COUNT register\nconst CHn_AL2_READ_ADDR = 0x028; // Alias for channel n READ_ADDR register\nconst CHn_AL2_WRITE_ADDR_TRIG = 0x02c; // Alias for channel n WRITE_ADDR register\nconst CHn_AL3_CTRL = 0x030; // Alias for channel n CTRL register\nconst CHn_AL3_WRITE_ADDR = 0x034; // Alias for channel n WRITE_ADDR register\nconst CHn_AL3_TRANS_COUNT = 0x038; // Alias for channel n TRANS_COUNT register\nconst CHn_AL3_READ_ADDR_TRIG = 0x03c; // Alias for channel n READ_ADDR register\nconst CHn_DBG_CTDREQ = 0x800;\nconst CHn_DBG_TCR = 0x804;\nconst CHANNEL_REGISTERS_SIZE = 12 * 0x40;\nconst CHANNEL_REGISTERS_MASK = 0x83f;\n// General DMA registers\nconst INTR = 0x400; // Interrupt Status (raw)\nconst INTE0 = 0x404; // Interrupt Enables for IRQ 0\nconst INTF0 = 0x408; // Force Interrupts\nconst INTS0 = 0x40c; // Interrupt Status for IRQ 0\nconst INTE1 = 0x414; // Interrupt Enables for IRQ 1\nconst INTF1 = 0x418; // Force Interrupts for IRQ 1\nconst INTS1 = 0x41c; // Interrupt Status (masked) for IRQ 1\nconst TIMER0 = 0x420; // Pacing (X/Y) Fractional Timer\nconst TIMER1 = 0x424; // Pacing (X/Y) Fractional Timer\nconst TIMER2 = 0x428; // Pacing (X/Y) Fractional Timer\nconst TIMER3 = 0x42c; // Pacing (X/Y) Fractional Timer\nconst MULTI_CHAN_TRIGGER = 0x430; // Trigger one or more channels simultaneously\nconst SNIFF_CTRL = 0x434; // Sniffer Control\nconst SNIFF_DATA = 0x438; // Data accumulator for sniff hardware\nconst FIFO_LEVELS = 0x440; // Debug RAF, WAF, TDF levels\nconst CHAN_ABORT = 0x444; // Abort an in-progress transfer sequence on one or more channels\nconst N_CHANNELS = 0x448;\n// CHn_CTRL_TRIG bits\nconst AHB_ERROR = 1 << 31;\nconst READ_ERROR = 1 << 30;\nconst WRITE_ERROR = 1 << 29;\nconst BUSY = 1 << 24;\nconst SNIFF_EN = 1 << 23;\nconst BSWAP = 1 << 22;\nconst IRQ_QUIET = 1 << 21;\nconst TREQ_SEL_MASK = 0x3f;\nconst TREQ_SEL_SHIFT = 15;\nconst CHAIN_TO_MASK = 0xf;\nconst CHAIN_TO_SHIFT = 11;\nconst RING_SEL = 1 << 10;\nconst RING_SIZE_MASK = 0xf;\nconst RING_SIZE_SHIFT = 6;\nconst INCR_WRITE = 1 << 5;\nconst INCR_READ = 1 << 4;\nconst DATA_SIZE_MASK = 0x3;\nconst DATA_SIZE_SHIFT = 2;\nconst HIGH_PRIORITY = 1 << 1;\nconst EN = 1 << 0;\nconst CHn_CTRL_TRIG_WRITE_MASK = 0xffffff;\nconst CHn_CTRL_TRIG_WC_MASK = READ_ERROR | WRITE_ERROR;\nexport class RPDMAChannel {\n    constructor(dma, rp2040, index) {\n        this.dma = dma;\n        this.rp2040 = rp2040;\n        this.index = index;\n        this.ctrl = 0;\n        this.readAddr = 0;\n        this.writeAddr = 0;\n        this.transCount = 0;\n        this.dreqCounter = 0;\n        this.transCountReload = 0;\n        this.treqValue = 0;\n        this.dataSize = 1;\n        this.chainTo = 0;\n        this.ringMask = 0;\n        this.transferFn = () => 0;\n        this.transfer8 = () => {\n            const { rp2040 } = this;\n            rp2040.writeUint8(this.writeAddr, rp2040.readUint8(this.readAddr));\n        };\n        this.transfer16 = () => {\n            const { rp2040 } = this;\n            rp2040.writeUint16(this.writeAddr, rp2040.readUint16(this.readAddr));\n        };\n        this.transferSwap16 = () => {\n            const { rp2040 } = this;\n            const input = rp2040.readUint16(this.readAddr);\n            rp2040.writeUint16(this.writeAddr, ((input & 0xff) << 8) | (input >> 8));\n        };\n        this.transfer32 = () => {\n            const { rp2040 } = this;\n            rp2040.writeUint32(this.writeAddr, rp2040.readUint32(this.readAddr));\n        };\n        this.transferSwap32 = () => {\n            const { rp2040 } = this;\n            const input = rp2040.readUint32(this.readAddr);\n            rp2040.writeUint32(this.writeAddr, ((input & 0x000000ff) << 24) |\n                ((input & 0x0000ff00) << 8) |\n                ((input & 0x00ff0000) >> 8) |\n                ((input >> 24) & 0xff));\n        };\n        this.transfer = () => {\n            var _a;\n            const { ctrl, dataSize, ringMask } = this;\n            this.transferFn();\n            if (ctrl & INCR_READ) {\n                if (ringMask && !(ctrl & RING_SEL)) {\n                    this.readAddr = (this.readAddr & ~ringMask) | ((this.readAddr + dataSize) & ringMask);\n                }\n                else {\n                    this.readAddr += dataSize;\n                }\n            }\n            if (ctrl & INCR_WRITE) {\n                if (ringMask && ctrl & RING_SEL) {\n                    this.writeAddr = (this.writeAddr & ~ringMask) | ((this.writeAddr + dataSize) & ringMask);\n                }\n                else {\n                    this.writeAddr += dataSize;\n                }\n            }\n            this.transCount--;\n            if (this.transCount > 0) {\n                this.scheduleTransfer();\n            }\n            else {\n                this.ctrl &= ~BUSY;\n                if (!(this.ctrl & IRQ_QUIET)) {\n                    this.dma.intRaw |= 1 << this.index;\n                    this.dma.checkInterrupts();\n                }\n                if (this.chainTo !== this.index) {\n                    (_a = this.dma.channels[this.chainTo]) === null || _a === void 0 ? void 0 : _a.start();\n                }\n            }\n        };\n        this.transferAlarm = rp2040.clock.createAlarm(this.transfer);\n        this.reset();\n    }\n    start() {\n        if (!(this.ctrl & EN) || this.ctrl & BUSY) {\n            return;\n        }\n        this.ctrl |= BUSY;\n        this.transCount = this.transCountReload;\n        if (this.transCount) {\n            this.scheduleTransfer();\n        }\n    }\n    get treq() {\n        return this.treqValue;\n    }\n    get active() {\n        return this.ctrl & EN && this.ctrl & BUSY;\n    }\n    scheduleTransfer() {\n        if (this.dma.dreq[this.treqValue] || this.treqValue === TREQ.Permanent) {\n            this.transferAlarm.schedule(0);\n        }\n        else {\n            const delay = this.dma.getTimer(this.treqValue);\n            if (delay) {\n                this.transferAlarm.schedule(delay * 1000);\n            }\n        }\n    }\n    abort() {\n        this.ctrl &= ~BUSY;\n        this.transferAlarm.cancel();\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case CHn_READ_ADDR:\n            case CHn_AL1_READ_ADDR:\n            case CHn_AL2_READ_ADDR:\n            case CHn_AL3_READ_ADDR_TRIG:\n                return this.readAddr;\n            case CHn_WRITE_ADDR:\n            case CHn_AL1_WRITE_ADDR:\n            case CHn_AL2_WRITE_ADDR_TRIG:\n            case CHn_AL3_WRITE_ADDR:\n                return this.writeAddr;\n            case CHn_TRANS_COUNT:\n            case CHn_AL1_TRANS_COUNT_TRIG:\n            case CHn_AL2_TRANS_COUNT:\n            case CHn_AL3_TRANS_COUNT:\n                return this.transCount;\n            case CHn_CTRL_TRIG:\n            case CHn_AL1_CTRL:\n            case CHn_AL2_CTRL:\n            case CHn_AL3_CTRL:\n                return this.ctrl;\n            case CHn_DBG_CTDREQ:\n                return this.dreqCounter;\n            case CHn_DBG_TCR:\n                return this.transCountReload;\n        }\n        return 0;\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case CHn_READ_ADDR:\n            case CHn_AL1_READ_ADDR:\n            case CHn_AL2_READ_ADDR:\n            case CHn_AL3_READ_ADDR_TRIG:\n                this.readAddr = value;\n                break;\n            case CHn_WRITE_ADDR:\n            case CHn_AL1_WRITE_ADDR:\n            case CHn_AL2_WRITE_ADDR_TRIG:\n            case CHn_AL3_WRITE_ADDR:\n                this.writeAddr = value;\n                break;\n            case CHn_TRANS_COUNT:\n            case CHn_AL1_TRANS_COUNT_TRIG:\n            case CHn_AL2_TRANS_COUNT:\n            case CHn_AL3_TRANS_COUNT:\n                this.transCountReload = value;\n                break;\n            case CHn_CTRL_TRIG:\n            case CHn_AL1_CTRL:\n            case CHn_AL2_CTRL:\n            case CHn_AL3_CTRL: {\n                this.ctrl = (this.ctrl & ~CHn_CTRL_TRIG_WRITE_MASK) | (value & CHn_CTRL_TRIG_WRITE_MASK);\n                this.ctrl &= ~(value & CHn_CTRL_TRIG_WC_MASK); // Handle write-clear (WC) bits\n                this.treqValue = (this.ctrl >> TREQ_SEL_SHIFT) & TREQ_SEL_MASK;\n                this.chainTo = (this.ctrl >> CHAIN_TO_SHIFT) & CHAIN_TO_MASK;\n                const ringSize = (this.ctrl >> RING_SIZE_SHIFT) & RING_SIZE_MASK;\n                this.ringMask = ringSize ? (1 << ringSize) - 1 : 0;\n                switch ((this.ctrl >> DATA_SIZE_SHIFT) & DATA_SIZE_MASK) {\n                    case 1:\n                        this.dataSize = 2;\n                        this.transferFn = this.ctrl & BSWAP ? this.transferSwap16 : this.transfer16;\n                        break;\n                    case 2:\n                        this.dataSize = 4;\n                        this.transferFn = this.ctrl & BSWAP ? this.transferSwap32 : this.transfer32;\n                        break;\n                    case 0:\n                    default:\n                        this.transferFn = this.transfer8;\n                        this.dataSize = 1;\n                }\n                if (this.ctrl & EN && this.ctrl & BUSY) {\n                    this.scheduleTransfer();\n                }\n                if (!(this.ctrl & EN)) {\n                    this.transferAlarm.cancel();\n                }\n                break;\n            }\n            case CHn_DBG_CTDREQ:\n                this.dreqCounter = 0;\n                break;\n        }\n        if (offset === CHn_AL3_READ_ADDR_TRIG ||\n            offset === CHn_AL2_WRITE_ADDR_TRIG ||\n            offset === CHn_AL1_TRANS_COUNT_TRIG ||\n            offset === CHn_CTRL_TRIG) {\n            if (value) {\n                this.start();\n            }\n            else if (this.ctrl & IRQ_QUIET) {\n                // Null trigger interrupts\n                this.dma.intRaw |= 1 << this.index;\n                this.dma.checkInterrupts();\n            }\n        }\n    }\n    reset() {\n        this.writeUint32(CHn_CTRL_TRIG, this.index << CHAIN_TO_SHIFT);\n    }\n}\nexport class RPDMA extends BasePeripheral {\n    constructor() {\n        super(...arguments);\n        this.channels = [\n            new RPDMAChannel(this, this.rp2040, 0),\n            new RPDMAChannel(this, this.rp2040, 1),\n            new RPDMAChannel(this, this.rp2040, 2),\n            new RPDMAChannel(this, this.rp2040, 3),\n            new RPDMAChannel(this, this.rp2040, 4),\n            new RPDMAChannel(this, this.rp2040, 5),\n            new RPDMAChannel(this, this.rp2040, 6),\n            new RPDMAChannel(this, this.rp2040, 7),\n            new RPDMAChannel(this, this.rp2040, 8),\n            new RPDMAChannel(this, this.rp2040, 9),\n            new RPDMAChannel(this, this.rp2040, 10),\n            new RPDMAChannel(this, this.rp2040, 11),\n        ];\n        this.intRaw = 0;\n        this.intEnable0 = 0;\n        this.intForce0 = 0;\n        this.intEnable1 = 0;\n        this.intForce1 = 0;\n        this.timer0 = 0;\n        this.timer1 = 0;\n        this.timer2 = 0;\n        this.timer3 = 0;\n        this.dreq = Array(DREQChannel.DREQ_MAX);\n    }\n    get intStatus0() {\n        return (this.intRaw & this.intEnable0) | this.intForce0;\n    }\n    get intStatus1() {\n        return (this.intRaw & this.intEnable1) | this.intForce1;\n    }\n    readUint32(offset) {\n        if ((offset & 0x7ff) <= CHANNEL_REGISTERS_SIZE) {\n            const channelIndex = (offset & 0x7ff) >> 6;\n            return this.channels[channelIndex].readUint32(offset & CHANNEL_REGISTERS_MASK);\n        }\n        switch (offset) {\n            case TIMER0:\n                return this.timer0;\n            case TIMER1:\n                return this.timer1;\n            case TIMER2:\n                return this.timer2;\n            case TIMER3:\n                return this.timer3;\n            case INTR:\n                return this.intRaw;\n            case INTE0:\n                return this.intEnable0;\n            case INTF0:\n                return this.intForce0;\n            case INTS0:\n                return this.intStatus0;\n            case INTE1:\n                return this.intEnable1;\n            case INTF1:\n                return this.intForce1;\n            case INTS1:\n                return this.intStatus1;\n            case N_CHANNELS:\n                return this.channels.length;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        if ((offset & 0x7ff) <= CHANNEL_REGISTERS_SIZE) {\n            const channelIndex = (offset & 0x7ff) >> 6;\n            this.channels[channelIndex].writeUint32(offset & CHANNEL_REGISTERS_MASK, value);\n            return;\n        }\n        switch (offset) {\n            case TIMER0:\n                this.timer0 = value;\n                return;\n            case TIMER1:\n                this.timer1 = value;\n                return;\n            case TIMER2:\n                this.timer2 = value;\n                return;\n            case TIMER3:\n                this.timer3 = value;\n                return;\n            case INTR:\n            case INTS0:\n            case INTS1:\n                this.intRaw &= ~this.rawWriteValue;\n                this.checkInterrupts();\n                return;\n            case INTE0:\n                this.intEnable0 = value & 0xffff;\n                this.checkInterrupts();\n                return;\n            case INTF0:\n                this.intForce0 = value & 0xffff;\n                this.checkInterrupts();\n                return;\n            case INTE1:\n                this.intEnable1 = value & 0xffff;\n                this.checkInterrupts();\n                return;\n            case INTF1:\n                this.intForce1 = value & 0xffff;\n                this.checkInterrupts();\n                return;\n            case MULTI_CHAN_TRIGGER:\n                for (const chan of this.channels) {\n                    if (value & (1 << chan.index)) {\n                        chan.start();\n                    }\n                }\n                return;\n            case CHAN_ABORT:\n                for (const chan of this.channels) {\n                    if (value & (1 << chan.index)) {\n                        chan.abort();\n                    }\n                }\n                return;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n    setDREQ(dreqChannel) {\n        const { dreq } = this;\n        if (!dreq[dreqChannel]) {\n            dreq[dreqChannel] = true;\n            for (const channel of this.channels) {\n                if (channel.treq === dreqChannel && channel.active) {\n                    channel.scheduleTransfer();\n                }\n            }\n        }\n    }\n    clearDREQ(dreqChannel) {\n        this.dreq[dreqChannel] = false;\n    }\n    /**\n     * Returns the number of microseconds for a cycle of the given DMA timer, or 0 if the timer is disabled.\n     */\n    getTimer(treq) {\n        let dividend = 0, divisor = 1;\n        switch (treq) {\n            case TREQ.Permanent:\n                dividend = 1;\n                divisor = 1;\n                break;\n            case TREQ.Timer0:\n                dividend = this.timer0 >>> 16;\n                divisor = this.timer0 & 0xffff;\n                break;\n            case TREQ.Timer1:\n                dividend = this.timer1 >>> 16;\n                divisor = this.timer1 & 0xffff;\n                break;\n            case TREQ.Timer2:\n                dividend = this.timer2 >>> 16;\n                divisor = this.timer2 & 0xffff;\n                break;\n            case TREQ.Timer3:\n                dividend = this.timer3 >>> 36;\n                divisor = this.timer3 & 0xffff;\n                break;\n        }\n        if (divisor === 0) {\n            return 0;\n        }\n        return ((dividend / divisor) * 1e6) / this.rp2040.clkSys;\n    }\n    checkInterrupts() {\n        this.rp2040.setInterrupt(IRQ.DMA_IRQ0, !!this.intStatus0);\n        this.rp2040.setInterrupt(IRQ.DMA_IRQ1, !!this.intStatus1);\n    }\n}\n", "import { FIFO } from '../utils/fifo.js';\nimport { DREQChannel } from './dma.js';\nimport { BasePeripheral } from './peripheral.js';\n// Generic registers\nconst CTRL = 0x000;\nconst FSTAT = 0x004;\nconst FDEBUG = 0x008;\nconst FLEVEL = 0x00c;\nconst IRQ = 0x030;\nconst IRQ_FORCE = 0x034;\nconst INPUT_SYNC_BYPASS = 0x038;\nconst DBG_PADOUT = 0x03c;\nconst DBG_PADOE = 0x040;\nconst DBG_CFGINFO = 0x044;\nconst INSTR_MEM0 = 0x48;\nconst INSTR_MEM31 = 0x0c4;\nconst INTR = 0x128; // Raw Interrupts\nconst IRQ0_INTE = 0x12c; // Interrupt Enable for irq0\nconst IRQ0_INTF = 0x130; // Interrupt Force for irq0\nconst IRQ0_INTS = 0x134; // Interrupt status after masking & forcing for irq0\nconst IRQ1_INTE = 0x138; // Interrupt Enable for irq1\nconst IRQ1_INTF = 0x13c; // Interrupt Force for irq1\nconst IRQ1_INTS = 0x140; // Interrupt status after masking & forcing for irq1\n// State-machine specific registers\nconst TXF0 = 0x010;\nconst TXF1 = 0x014;\nconst TXF2 = 0x018;\nconst TXF3 = 0x01c;\nconst RXF0 = 0x020;\nconst RXF1 = 0x024;\nconst RXF2 = 0x028;\nconst RXF3 = 0x02c;\nconst SM0_CLKDIV = 0x0c8; // Clock divisor register for state machine 0\nconst SM0_EXECCTRL = 0x0cc; // Execution/behavioural settings for state machine 0\nconst SM0_SHIFTCTRL = 0x0d0; // Control behaviour of the input/output shift registers for state machine 0\nconst SM0_ADDR = 0x0d4; // Current instruction address of state machine 0\nconst SM0_INSTR = 0x0d8; // Write to execute an instruction immediately (including jumps) and then resume execution.\nconst SM0_PINCTRL = 0x0dc; //State machine pin control\nconst SM1_CLKDIV = 0x0e0;\nconst SM1_PINCTRL = 0x0f4;\nconst SM2_CLKDIV = 0x0f8;\nconst SM2_PINCTRL = 0x10c;\nconst SM3_CLKDIV = 0x110;\nconst SM3_PINCTRL = 0x124;\n// FSTAT bits\nconst FSTAT_TXEMPTY = 1 << 24;\nconst FSTAT_TXFULL = 1 << 16;\nconst FSTAT_RXEMPTY = 1 << 8;\nconst FSTAT_RXFULL = 1 << 0;\n// FDEBUG bits\nconst FDEBUG_TXSTALL = 1 << 24;\nconst FDEBUG_TXOVER = 1 << 16;\nconst FDEBUG_RXUNDER = 1 << 8;\nconst FDEBUG_RXSTALL = 1 << 0;\n// SHIFTCTRL bits\nconst SHIFTCTRL_AUTOPUSH = 1 << 16;\nconst SHIFTCTRL_AUTOPULL = 1 << 17;\nconst SHIFTCTRL_IN_SHIFTDIR = 1 << 18; // 1 = shift input shift register to right (data enters from left). 0 = to left\nconst SHIFTCTRL_OUT_SHIFTDIR = 1 << 19; // 1 = shift out of output shift register to right. 0 = to left\n// EXECCTRL bits\nconst EXECCTRL_STATUS_SEL = 1 << 4;\nconst EXECCTRL_SIDE_PINDIR = 1 << 29;\nconst EXECCTRL_SIDE_EN = 1 << 30;\nconst EXECCTRL_EXEC_STALLED = 1 << 31;\nexport var WaitType;\n(function (WaitType) {\n    WaitType[WaitType[\"None\"] = 0] = \"None\";\n    WaitType[WaitType[\"Pin\"] = 1] = \"Pin\";\n    WaitType[WaitType[\"rxFIFO\"] = 2] = \"rxFIFO\";\n    WaitType[WaitType[\"txFIFO\"] = 3] = \"txFIFO\";\n    WaitType[WaitType[\"IRQ\"] = 4] = \"IRQ\";\n    WaitType[WaitType[\"Out\"] = 5] = \"Out\";\n})(WaitType || (WaitType = {}));\nfunction bitReverse(x) {\n    x = ((x & 0x55555555) << 1) | ((x & 0xaaaaaaaa) >>> 1);\n    x = ((x & 0x33333333) << 2) | ((x & 0xcccccccc) >>> 2);\n    x = ((x & 0x0f0f0f0f) << 4) | ((x & 0xf0f0f0f0) >>> 4);\n    x = ((x & 0x00ff00ff) << 8) | ((x & 0xff00ff00) >>> 8);\n    x = ((x & 0x0000ffff) << 16) | ((x & 0xffff0000) >>> 16);\n    return x >>> 0;\n}\nfunction irqIndex(irq, machineIndex) {\n    const rel = !!(irq & 0x10);\n    return rel ? (irq & 0x4) | (((irq & 0x3) + machineIndex) & 0x3) : irq & 0x7;\n}\nconst dreqRx0 = [\n    DREQChannel.DREQ_PIO0_RX0,\n    DREQChannel.DREQ_PIO0_RX1,\n    DREQChannel.DREQ_PIO0_RX2,\n    DREQChannel.DREQ_PIO0_RX3,\n];\nconst dreqTx0 = [\n    DREQChannel.DREQ_PIO0_TX0,\n    DREQChannel.DREQ_PIO0_TX1,\n    DREQChannel.DREQ_PIO0_TX2,\n    DREQChannel.DREQ_PIO0_TX3,\n];\nconst dreqRx1 = [\n    DREQChannel.DREQ_PIO1_RX0,\n    DREQChannel.DREQ_PIO1_RX1,\n    DREQChannel.DREQ_PIO1_RX2,\n    DREQChannel.DREQ_PIO1_RX3,\n];\nconst dreqTx1 = [\n    DREQChannel.DREQ_PIO1_TX0,\n    DREQChannel.DREQ_PIO1_TX1,\n    DREQChannel.DREQ_PIO1_TX2,\n    DREQChannel.DREQ_PIO1_TX3,\n];\nexport class StateMachine {\n    constructor(rp2040, pio, index) {\n        this.rp2040 = rp2040;\n        this.pio = pio;\n        this.index = index;\n        this.enabled = false;\n        // State machine registers\n        this.x = 0;\n        this.y = 0;\n        this.pc = 0;\n        this.inputShiftReg = 0;\n        this.inputShiftCount = 0;\n        this.outputShiftReg = 0;\n        this.outputShiftCount = 0;\n        this.cycles = 0;\n        this.execOpcode = 0;\n        this.execValid = false;\n        this.updatePC = true;\n        this.clockDivInt = 1;\n        this.clockDivFrac = 0;\n        this.execCtrl = 0x1f << 12;\n        this.shiftCtrl = 0b11 << 18;\n        this.pinCtrl = 0x5 << 26;\n        this.rxFIFO = new FIFO(4);\n        this.txFIFO = new FIFO(4);\n        this.outPinValues = 0;\n        this.outPinDirection = 0;\n        this.waiting = false;\n        this.waitType = WaitType.None;\n        this.waitIndex = 0;\n        this.waitPolarity = false;\n        this.waitDelay = -1;\n        this.dreqRx = this.pio.dreqRx[this.index];\n        this.dreqTx = this.pio.dreqTx[this.index];\n        this.updateDMARx();\n        this.updateDMATx();\n    }\n    updateDMATx() {\n        if (this.txFIFO.full) {\n            this.rp2040.dma.clearDREQ(this.dreqTx);\n        }\n        else {\n            this.rp2040.dma.setDREQ(this.dreqTx);\n        }\n    }\n    updateDMARx() {\n        if (this.rxFIFO.empty) {\n            this.rp2040.dma.clearDREQ(this.dreqRx);\n        }\n        else {\n            this.rp2040.dma.setDREQ(this.dreqRx);\n        }\n    }\n    writeFIFO(value) {\n        if (this.txFIFO.full) {\n            this.pio.fdebug |= FDEBUG_TXOVER << this.index;\n            return;\n        }\n        this.txFIFO.push(value);\n        this.pio.txStall &= ~(FDEBUG_TXSTALL << this.index);\n        this.updateDMATx();\n        this.checkWait();\n        if (this.txFIFO.full) {\n            this.pio.checkInterrupts();\n        }\n    }\n    readFIFO() {\n        if (this.rxFIFO.empty) {\n            this.pio.fdebug |= FDEBUG_RXUNDER << this.index;\n            return 0;\n        }\n        const result = this.rxFIFO.pull();\n        this.pio.rxStall &= ~(FDEBUG_RXSTALL << this.index);\n        this.updateDMARx();\n        this.checkWait();\n        if (this.rxFIFO.empty) {\n            this.pio.checkInterrupts();\n        }\n        return result;\n    }\n    get status() {\n        const statusN = this.execCtrl & 0xf;\n        if (this.execCtrl & EXECCTRL_STATUS_SEL) {\n            return this.rxFIFO.itemCount < statusN ? 0xffffffff : 0;\n        }\n        else {\n            return this.txFIFO.itemCount < statusN ? 0xffffffff : 0;\n        }\n    }\n    jmpCondition(condition) {\n        switch (condition) {\n            // (no condition): Always\n            case 0b000:\n                return true;\n            // !X: scratch X zero\n            case 0b001:\n                return this.x === 0;\n            // X--: scratch X non-zero, post-decrement\n            case 0b010: {\n                const oldX = this.x;\n                this.x = (this.x - 1) >>> 0;\n                return oldX !== 0;\n            }\n            // !Y: scratch Y zero\n            case 0b011:\n                return this.y === 0;\n            // Y--: scratch Y non-zero, post-decrement\n            case 0b100: {\n                const oldY = this.y;\n                this.y = (this.y - 1) >>> 0;\n                return oldY !== 0;\n            }\n            // X!=Y: scratch X not equal scratch Y\n            case 0b101:\n                return this.x >>> 0 !== this.y >>> 0;\n            // PIN: branch on input pin\n            case 0b110: {\n                const { gpio } = this.rp2040;\n                const { jmpPin } = this;\n                return jmpPin < gpio.length ? gpio[jmpPin].inputValue : false;\n            }\n            // !OSRE: output shift register not empty\n            case 0b111:\n                return this.outputShiftCount < this.pullThreshold;\n        }\n        this.pio.error(`jmpCondition with unsupported condition: ${condition}`);\n        return false;\n    }\n    get inPins() {\n        const { gpioValues } = this.rp2040;\n        const { inBase } = this;\n        return inBase ? (gpioValues << (32 - inBase)) | (gpioValues >>> inBase) : gpioValues;\n    }\n    inSourceValue(source) {\n        switch (source) {\n            // PINS\n            case 0b000:\n                return this.inPins;\n            // X (scratch register X)\n            case 0b001:\n                return this.x;\n            // Y (scratch register Y)\n            case 0b010:\n                return this.y;\n            // NULL (all zeroes)\n            case 0b011:\n                return 0;\n            // Reserved\n            case 0b100:\n                return 0;\n            // Reserved for IN, STATUS for MOV\n            case 0b101:\n                return this.status;\n            // ISR\n            case 0b110:\n                return this.inputShiftReg;\n            // OSR\n            case 0b111:\n                return this.outputShiftReg;\n        }\n        this.pio.error(`inSourceValue with unsupported source: ${source}`);\n        return 0;\n    }\n    writeOutValue(destination, value, bitCount) {\n        switch (destination) {\n            // PINS\n            case 0b000:\n                this.setOutPins(value);\n                break;\n            // X (scratch register X)\n            case 0b001:\n                this.x = value;\n                break;\n            // Y (scratch register Y)\n            case 0b010:\n                this.y = value;\n                break;\n            // NULL (discard data)\n            case 0b011:\n                break;\n            // PINDIRS\n            case 0b100:\n                this.setOutPinDirs(value);\n                break;\n            // PC\n            case 0b101:\n                this.pc = value & 0x1f;\n                this.updatePC = false;\n                break;\n            // ISR (also sets ISR shift counter to Bit count)\n            case 0b110:\n                this.inputShiftReg = value;\n                this.inputShiftCount = bitCount;\n                break;\n            // EXEC (Execute OSR shift data as instruction)\n            case 0b111:\n                this.execOpcode = value;\n                this.execValid = true;\n                break;\n        }\n    }\n    get pushThreshold() {\n        const value = (this.shiftCtrl >> 20) & 0x1f;\n        return value ? value : 32;\n    }\n    get pullThreshold() {\n        const value = (this.shiftCtrl >> 25) & 0x1f;\n        return value ? value : 32;\n    }\n    get sidesetCount() {\n        return (this.pinCtrl >> 29) & 0x7;\n    }\n    get setCount() {\n        return (this.pinCtrl >> 26) & 0x7;\n    }\n    get outCount() {\n        return (this.pinCtrl >> 20) & 0x3f;\n    }\n    get inBase() {\n        return (this.pinCtrl >> 15) & 0x1f;\n    }\n    get sidesetBase() {\n        return (this.pinCtrl >> 10) & 0x1f;\n    }\n    get setBase() {\n        return (this.pinCtrl >> 5) & 0x1f;\n    }\n    get outBase() {\n        return (this.pinCtrl >> 0) & 0x1f;\n    }\n    get jmpPin() {\n        return (this.execCtrl >> 24) & 0x1f;\n    }\n    get wrapTop() {\n        return (this.execCtrl >> 12) & 0x1f;\n    }\n    get wrapBottom() {\n        return (this.execCtrl >> 7) & 0x1f;\n    }\n    setOutPinDirs(value) {\n        this.outPinDirection = value;\n        this.pio.pinDirectionsChanged(value, this.outBase, this.outCount);\n    }\n    setOutPins(value) {\n        this.outPinValues = value;\n        this.pio.pinValuesChanged(value, this.outBase, this.outCount);\n    }\n    outInstruction(arg) {\n        const bitCount = arg & 0x1f;\n        const destination = arg >> 5;\n        if (bitCount === 0) {\n            this.writeOutValue(destination, this.outputShiftReg, 32);\n            this.outputShiftCount = 32;\n        }\n        else {\n            if (this.shiftCtrl & SHIFTCTRL_OUT_SHIFTDIR) {\n                const value = this.outputShiftReg & ((1 << bitCount) - 1);\n                this.outputShiftReg >>>= bitCount;\n                this.writeOutValue(destination, value, bitCount);\n            }\n            else {\n                const value = this.outputShiftReg >>> (32 - bitCount);\n                this.outputShiftReg <<= bitCount;\n                this.writeOutValue(destination, value, bitCount);\n            }\n            this.outputShiftCount += bitCount;\n            if (this.outputShiftCount > 32) {\n                this.outputShiftCount = 32;\n            }\n        }\n    }\n    executeInstruction(opcode) {\n        const arg = opcode & 0xff;\n        switch (opcode >>> 13) {\n            /* JMP */\n            case 0b000:\n                if (this.jmpCondition(arg >> 5)) {\n                    this.pc = arg & 0x1f;\n                    this.updatePC = false;\n                }\n                break;\n            /* WAIT */\n            case 0b001: {\n                const polarity = !!(arg & 0x80);\n                const source = (arg >> 5) & 0x3;\n                const index = arg & 0x1f;\n                switch (source) {\n                    // GPIO:\n                    case 0b00:\n                        this.wait(WaitType.Pin, polarity, index);\n                        break;\n                    // PIN:\n                    case 0b01:\n                        this.wait(WaitType.Pin, polarity, (index + this.inBase) % 32);\n                        break;\n                    // IRQ:\n                    case 0b10:\n                        this.wait(WaitType.IRQ, polarity, irqIndex(index, this.index));\n                        break;\n                }\n                break;\n            }\n            /* IN */\n            case 0b010: {\n                const bitCount = arg & 0x1f;\n                let sourceValue = this.inSourceValue(arg >> 5);\n                if (bitCount == 0) {\n                    this.inputShiftReg = sourceValue;\n                    this.inputShiftCount = 32;\n                }\n                else {\n                    sourceValue &= (1 << bitCount) - 1;\n                    if (this.shiftCtrl & SHIFTCTRL_IN_SHIFTDIR) {\n                        this.inputShiftReg >>>= bitCount;\n                        this.inputShiftReg |= sourceValue << (32 - bitCount);\n                    }\n                    else {\n                        this.inputShiftReg <<= bitCount;\n                        this.inputShiftReg |= sourceValue;\n                    }\n                    this.inputShiftCount += bitCount;\n                    if (this.inputShiftCount > 32) {\n                        this.inputShiftCount = 32;\n                    }\n                }\n                if (this.shiftCtrl & SHIFTCTRL_AUTOPUSH && this.inputShiftCount >= this.pushThreshold) {\n                    if (!this.rxFIFO.full) {\n                        this.rxFIFO.push(this.inputShiftReg);\n                        this.updateDMARx();\n                        this.pio.checkInterrupts();\n                    }\n                    else {\n                        this.pio.rxStall |= FDEBUG_RXSTALL << this.index;\n                        this.pio.fdebug |= this.pio.rxStall;\n                        this.wait(WaitType.rxFIFO, false, this.inputShiftReg);\n                    }\n                    this.inputShiftCount = 0;\n                    this.inputShiftReg = 0;\n                }\n                break;\n            }\n            /* OUT */\n            case 0b011: {\n                if (this.shiftCtrl & SHIFTCTRL_AUTOPULL && this.outputShiftCount >= this.pullThreshold) {\n                    this.outputShiftCount = 0;\n                    if (!this.txFIFO.empty) {\n                        this.outputShiftReg = this.txFIFO.pull();\n                        this.updateDMATx();\n                        this.pio.checkInterrupts();\n                    }\n                    else {\n                        this.pio.txStall |= FDEBUG_TXSTALL << this.index;\n                        this.pio.fdebug |= this.pio.txStall;\n                        this.wait(WaitType.Out, false, arg);\n                    }\n                }\n                if (!this.waiting) {\n                    this.outInstruction(arg);\n                }\n                break;\n            }\n            /* PUSH/PULL */\n            case 0b100: {\n                const block = !!(arg & (1 << 5));\n                const ifFullOrEmpty = !!(arg & (1 << 6));\n                if (arg & 0x1f) {\n                    // Unknown instruction\n                    break;\n                }\n                if (arg & 0x80) {\n                    // PULL\n                    if (ifFullOrEmpty &&\n                        this.shiftCtrl & SHIFTCTRL_AUTOPULL &&\n                        this.outputShiftCount < this.pullThreshold) {\n                        break;\n                    }\n                    if (!this.txFIFO.empty) {\n                        this.outputShiftReg = this.txFIFO.pull();\n                        this.updateDMATx();\n                        this.pio.checkInterrupts();\n                    }\n                    else {\n                        this.pio.txStall |= FDEBUG_TXSTALL << this.index;\n                        this.pio.fdebug |= this.pio.txStall;\n                        if (block) {\n                            this.wait(WaitType.txFIFO, false, 0);\n                        }\n                        else {\n                            this.outputShiftReg = this.x;\n                        }\n                    }\n                    this.outputShiftCount = 0;\n                }\n                else {\n                    // PUSH\n                    if (ifFullOrEmpty &&\n                        this.shiftCtrl & SHIFTCTRL_AUTOPUSH &&\n                        this.inputShiftCount < this.pushThreshold) {\n                        break;\n                    }\n                    if (!this.rxFIFO.full) {\n                        this.rxFIFO.push(this.inputShiftReg);\n                        this.updateDMARx();\n                        this.pio.checkInterrupts();\n                    }\n                    else {\n                        this.pio.rxStall |= FDEBUG_RXSTALL << this.index;\n                        this.pio.fdebug |= this.pio.rxStall;\n                        if (block) {\n                            this.wait(WaitType.rxFIFO, false, this.inputShiftReg);\n                        }\n                    }\n                    this.inputShiftReg = 0;\n                    this.inputShiftCount = 0;\n                }\n                break;\n            }\n            /* MOV */\n            case 0b101: {\n                const source = arg & 0x7;\n                const op = (arg >> 3) & 0x3;\n                const destination = (arg >> 5) & 0x7;\n                const value = this.inSourceValue(source);\n                const transformedValue = this.transformMovValue(value, op) >>> 0;\n                this.setMovDestination(destination, transformedValue);\n                break;\n            }\n            /* IRQ */\n            case 0b110: {\n                if (arg & 0x80) {\n                    // Unknown instruction\n                    break;\n                }\n                const clear = !!(arg & 0x40);\n                const wait = !!(arg & 0x20);\n                const irq = irqIndex(arg & 0x1f, this.index);\n                if (clear) {\n                    this.pio.irq &= ~(1 << irq);\n                    this.pio.irqUpdated();\n                }\n                else {\n                    this.pio.irq |= 1 << irq;\n                    this.pio.irqUpdated();\n                    if (wait) {\n                        this.wait(WaitType.IRQ, false, irq);\n                    }\n                }\n                break;\n            }\n            /* SET */\n            case 0b111: {\n                const data = arg & 0x1f;\n                const destination = arg >> 5;\n                switch (destination) {\n                    case 0b000:\n                        this.setSetPins(data);\n                        break;\n                    case 0b001:\n                        this.x = data;\n                        break;\n                    case 0b010:\n                        this.y = data;\n                        break;\n                    case 0b100:\n                        this.setSetPinDirs(data);\n                        break;\n                }\n                break;\n            }\n        }\n        this.cycles++;\n        const { sidesetCount, execCtrl } = this;\n        const delaySideset = (opcode >> 8) & 0x1f;\n        const sideEn = !!(execCtrl & EXECCTRL_SIDE_EN);\n        const delay = delaySideset & ((1 << (5 - sidesetCount)) - 1);\n        if (sidesetCount && (!sideEn || delaySideset & 0x10)) {\n            const sideset = delaySideset >> (5 - sidesetCount);\n            this.setSideset(sideset, sideEn ? sidesetCount - 1 : sidesetCount);\n        }\n        if (this.execValid) {\n            this.execValid = false;\n            this.executeInstruction(this.execOpcode);\n        }\n        else if (this.waiting) {\n            if (this.waitDelay < 0) {\n                this.waitDelay = delay;\n            }\n            this.checkWait();\n        }\n        else {\n            this.cycles += delay;\n        }\n    }\n    wait(type, polarity, index) {\n        this.waiting = true;\n        this.waitType = type;\n        this.waitPolarity = polarity;\n        this.waitIndex = index;\n        this.waitDelay = -1;\n        this.updatePC = false;\n    }\n    nextPC() {\n        if (this.pc === this.wrapTop) {\n            this.pc = this.wrapBottom;\n        }\n        else {\n            this.pc = (this.pc + 1) & 0x1f;\n        }\n    }\n    step() {\n        if (this.waiting) {\n            this.checkWait();\n            if (this.waiting) {\n                return;\n            }\n        }\n        this.updatePC = true;\n        this.executeInstruction(this.pio.instructions[this.pc]);\n        if (this.updatePC) {\n            this.nextPC();\n        }\n    }\n    setSetPinDirs(value) {\n        this.pio.pinDirectionsChanged(value, this.setBase, this.setCount);\n    }\n    setSetPins(value) {\n        this.pio.pinValuesChanged(value, this.setBase, this.setCount);\n    }\n    setSideset(value, count) {\n        if (this.execCtrl & EXECCTRL_SIDE_PINDIR) {\n            this.pio.pinDirectionsChanged(value, this.sidesetBase, count);\n        }\n        else {\n            this.pio.pinValuesChanged(value, this.sidesetBase, count);\n        }\n    }\n    transformMovValue(value, op) {\n        switch (op) {\n            case 0b00:\n                return value;\n            case 0b01:\n                return ~value;\n            case 0b10:\n                return bitReverse(value);\n            case 0b11:\n            default:\n                return value; // reserved\n        }\n    }\n    setMovDestination(destination, value) {\n        switch (destination) {\n            // PINS\n            case 0b000:\n                this.setOutPins(value);\n                break;\n            // X (scratch register X)\n            case 0b001:\n                this.x = value;\n                break;\n            // Y (scratch register Y)\n            case 0b010:\n                this.y = value;\n                break;\n            // reserved (discard data)\n            case 0b011:\n                break;\n            // EXEC\n            case 0b100:\n                this.execOpcode = value;\n                this.execValid = true;\n                break;\n            // PC\n            case 0b101:\n                this.pc = value & 0x1f;\n                this.updatePC = false;\n                break;\n            // ISR (Input shift counter is reset to 0 by this operation, i.e. empty)\n            case 0b110:\n                this.inputShiftReg = value;\n                this.inputShiftCount = 0;\n                break;\n            // OSR (Output shift counter is reset to 0 by this operation, i.e. full)\n            case 0b111:\n                this.outputShiftReg = value;\n                this.outputShiftCount = 0;\n                break;\n        }\n    }\n    readUint32(offset) {\n        switch (offset + SM0_CLKDIV) {\n            case SM0_CLKDIV:\n                return (this.clockDivInt << 16) | (this.clockDivFrac << 8);\n            case SM0_EXECCTRL:\n                return this.execCtrl;\n            case SM0_SHIFTCTRL:\n                return this.shiftCtrl;\n            case SM0_ADDR:\n                return this.pc;\n            case SM0_INSTR:\n                return this.pio.instructions[this.pc];\n            case SM0_PINCTRL:\n                return this.pinCtrl;\n        }\n        this.pio.error(`Read from invalid state machine register: ${offset}`);\n        return 0;\n    }\n    writeUint32(offset, value) {\n        switch (offset + SM0_CLKDIV) {\n            case SM0_CLKDIV:\n                this.clockDivFrac = (value >>> 8) & 0xff;\n                this.clockDivInt = value >>> 16;\n                break;\n            case SM0_EXECCTRL:\n                this.execCtrl = ((value & 0x7fffffff) | (this.execCtrl & 0x80000000)) >>> 0;\n                break;\n            case SM0_SHIFTCTRL:\n                this.shiftCtrl = value;\n                break;\n            case SM0_ADDR:\n                /* read-only */\n                break;\n            case SM0_INSTR:\n                this.executeInstruction(value & 0xffff);\n                if (this.waiting) {\n                    this.execCtrl |= EXECCTRL_EXEC_STALLED;\n                }\n                break;\n            case SM0_PINCTRL:\n                this.pinCtrl = value;\n                break;\n            default:\n                this.pio.error(`Write to invalid state machine register: ${offset}`);\n        }\n    }\n    get fifoStat() {\n        const result = (this.txFIFO.empty ? FSTAT_TXEMPTY : 0) |\n            (this.txFIFO.full ? FSTAT_TXFULL : 0) |\n            (this.rxFIFO.empty ? FSTAT_RXEMPTY : 0) |\n            (this.rxFIFO.full ? FSTAT_RXFULL : 0);\n        return result << this.index;\n    }\n    restart() {\n        this.cycles = 0;\n        this.inputShiftCount = 0;\n        this.outputShiftCount = 32;\n        this.inputShiftReg = 0;\n        this.waiting = false;\n        // TODO any pin write left asserted due to OUT_STICKY.\n    }\n    clkDivRestart() {\n        this.pio.warn('clkDivRestart not implemented');\n    }\n    checkWait() {\n        if (!this.waiting) {\n            return;\n        }\n        switch (this.waitType) {\n            case WaitType.IRQ: {\n                const irqValue = !!(this.pio.irq & (1 << this.waitIndex));\n                if (irqValue === this.waitPolarity) {\n                    this.waiting = false;\n                    if (irqValue) {\n                        this.pio.irq &= ~(1 << this.waitIndex);\n                    }\n                }\n                break;\n            }\n            case WaitType.Pin: {\n                if (this.waitIndex < this.rp2040.gpio.length &&\n                    this.rp2040.gpio[this.waitIndex].inputValue === this.waitPolarity) {\n                    this.waiting = false;\n                }\n                break;\n            }\n            case WaitType.rxFIFO: {\n                if (!this.rxFIFO.full) {\n                    this.rxFIFO.push(this.waitIndex);\n                    this.waiting = false;\n                    this.updateDMARx();\n                    this.pio.checkInterrupts();\n                }\n                break;\n            }\n            case WaitType.txFIFO: {\n                if (!this.txFIFO.empty) {\n                    this.outputShiftReg = this.txFIFO.pull();\n                    this.waiting = false;\n                    this.updateDMATx();\n                    this.pio.checkInterrupts();\n                }\n                break;\n            }\n            case WaitType.Out: {\n                if (!this.txFIFO.empty) {\n                    this.outputShiftReg = this.txFIFO.pull();\n                    this.outInstruction(this.waitIndex);\n                    this.waiting = false;\n                    this.updateDMATx();\n                    this.pio.checkInterrupts();\n                }\n                break;\n            }\n        }\n        if (!this.waiting) {\n            this.nextPC();\n            this.cycles += this.waitDelay;\n            this.execCtrl &= ~EXECCTRL_EXEC_STALLED;\n        }\n    }\n}\nexport class RPPIO extends BasePeripheral {\n    constructor(rp2040, name, firstIrq, index) {\n        super(rp2040, name);\n        this.firstIrq = firstIrq;\n        this.index = index;\n        this.instructions = new Uint32Array(32);\n        this.dreqRx = this.index ? dreqRx1 : dreqRx0;\n        this.dreqTx = this.index ? dreqTx1 : dreqTx0;\n        this.machines = [\n            new StateMachine(this.rp2040, this, 0),\n            new StateMachine(this.rp2040, this, 1),\n            new StateMachine(this.rp2040, this, 2),\n            new StateMachine(this.rp2040, this, 3),\n        ];\n        this.stopped = true;\n        this.fdebug = 0;\n        this.txStall = 0;\n        this.rxStall = 0;\n        this.inputSyncBypass = 0;\n        this.irq = 0;\n        this.pinValues = 0;\n        this.pinDirections = 0;\n        this.oldPinValues = 0;\n        this.oldPinDirections = 0;\n        this.runTimer = null;\n        this.irq0IntEnable = 0;\n        this.irq0IntForce = 0;\n        this.irq1IntEnable = 0;\n        this.irq1IntForce = 0;\n    }\n    get intRaw() {\n        return (((this.irq & 0xf) << 8) |\n            (!this.machines[3].txFIFO.full ? 0x80 : 0) |\n            (!this.machines[2].txFIFO.full ? 0x40 : 0) |\n            (!this.machines[1].txFIFO.full ? 0x20 : 0) |\n            (!this.machines[0].txFIFO.full ? 0x10 : 0) |\n            (!this.machines[3].rxFIFO.empty ? 0x08 : 0) |\n            (!this.machines[2].rxFIFO.empty ? 0x04 : 0) |\n            (!this.machines[1].rxFIFO.empty ? 0x02 : 0) |\n            (!this.machines[0].rxFIFO.empty ? 0x01 : 0));\n    }\n    get irq0IntStatus() {\n        return (this.intRaw & this.irq0IntEnable) | this.irq0IntForce;\n    }\n    get irq1IntStatus() {\n        return (this.intRaw & this.irq1IntEnable) | this.irq1IntForce;\n    }\n    readUint32(offset) {\n        if (offset >= SM0_CLKDIV && offset <= SM0_PINCTRL) {\n            return this.machines[0].readUint32(offset - SM0_CLKDIV);\n        }\n        if (offset >= SM1_CLKDIV && offset <= SM1_PINCTRL) {\n            return this.machines[1].readUint32(offset - SM1_CLKDIV);\n        }\n        if (offset >= SM2_CLKDIV && offset <= SM2_PINCTRL) {\n            return this.machines[2].readUint32(offset - SM2_CLKDIV);\n        }\n        if (offset >= SM3_CLKDIV && offset <= SM3_PINCTRL) {\n            return this.machines[3].readUint32(offset - SM3_CLKDIV);\n        }\n        switch (offset) {\n            case CTRL:\n                return ((this.machines[0].enabled ? 1 << 0 : 0) |\n                    (this.machines[1].enabled ? 1 << 1 : 0) |\n                    (this.machines[2].enabled ? 1 << 2 : 0) |\n                    (this.machines[3].enabled ? 1 << 3 : 0));\n            case FSTAT:\n                return (this.machines[0].fifoStat |\n                    this.machines[1].fifoStat |\n                    this.machines[2].fifoStat |\n                    this.machines[3].fifoStat);\n            case FDEBUG:\n                return this.fdebug;\n            case FLEVEL:\n                return ((this.machines[0].txFIFO.itemCount & 0xf) |\n                    ((this.machines[0].rxFIFO.itemCount & 0xf) << 4) |\n                    ((this.machines[1].txFIFO.itemCount & 0xf) << 8) |\n                    ((this.machines[1].rxFIFO.itemCount & 0xf) << 12) |\n                    ((this.machines[2].txFIFO.itemCount & 0xf) << 16) |\n                    ((this.machines[2].rxFIFO.itemCount & 0xf) << 20) |\n                    ((this.machines[3].txFIFO.itemCount & 0xf) << 24) |\n                    ((this.machines[3].rxFIFO.itemCount & 0xf) << 28));\n            case RXF0:\n                return this.machines[0].readFIFO();\n            case RXF1:\n                return this.machines[1].readFIFO();\n            case RXF2:\n                return this.machines[2].readFIFO();\n            case RXF3:\n                return this.machines[3].readFIFO();\n            case IRQ:\n                return this.irq;\n            case IRQ_FORCE:\n                return 0;\n            case INPUT_SYNC_BYPASS:\n                return this.inputSyncBypass;\n            case DBG_PADOUT:\n                return this.pinValues;\n            case DBG_PADOE:\n                return this.pinDirections;\n            case DBG_CFGINFO:\n                return 0x200404;\n            case INTR:\n                return this.intRaw;\n            case IRQ0_INTE:\n                return this.irq0IntEnable;\n            case IRQ0_INTF:\n                return this.irq0IntForce;\n            case IRQ0_INTS:\n                return this.irq0IntStatus;\n            case IRQ1_INTE:\n                return this.irq1IntEnable;\n            case IRQ1_INTF:\n                return this.irq1IntForce;\n            case IRQ1_INTS:\n                return this.irq1IntStatus;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        if (offset >= INSTR_MEM0 && offset <= INSTR_MEM31) {\n            const index = (offset - INSTR_MEM0) >> 2;\n            this.instructions[index] = value & 0xffff;\n            return;\n        }\n        if (offset >= SM0_CLKDIV && offset <= SM0_PINCTRL) {\n            this.machines[0].writeUint32(offset - SM0_CLKDIV, value);\n            return;\n        }\n        if (offset >= SM1_CLKDIV && offset <= SM1_PINCTRL) {\n            this.machines[1].writeUint32(offset - SM1_CLKDIV, value);\n            return;\n        }\n        if (offset >= SM2_CLKDIV && offset <= SM2_PINCTRL) {\n            this.machines[2].writeUint32(offset - SM2_CLKDIV, value);\n            return;\n        }\n        if (offset >= SM3_CLKDIV && offset <= SM3_PINCTRL) {\n            this.machines[3].writeUint32(offset - SM3_CLKDIV, value);\n            return;\n        }\n        switch (offset) {\n            case CTRL: {\n                for (let index = 0; index < 4; index++) {\n                    this.machines[index].enabled = value & (1 << index) ? true : false;\n                    if (value & (1 << (4 + index))) {\n                        this.machines[index].restart();\n                    }\n                    if (value & (1 << (8 + index))) {\n                        this.machines[index].clkDivRestart();\n                    }\n                }\n                const shouldRun = value & 0xf;\n                if (this.stopped && shouldRun) {\n                    this.stopped = false;\n                    this.run();\n                }\n                if (!shouldRun) {\n                    this.stopped = true;\n                }\n                break;\n            }\n            case FDEBUG:\n                this.fdebug &= ~this.rawWriteValue;\n                this.fdebug |= this.txStall | this.rxStall;\n                break;\n            case TXF0:\n                this.machines[0].writeFIFO(value);\n                break;\n            case TXF1:\n                this.machines[1].writeFIFO(value);\n                break;\n            case TXF2:\n                this.machines[2].writeFIFO(value);\n                break;\n            case TXF3:\n                this.machines[3].writeFIFO(value);\n                break;\n            case IRQ:\n                this.irq &= ~this.rawWriteValue;\n                this.irqUpdated();\n                break;\n            case INPUT_SYNC_BYPASS:\n                this.inputSyncBypass = value;\n                break;\n            case IRQ_FORCE:\n                this.irq |= value;\n                this.irqUpdated();\n                break;\n            case IRQ0_INTE:\n                this.irq0IntEnable = value & 0xfff;\n                this.checkInterrupts();\n                break;\n            case IRQ0_INTF:\n                this.irq0IntForce = value & 0xfff;\n                this.checkInterrupts();\n                break;\n            case IRQ1_INTE:\n                this.irq1IntEnable = value & 0xfff;\n                this.checkInterrupts();\n                break;\n            case IRQ1_INTF:\n                this.irq1IntForce = value & 0xfff;\n                this.checkInterrupts();\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n    pinValuesChanged(value, firstPin, count) {\n        // TODO: wrapping after pin 31\n        const mask = count > 31 ? 0xffffffff : ((1 << count) - 1) << firstPin;\n        const newValue = ((this.pinValues & ~mask) | ((value << firstPin) & mask)) & 0x3fffffff;\n        this.pinValues = newValue;\n    }\n    pinDirectionsChanged(value, firstPin, count) {\n        // TODO: wrapping after pin 31\n        const mask = count > 31 ? 0xffffffff : ((1 << count) - 1) << firstPin;\n        const newValue = ((this.pinDirections & ~mask) | ((value << firstPin) & mask)) & 0x3fffffff;\n        this.pinDirections = newValue;\n    }\n    checkInterrupts() {\n        const { firstIrq } = this;\n        this.rp2040.setInterrupt(firstIrq, !!this.irq0IntStatus);\n        this.rp2040.setInterrupt(firstIrq + 1, !!this.irq1IntStatus);\n    }\n    irqUpdated() {\n        for (const machine of this.machines) {\n            machine.checkWait();\n        }\n        this.checkInterrupts();\n    }\n    checkChangedPins() {\n        const changedPins = (this.oldPinDirections ^ this.pinDirections) | (this.oldPinValues ^ this.pinValues);\n        if (changedPins) {\n            this.oldPinDirections = this.pinDirections;\n            this.oldPinValues = this.pinValues;\n            // Notify GPIO about the changed pins\n            const { gpio } = this.rp2040;\n            for (let gpioIndex = 0; gpioIndex < gpio.length; gpioIndex++) {\n                if (changedPins & (1 << gpioIndex)) {\n                    gpio[gpioIndex].checkForUpdates();\n                }\n            }\n        }\n    }\n    step() {\n        for (const machine of this.machines) {\n            machine.step();\n        }\n        this.checkChangedPins();\n    }\n    run() {\n        for (let i = 0; i < 1000 && !this.stopped; i++) {\n            this.step();\n        }\n        if (!this.stopped) {\n            this.runTimer = setTimeout(() => this.run(), 0);\n        }\n    }\n    stop() {\n        for (const machine of this.machines) {\n            machine.enabled = false;\n        }\n        this.stopped = true;\n        if (this.runTimer) {\n            clearTimeout(this.runTimer);\n            this.runTimer = null;\n        }\n    }\n}\n", "import { WaitType } from './peripherals/pio.js';\nexport var GPIOPinState;\n(function (GPIOPinState) {\n    GPIOPinState[GPIOPinState[\"Low\"] = 0] = \"Low\";\n    GPIOPinState[GPIOPinState[\"High\"] = 1] = \"High\";\n    GPIOPinState[GPIOPinState[\"Input\"] = 2] = \"Input\";\n    GPIOPinState[GPIOPinState[\"InputPullUp\"] = 3] = \"InputPullUp\";\n    GPIOPinState[GPIOPinState[\"InputPullDown\"] = 4] = \"InputPullDown\";\n    GPIOPinState[GPIOPinState[\"InputBusKeeper\"] = 5] = \"InputBusKeeper\";\n})(GPIOPinState || (GPIOPinState = {}));\nexport const FUNCTION_PWM = 4;\nexport const FUNCTION_SIO = 5;\nexport const FUNCTION_PIO0 = 6;\nexport const FUNCTION_PIO1 = 7;\nfunction applyOverride(value, overrideType) {\n    switch (overrideType) {\n        case 0:\n            return value;\n        case 1:\n            return !value;\n        case 2:\n            return false;\n        case 3:\n            return true;\n    }\n    console.error('applyOverride received invalid override type', overrideType);\n    return value;\n}\nconst IRQ_EDGE_HIGH = 1 << 3;\nconst IRQ_EDGE_LOW = 1 << 2;\nconst IRQ_LEVEL_HIGH = 1 << 1;\nconst IRQ_LEVEL_LOW = 1 << 0;\nexport class GPIOPin {\n    constructor(rp2040, index, name = index.toString()) {\n        this.rp2040 = rp2040;\n        this.index = index;\n        this.name = name;\n        this.rawInputValue = false;\n        this.lastValue = this.value;\n        this.ctrl = 0x1f;\n        this.padValue = 0b0110110;\n        this.irqEnableMask = 0;\n        this.irqForceMask = 0;\n        this.irqStatus = 0;\n        this.listeners = new Set();\n    }\n    get rawInterrupt() {\n        return !!((this.irqStatus & this.irqEnableMask) | this.irqForceMask);\n    }\n    get isSlewFast() {\n        return !!(this.padValue & 1);\n    }\n    get schmittEnabled() {\n        return !!(this.padValue & 2);\n    }\n    get pulldownEnabled() {\n        return !!(this.padValue & 4);\n    }\n    get pullupEnabled() {\n        return !!(this.padValue & 8);\n    }\n    get driveStrength() {\n        return (this.padValue >> 4) & 0x3;\n    }\n    get inputEnable() {\n        return !!(this.padValue & 0x40);\n    }\n    get outputDisable() {\n        return !!(this.padValue & 0x80);\n    }\n    get functionSelect() {\n        return this.ctrl & 0x1f;\n    }\n    get outputOverride() {\n        return (this.ctrl >> 8) & 0x3;\n    }\n    get outputEnableOverride() {\n        return (this.ctrl >> 12) & 0x3;\n    }\n    get inputOverride() {\n        return (this.ctrl >> 16) & 0x3;\n    }\n    get irqOverride() {\n        return (this.ctrl >> 28) & 0x3;\n    }\n    get rawOutputEnable() {\n        const { index, rp2040, functionSelect } = this;\n        const bitmask = 1 << index;\n        switch (functionSelect) {\n            case FUNCTION_PWM:\n                return !!(rp2040.pwm.gpioDirection & bitmask);\n            case FUNCTION_SIO:\n                return !!(rp2040.sio.gpioOutputEnable & bitmask);\n            case FUNCTION_PIO0:\n                return !!(rp2040.pio[0].pinDirections & bitmask);\n            case FUNCTION_PIO1:\n                return !!(rp2040.pio[1].pinDirections & bitmask);\n            default:\n                return false;\n        }\n    }\n    get rawOutputValue() {\n        const { index, rp2040, functionSelect } = this;\n        const bitmask = 1 << index;\n        switch (functionSelect) {\n            case FUNCTION_PWM:\n                return !!(rp2040.pwm.gpioValue & bitmask);\n            case FUNCTION_SIO:\n                return !!(rp2040.sio.gpioValue & bitmask);\n            case FUNCTION_PIO0:\n                return !!(rp2040.pio[0].pinValues & bitmask);\n            case FUNCTION_PIO1:\n                return !!(rp2040.pio[1].pinValues & bitmask);\n            default:\n                return false;\n        }\n    }\n    get inputValue() {\n        return applyOverride(this.rawInputValue && this.inputEnable, this.inputOverride);\n    }\n    get irqValue() {\n        return applyOverride(this.rawInterrupt, this.irqOverride);\n    }\n    get outputEnable() {\n        return applyOverride(this.rawOutputEnable, this.outputEnableOverride);\n    }\n    get outputValue() {\n        return applyOverride(this.rawOutputValue, this.outputOverride);\n    }\n    /**\n     * Returns the STATUS register value for the pin, as outlined in section 2.19.6 of the datasheet\n     */\n    get status() {\n        const irqToProc = this.irqValue ? 1 << 26 : 0;\n        const irqFromPad = this.rawInterrupt ? 1 << 24 : 0;\n        const inToPeri = this.inputValue ? 1 << 19 : 0;\n        const inFromPad = this.rawInputValue ? 1 << 17 : 0;\n        const oeToPad = this.outputEnable ? 1 << 13 : 0;\n        const oeFromPeri = this.rawOutputEnable ? 1 << 12 : 0;\n        const outToPad = this.outputValue ? 1 << 9 : 0;\n        const outFromPeri = this.rawOutputValue ? 1 << 8 : 0;\n        return (irqToProc | irqFromPad | inToPeri | inFromPad | oeToPad | oeFromPeri | outToPad | outFromPeri);\n    }\n    get value() {\n        if (this.outputEnable) {\n            return this.outputValue ? GPIOPinState.High : GPIOPinState.Low;\n        }\n        else {\n            // TODO: check what happens when we enable both pullup/pulldown\n            // ANSWER: It is valid, see: 2.19.4.1. Bus Keeper Mode, datasheet p240\n            if (this.pulldownEnabled && this.pullupEnabled) {\n                // Pull high when high, pull low when low:\n                return GPIOPinState.InputBusKeeper;\n            }\n            else if (this.pulldownEnabled) {\n                return GPIOPinState.InputPullDown;\n            }\n            else if (this.pullupEnabled) {\n                return GPIOPinState.InputPullUp;\n            }\n            return GPIOPinState.Input;\n        }\n    }\n    setInputValue(value) {\n        this.rawInputValue = value;\n        const prevIrqValue = this.irqValue;\n        if (value && this.inputEnable) {\n            this.irqStatus |= IRQ_EDGE_HIGH | IRQ_LEVEL_HIGH;\n            this.irqStatus &= ~IRQ_LEVEL_LOW;\n        }\n        else {\n            this.irqStatus |= IRQ_EDGE_LOW | IRQ_LEVEL_LOW;\n            this.irqStatus &= ~IRQ_LEVEL_HIGH;\n        }\n        if (this.irqValue !== prevIrqValue) {\n            this.rp2040.updateIOInterrupt();\n        }\n        if (this.functionSelect === FUNCTION_PWM) {\n            this.rp2040.pwm.gpioOnInput(this.index);\n        }\n        for (const pio of this.rp2040.pio) {\n            for (const machine of pio.machines) {\n                if (machine.enabled &&\n                    machine.waiting &&\n                    machine.waitType === WaitType.Pin &&\n                    machine.waitIndex === this.index) {\n                    machine.checkWait();\n                }\n            }\n        }\n    }\n    checkForUpdates() {\n        const { lastValue, value } = this;\n        if (value !== lastValue) {\n            this.lastValue = value;\n            for (const listener of this.listeners) {\n                listener(value, lastValue);\n            }\n        }\n    }\n    refreshInput() {\n        this.setInputValue(this.rawInputValue);\n    }\n    updateIRQValue(value) {\n        if (value & IRQ_EDGE_LOW && this.irqStatus & IRQ_EDGE_LOW) {\n            this.irqStatus &= ~IRQ_EDGE_LOW;\n            this.rp2040.updateIOInterrupt();\n        }\n        if (value & IRQ_EDGE_HIGH && this.irqStatus & IRQ_EDGE_HIGH) {\n            this.irqStatus &= ~IRQ_EDGE_HIGH;\n            this.rp2040.updateIOInterrupt();\n        }\n    }\n    addListener(callback) {\n        this.listeners.add(callback);\n        return () => this.listeners.delete(callback);\n    }\n}\n", "import { IRQ } from '../irq.js';\nimport { FIFO } from '../utils/fifo.js';\nimport { DREQChannel } from './dma.js';\nimport { BasePeripheral } from './peripheral.js';\nconst CS = 0x00; // ADC Control and Status\nconst RESULT = 0x04; // Result of most recent ADC conversion\nconst FCS = 0x08; // FIFO control and status\nconst FIFO_REG = 0x0c; // Conversion result FIFO\nconst DIV = 0x10; // Clock divider.0x14 INTR Raw Interrupts\nconst INTR = 0x14; // Raw Interrupts\nconst INTE = 0x18; // Interrupt Enable\nconst INTF = 0x1c; // Interrupt Force\nconst INTS = 0x20; // Interrupt status after masking & forcing\n// CS bits\nconst CS_RROBIN_MASK = 0x1f;\nconst CS_RROBIN_SHIFT = 16;\nconst CS_AINSEL_MASK = 0x7;\nconst CS_AINSEL_SHIFT = 12;\nconst CS_ERR_STICKY = 1 << 10;\nconst CS_ERR = 1 << 9;\nconst CS_READY = 1 << 8;\nconst CS_START_MANY = 1 << 3;\nconst CS_START_ONE = 1 << 2;\nconst CS_TS_EN = 1 << 1;\nconst CS_EN = 1 << 0;\nconst CS_WRITE_MASK = (CS_RROBIN_MASK << CS_RROBIN_SHIFT) |\n    (CS_AINSEL_MASK << CS_AINSEL_SHIFT) |\n    CS_START_MANY |\n    CS_START_ONE |\n    CS_TS_EN |\n    CS_EN;\n// FCS bits\nconst FCS_THRES_MASK = 0xf;\nconst FCS_THRESH_SHIFT = 24;\nconst FCS_LEVEL_MASK = 0xf;\nconst FCS_LEVEL_SHIFT = 16;\nconst FCS_OVER = 1 << 11;\nconst FCS_UNDER = 1 << 10;\nconst FCS_FULL = 1 << 9;\nconst FCS_EMPTY = 1 << 8;\nconst FCS_DREQ_EN = 1 << 3;\nconst FCS_ERR = 1 << 2;\nconst FCS_SHIFT = 1 << 1;\nconst FCS_EN = 1 << 0;\nconst FCS_WRITE_MASK = (FCS_THRES_MASK << FCS_THRESH_SHIFT) | FCS_DREQ_EN | FCS_ERR | FCS_SHIFT | FCS_EN;\n// FIFO_REG bits\nconst FIFO_ERR = 1 << 15;\n// DIV bits\nconst DIV_INT_MASK = 0xffff;\nconst DIV_INT_SHIFT = 8;\nconst DIV_FRAC_MASK = 0xff;\nconst DIV_FRAC_SHIFT = 0;\n// Interrupt bits\nconst FIFO_INT = 1 << 0;\nexport class RPADC extends BasePeripheral {\n    get temperatueEnable() {\n        return this.cs & CS_TS_EN;\n    }\n    get enabled() {\n        return this.cs & CS_EN;\n    }\n    get divider() {\n        return (1 +\n            ((this.clockDiv >> DIV_INT_SHIFT) & DIV_INT_MASK) +\n            ((this.clockDiv >> DIV_FRAC_SHIFT) & DIV_FRAC_MASK) / 256);\n    }\n    get intRaw() {\n        const thres = (this.fcs >> FCS_THRESH_SHIFT) & FCS_THRES_MASK;\n        return this.fifo.itemCount >= thres ? FIFO_INT : 0;\n    }\n    get intStatus() {\n        return (this.intRaw & this.intEnable) | this.intForce;\n    }\n    get activeChannel() {\n        return (this.cs >> CS_AINSEL_SHIFT) & CS_AINSEL_MASK;\n    }\n    set activeChannel(channel) {\n        this.cs &= ~(CS_AINSEL_MASK << CS_AINSEL_SHIFT);\n        this.cs |= (channel & CS_AINSEL_SHIFT) << CS_AINSEL_SHIFT;\n    }\n    constructor(rp2040, name) {\n        super(rp2040, name);\n        /* Number of ADC channels */\n        this.numChannels = 5;\n        /** ADC resolution (in bits) */\n        this.resolution = 12;\n        /** Time to read a single sample, in microseconds */\n        this.sampleTime = 2;\n        /**\n         * ADC Channel values. Channels 0...3 are connected to GPIO 26...29, and channel 4 is connected to the built-in\n         * temperature sensor: T=27-(ADC_voltage-0.706)/0.001721.\n         *\n         * Changing the values will change the ADC reading, unless you override onADCRead() with a custom implementation.\n         */\n        this.channelValues = [0, 0, 0, 0, 0];\n        /**\n         * Invoked whenever the emulated code performs an ADC read.\n         *\n         * The default implementation reads the result from the `channelValues` array, and then calls\n         * completeADCRead() after `sampleTime` microseconds.\n         *\n         * If you override the default implementation, make sure to call `completeADCRead()` after\n         * `sampleTime` microseconds (or else the ADC read will never complete).\n         */\n        this.onADCRead = (channel) => {\n            // Default implementation\n            this.currentChannel = channel;\n            this.sampleAlarm.schedule(this.sampleTime * 1000);\n        };\n        this.fifo = new FIFO(4);\n        this.dreq = DREQChannel.DREQ_ADC;\n        // Registers\n        this.cs = 0;\n        this.fcs = 0;\n        this.clockDiv = 0;\n        this.intEnable = 0;\n        this.intForce = 0;\n        this.result = 0;\n        // Status\n        this.busy = false;\n        this.err = false;\n        this.currentChannel = 0;\n        this.sampleAlarm = this.rp2040.clock.createAlarm(() => this.completeADCRead(this.channelValues[this.currentChannel], false));\n        this.multiShotAlarm = this.rp2040.clock.createAlarm(() => {\n            if (this.cs & CS_START_MANY) {\n                this.startADCRead();\n            }\n        });\n    }\n    checkInterrupts() {\n        this.rp2040.setInterrupt(IRQ.ADC_FIFO, !!this.intStatus);\n    }\n    startADCRead() {\n        this.busy = true;\n        this.onADCRead(this.activeChannel);\n    }\n    updateDMA() {\n        if (this.fcs & FCS_DREQ_EN) {\n            const thres = (this.fcs >> FCS_THRESH_SHIFT) & FCS_THRES_MASK;\n            if (this.fifo.itemCount >= thres) {\n                this.rp2040.dma.setDREQ(this.dreq);\n            }\n            else {\n                this.rp2040.dma.clearDREQ(this.dreq);\n            }\n        }\n    }\n    completeADCRead(value, error) {\n        this.busy = false;\n        this.result = value;\n        if (error) {\n            this.cs |= CS_ERR_STICKY | CS_ERR;\n        }\n        else {\n            this.cs &= ~CS_ERR;\n        }\n        // FIFO\n        if (this.fcs & FCS_EN) {\n            if (this.fifo.full) {\n                this.fcs |= FCS_OVER;\n            }\n            else {\n                value &= 0xfff; // 12 bits\n                if (this.fcs & FCS_SHIFT) {\n                    value >>= 4;\n                }\n                if (error && this.fcs & FCS_ERR) {\n                    value |= FIFO_ERR;\n                }\n                this.fifo.push(value);\n                this.updateDMA();\n                this.checkInterrupts();\n            }\n        }\n        // Round-robin\n        const round = (this.cs >> CS_RROBIN_SHIFT) & CS_RROBIN_MASK;\n        if (round) {\n            let channel = this.activeChannel + 1;\n            while (!(round & (1 << channel))) {\n                channel = (channel + 1) % this.numChannels;\n            }\n            this.activeChannel = channel;\n        }\n        // Multi-shot conversions\n        if (this.cs & CS_START_MANY) {\n            const clockMHZ = 48;\n            const sampleTicks = clockMHZ * this.sampleTime;\n            if (this.divider > sampleTicks) {\n                // clock runs at 48MHz, subtract 2uS\n                const micros = (this.divider - sampleTicks) / clockMHZ;\n                this.multiShotAlarm.schedule(micros * 1000);\n            }\n            else {\n                this.startADCRead();\n            }\n        }\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case CS:\n                return this.cs | (this.err ? CS_ERR : 0) | (this.busy ? 0 : CS_READY);\n            case RESULT:\n                return this.result;\n            case FCS:\n                return (this.fcs |\n                    ((this.fifo.itemCount & FCS_LEVEL_MASK) << FCS_LEVEL_SHIFT) |\n                    (this.fifo.full ? FCS_FULL : 0) |\n                    (this.fifo.empty ? FCS_EMPTY : 0));\n            case FIFO_REG:\n                if (this.fifo.empty) {\n                    this.fcs |= FCS_UNDER;\n                    return 0;\n                }\n                else {\n                    const value = this.fifo.pull();\n                    this.updateDMA();\n                    return value;\n                }\n            case DIV:\n                return this.clockDiv;\n            case INTR:\n                return this.intRaw;\n            case INTE:\n                return this.intEnable;\n            case INTF:\n                return this.intForce;\n            case INTS:\n                return this.intStatus;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case CS:\n                this.fcs &= ~(value & CS_ERR_STICKY); // Write-clear bits\n                this.cs = (this.cs & ~CS_WRITE_MASK) | (value & CS_WRITE_MASK);\n                if (value & CS_EN && !this.busy && (value & CS_START_ONE || value & CS_START_MANY)) {\n                    this.startADCRead();\n                }\n                break;\n            case FCS:\n                this.fcs &= ~(value & (FCS_OVER | FCS_UNDER)); // Write-clear bits\n                this.fcs = (this.fcs & ~FCS_WRITE_MASK) | (value & FCS_WRITE_MASK);\n                this.checkInterrupts();\n                break;\n            case DIV:\n                this.clockDiv = value;\n                break;\n            case INTE:\n                this.intEnable = value & FIFO_INT;\n                this.checkInterrupts();\n                break;\n            case INTF:\n                this.intForce = value & FIFO_INT;\n                this.checkInterrupts();\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\n/** Bus priority acknowledge */\nconst BUS_PRIORITY_ACK = 0x004;\n/** Bus fabric performance counter 0 */\nconst PERFCTR0 = 0x008;\n/** Bus fabric performance event select for PERFCTR0 */\nconst PERFSEL0 = 0x00c;\n/** Bus fabric performance counter 1 */\nconst PERFCTR1 = 0x010;\n/** Bus fabric performance event select for PERFCTR1 */\nconst PERFSEL1 = 0x014;\n/** Bus fabric performance counter 2 */\nconst PERFCTR2 = 0x018;\n/** Bus fabric performance event select for PERFCTR2 */\nconst PERFSEL2 = 0x01c;\n/** Bus fabric performance counter 3 */\nconst PERFCTR3 = 0x020;\n/** Bus fabric performance event select for PERFCTR3 */\nconst PERFSEL3 = 0x024;\nexport class RPBUSCTRL extends BasePeripheral {\n    constructor(rp2040, name) {\n        super(rp2040, name);\n        this.voltageSelect = 0;\n        this.perfCtr = [0, 0, 0, 0];\n        this.perfSel = [0x1f, 0x1f, 0x1f, 0x1f];\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case BUS_PRIORITY_ACK:\n                return 1;\n            case PERFCTR0:\n                return this.perfCtr[0];\n            case PERFSEL0:\n                return this.perfSel[0];\n            case PERFCTR1:\n                return this.perfCtr[1];\n            case PERFSEL1:\n                return this.perfSel[1];\n            case PERFCTR2:\n                return this.perfCtr[2];\n            case PERFSEL2:\n                return this.perfSel[2];\n            case PERFCTR3:\n                return this.perfCtr[3];\n            case PERFSEL3:\n                return this.perfSel[3];\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case PERFCTR0:\n                this.perfCtr[0] = 0;\n                break;\n            case PERFSEL0:\n                this.perfSel[0] = value & 0x1f;\n                break;\n            case PERFCTR1:\n                this.perfCtr[1] = 0;\n                break;\n            case PERFSEL1:\n                this.perfSel[1] = value & 0x1f;\n                break;\n            case PERFCTR2:\n                this.perfCtr[2] = 0;\n                break;\n            case PERFSEL2:\n                this.perfSel[2] = value & 0x1f;\n                break;\n            case PERFCTR3:\n                this.perfCtr[3] = 0;\n                break;\n            case PERFSEL3:\n                this.perfSel[3] = value & 0x1f;\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\nconst CLK_GPOUT0_CTRL = 0x00;\nconst CLK_GPOUT0_DIV = 0x04;\nconst CLK_GPOUT0_SELECTED = 0x8;\nconst CLK_GPOUT1_CTRL = 0x0c;\nconst CLK_GPOUT1_DIV = 0x10;\nconst CLK_GPOUT1_SELECTED = 0x14;\nconst CLK_GPOUT2_CTRL = 0x18;\nconst CLK_GPOUT2_DIV = 0x01c;\nconst CLK_GPOUT2_SELECTED = 0x20;\nconst CLK_GPOUT3_CTRL = 0x24;\nconst CLK_GPOUT3_DIV = 0x28;\nconst CLK_GPOUT3_SELECTED = 0x2c;\nconst CLK_REF_CTRL = 0x30;\nconst CLK_REF_DIV = 0x34;\nconst CLK_REF_SELECTED = 0x38;\nconst CLK_SYS_CTRL = 0x3c;\nconst CLK_SYS_DIV = 0x40;\nconst CLK_SYS_SELECTED = 0x44;\nconst CLK_PERI_CTRL = 0x48;\nconst CLK_PERI_DIV = 0x4c;\nconst CLK_PERI_SELECTED = 0x50;\nconst CLK_USB_CTRL = 0x54;\nconst CLK_USB_DIV = 0x58;\nconst CLK_USB_SELECTED = 0x5c;\nconst CLK_ADC_CTRL = 0x60;\nconst CLK_ADC_DIV = 0x64;\nconst CLK_ADC_SELECTED = 0x68;\nconst CLK_RTC_CTRL = 0x6c;\nconst CLK_RTC_DIV = 0x70;\nconst CLK_RTC_SELECTED = 0x74;\nconst CLK_SYS_RESUS_CTRL = 0x78;\nconst CLK_SYS_RESUS_STATUS = 0x7c;\nexport class RPClocks extends BasePeripheral {\n    constructor(rp2040, name) {\n        super(rp2040, name);\n        this.gpout0Ctrl = 0;\n        this.gpout0Div = 0x100;\n        this.gpout1Ctrl = 0;\n        this.gpout1Div = 0x100;\n        this.gpout2Ctrl = 0;\n        this.gpout2Div = 0x100;\n        this.gpout3Ctrl = 0;\n        this.gpout3Div = 0x100;\n        this.refCtrl = 0;\n        this.refDiv = 0x100;\n        this.periCtrl = 0;\n        this.periDiv = 0x100;\n        this.usbCtrl = 0;\n        this.usbDiv = 0x100;\n        this.sysCtrl = 0;\n        this.sysDiv = 0x100;\n        this.adcCtrl = 0;\n        this.adcDiv = 0x100;\n        this.rtcCtrl = 0;\n        this.rtcDiv = 0x100;\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case CLK_GPOUT0_CTRL:\n                return this.gpout0Ctrl & 0b100110001110111100000;\n            case CLK_GPOUT0_DIV:\n                return this.gpout0Div;\n            case CLK_GPOUT0_SELECTED:\n                return 1;\n            case CLK_GPOUT1_CTRL:\n                return this.gpout1Ctrl & 0b100110001110111100000;\n            case CLK_GPOUT1_DIV:\n                return this.gpout1Div;\n            case CLK_GPOUT1_SELECTED:\n                return 1;\n            case CLK_GPOUT2_CTRL:\n                return this.gpout2Ctrl & 0b100110001110111100000;\n            case CLK_GPOUT2_DIV:\n                return this.gpout2Div;\n            case CLK_GPOUT2_SELECTED:\n                return 1;\n            case CLK_GPOUT3_CTRL:\n                return this.gpout3Ctrl & 0b100110001110111100000;\n            case CLK_GPOUT3_DIV:\n                return this.gpout3Div;\n            case CLK_GPOUT3_SELECTED:\n                return 1;\n            case CLK_REF_CTRL:\n                return this.refCtrl & 0b000001100011;\n            case CLK_REF_DIV:\n                return this.refDiv & 0x30; // b8..9 = int divisor. no frac divisor present\n            case CLK_REF_SELECTED:\n                return 1 << (this.refCtrl & 0x03);\n            case CLK_SYS_CTRL:\n                return this.sysCtrl & 0b000011100001;\n            case CLK_SYS_DIV:\n                return this.sysDiv;\n            case CLK_SYS_SELECTED:\n                return 1 << (this.sysCtrl & 0x01);\n            case CLK_PERI_CTRL:\n                return this.periCtrl & 0b110011100000;\n            case CLK_PERI_DIV:\n                return this.periDiv;\n            case CLK_PERI_SELECTED:\n                return 1;\n            case CLK_USB_CTRL:\n                return this.usbCtrl & 0b100110000110011100000;\n            case CLK_USB_DIV:\n                return this.usbDiv;\n            case CLK_USB_SELECTED:\n                return 1;\n            case CLK_ADC_CTRL:\n                return this.adcCtrl & 0b100110000110011100000;\n            case CLK_ADC_DIV:\n                return this.adcDiv & 0x30;\n            case CLK_ADC_SELECTED:\n                return 1;\n            case CLK_RTC_CTRL:\n                return this.rtcCtrl & 0b100110000110011100000;\n            case CLK_RTC_DIV:\n                return this.rtcDiv & 0x30;\n            case CLK_RTC_SELECTED:\n                return 1;\n            case CLK_SYS_RESUS_CTRL:\n                return 0xff;\n            case CLK_SYS_RESUS_STATUS:\n                return 0; /* clock resus not implemented */\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case CLK_GPOUT0_CTRL:\n                this.gpout0Ctrl = value;\n                break;\n            case CLK_GPOUT0_DIV:\n                this.gpout0Div = value;\n                break;\n            case CLK_GPOUT1_CTRL:\n                this.gpout1Ctrl = value;\n                break;\n            case CLK_GPOUT1_DIV:\n                this.gpout1Div = value;\n                break;\n            case CLK_GPOUT2_CTRL:\n                this.gpout2Ctrl = value;\n                break;\n            case CLK_GPOUT2_DIV:\n                this.gpout2Div = value;\n                break;\n            case CLK_GPOUT3_CTRL:\n                this.gpout3Ctrl = value;\n                break;\n            case CLK_GPOUT3_DIV:\n                this.gpout3Div = value;\n                break;\n            case CLK_REF_CTRL:\n                this.refCtrl = value;\n                break;\n            case CLK_REF_DIV:\n                this.refDiv = value;\n                break;\n            case CLK_SYS_CTRL:\n                this.sysCtrl = value;\n                break;\n            case CLK_SYS_DIV:\n                this.sysDiv = value;\n                break;\n            case CLK_PERI_CTRL:\n                this.periCtrl = value;\n                break;\n            case CLK_PERI_DIV:\n                this.periDiv = value;\n                break;\n            case CLK_USB_CTRL:\n                this.usbCtrl = value;\n                break;\n            case CLK_USB_DIV:\n                this.usbDiv = value;\n                break;\n            case CLK_ADC_CTRL:\n                this.adcCtrl = value;\n                break;\n            case CLK_ADC_DIV:\n                this.adcDiv = value;\n                break;\n            case CLK_RTC_CTRL:\n                this.rtcCtrl = value;\n                break;\n            case CLK_RTC_DIV:\n                this.rtcDiv = value;\n                break;\n            case CLK_SYS_RESUS_CTRL:\n                return; /* clock resus not implemented */\n            default:\n                super.writeUint32(offset, value);\n                break;\n        }\n    }\n}\n", "import { FIFO } from '../utils/fifo.js';\nimport { BasePeripheral } from './peripheral.js';\nconst IC_CON = 0x00; // I2C Control Register\nconst IC_TAR = 0x04; // I2C Target Address Register\nconst IC_SAR = 0x08; // I2C Slave Address Register\nconst IC_DATA_CMD = 0x10; // I2C Rx/Tx Data Buffer and Command Register\nconst IC_SS_SCL_HCNT = 0x14; // Standard Speed I2C Clock SCL High Count Register\nconst IC_SS_SCL_LCNT = 0x18; // Standard Speed I2C Clock SCL Low Count Register\nconst IC_FS_SCL_HCNT = 0x1c; // Fast Mode or Fast Mode Plus I2C Clock SCL High Count Register\nconst IC_FS_SCL_LCNT = 0x20; // Fast Mode or Fast Mode Plus I2C Clock SCL Low Count Register\nconst IC_INTR_STAT = 0x2c; // I2C Interrupt Status Register\nconst IC_INTR_MASK = 0x30; // I2C Interrupt Mask Register\nconst IC_RAW_INTR_STAT = 0x34; // I2C Raw Interrupt Status Register\nconst IC_RX_TL = 0x38; // I2C Receive FIFO Threshold Register\nconst IC_TX_TL = 0x3c; // I2C Transmit FIFO Threshold Register\nconst IC_CLR_INTR = 0x40; // Clear Combined and Individual Interrupt Register\nconst IC_CLR_RX_UNDER = 0x44; // Clear RX_UNDER Interrupt Register\nconst IC_CLR_RX_OVER = 0x48; // Clear RX_OVER Interrupt Register\nconst IC_CLR_TX_OVER = 0x4c; // Clear TX_OVER Interrupt Register\nconst IC_CLR_RD_REQ = 0x50; // Clear RD_REQ Interrupt Register\nconst IC_CLR_TX_ABRT = 0x54; // Clear TX_ABRT Interrupt Register\nconst IC_CLR_RX_DONE = 0x58; // Clear RX_DONE Interrupt Register\nconst IC_CLR_ACTIVITY = 0x5c; // Clear ACTIVITY Interrupt Register\nconst IC_CLR_STOP_DET = 0x60; // Clear STOP_DET Interrupt Register\nconst IC_CLR_START_DET = 0x64; // Clear START_DET Interrupt Register\nconst IC_CLR_GEN_CALL = 0x68; // Clear GEN_CALL Interrupt Register\nconst IC_ENABLE = 0x6c; // I2C ENABLE Register\nconst IC_STATUS = 0x70; // I2C STATUS Register\nconst IC_TXFLR = 0x74; // I2C Transmit FIFO Level Register\nconst IC_RXFLR = 0x78; // I2C Receive FIFO Level Register\nconst IC_SDA_HOLD = 0x7c; // I2C SDA Hold Time Length Register\nconst IC_TX_ABRT_SOURCE = 0x80; // I2C Transmit Abort Source Register\nconst IC_SLV_DATA_NACK_ONLY = 0x84; // Generate Slave Data NACK Register\nconst IC_DMA_CR = 0x88; // DMA Control Register\nconst IC_DMA_TDLR = 0x8c; // DMA Transmit Data Level Register\nconst IC_DMA_RDLR = 0x90; // DMA Transmit Data Level Register\nconst IC_SDA_SETUP = 0x94; // I2C SDA Setup Register\nconst IC_ACK_GENERAL_CALL = 0x98; // I2C ACK General Call Register\nconst IC_ENABLE_STATUS = 0x9c; // I2C Enable Status Register\nconst IC_FS_SPKLEN = 0xa0; // I2C SS, FS or FM+ spike suppression limit\nconst IC_CLR_RESTART_DET = 0xa8; // Clear RESTART_DET Interrupt Register\nconst IC_COMP_PARAM_1 = 0xf4; // Component Parameter Register 1\nconst IC_COMP_VERSION = 0xf8; // I2C Component Version Register\nconst IC_COMP_TYPE = 0xfc; // I2C Component Type Register\n// IC_CON bits:\nconst STOP_DET_IF_MASTER_ACTIVE = 1 << 10;\nconst RX_FIFO_FULL_HLD_CTRL = 1 << 9;\nconst TX_EMPTY_CTRL = 1 << 8;\nconst STOP_DET_IFADDRESSED = 1 << 7;\nconst IC_SLAVE_DISABLE = 1 << 6;\nconst IC_RESTART_EN = 1 << 5;\nconst IC_10BITADDR_MASTER = 1 << 4;\nconst IC_10BITADDR_SLAVE = 1 << 3;\nconst SPEED_SHIFT = 1;\nconst SPEED_MASK = 0x3;\nconst MASTER_MODE = 1 << 0;\n// IC_TAR bits:\nconst SPECIAL = 1 << 11;\nconst GC_OR_START = 1 << 10;\n// IC_STATUS bits:\nconst SLV_ACTIVITY = 1 << 6;\nconst MST_ACTIVITY = 1 << 5;\nconst RFF = 1 << 4;\nconst RFNE = 1 << 3;\nconst TFE = 1 << 2;\nconst TFNF = 1 << 1;\nconst ACTIVITY = 1 << 0;\n// IC_ENABLE bits:\nconst TX_CMD_BLOCK = 1 << 2;\nconst ABORT = 1 << 1;\nconst ENABLE = 1 << 0;\n// IC_TX_ABRT_SOURCE bits:\nconst TX_FLUSH_CNT_MASK = 0x1ff;\nconst TX_FLUSH_CNT_SHIFT = 23;\nconst ABRT_USER_ABRT = 1 << 16;\nconst ABRT_SLVRD_INT = 1 << 15;\nconst ABRT_SLV_ARBLOST = 1 << 14;\nconst ABRT_SLVFLUSH_TXFIFO = 1 << 13;\nconst ARB_LOST = 1 << 12;\nconst ABRT_MASTER_DIS = 1 << 11;\nconst ABRT_10B_RD_NORSTRT = 1 << 10;\nconst ABRT_SBYTE_NORSTRT = 1 << 9;\nconst ABRT_HS_NORSTRT = 1 << 8;\nconst ABRT_SBYTE_ACKDET = 1 << 7;\nconst ABRT_HS_ACKDET = 1 << 6;\nconst ABRT_GCALL_READ = 1 << 5;\nconst ABRT_GCALL_NOACK = 1 << 4;\nconst ABRT_TXDATA_NOACK = 1 << 3;\nconst ABRT_10ADDR2_NOACK = 1 << 2;\nconst ABRT_10ADDR1_NOACK = 1 << 1;\nconst ABRT_7B_ADDR_NOACK = 1 << 0;\n/* Connection parameters */\nexport var I2CMode;\n(function (I2CMode) {\n    I2CMode[I2CMode[\"Write\"] = 0] = \"Write\";\n    I2CMode[I2CMode[\"Read\"] = 1] = \"Read\";\n})(I2CMode || (I2CMode = {}));\nexport var I2CSpeed;\n(function (I2CSpeed) {\n    I2CSpeed[I2CSpeed[\"Invalid\"] = 0] = \"Invalid\";\n    /* standard mode (100 kbit/s) */\n    I2CSpeed[I2CSpeed[\"Standard\"] = 1] = \"Standard\";\n    /* fast mode (<=400 kbit/s) or fast mode plus (<=1000Kbit/s) */\n    I2CSpeed[I2CSpeed[\"FastMode\"] = 2] = \"FastMode\";\n    /*  high speed mode (3.4 Mbit/s) */\n    I2CSpeed[I2CSpeed[\"HighSpeedMode\"] = 3] = \"HighSpeedMode\";\n})(I2CSpeed || (I2CSpeed = {}));\nvar I2CState;\n(function (I2CState) {\n    I2CState[I2CState[\"Idle\"] = 0] = \"Idle\";\n    I2CState[I2CState[\"Start\"] = 1] = \"Start\";\n    I2CState[I2CState[\"Connect\"] = 2] = \"Connect\";\n    I2CState[I2CState[\"Connected\"] = 3] = \"Connected\";\n    I2CState[I2CState[\"Stop\"] = 4] = \"Stop\";\n})(I2CState || (I2CState = {}));\n// Interrupts\nconst R_RESTART_DET = 1 << 12; // Slave mode only\nconst R_GEN_CALL = 1 << 11;\nconst R_START_DET = 1 << 10;\nconst R_STOP_DET = 1 << 9;\nconst R_ACTIVITY = 1 << 8;\nconst R_RX_DONE = 1 << 7;\nconst R_TX_ABRT = 1 << 6;\nconst R_RD_REQ = 1 << 5;\nconst R_TX_EMPTY = 1 << 4;\nconst R_TX_OVER = 1 << 3;\nconst R_RX_FULL = 1 << 2;\nconst R_RX_OVER = 1 << 1;\nconst R_RX_UNDER = 1 << 0;\n// FIFO entry bits\nconst FIRST_DATA_BYTE = 1 << 10;\nconst RESTART = 1 << 10;\nconst STOP = 1 << 9;\nconst CMD = 1 << 8; // 0 for write, 1 for read\nexport class RPI2C extends BasePeripheral {\n    get intStatus() {\n        return this.intRaw & this.intEnable;\n    }\n    get speed() {\n        return ((this.control >> SPEED_SHIFT) & SPEED_MASK);\n    }\n    get sclLowPeriod() {\n        return this.speed === I2CSpeed.Standard ? this.ssClockLowPeriod : this.fsClockLowPeriod;\n    }\n    get sclHighPeriod() {\n        return this.speed === I2CSpeed.Standard ? this.ssClockHighPeriod : this.fsClockHighPeriod;\n    }\n    get masterBits() {\n        return this.control & IC_10BITADDR_MASTER ? 10 : 7;\n    }\n    constructor(rp2040, name, irq) {\n        super(rp2040, name);\n        this.irq = irq;\n        this.state = I2CState.Idle;\n        this.busy = false;\n        this.stop = false;\n        this.pendingRestart = false;\n        this.firstByte = false;\n        this.rxFIFO = new FIFO(16);\n        this.txFIFO = new FIFO(16);\n        // user provided callbacks\n        this.onStart = () => this.completeStart();\n        this.onConnect = () => this.completeConnect(false);\n        this.onWriteByte = () => this.completeWrite(false);\n        this.onReadByte = () => this.completeRead(0xff);\n        this.onStop = () => this.completeStop();\n        this.enable = 0;\n        this.rxThreshold = 0;\n        this.txThreshold = 0;\n        this.control = IC_SLAVE_DISABLE | IC_RESTART_EN | (I2CSpeed.FastMode << SPEED_SHIFT) | MASTER_MODE;\n        this.ssClockHighPeriod = 0x0028;\n        this.ssClockLowPeriod = 0x002f;\n        this.fsClockHighPeriod = 0x0006;\n        this.fsClockLowPeriod = 0x000d;\n        this.targetAddress = 0x55;\n        this.slaveAddress = 0x55;\n        this.abortSource = 0;\n        this.intRaw = 0;\n        this.intEnable = 0;\n        this.spikelen = 0x07;\n    }\n    checkInterrupts() {\n        this.rp2040.setInterrupt(this.irq, !!this.intStatus);\n    }\n    clearInterrupts(mask) {\n        if (this.intRaw & mask) {\n            this.intRaw &= ~mask;\n            this.checkInterrupts();\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    setInterrupts(mask) {\n        if (!(this.intRaw & mask)) {\n            this.intRaw |= mask;\n            this.checkInterrupts();\n        }\n    }\n    abort(reason) {\n        this.abortSource &= ~TX_FLUSH_CNT_MASK;\n        this.abortSource |= reason | (this.txFIFO.itemCount << TX_FLUSH_CNT_SHIFT);\n        this.txFIFO.reset();\n        this.setInterrupts(R_TX_ABRT);\n    }\n    nextCommand() {\n        const enabled = this.enable & ENABLE;\n        const blocked = this.enable & TX_CMD_BLOCK;\n        if (this.txFIFO.empty || this.busy || blocked || !enabled) {\n            return;\n        }\n        this.busy = true;\n        const restart = !!(this.txFIFO.peek() & RESTART) && !this.pendingRestart && !this.stop;\n        if (this.state === I2CState.Idle || restart) {\n            this.pendingRestart = restart;\n            this.stop = false;\n            this.state = I2CState.Start;\n            this.onStart(restart);\n            return;\n        }\n        this.pendingRestart = false;\n        const cmd = this.txFIFO.pull();\n        const readMode = !!(cmd & CMD);\n        this.stop = !!(cmd & STOP);\n        if (readMode) {\n            this.onReadByte(!this.stop);\n        }\n        else {\n            this.onWriteByte(cmd & 0xff);\n        }\n        if (this.txFIFO.itemCount <= this.txThreshold) {\n            this.setInterrupts(R_TX_EMPTY);\n        }\n    }\n    pushRX(value) {\n        if (this.rxFIFO.full) {\n            this.setInterrupts(R_RX_OVER);\n            return;\n        }\n        this.rxFIFO.push(value);\n        if (this.rxFIFO.itemCount > this.rxThreshold) {\n            this.setInterrupts(R_RX_FULL);\n        }\n    }\n    completeStart() {\n        if (this.txFIFO.empty || this.state !== I2CState.Start || this.stop) {\n            this.onStop();\n            return;\n        }\n        const mode = this.txFIFO.peek() & CMD ? I2CMode.Read : I2CMode.Write;\n        this.state = I2CState.Connect;\n        this.setInterrupts(R_START_DET);\n        const addressMask = this.masterBits === 10 ? 0x3ff : 0xff;\n        this.onConnect(this.targetAddress & addressMask, mode);\n    }\n    completeConnect(ack, nackByte = 0) {\n        if (!ack || this.stop) {\n            if (!ack) {\n                if (!this.targetAddress) {\n                    this.abort(ABRT_GCALL_NOACK);\n                }\n                else if (this.control & IC_10BITADDR_MASTER) {\n                    this.abort(nackByte === 0 ? ABRT_10ADDR1_NOACK : ABRT_10ADDR2_NOACK);\n                }\n                else {\n                    this.abort(ABRT_7B_ADDR_NOACK);\n                }\n            }\n            this.state = I2CState.Stop;\n            this.onStop();\n            return;\n        }\n        this.state = I2CState.Connected;\n        this.busy = false;\n        this.firstByte = true;\n        this.nextCommand();\n    }\n    completeWrite(ack) {\n        if (!ack || this.stop) {\n            if (!ack) {\n                this.abort(ABRT_TXDATA_NOACK);\n            }\n            this.state = I2CState.Stop;\n            this.onStop();\n            return;\n        }\n        this.busy = false;\n        this.nextCommand();\n    }\n    completeRead(value) {\n        this.pushRX(value | (this.firstByte ? FIRST_DATA_BYTE : 0));\n        if (this.stop) {\n            this.state = I2CState.Stop;\n            this.onStop();\n            return;\n        }\n        this.firstByte = false;\n        this.busy = false;\n        this.nextCommand();\n    }\n    completeStop() {\n        this.state = I2CState.Idle;\n        this.setInterrupts(R_STOP_DET);\n        this.busy = false;\n        this.pendingRestart = false;\n        if (this.enable & ABORT) {\n            this.enable &= ~ABORT;\n        }\n        else {\n            this.nextCommand();\n        }\n    }\n    arbitrationLost() {\n        this.state = I2CState.Idle;\n        this.busy = false;\n        this.abort(ARB_LOST);\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case IC_CON:\n                return this.control;\n            case IC_TAR:\n                return this.targetAddress;\n            case IC_SAR:\n                return this.slaveAddress;\n            case IC_DATA_CMD:\n                if (this.rxFIFO.empty) {\n                    this.setInterrupts(R_RX_UNDER);\n                    return 0;\n                }\n                this.clearInterrupts(R_RX_FULL);\n                return this.rxFIFO.pull();\n            case IC_SS_SCL_HCNT:\n                return this.ssClockHighPeriod;\n            case IC_SS_SCL_LCNT:\n                return this.ssClockLowPeriod;\n            case IC_FS_SCL_HCNT:\n                return this.fsClockHighPeriod;\n            case IC_FS_SCL_LCNT:\n                return this.fsClockLowPeriod;\n            case IC_INTR_STAT:\n                return this.intStatus;\n            case IC_INTR_MASK:\n                return this.intEnable;\n            case IC_RAW_INTR_STAT:\n                return this.intRaw;\n            case IC_RX_TL:\n                return this.rxThreshold;\n            case IC_TX_TL:\n                return this.txThreshold;\n            case IC_CLR_INTR:\n                this.abortSource &= ABRT_SBYTE_NORSTRT; // Clear IC_TX_ABRT_SOURCE, expect for bit 9\n                return this.clearInterrupts(R_RX_UNDER |\n                    R_RX_OVER |\n                    R_TX_OVER |\n                    R_RD_REQ |\n                    R_TX_ABRT |\n                    R_RX_DONE |\n                    R_ACTIVITY |\n                    R_STOP_DET |\n                    R_START_DET |\n                    R_GEN_CALL);\n            case IC_CLR_RX_UNDER:\n                return this.clearInterrupts(R_RX_UNDER);\n            case IC_CLR_RX_OVER:\n                return this.clearInterrupts(R_RX_OVER);\n            case IC_CLR_TX_OVER:\n                return this.clearInterrupts(R_TX_OVER);\n            case IC_CLR_RD_REQ:\n                return this.clearInterrupts(R_RD_REQ);\n            case IC_CLR_TX_ABRT:\n                this.abortSource &= ABRT_SBYTE_NORSTRT; // Clear IC_TX_ABRT_SOURCE, expect for bit 9\n                return this.clearInterrupts(R_TX_ABRT);\n            case IC_CLR_RX_DONE:\n                return this.clearInterrupts(R_RX_DONE);\n            case IC_CLR_ACTIVITY:\n                return this.clearInterrupts(R_ACTIVITY);\n            case IC_CLR_STOP_DET:\n                return this.clearInterrupts(R_STOP_DET);\n            case IC_CLR_START_DET:\n                return this.clearInterrupts(R_START_DET);\n            case IC_CLR_GEN_CALL:\n                return this.clearInterrupts(R_GEN_CALL);\n            case IC_ENABLE:\n                return this.enable;\n            case IC_STATUS:\n                return ((this.state !== I2CState.Idle ? MST_ACTIVITY | ACTIVITY : 0) |\n                    (this.rxFIFO.full ? RFF : 0) |\n                    (!this.rxFIFO.empty ? RFNE : 0) |\n                    (this.txFIFO.empty ? TFE : 0) |\n                    (!this.txFIFO.full ? TFNF : 0));\n            case IC_TXFLR:\n                return this.txFIFO.itemCount;\n            case IC_RXFLR:\n                return this.rxFIFO.itemCount;\n            case IC_SDA_HOLD:\n                return 0x01;\n            case IC_TX_ABRT_SOURCE: {\n                const value = this.abortSource;\n                this.abortSource &= ABRT_SBYTE_NORSTRT; // Clear IC_TX_ABRT_SOURCE, expect for bit 9\n                return value;\n            }\n            case IC_ENABLE_STATUS:\n                // I2C status - read only. bit 0 reflects IC_ENABLE, bit 1,2 relate to i2c slave mode.\n                return this.enable & 0x1;\n            case IC_FS_SPKLEN:\n                return this.spikelen & 0xff;\n            case IC_COMP_PARAM_1:\n                // From the datasheet:\n                // Note This register is not implemented and therefore reads as 0. If it was implemented it would be a constant read-only\n                // register that contains encoded information about the component's parameter settings.\n                return 0;\n            case IC_COMP_VERSION:\n                return 0x3230312a;\n            case IC_COMP_TYPE:\n                return 0x44570140;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case IC_CON:\n                if (((value >> SPEED_SHIFT) & SPEED_MASK) === I2CSpeed.Invalid) {\n                    value = (value & ~(SPEED_MASK << SPEED_SHIFT)) | (I2CSpeed.HighSpeedMode << SPEED_SHIFT);\n                }\n                this.control = value;\n                return;\n            case IC_TAR:\n                this.targetAddress = value & 0x3ff;\n                return;\n            case IC_SAR:\n                this.slaveAddress = value & 0x3ff;\n                return;\n            case IC_DATA_CMD:\n                if (this.txFIFO.full) {\n                    this.setInterrupts(R_TX_OVER);\n                }\n                else {\n                    this.txFIFO.push(value);\n                    this.clearInterrupts(R_TX_EMPTY);\n                    this.nextCommand();\n                }\n                return;\n            case IC_SS_SCL_HCNT:\n                this.ssClockHighPeriod = value & 0xffff;\n                return;\n            case IC_SS_SCL_LCNT:\n                this.ssClockLowPeriod = value & 0xffff;\n                return;\n            case IC_FS_SCL_HCNT:\n                this.fsClockHighPeriod = value & 0xffff;\n                return;\n            case IC_FS_SCL_LCNT:\n                this.fsClockLowPeriod = value & 0xffff;\n                return;\n            case IC_SDA_HOLD:\n                if (!(value & ENABLE)) {\n                    if (value != 0x1) {\n                        this.warn('Unimplemented write to IC_SDA_HOLD');\n                    }\n                }\n                return;\n            case IC_RX_TL:\n                this.rxThreshold = value & 0xff;\n                if (this.rxThreshold > this.rxFIFO.size) {\n                    this.rxThreshold = this.rxFIFO.size;\n                }\n                return;\n            case IC_TX_TL:\n                this.txThreshold = value & 0xff;\n                if (this.txThreshold > this.txFIFO.size) {\n                    this.txThreshold = this.txFIFO.size;\n                }\n                return;\n            case IC_ENABLE:\n                // ABORT bit can only be set by software, not cleared.\n                value |= this.enable & ABORT;\n                if (value & ABORT) {\n                    if (this.state === I2CState.Idle) {\n                        value &= ~ABORT;\n                    }\n                    else {\n                        this.abort(ABRT_USER_ABRT);\n                        this.stop = true;\n                    }\n                }\n                if (!(value & ENABLE)) {\n                    this.txFIFO.reset();\n                    this.rxFIFO.reset();\n                }\n                this.enable = value;\n                this.nextCommand(); // TX_CMD_BLOCK may have changed\n                return;\n            case IC_FS_SPKLEN:\n                if (!(value & ENABLE) && value > 0) {\n                    this.spikelen = value;\n                }\n                return;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\nconst GPIO_CTRL_LAST = 0x0ec;\nconst INTR0 = 0xf0;\nconst PROC0_INTE0 = 0x100;\nconst PROC0_INTF0 = 0x110;\nconst PROC0_INTS0 = 0x120;\nconst PROC0_INTS3 = 0x12c;\nexport class RPIO extends BasePeripheral {\n    constructor(rp2040, name) {\n        super(rp2040, name);\n    }\n    getPinFromOffset(offset) {\n        const gpioIndex = offset >>> 3;\n        return {\n            gpio: this.rp2040.gpio[gpioIndex],\n            isCtrl: !!(offset & 0x4),\n        };\n    }\n    readUint32(offset) {\n        if (offset <= GPIO_CTRL_LAST) {\n            const { gpio, isCtrl } = this.getPinFromOffset(offset);\n            return isCtrl ? gpio.ctrl : gpio.status;\n        }\n        if (offset >= INTR0 && offset <= PROC0_INTS3) {\n            const startIndex = (offset & 0xf) * 2;\n            const register = offset & ~0xf;\n            const { gpio } = this.rp2040;\n            let result = 0;\n            for (let index = 7; index >= 0; index--) {\n                const pin = gpio[index + startIndex];\n                if (!pin) {\n                    continue;\n                }\n                result <<= 4;\n                switch (register) {\n                    case INTR0:\n                        result |= pin.irqStatus;\n                        break;\n                    case PROC0_INTE0:\n                        result |= pin.irqEnableMask;\n                        break;\n                    case PROC0_INTF0:\n                        result |= pin.irqForceMask;\n                        break;\n                    case PROC0_INTS0:\n                        result |= (pin.irqStatus & pin.irqEnableMask) | pin.irqForceMask;\n                        break;\n                }\n            }\n            return result;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        if (offset <= GPIO_CTRL_LAST) {\n            const { gpio, isCtrl } = this.getPinFromOffset(offset);\n            if (isCtrl) {\n                gpio.ctrl = value;\n                gpio.checkForUpdates();\n            }\n            return;\n        }\n        if (offset >= INTR0 && offset <= PROC0_INTS3) {\n            const startIndex = (offset & 0xf) * 2;\n            const register = offset & ~0xf;\n            const { gpio } = this.rp2040;\n            for (let index = 0; index < 8; index++) {\n                const pin = gpio[index + startIndex];\n                if (!pin) {\n                    continue;\n                }\n                const pinValue = (value >> (index * 4)) & 0xf;\n                const pinRawWriteValue = (this.rawWriteValue >> (index * 4)) & 0xf;\n                switch (register) {\n                    case INTR0:\n                        pin.updateIRQValue(pinRawWriteValue);\n                        break;\n                    case PROC0_INTE0:\n                        if (pin.irqEnableMask !== pinValue) {\n                            pin.irqEnableMask = pinValue;\n                            this.rp2040.updateIOInterrupt();\n                        }\n                        break;\n                    case PROC0_INTF0:\n                        if (pin.irqForceMask !== pinValue) {\n                            pin.irqForceMask = pinValue;\n                            this.rp2040.updateIOInterrupt();\n                        }\n                        break;\n                }\n            }\n            return;\n        }\n        super.writeUint32(offset, value);\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\nconst VOLTAGE_SELECT = 0;\nconst GPIO_FIRST = 0x4;\nconst GPIO_LAST = 0x78;\nconst QSPI_FIRST = 0x4;\nconst QSPI_LAST = 0x18;\nexport class RPPADS extends BasePeripheral {\n    constructor(rp2040, name, bank) {\n        super(rp2040, name);\n        this.bank = bank;\n        this.voltageSelect = 0;\n        this.firstPadRegister = this.bank === 'qspi' ? QSPI_FIRST : GPIO_FIRST;\n        this.lastPadRegister = this.bank === 'qspi' ? QSPI_LAST : GPIO_LAST;\n    }\n    getPinFromOffset(offset) {\n        const gpioIndex = (offset - this.firstPadRegister) >>> 2;\n        if (this.bank === 'qspi') {\n            return this.rp2040.qspi[gpioIndex];\n        }\n        else {\n            return this.rp2040.gpio[gpioIndex];\n        }\n    }\n    readUint32(offset) {\n        if (offset >= this.firstPadRegister && offset <= this.lastPadRegister) {\n            const gpio = this.getPinFromOffset(offset);\n            return gpio.padValue;\n        }\n        switch (offset) {\n            case VOLTAGE_SELECT:\n                return this.voltageSelect;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        if (offset >= this.firstPadRegister && offset <= this.lastPadRegister) {\n            const gpio = this.getPinFromOffset(offset);\n            const oldInputEnable = gpio.inputEnable;\n            gpio.padValue = value;\n            gpio.checkForUpdates();\n            if (oldInputEnable !== gpio.inputEnable) {\n                gpio.refreshInput();\n            }\n            return;\n        }\n        switch (offset) {\n            case VOLTAGE_SELECT:\n                this.voltageSelect = value & 1;\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "export var TimerMode;\n(function (TimerMode) {\n    TimerMode[TimerMode[\"Increment\"] = 0] = \"Increment\";\n    TimerMode[TimerMode[\"Decrement\"] = 1] = \"Decrement\";\n    TimerMode[TimerMode[\"ZigZag\"] = 2] = \"ZigZag\";\n})(TimerMode || (TimerMode = {}));\nexport class Timer32 {\n    constructor(clock, baseFreq) {\n        this.clock = clock;\n        this.baseFreq = baseFreq;\n        this.baseValue = 0;\n        this.baseNanos = 0;\n        this.topValue = 0xffffffff;\n        this.prescalerValue = 1;\n        this.timerMode = TimerMode.Increment;\n        this.enabled = true;\n        this.listeners = [];\n    }\n    reset() {\n        this.baseNanos = this.clock.nanos;\n        this.baseValue = 0;\n        this.updated();\n    }\n    set(value, zigZagDown = false) {\n        this.baseValue = zigZagDown ? this.topValue * 2 - value : value;\n        this.baseNanos = this.clock.nanos;\n        this.updated();\n    }\n    /**\n     * Advances the counter by the given amount. Note that this will\n     * decrease the counter if the timer is running in Decrement mode.\n     *\n     * @param delta The value to add to the counter. Can be negative.\n     */\n    advance(delta) {\n        this.baseValue += delta;\n    }\n    get rawCounter() {\n        const { baseFreq, prescalerValue, baseNanos, baseValue, enabled, timerMode } = this;\n        if (!baseFreq || !prescalerValue || !enabled) {\n            return this.baseValue;\n        }\n        const zigzag = timerMode == TimerMode.ZigZag;\n        const ticks = ((this.clock.nanos - baseNanos) / 1e9) * (baseFreq / prescalerValue);\n        const topModulo = zigzag ? this.topValue * 2 : this.topValue + 1;\n        const delta = timerMode == TimerMode.Decrement ? topModulo - (ticks % topModulo) : ticks;\n        let currentValue = Math.round(baseValue + delta);\n        if (this.topValue != 0xffffffff) {\n            currentValue %= topModulo;\n        }\n        return currentValue;\n    }\n    get counter() {\n        let currentValue = this.rawCounter;\n        if (this.timerMode == TimerMode.ZigZag && currentValue > this.topValue) {\n            currentValue = this.topValue * 2 - currentValue;\n        }\n        return currentValue >>> 0;\n    }\n    get top() {\n        return this.topValue;\n    }\n    set top(value) {\n        const { counter } = this;\n        this.topValue = value;\n        this.set(counter <= this.topValue ? counter : 0);\n    }\n    get frequency() {\n        return this.baseFreq;\n    }\n    set frequency(value) {\n        this.baseValue = this.counter;\n        this.baseNanos = this.clock.nanos;\n        this.baseFreq = value;\n        this.updated();\n    }\n    get prescaler() {\n        return this.prescalerValue;\n    }\n    set prescaler(value) {\n        this.baseValue = this.counter;\n        this.baseNanos = this.clock.nanos;\n        this.enabled = this.prescalerValue !== 0;\n        this.prescalerValue = value;\n        this.updated();\n    }\n    toNanos(cycles) {\n        const { baseFreq, prescalerValue } = this;\n        return (cycles * 1e9) / (baseFreq / prescalerValue);\n    }\n    get enable() {\n        return this.enabled;\n    }\n    set enable(value) {\n        if (value !== this.enabled) {\n            if (value) {\n                this.baseNanos = this.clock.nanos;\n            }\n            else {\n                this.baseValue = this.counter;\n            }\n            this.enabled = value;\n            this.updated();\n        }\n    }\n    get mode() {\n        return this.timerMode;\n    }\n    set mode(value) {\n        if (this.timerMode !== value) {\n            const { counter } = this;\n            this.timerMode = value;\n            this.set(counter);\n        }\n    }\n    updated() {\n        for (const listener of this.listeners) {\n            listener();\n        }\n    }\n}\nexport class Timer32PeriodicAlarm {\n    constructor(timer, callback) {\n        this.timer = timer;\n        this.callback = callback;\n        this.targetValue = 0;\n        this.enabled = false;\n        this.handleAlarm = () => {\n            this.callback();\n            if (this.enabled && this.timer.enable) {\n                this.schedule();\n            }\n        };\n        this.update = () => {\n            this.cancel();\n            if (this.enabled && this.timer.enable) {\n                this.schedule();\n            }\n        };\n        this.clockAlarm = this.timer.clock.createAlarm(this.handleAlarm);\n        timer.listeners.push(this.update);\n    }\n    get enable() {\n        return this.enabled;\n    }\n    set enable(value) {\n        if (value !== this.enabled) {\n            this.enabled = value;\n            if (value && this.timer.enable) {\n                this.schedule();\n            }\n            else {\n                this.cancel();\n            }\n        }\n    }\n    get target() {\n        return this.targetValue;\n    }\n    set target(value) {\n        if (value === this.targetValue) {\n            return;\n        }\n        this.targetValue = value;\n        if (this.enabled && this.timer.enable) {\n            this.cancel();\n            this.schedule();\n        }\n    }\n    schedule() {\n        const { timer, targetValue } = this;\n        const { top, mode, rawCounter } = timer;\n        let cycleDelta = targetValue - rawCounter;\n        if (mode === TimerMode.ZigZag && cycleDelta < 0) {\n            if (cycleDelta < -top) {\n                cycleDelta += 2 * top;\n            }\n            else {\n                cycleDelta = top * 2 - targetValue - rawCounter;\n            }\n        }\n        if (top != 0xffffffff) {\n            if (cycleDelta <= 0) {\n                cycleDelta += top + 1;\n            }\n            if (targetValue > top) {\n                // Skip alarm\n                return;\n            }\n        }\n        if (mode === TimerMode.Decrement) {\n            cycleDelta = top + 1 - cycleDelta;\n        }\n        const cyclesToAlarm = cycleDelta >>> 0;\n        const nanosToAlarm = timer.toNanos(cyclesToAlarm);\n        this.clockAlarm.schedule(nanosToAlarm);\n    }\n    cancel() {\n        this.clockAlarm.cancel();\n    }\n}\n", "import { MAX_HARDWARE_IRQ } from '../irq.js';\nimport { Timer32, Timer32PeriodicAlarm, TimerMode } from '../utils/timer32.js';\nimport { BasePeripheral } from './peripheral.js';\nexport const CPUID = 0xd00;\nexport const ICSR = 0xd04;\nexport const VTOR = 0xd08;\nexport const SHPR2 = 0xd1c;\nexport const SHPR3 = 0xd20;\nconst SYST_CSR = 0x010; // SysTick Control and Status Register\nconst SYST_RVR = 0x014; // SysTick Reload Value Register\nconst SYST_CVR = 0x018; // SysTick Current Value Register\nconst SYST_CALIB = 0x01c; // SysTick Calibration Value Register\nconst NVIC_ISER = 0x100; // Interrupt Set-Enable Register\nconst NVIC_ICER = 0x180; // Interrupt Clear-Enable Register\nconst NVIC_ISPR = 0x200; // Interrupt Set-Pending Register\nconst NVIC_ICPR = 0x280; // Interrupt Clear-Pending Register\n// Interrupt priority registers:\nconst NVIC_IPR0 = 0x400;\nconst NVIC_IPR1 = 0x404;\nconst NVIC_IPR2 = 0x408;\nconst NVIC_IPR3 = 0x40c;\nconst NVIC_IPR4 = 0x410;\nconst NVIC_IPR5 = 0x414;\nconst NVIC_IPR6 = 0x418;\nconst NVIC_IPR7 = 0x41c;\n/** ICSR Bits */\nconst NMIPENDSET = 1 << 31;\nconst PENDSVSET = 1 << 28;\nconst PENDSVCLR = 1 << 27;\nconst PENDSTSET = 1 << 26;\nconst PENDSTCLR = 1 << 25;\nconst ISRPREEMPT = 1 << 23;\nconst ISRPENDING = 1 << 22;\nconst VECTPENDING_MASK = 0x1ff;\nconst VECTPENDING_SHIFT = 12;\nconst VECTACTIVE_MASK = 0x1ff;\nconst VECTACTIVE_SHIFT = 0;\n/** PPB stands for Private Periphral Bus.\n * These are peripherals that are part of the ARM Cortex Core, and there's one copy for each processor core.\n *\n * Included peripheral: NVIC, SysTick timer\n */\nexport class RPPPB extends BasePeripheral {\n    constructor(rp2040, name) {\n        super(rp2040, name);\n        // Systick\n        this.systickCountFlag = false;\n        this.systickClkSource = false;\n        this.systickIntEnable = false;\n        this.systickReload = 0;\n        this.systickTimer = new Timer32(this.rp2040.clock, this.rp2040.clkSys);\n        this.systickAlarm = new Timer32PeriodicAlarm(this.systickTimer, () => {\n            this.systickCountFlag = true;\n            if (this.systickIntEnable) {\n                this.rp2040.core.pendingSystick = true;\n                this.rp2040.core.interruptsUpdated = true;\n            }\n            this.systickTimer.set(this.systickReload);\n        });\n        this.systickTimer.top = 0xffffff;\n        this.systickTimer.mode = TimerMode.Decrement;\n        this.systickAlarm.target = 0;\n        this.systickAlarm.enable = true;\n        this.reset();\n    }\n    reset() {\n        this.writeUint32(SYST_CSR, 0);\n        this.writeUint32(SYST_RVR, 0xffffff);\n        this.systickTimer.set(0xffffff);\n    }\n    readUint32(offset) {\n        const { rp2040 } = this;\n        const { core } = rp2040;\n        switch (offset) {\n            case CPUID:\n                return 0x410cc601; /* Verified against actual hardware */\n            case ICSR: {\n                const pendingInterrupts = core.pendingInterrupts || core.pendingPendSV || core.pendingSystick || core.pendingSVCall;\n                const vectPending = core.vectPending;\n                return ((core.pendingNMI ? NMIPENDSET : 0) |\n                    (core.pendingPendSV ? PENDSVSET : 0) |\n                    (core.pendingSystick ? PENDSTSET : 0) |\n                    (pendingInterrupts ? ISRPENDING : 0) |\n                    (vectPending << VECTPENDING_SHIFT) |\n                    ((core.IPSR & VECTACTIVE_MASK) << VECTACTIVE_SHIFT));\n            }\n            case VTOR:\n                return core.VTOR;\n            /* NVIC */\n            case NVIC_ISPR:\n                return core.pendingInterrupts >>> 0;\n            case NVIC_ICPR:\n                return core.pendingInterrupts >>> 0;\n            case NVIC_ISER:\n                return core.enabledInterrupts >>> 0;\n            case NVIC_ICER:\n                return core.enabledInterrupts >>> 0;\n            case NVIC_IPR0:\n            case NVIC_IPR1:\n            case NVIC_IPR2:\n            case NVIC_IPR3:\n            case NVIC_IPR4:\n            case NVIC_IPR5:\n            case NVIC_IPR6:\n            case NVIC_IPR7: {\n                const regIndex = (offset - NVIC_IPR0) >> 2;\n                let result = 0;\n                for (let byteIndex = 0; byteIndex < 4; byteIndex++) {\n                    const interruptNumber = regIndex * 4 + byteIndex;\n                    for (let priority = 0; priority < core.interruptPriorities.length; priority++) {\n                        if (core.interruptPriorities[priority] & (1 << interruptNumber)) {\n                            result |= priority << (8 * byteIndex + 6);\n                        }\n                    }\n                }\n                return result;\n            }\n            case SHPR2:\n                return core.SHPR2;\n            case SHPR3:\n                return core.SHPR3;\n            /* SysTick */\n            case SYST_CSR: {\n                const countFlagValue = this.systickCountFlag ? 1 << 16 : 0;\n                const clkSourceValue = this.systickClkSource ? 1 << 2 : 0;\n                const tickIntValue = this.systickIntEnable ? 1 << 1 : 0;\n                const enableFlagValue = this.systickTimer.enable ? 1 << 0 : 0;\n                this.systickCountFlag = false;\n                return countFlagValue | clkSourceValue | tickIntValue | enableFlagValue;\n            }\n            case SYST_CVR:\n                return this.systickTimer.counter;\n            case SYST_RVR:\n                return this.systickReload;\n            case SYST_CALIB:\n                return 0x0000270f;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        const { rp2040 } = this;\n        const { core } = rp2040;\n        const hardwareInterruptMask = (1 << MAX_HARDWARE_IRQ) - 1;\n        switch (offset) {\n            case ICSR:\n                if (value & NMIPENDSET) {\n                    core.pendingNMI = true;\n                    core.interruptsUpdated = true;\n                }\n                if (value & PENDSVSET) {\n                    core.pendingPendSV = true;\n                    core.interruptsUpdated = true;\n                }\n                if (value & PENDSVCLR) {\n                    core.pendingPendSV = false;\n                }\n                if (value & PENDSTSET) {\n                    core.pendingSystick = true;\n                    core.interruptsUpdated = true;\n                }\n                if (value & PENDSTCLR) {\n                    core.pendingSystick = false;\n                }\n                return;\n            case VTOR:\n                core.VTOR = value;\n                return;\n            /* NVIC */\n            case NVIC_ISPR:\n                core.pendingInterrupts |= value;\n                core.interruptsUpdated = true;\n                return;\n            case NVIC_ICPR:\n                core.pendingInterrupts &= ~value | hardwareInterruptMask;\n                return;\n            case NVIC_ISER:\n                core.enabledInterrupts |= value;\n                core.interruptsUpdated = true;\n                return;\n            case NVIC_ICER:\n                core.enabledInterrupts &= ~value;\n                return;\n            case NVIC_IPR0:\n            case NVIC_IPR1:\n            case NVIC_IPR2:\n            case NVIC_IPR3:\n            case NVIC_IPR4:\n            case NVIC_IPR5:\n            case NVIC_IPR6:\n            case NVIC_IPR7: {\n                const regIndex = (offset - NVIC_IPR0) >> 2;\n                for (let byteIndex = 0; byteIndex < 4; byteIndex++) {\n                    const interruptNumber = regIndex * 4 + byteIndex;\n                    const newPriority = (value >> (8 * byteIndex + 6)) & 0x3;\n                    for (let priority = 0; priority < core.interruptPriorities.length; priority++) {\n                        core.interruptPriorities[priority] &= ~(1 << interruptNumber);\n                    }\n                    core.interruptPriorities[newPriority] |= 1 << interruptNumber;\n                }\n                core.interruptsUpdated = true;\n                return;\n            }\n            case SHPR2:\n                core.SHPR2 = value;\n                return;\n            case SHPR3:\n                core.SHPR3 = value;\n                return;\n            // SysTick\n            case SYST_CSR:\n                this.systickClkSource = value & (1 << 2) ? true : false;\n                this.systickIntEnable = value & (1 << 1) ? true : false;\n                this.systickTimer.enable = value & (1 << 0) ? true : false;\n                return;\n            case SYST_CVR:\n                this.systickTimer.set(0);\n                return;\n            case SYST_RVR:\n                this.systickReload = value;\n                return;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "import { IRQ } from '../irq.js';\nimport { Timer32, Timer32PeriodicAlarm, TimerMode } from '../utils/timer32.js';\nimport { DREQChannel } from './dma.js';\nimport { BasePeripheral } from './peripheral.js';\n/** Control and status register */\nconst CHn_CSR = 0x00;\n/**\n * INT and FRAC form a fixed-point fractional number.\n * Counting rate is system clock frequency divided by this number.\n * Fractional division uses simple 1st-order sigma-delta.\n */\nconst CHn_DIV = 0x04;\n/** Direct access to the PWM counter */\nconst CHn_CTR = 0x08;\n/** Counter compare values */\nconst CHn_CC = 0x0c;\n/** Counter wrap value */\nconst CHn_TOP = 0x10;\n/**\n * This register aliases the CSR_EN bits for all channels.\n * Writing to this register allows multiple channels to be enabled\n * or disabled simultaneously, so they can run in perfect sync.\n * For each channel, there is only one physical EN register bit,\n * which can be accessed through here or CHx_CSR.\n */\nconst EN = 0xa0;\n/** Raw Interrupts */\nconst INTR = 0xa4;\n/** Interrupt Enable */\nconst INTE = 0xa8;\n/** Interrupt Force */\nconst INTF = 0xac;\n/** Interrupt status after masking & forcing */\nconst INTS = 0xb0;\nconst INT_MASK = 0xff;\n/* CHn_CSR bits */\nconst CSR_PH_ADV = 1 << 7;\nconst CSR_PH_RET = 1 << 6;\nconst CSR_DIVMODE_SHIFT = 4;\nconst CSR_DIVMODE_MASK = 0x3;\nconst CSR_B_INV = 1 << 3;\nconst CSR_A_INV = 1 << 2;\nconst CSR_PH_CORRECT = 1 << 1;\nconst CSR_EN = 1 << 0;\nvar PWMDivMode;\n(function (PWMDivMode) {\n    PWMDivMode[PWMDivMode[\"FreeRunning\"] = 0] = \"FreeRunning\";\n    PWMDivMode[PWMDivMode[\"BGated\"] = 1] = \"BGated\";\n    PWMDivMode[PWMDivMode[\"BRisingEdge\"] = 2] = \"BRisingEdge\";\n    PWMDivMode[PWMDivMode[\"BFallingEdge\"] = 3] = \"BFallingEdge\";\n})(PWMDivMode || (PWMDivMode = {}));\nclass PWMChannel {\n    constructor(pwm, clock, index) {\n        this.pwm = pwm;\n        this.clock = clock;\n        this.index = index;\n        this.timer = new Timer32(this.clock, this.pwm.clockFreq);\n        this.alarmA = new Timer32PeriodicAlarm(this.timer, () => {\n            this.setA(false);\n        });\n        this.alarmB = new Timer32PeriodicAlarm(this.timer, () => {\n            this.setB(false);\n        });\n        this.alarmBottom = new Timer32PeriodicAlarm(this.timer, () => this.wrap());\n        this.csr = 0;\n        this.div = 0;\n        this.cc = 0;\n        this.top = 0;\n        this.lastBValue = false;\n        this.countingUp = true;\n        this.ccUpdated = false;\n        this.topUpdated = false;\n        this.tickCounter = 0;\n        this.divMode = PWMDivMode.FreeRunning;\n        // GPIO pin indices: Table 525. Mapping of PWM channels to GPIO pins on RP2040\n        this.pinA1 = this.index * 2;\n        this.pinB1 = this.index * 2 + 1;\n        this.pinA2 = this.index < 7 ? 16 + this.index * 2 : -1;\n        this.pinB2 = this.index < 7 ? 16 + this.index * 2 + 1 : -1;\n        this.alarmA.enable = true;\n        this.alarmB.enable = true;\n        this.alarmBottom.enable = true;\n    }\n    readRegister(offset) {\n        switch (offset) {\n            case CHn_CSR:\n                return this.csr;\n            case CHn_DIV:\n                return this.div;\n            case CHn_CTR:\n                return this.timer.counter;\n            case CHn_CC:\n                return this.cc;\n            case CHn_TOP:\n                return this.top;\n        }\n        /* Shouldn't get here */\n        return 0;\n    }\n    writeRegister(offset, value) {\n        switch (offset) {\n            case CHn_CSR:\n                if (value & CSR_EN && !(this.csr & CSR_EN)) {\n                    this.updateDoubleBuffered();\n                }\n                this.csr = value & ~(CSR_PH_ADV | CSR_PH_RET);\n                if (this.csr & CSR_PH_ADV) {\n                    this.timer.advance(1);\n                }\n                if (this.csr & CSR_PH_RET) {\n                    this.timer.advance(-1);\n                }\n                this.divMode = (this.csr >> CSR_DIVMODE_SHIFT) & CSR_DIVMODE_MASK;\n                this.setBDirection(this.divMode === PWMDivMode.FreeRunning);\n                this.updateEnable();\n                this.lastBValue = this.gpioBValue;\n                this.timer.mode = value & CSR_PH_CORRECT ? TimerMode.ZigZag : TimerMode.Increment;\n                break;\n            case CHn_DIV: {\n                this.div = value & 1048575;\n                const intValue = (value >> 4) & 0xff;\n                const fracValue = value & 0xf;\n                this.timer.prescaler = (intValue ? intValue : 256) + fracValue / 16;\n                break;\n            }\n            case CHn_CTR:\n                this.timer.set(value & 0xffff);\n                break;\n            case CHn_CC:\n                this.cc = value;\n                this.ccUpdated = true;\n                break;\n            case CHn_TOP:\n                this.top = value & 0xffff;\n                this.topUpdated = true;\n                break;\n        }\n    }\n    reset() {\n        this.writeRegister(CHn_CSR, 0);\n        this.writeRegister(CHn_DIV, 0x01 << 4);\n        this.writeRegister(CHn_CTR, 0);\n        this.writeRegister(CHn_CC, 0);\n        this.writeRegister(CHn_TOP, 0xffff);\n        this.countingUp = true;\n        this.timer.enable = false;\n        this.timer.reset();\n    }\n    updateDoubleBuffered() {\n        if (this.ccUpdated) {\n            this.alarmB.target = this.cc >>> 16;\n            this.alarmA.target = this.cc & 0xffff;\n            this.ccUpdated = false;\n        }\n        if (this.topUpdated) {\n            this.timer.top = this.top;\n            this.topUpdated = false;\n        }\n    }\n    wrap() {\n        this.pwm.channelInterrupt(this.index);\n        this.updateDoubleBuffered();\n        if (!(this.csr & CSR_PH_CORRECT)) {\n            this.setA(this.alarmA.target > 0);\n            this.setB(this.alarmB.target > 0);\n        }\n    }\n    setA(value) {\n        if (this.csr & CSR_A_INV) {\n            value = !value;\n        }\n        this.pwm.gpioSet(this.pinA1, value);\n        if (this.pinA2 >= 0) {\n            this.pwm.gpioSet(this.pinA2, value);\n        }\n    }\n    setB(value) {\n        if (this.csr & CSR_B_INV) {\n            value = !value;\n        }\n        this.pwm.gpioSet(this.pinB1, value);\n        if (this.pinB2 >= 0) {\n            this.pwm.gpioSet(this.pinB2, value);\n        }\n    }\n    get gpioBValue() {\n        return (this.pwm.gpioRead(this.pinB1) || (this.pinB2 > 0 ? this.pwm.gpioRead(this.pinB2) : false));\n    }\n    setBDirection(value) {\n        this.pwm.gpioSetDir(this.pinB1, value);\n        if (this.pinB2 >= 0) {\n            this.pwm.gpioSetDir(this.pinB2, value);\n        }\n    }\n    gpioBChanged() {\n        const value = this.gpioBValue;\n        if (value === this.lastBValue) {\n            return;\n        }\n        this.lastBValue = value;\n        switch (this.divMode) {\n            case PWMDivMode.BGated:\n                this.updateEnable();\n                break;\n            case PWMDivMode.BRisingEdge:\n                if (value) {\n                    this.tickCounter++;\n                }\n                break;\n            case PWMDivMode.BFallingEdge:\n                if (!value) {\n                    this.tickCounter++;\n                }\n                break;\n        }\n        if (this.tickCounter >= this.timer.prescaler) {\n            this.timer.advance(1);\n            this.tickCounter -= this.timer.prescaler;\n        }\n    }\n    updateEnable() {\n        const { csr, divMode } = this;\n        const enable = !!(csr & CSR_EN);\n        this.timer.enable =\n            enable &&\n                (divMode === PWMDivMode.FreeRunning || (divMode === PWMDivMode.BGated && this.gpioBValue));\n    }\n    set en(value) {\n        if (value && !(this.csr & CSR_EN)) {\n            this.updateDoubleBuffered();\n        }\n        if (value) {\n            this.csr |= CSR_EN;\n        }\n        else {\n            this.csr &= ~CSR_EN;\n        }\n        this.updateEnable();\n    }\n}\nexport class RPPWM extends BasePeripheral {\n    constructor() {\n        super(...arguments);\n        this.channels = [\n            new PWMChannel(this, this.rp2040.clock, 0),\n            new PWMChannel(this, this.rp2040.clock, 1),\n            new PWMChannel(this, this.rp2040.clock, 2),\n            new PWMChannel(this, this.rp2040.clock, 3),\n            new PWMChannel(this, this.rp2040.clock, 4),\n            new PWMChannel(this, this.rp2040.clock, 5),\n            new PWMChannel(this, this.rp2040.clock, 6),\n            new PWMChannel(this, this.rp2040.clock, 7),\n        ];\n        this.intRaw = 0;\n        this.intEnable = 0;\n        this.intForce = 0;\n        this.gpioValue = 0;\n        this.gpioDirection = 0;\n    }\n    get intStatus() {\n        return (this.intRaw & this.intEnable) | this.intForce;\n    }\n    readUint32(offset) {\n        if (offset < EN) {\n            const channel = Math.floor(offset / 0x14);\n            return this.channels[channel].readRegister(offset % 0x14);\n        }\n        switch (offset) {\n            case EN:\n                return ((this.channels[7].en << 7) |\n                    (this.channels[6].en << 6) |\n                    (this.channels[5].en << 5) |\n                    (this.channels[4].en << 4) |\n                    (this.channels[3].en << 3) |\n                    (this.channels[2].en << 2) |\n                    (this.channels[1].en << 1) |\n                    (this.channels[0].en << 0));\n            case INTR:\n                return this.intRaw;\n            case INTE:\n                return this.intEnable;\n            case INTF:\n                return this.intForce;\n            case INTS:\n                return this.intStatus;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        if (offset < EN) {\n            const channel = Math.floor(offset / 0x14);\n            return this.channels[channel].writeRegister(offset % 0x14, value);\n        }\n        switch (offset) {\n            case EN:\n                this.channels[7].en = value & (1 << 7);\n                this.channels[6].en = value & (1 << 6);\n                this.channels[5].en = value & (1 << 5);\n                this.channels[4].en = value & (1 << 4);\n                this.channels[3].en = value & (1 << 3);\n                this.channels[2].en = value & (1 << 2);\n                this.channels[1].en = value & (1 << 1);\n                this.channels[0].en = value & (1 << 0);\n                break;\n            case INTR:\n                this.intRaw &= ~(value & INT_MASK);\n                this.checkInterrupts();\n                break;\n            case INTE:\n                this.intEnable = value & INT_MASK;\n                this.checkInterrupts();\n                break;\n            case INTF:\n                this.intForce = value & INT_MASK;\n                this.checkInterrupts();\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n    get clockFreq() {\n        return this.rp2040.clkSys;\n    }\n    channelInterrupt(index) {\n        this.intRaw |= 1 << index;\n        this.checkInterrupts();\n        // We also set the DMA Request (DREQ) for the channel\n        this.rp2040.dma.setDREQ(DREQChannel.DREQ_PWM_WRAP0 + index);\n    }\n    checkInterrupts() {\n        this.rp2040.setInterrupt(IRQ.PWM_WRAP, !!this.intStatus);\n    }\n    gpioSet(index, value) {\n        const bit = 1 << index;\n        const newGpioValue = value ? this.gpioValue | bit : this.gpioValue & ~bit;\n        if (this.gpioValue != newGpioValue) {\n            this.gpioValue = newGpioValue;\n            this.rp2040.gpio[index].checkForUpdates();\n        }\n    }\n    gpioSetDir(index, output) {\n        const bit = 1 << index;\n        const newGpioDirection = output ? this.gpioDirection | bit : this.gpioDirection & ~bit;\n        if (this.gpioDirection != newGpioDirection) {\n            this.gpioDirection = newGpioDirection;\n            this.rp2040.gpio[index].checkForUpdates();\n        }\n    }\n    gpioRead(index) {\n        return this.rp2040.gpio[index].inputValue;\n    }\n    gpioOnInput(index) {\n        if (this.gpioDirection && 1 << index) {\n            return;\n        }\n        for (const channel of this.channels) {\n            if (channel.pinB1 === index || channel.pinB2 === index) {\n                channel.gpioBChanged();\n            }\n        }\n    }\n    reset() {\n        this.gpioDirection = 0xffffffff;\n        for (const channel of this.channels) {\n            channel.reset();\n        }\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\nconst RESET = 0x0; //Reset control.\nconst WDSEL = 0x4; //Watchdog select.\nconst RESET_DONE = 0x8; //Reset Done\nexport class RPReset extends BasePeripheral {\n    constructor() {\n        super(...arguments);\n        this.reset = 0;\n        this.wdsel = 0;\n        this.reset_done = 0x1ffffff;\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case RESET:\n                return this.reset;\n            case WDSEL:\n                return this.wdsel;\n            case RESET_DONE:\n                return this.reset_done;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case RESET:\n                this.reset = value & 0x1ffffff;\n                break;\n            case WDSEL:\n                this.wdsel = value & 0x1ffffff;\n                break;\n            default:\n                super.writeUint32(offset, value);\n                break;\n        }\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\nconst RTC_SETUP0 = 0x04;\nconst RTC_SETUP1 = 0x08;\nconst RTC_CTRL = 0x0c;\nconst IRQ_SETUP_0 = 0x10;\nconst RTC_RTC1 = 0x18;\nconst RTC_RTC0 = 0x1c;\nconst RTC_ENABLE_BITS = 0x01;\nconst RTC_ACTIVE_BITS = 0x2;\nconst RTC_LOAD_BITS = 0x10;\nconst SETUP_0_YEAR_SHIFT = 12;\nconst SETUP_0_YEAR_MASK = 0xfff;\nconst SETUP_0_MONTH_SHIFT = 8;\nconst SETUP_0_MONTH_MASK = 0xf;\nconst SETUP_0_DAY_SHIFT = 0;\nconst SETUP_0_DAY_MASK = 0x1f;\nconst SETUP_1_DOTW_SHIFT = 24;\nconst SETUP_1_DOTW_MASK = 0x7;\nconst SETUP_1_HOUR_SHIFT = 16;\nconst SETUP_1_HOUR_MASK = 0x1f;\nconst SETUP_1_MIN_SHIFT = 8;\nconst SETUP_1_MIN_MASK = 0x3f;\nconst SETUP_1_SEC_SHIFT = 0;\nconst SETUP_1_SEC_MASK = 0x3f;\nconst RTC_0_YEAR_SHIFT = 12;\nconst RTC_0_YEAR_MASK = 0xfff;\nconst RTC_0_MONTH_SHIFT = 8;\nconst RTC_0_MONTH_MASK = 0xf;\nconst RTC_0_DAY_SHIFT = 0;\nconst RTC_0_DAY_MASK = 0x1f;\nconst RTC_1_DOTW_SHIFT = 24;\nconst RTC_1_DOTW_MASK = 0x7;\nconst RTC_1_HOUR_SHIFT = 16;\nconst RTC_1_HOUR_MASK = 0x1f;\nconst RTC_1_MIN_SHIFT = 8;\nconst RTC_1_MIN_MASK = 0x3f;\nconst RTC_1_SEC_SHIFT = 0;\nconst RTC_1_SEC_MASK = 0x3f;\nexport class RP2040RTC extends BasePeripheral {\n    constructor() {\n        super(...arguments);\n        this.setup0 = 0;\n        this.setup1 = 0;\n        this.ctrl = 0;\n        this.baseline = new Date(2021, 0, 1);\n        this.baselineNanos = 0;\n    }\n    readUint32(offset) {\n        const date = new Date(this.baseline.getTime() + (this.rp2040.clock.nanos - this.baselineNanos) / 1000000);\n        switch (offset) {\n            case RTC_SETUP0:\n                return this.setup0;\n            case RTC_SETUP1:\n                return this.setup1;\n            case RTC_CTRL:\n                return this.ctrl;\n            case IRQ_SETUP_0:\n                return 0;\n            case RTC_RTC1:\n                return (((date.getFullYear() & RTC_0_YEAR_MASK) << RTC_0_YEAR_SHIFT) |\n                    (((date.getMonth() + 1) & RTC_0_MONTH_MASK) << RTC_0_MONTH_SHIFT) |\n                    ((date.getDate() & RTC_0_DAY_MASK) << RTC_0_DAY_SHIFT));\n            case RTC_RTC0:\n                return (((date.getDay() & RTC_1_DOTW_MASK) << RTC_1_DOTW_SHIFT) |\n                    ((date.getHours() & RTC_1_HOUR_MASK) << RTC_1_HOUR_SHIFT) |\n                    ((date.getMinutes() & RTC_1_MIN_MASK) << RTC_1_MIN_SHIFT) |\n                    ((date.getSeconds() & RTC_1_SEC_MASK) << RTC_1_SEC_SHIFT));\n            default:\n                break;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case RTC_SETUP0:\n                this.setup0 = value;\n                break;\n            case RTC_SETUP1:\n                this.setup1 = value;\n                break;\n            case RTC_CTRL:\n                // Though RTC_LOAD_BITS is type SC and should be cleared on next cycle, pico-sdk write\n                // RTC_LOAD_BITS & RTC_ENABLE_BITS seperatly.\n                // https://github.com/raspberrypi/pico-sdk/blob/master/src/rp2_common/hardware_rtc/rtc.c#L76-L80\n                if (value & RTC_LOAD_BITS) {\n                    this.ctrl |= RTC_LOAD_BITS;\n                }\n                if (value & RTC_ENABLE_BITS) {\n                    this.ctrl |= RTC_ENABLE_BITS;\n                    this.ctrl |= RTC_ACTIVE_BITS;\n                    if (this.ctrl & RTC_LOAD_BITS) {\n                        const year = (this.setup0 >> SETUP_0_YEAR_SHIFT) & SETUP_0_YEAR_MASK;\n                        const month = (this.setup0 >> SETUP_0_MONTH_SHIFT) & SETUP_0_MONTH_MASK;\n                        const day = (this.setup0 >> SETUP_0_DAY_SHIFT) & SETUP_0_DAY_MASK;\n                        const hour = (this.setup1 >> SETUP_1_HOUR_SHIFT) & SETUP_1_HOUR_MASK;\n                        const min = (this.setup1 >> SETUP_1_MIN_SHIFT) & SETUP_1_MIN_MASK;\n                        const sec = (this.setup1 >> SETUP_1_SEC_SHIFT) & SETUP_1_SEC_MASK;\n                        this.baseline = new Date(year, month - 1, day, hour, min, sec);\n                        this.baselineNanos = this.rp2040.clock.nanos;\n                        this.ctrl &= ~RTC_LOAD_BITS;\n                    }\n                }\n                else {\n                    this.ctrl &= ~RTC_ENABLE_BITS;\n                    this.ctrl &= ~RTC_ACTIVE_BITS;\n                }\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "import { FIFO } from '../utils/fifo.js';\nimport { BasePeripheral } from './peripheral.js';\nconst SSPCR0 = 0x000; // Control register 0, SSPCR0 on page 3-4\nconst SSPCR1 = 0x004; // Control register 1, SSPCR1 on page 3-5\nconst SSPDR = 0x008; // Data register, SSPDR on page 3-6\nconst SSPSR = 0x00c; // Status register, SSPSR on page 3-7\nconst SSPCPSR = 0x010; // Clock prescale register, SSPCPSR on page 3-8\nconst SSPIMSC = 0x014; // Interrupt mask set or clear register, SSPIMSC on page 3-9\nconst SSPRIS = 0x018; // Raw interrupt status register, SSPRIS on page 3-10\nconst SSPMIS = 0x01c; // Masked interrupt status register, SSPMIS on page 3-11\nconst SSPICR = 0x020; // Interrupt clear register, SSPICR on page 3-11\nconst SSPDMACR = 0x024; // DMA control register, SSPDMACR on page 3-12\nconst SSPPERIPHID0 = 0xfe0; // Peripheral identification registers, SSPPeriphID0-3 on page 3-13\nconst SSPPERIPHID1 = 0xfe4; // Peripheral identification registers, SSPPeriphID0-3 on page 3-13\nconst SSPPERIPHID2 = 0xfe8; // Peripheral identification registers, SSPPeriphID0-3 on page 3-13\nconst SSPPERIPHID3 = 0xfec; // Peripheral identification registers, SSPPeriphID0-3 on page 3-13\nconst SSPPCELLID0 = 0xff0; // PrimeCell identification registers, SSPPCellID0-3 on page 3-16\nconst SSPPCELLID1 = 0xff4; // PrimeCell identification registers, SSPPCellID0-3 on page 3-16\nconst SSPPCELLID2 = 0xff8; // PrimeCell identification registers, SSPPCellID0-3 on page 3-16\nconst SSPPCELLID3 = 0xffc; // PrimeCell identification registers, SSPPCellID0-3 on page 3-16\n// SSPCR0 bits:\nconst SCR_MASK = 0xff;\nconst SCR_SHIFT = 8;\nconst SPH = 1 << 7;\nconst SPO = 1 << 6;\nconst FRF_MASK = 0x3;\nconst FRF_SHIFT = 4;\nconst DSS_MASK = 0xf;\nconst DSS_SHIFT = 0;\n// SSPCR1 bits:\nconst SOD = 1 << 3;\nconst MS = 1 << 2;\nconst SSE = 1 << 1;\nconst LBM = 1 << 0;\n// SSPSR bits:\nconst BSY = 1 << 4;\nconst RFF = 1 << 3;\nconst RNE = 1 << 2;\nconst TNF = 1 << 1;\nconst TFE = 1 << 0;\n// SSPCPSR bits:\nconst CPSDVSR_MASK = 0xfe;\nconst CPSDVSR_SHIFT = 0;\n// SSPDMACR bits:\nconst TXDMAE = 1 << 1;\nconst RXDMAE = 1 << 0;\n// Interrupts:\nconst SSPTXINTR = 1 << 3;\nconst SSPRXINTR = 1 << 2;\nconst SSPRTINTR = 1 << 1;\nconst SSPRORINTR = 1 << 0;\nexport class RPSPI extends BasePeripheral {\n    get intStatus() {\n        return this.intRaw & this.intEnable;\n    }\n    get enabled() {\n        return !!(this.control1 & SSE);\n    }\n    /** Data size in bits: 4 to 16 bits */\n    get dataBits() {\n        return ((this.control0 >> DSS_SHIFT) & DSS_MASK) + 1;\n    }\n    get masterMode() {\n        return !(this.control0 & MS);\n    }\n    get spiMode() {\n        const cpol = this.control0 & SPO;\n        const cpha = this.control0 & SPH;\n        return cpol ? (cpha ? 2 : 3) : cpha ? 1 : 0;\n    }\n    get clockFrequency() {\n        if (!this.clockDivisor) {\n            return 0;\n        }\n        const scr = (this.control0 >> SCR_SHIFT) & SCR_MASK;\n        return this.rp2040.clkPeri / (this.clockDivisor * (1 + scr));\n    }\n    updateDMATx() {\n        if (this.txFIFO.full) {\n            this.rp2040.dma.clearDREQ(this.dreq.tx);\n        }\n        else {\n            this.rp2040.dma.setDREQ(this.dreq.tx);\n        }\n    }\n    updateDMARx() {\n        if (this.rxFIFO.empty) {\n            this.rp2040.dma.clearDREQ(this.dreq.rx);\n        }\n        else {\n            this.rp2040.dma.setDREQ(this.dreq.rx);\n        }\n    }\n    constructor(rp2040, name, irq, dreq) {\n        super(rp2040, name);\n        this.irq = irq;\n        this.dreq = dreq;\n        this.rxFIFO = new FIFO(8);\n        this.txFIFO = new FIFO(8);\n        // User provided callbacks\n        this.onTransmit = () => this.completeTransmit(0);\n        this.busy = false;\n        this.control0 = 0;\n        this.control1 = 0;\n        this.dmaControl = 0;\n        this.clockDivisor = 0;\n        this.intRaw = 0;\n        this.intEnable = 0;\n        this.updateDMATx();\n        this.updateDMARx();\n    }\n    doTX() {\n        if (!this.busy && !this.txFIFO.empty) {\n            const value = this.txFIFO.pull();\n            this.busy = true;\n            this.onTransmit(value);\n            this.fifosUpdated();\n        }\n    }\n    completeTransmit(rxValue) {\n        this.busy = false;\n        if (!this.rxFIFO.full) {\n            this.rxFIFO.push(rxValue);\n        }\n        else {\n            this.intRaw |= SSPRORINTR;\n        }\n        this.fifosUpdated();\n        this.doTX();\n    }\n    checkInterrupts() {\n        this.rp2040.setInterrupt(this.irq, !!this.intStatus);\n    }\n    fifosUpdated() {\n        const prevStatus = this.intStatus;\n        if (this.txFIFO.itemCount <= this.txFIFO.size / 2) {\n            this.intRaw |= SSPTXINTR;\n        }\n        else {\n            this.intRaw &= ~SSPTXINTR;\n        }\n        if (this.rxFIFO.itemCount >= this.rxFIFO.size / 2) {\n            this.intRaw |= SSPRXINTR;\n        }\n        else {\n            this.intRaw &= ~SSPRXINTR;\n        }\n        if (this.intStatus !== prevStatus) {\n            this.checkInterrupts();\n        }\n        this.updateDMATx();\n        this.updateDMARx();\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case SSPCR0:\n                return this.control0;\n            case SSPCR1:\n                return this.control1;\n            case SSPDR:\n                if (!this.rxFIFO.empty) {\n                    const value = this.rxFIFO.pull();\n                    this.fifosUpdated();\n                    return value;\n                }\n                return 0;\n            case SSPSR:\n                return ((this.busy || !this.txFIFO.empty ? BSY : 0) |\n                    (this.rxFIFO.full ? RFF : 0) |\n                    (!this.rxFIFO.empty ? RNE : 0) |\n                    (!this.txFIFO.full ? TNF : 0) |\n                    (this.txFIFO.empty ? TFE : 0));\n            case SSPCPSR:\n                return this.clockDivisor;\n            case SSPIMSC:\n                return this.intEnable;\n            case SSPRIS:\n                return this.intRaw;\n            case SSPMIS:\n                return this.intStatus;\n            case SSPDMACR:\n                return this.dmaControl;\n            case SSPPERIPHID0:\n                return 0x22;\n            case SSPPERIPHID1:\n                return 0x10;\n            case SSPPERIPHID2:\n                return 0x34;\n            case SSPPERIPHID3:\n                return 0x00;\n            case SSPPCELLID0:\n                return 0x0d;\n            case SSPPCELLID1:\n                return 0xf0;\n            case SSPPCELLID2:\n                return 0x05;\n            case SSPPCELLID3:\n                return 0xb1;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case SSPCR0:\n                this.control0 = value;\n                return;\n            case SSPCR1:\n                this.control1 = value;\n                return;\n            case SSPDR:\n                if (!this.txFIFO.full) {\n                    // decoded with respect to SSPCR0.DSS\n                    this.txFIFO.push(value & ((1 << this.dataBits) - 1));\n                    this.doTX();\n                    this.fifosUpdated();\n                }\n                return;\n            case SSPCPSR:\n                this.clockDivisor = value & CPSDVSR_MASK;\n                return;\n            case SSPIMSC:\n                this.intEnable = value;\n                this.checkInterrupts();\n                return;\n            case SSPDMACR:\n                this.dmaControl = value;\n                return;\n            case SSPICR:\n                this.intRaw &= ~(value & (SSPRTINTR | SSPRORINTR));\n                this.checkInterrupts();\n                return;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\n/* See RP2040 datasheet sect 4.10.13 */\nconst SSI_CTRLR0 = 0x00000000;\nconst SSI_CTRLR1 = 0x00000004;\nconst SSI_SSIENR = 0x00000008;\nconst SSI_MWCR = 0x0000000c;\nconst SSI_SER = 0x00000010;\nconst SSI_BAUDR = 0x00000014;\nconst SSI_TXFTLR = 0x00000018;\nconst SSI_RXFTLR = 0x0000001c;\nconst SSI_TXFLR = 0x00000020;\nconst SSI_RXFLR = 0x00000024;\nconst SSI_SR = 0x00000028;\nconst SSI_SR_TFNF_BITS = 0x00000002;\nconst SSI_SR_TFE_BITS = 0x00000004;\nconst SSI_SR_RFNE_BITS = 0x00000008;\nconst SSI_IMR = 0x0000002c;\nconst SSI_ISR = 0x00000030;\nconst SSI_RISR = 0x00000034;\nconst SSI_TXOICR = 0x00000038;\nconst SSI_RXOICR = 0x0000003c;\nconst SSI_RXUICR = 0x00000040;\nconst SSI_MSTICR = 0x00000044;\nconst SSI_ICR = 0x00000048;\nconst SSI_DMACR = 0x0000004c;\nconst SSI_DMATDLR = 0x00000050;\nconst SSI_DMARDLR = 0x00000054;\n/** Identification register */\nconst SSI_IDR = 0x00000058;\nconst SSI_VERSION_ID = 0x0000005c;\nconst SSI_DR0 = 0x00000060;\nconst SSI_RX_SAMPLE_DLY = 0x000000f0;\nconst SSI_SPI_CTRL_R0 = 0x000000f4;\nconst SSI_TXD_DRIVE_EDGE = 0x000000f8;\nconst CMD_READ_STATUS = 0x05;\nexport class RPSSI extends BasePeripheral {\n    constructor() {\n        super(...arguments);\n        this.dr0 = 0;\n        this.txflr = 0;\n        this.rxflr = 0;\n        this.baudr = 0;\n        this.crtlr0 = 0;\n        this.crtlr1 = 0;\n        this.ssienr = 0;\n        this.spictlr0 = 0;\n        this.rxsampldly = 0;\n        this.txddriveedge = 0;\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case SSI_TXFLR:\n                return this.txflr;\n            case SSI_RXFLR:\n                return this.rxflr;\n            case SSI_CTRLR0:\n                return this.crtlr0; /*  & 0x017FFFFF = b23,b25..31 reserved */\n            case SSI_CTRLR1:\n                return this.crtlr1;\n            case SSI_SSIENR:\n                return this.ssienr;\n            case SSI_BAUDR:\n                return this.baudr;\n            case SSI_SR:\n                return SSI_SR_TFE_BITS | SSI_SR_RFNE_BITS | SSI_SR_TFNF_BITS;\n            case SSI_IDR:\n                return 0x51535049;\n            case SSI_VERSION_ID:\n                return 0x3430312a;\n            case SSI_RX_SAMPLE_DLY:\n                return this.rxsampldly;\n            case SSI_TXD_DRIVE_EDGE:\n                return this.txddriveedge;\n            case SSI_SPI_CTRL_R0:\n                return this.spictlr0; /* b6,7,10,19..23 reserved */\n            case SSI_DR0:\n                return this.dr0;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case SSI_TXFLR:\n                this.txflr = value;\n                return;\n            case SSI_RXFLR:\n                this.rxflr = value;\n                return;\n            case SSI_CTRLR0:\n                this.crtlr0 = value; /*  & 0x017FFFFF = b23,b25..31 reserved */\n                return;\n            case SSI_CTRLR1:\n                this.crtlr1 = value;\n                return;\n            case SSI_SSIENR:\n                this.ssienr = value;\n                return;\n            case SSI_BAUDR:\n                this.baudr = value;\n                return;\n            case SSI_RX_SAMPLE_DLY:\n                this.rxsampldly = value & 0xff;\n                return;\n            case SSI_TXD_DRIVE_EDGE:\n                this.txddriveedge = value & 0xff;\n                return;\n            case SSI_SPI_CTRL_R0:\n                this.spictlr0 = value;\n                return;\n            case SSI_DR0:\n                if (value === CMD_READ_STATUS) {\n                    this.dr0 = 0; // tell stage2 that we completed a write\n                }\n                return;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\nconst PROC0_NMI_MASK = 0;\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst PROC1_NMI_MASK = 4;\nexport class RP2040SysCfg extends BasePeripheral {\n    readUint32(offset) {\n        switch (offset) {\n            case PROC0_NMI_MASK:\n                return this.rp2040.core.interruptNMIMask;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case PROC0_NMI_MASK:\n                this.rp2040.core.interruptNMIMask = value;\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\nconst CHIP_ID = 0;\nconst PLATFORM = 0x4;\nconst GITREF_RP2040 = 0x40;\nexport class RP2040SysInfo extends BasePeripheral {\n    readUint32(offset) {\n        // All the values here were verified against the silicon\n        switch (offset) {\n            case CHIP_ID:\n                return 0x10002927;\n            case PLATFORM:\n                return 0x00000002;\n            case GITREF_RP2040:\n                return 0xe0c912e8;\n        }\n        return super.readUint32(offset);\n    }\n}\n", "import { BasePeripheral } from './peripheral.js';\nconst PLATFORM = 0;\nconst ASIC = 1;\nexport class RPTBMAN extends BasePeripheral {\n    readUint32(offset) {\n        switch (offset) {\n            case PLATFORM:\n                return ASIC;\n            default:\n                return super.readUint32(offset);\n        }\n    }\n}\n", "import { IRQ } from '../irq.js';\nimport { BasePeripheral } from './peripheral.js';\nconst TIMEHR = 0x08;\nconst TIMELR = 0x0c;\nconst TIMERAWH = 0x24;\nconst TIMERAWL = 0x28;\nconst ALARM0 = 0x10;\nconst ALARM1 = 0x14;\nconst ALARM2 = 0x18;\nconst ALARM3 = 0x1c;\nconst ARMED = 0x20;\nconst PAUSE = 0x30;\nconst INTR = 0x34;\nconst INTE = 0x38;\nconst INTF = 0x3c;\nconst INTS = 0x40;\nconst ALARM_0 = 1 << 0;\nconst ALARM_1 = 1 << 1;\nconst ALARM_2 = 1 << 2;\nconst ALARM_3 = 1 << 3;\nconst timerInterrupts = [IRQ.TIMER_0, IRQ.TIMER_1, IRQ.TIMER_2, IRQ.TIMER_3];\nclass RPTimerAlarm {\n    constructor(bitValue, clockAlarm) {\n        this.bitValue = bitValue;\n        this.clockAlarm = clockAlarm;\n        this.armed = false;\n        this.targetMicros = 0;\n    }\n}\nexport class RPTimer extends BasePeripheral {\n    constructor(rp2040, name) {\n        super(rp2040, name);\n        this.latchedTimeHigh = 0;\n        this.intRaw = 0;\n        this.intEnable = 0;\n        this.intForce = 0;\n        this.paused = false;\n        this.clock = rp2040.clock;\n        this.alarms = [\n            new RPTimerAlarm(ALARM_0, this.clock.createAlarm(() => this.fireAlarm(0))),\n            new RPTimerAlarm(ALARM_1, this.clock.createAlarm(() => this.fireAlarm(1))),\n            new RPTimerAlarm(ALARM_2, this.clock.createAlarm(() => this.fireAlarm(2))),\n            new RPTimerAlarm(ALARM_3, this.clock.createAlarm(() => this.fireAlarm(3))),\n        ];\n    }\n    get intStatus() {\n        return (this.intRaw & this.intEnable) | this.intForce;\n    }\n    readUint32(offset) {\n        const time = this.clock.nanos / 1000;\n        switch (offset) {\n            case TIMEHR:\n                return this.latchedTimeHigh;\n            case TIMELR:\n                this.latchedTimeHigh = Math.floor(time / 2 ** 32);\n                return time >>> 0;\n            case TIMERAWH:\n                return Math.floor(time / 2 ** 32);\n            case TIMERAWL:\n                return time >>> 0;\n            case ALARM0:\n                return this.alarms[0].targetMicros;\n            case ALARM1:\n                return this.alarms[1].targetMicros;\n            case ALARM2:\n                return this.alarms[2].targetMicros;\n            case ALARM3:\n                return this.alarms[3].targetMicros;\n            case PAUSE:\n                return this.paused ? 1 : 0;\n            case INTR:\n                return this.intRaw;\n            case INTE:\n                return this.intEnable;\n            case INTF:\n                return this.intForce;\n            case INTS:\n                return this.intStatus;\n            case ARMED:\n                return ((this.alarms[0].armed ? this.alarms[0].bitValue : 0) |\n                    (this.alarms[1].armed ? this.alarms[1].bitValue : 0) |\n                    (this.alarms[2].armed ? this.alarms[2].bitValue : 0) |\n                    (this.alarms[3].armed ? this.alarms[3].bitValue : 0));\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        switch (offset) {\n            case ALARM0:\n            case ALARM1:\n            case ALARM2:\n            case ALARM3: {\n                const alarmIndex = (offset - ALARM0) / 4;\n                const alarm = this.alarms[alarmIndex];\n                const deltaMicros = (value - this.clock.nanos / 1000) >>> 0;\n                alarm.armed = true;\n                alarm.targetMicros = value;\n                alarm.clockAlarm.schedule(deltaMicros * 1000);\n                break;\n            }\n            case ARMED:\n                for (const alarm of this.alarms) {\n                    if (this.rawWriteValue & alarm.bitValue) {\n                        this.disarmAlarm(alarm);\n                    }\n                }\n                break;\n            case PAUSE:\n                this.paused = !!(value & 1);\n                if (this.paused) {\n                    this.warn('Unimplemented Timer Pause');\n                }\n                // TODO actually pause the timer\n                break;\n            case INTR:\n                this.intRaw &= ~this.rawWriteValue;\n                this.checkInterrupts();\n                break;\n            case INTE:\n                this.intEnable = value & 0xf;\n                this.checkInterrupts();\n                break;\n            case INTF:\n                this.intForce = value & 0xf;\n                this.checkInterrupts();\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n    fireAlarm(index) {\n        const alarm = this.alarms[index];\n        this.disarmAlarm(alarm);\n        this.intRaw |= alarm.bitValue;\n        this.checkInterrupts();\n    }\n    checkInterrupts() {\n        const { intStatus } = this;\n        for (let i = 0; i < this.alarms.length; i++) {\n            this.rp2040.setInterrupt(timerInterrupts[i], !!(intStatus & (1 << i)));\n        }\n    }\n    disarmAlarm(alarm) {\n        alarm.clockAlarm.cancel();\n        alarm.armed = false;\n    }\n}\n", "import { FIFO } from '../utils/fifo.js';\nimport { BasePeripheral } from './peripheral.js';\nconst UARTDR = 0x0;\nconst UARTFR = 0x18;\nconst UARTIBRD = 0x24;\nconst UARTFBRD = 0x28;\nconst UARTLCR_H = 0x2c;\nconst UARTCR = 0x30;\nconst UARTIMSC = 0x38;\nconst UARTIRIS = 0x3c;\nconst UARTIMIS = 0x40;\nconst UARTICR = 0x44;\nconst UARTPERIPHID0 = 0xfe0;\nconst UARTPERIPHID1 = 0xfe4;\nconst UARTPERIPHID2 = 0xfe8;\nconst UARTPERIPHID3 = 0xfec;\nconst UARTPCELLID0 = 0xff0;\nconst UARTPCELLID1 = 0xff4;\nconst UARTPCELLID2 = 0xff8;\nconst UARTPCELLID3 = 0xffc;\n// UARTFR bits:\nconst TXFE = 1 << 7;\nconst RXFF = 1 << 6;\nconst RXFE = 1 << 4;\n// UARTLCR_H bits:\nconst FEN = 1 << 4;\n// UARTCR bits:\nconst RXE = 1 << 9;\nconst TXE = 1 << 8;\nconst UARTEN = 1 << 0;\n// Interrupt bits\nconst UARTTXINTR = 1 << 5;\nconst UARTRXINTR = 1 << 4;\nexport class RPUART extends BasePeripheral {\n    constructor(rp2040, name, irq, dreq) {\n        super(rp2040, name);\n        this.irq = irq;\n        this.dreq = dreq;\n        this.ctrlRegister = RXE | TXE;\n        this.lineCtrlRegister = 0;\n        this.rxFIFO = new FIFO(32);\n        this.interruptMask = 0;\n        this.interruptStatus = 0;\n        this.intDivisor = 0;\n        this.fracDivisor = 0;\n    }\n    get enabled() {\n        return !!(this.ctrlRegister & UARTEN);\n    }\n    get txEnabled() {\n        return !!(this.ctrlRegister & TXE);\n    }\n    get rxEnabled() {\n        return !!(this.ctrlRegister & RXE);\n    }\n    get fifosEnabled() {\n        return !!(this.lineCtrlRegister & FEN);\n    }\n    /**\n     * Number of bits per UART character\n     */\n    get wordLength() {\n        switch ((this.lineCtrlRegister >>> 5) & 0x3) {\n            case 0b00:\n                return 5;\n            case 0b01:\n                return 6;\n            case 0b10:\n                return 7;\n            case 0b11:\n                return 8;\n        }\n    }\n    get baudDivider() {\n        return this.intDivisor + this.fracDivisor / 64;\n    }\n    get baudRate() {\n        return Math.round(this.rp2040.clkPeri / (this.baudDivider * 16));\n    }\n    get flags() {\n        return (this.rxFIFO.full ? RXFF : 0) | (this.rxFIFO.empty ? RXFE : 0) | TXFE;\n    }\n    checkInterrupts() {\n        // TODO We should actually implement a proper FIFO for TX\n        this.interruptStatus |= UARTTXINTR;\n        this.rp2040.setInterrupt(this.irq, !!(this.interruptStatus & this.interruptMask));\n    }\n    feedByte(value) {\n        this.rxFIFO.push(value);\n        // TODO check if the FIFO has reached the threshold level\n        this.interruptStatus |= UARTRXINTR;\n        this.checkInterrupts();\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case UARTDR: {\n                const value = this.rxFIFO.pull();\n                if (!this.rxFIFO.empty) {\n                    this.interruptStatus |= UARTRXINTR;\n                }\n                else {\n                    this.interruptStatus &= ~UARTRXINTR;\n                }\n                this.checkInterrupts();\n                return value;\n            }\n            case UARTFR:\n                return this.flags;\n            case UARTIBRD:\n                return this.intDivisor;\n            case UARTFBRD:\n                return this.fracDivisor;\n            case UARTLCR_H:\n                return this.lineCtrlRegister;\n            case UARTCR:\n                return this.ctrlRegister;\n            case UARTIMSC:\n                return this.interruptMask;\n            case UARTIRIS:\n                return this.interruptStatus;\n            case UARTIMIS:\n                return this.interruptStatus & this.interruptMask;\n            case UARTPERIPHID0:\n                return 0x11;\n            case UARTPERIPHID1:\n                return 0x10;\n            case UARTPERIPHID2:\n                return 0x34;\n            case UARTPERIPHID3:\n                return 0x00;\n            case UARTPCELLID0:\n                return 0x0d;\n            case UARTPCELLID1:\n                return 0xf0;\n            case UARTPCELLID2:\n                return 0x05;\n            case UARTPCELLID3:\n                return 0xb1;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        var _a, _b, _c;\n        switch (offset) {\n            case UARTDR:\n                (_a = this.onByte) === null || _a === void 0 ? void 0 : _a.call(this, value & 0xff);\n                break;\n            case UARTIBRD:\n                this.intDivisor = value & 0xffff;\n                (_b = this.onBaudRateChange) === null || _b === void 0 ? void 0 : _b.call(this, this.baudRate);\n                break;\n            case UARTFBRD:\n                this.fracDivisor = value & 0x3f;\n                (_c = this.onBaudRateChange) === null || _c === void 0 ? void 0 : _c.call(this, this.baudRate);\n                break;\n            case UARTLCR_H:\n                this.lineCtrlRegister = value;\n                break;\n            case UARTCR:\n                this.ctrlRegister = value;\n                if (this.enabled) {\n                    this.rp2040.dma.setDREQ(this.dreq.tx);\n                }\n                else {\n                    this.rp2040.dma.clearDREQ(this.dreq.tx);\n                }\n                break;\n            case UARTIMSC:\n                this.interruptMask = value & 0x7ff;\n                this.checkInterrupts();\n                break;\n            case UARTICR:\n                this.interruptStatus &= ~this.rawWriteValue;\n                this.checkInterrupts();\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "import { IRQ } from '../irq.js';\nimport { BasePeripheral } from './peripheral.js';\nconst ENDPOINT_COUNT = 16;\n// USB DPSRAM Registers\nconst EP1_IN_CONTROL = 0x8;\nconst EP0_IN_BUFFER_CONTROL = 0x80;\nconst EP0_OUT_BUFFER_CONTROL = 0x84;\nconst EP15_OUT_BUFFER_CONTROL = 0xfc;\n// Endpoint Control bits\nconst USB_CTRL_DOUBLE_BUF = 1 << 30;\nconst USB_CTRL_INTERRUPT_PER_TRANSFER = 1 << 29;\n// Buffer Control bits\nconst USB_BUF_CTRL_AVAILABLE = 1 << 10;\nconst USB_BUF_CTRL_FULL = 1 << 15;\nconst USB_BUF_CTRL_LEN_MASK = 0x3ff;\n// Buffer1\nconst USB_BUF1_SHIFT = 16;\nconst USB_BUF1_OFFSET = 64;\n// USB Peripheral Register\nconst ADDR_ENDP = 0x0;\nconst MAIN_CTRL = 0x40;\nconst SIE_STATUS = 0x50;\nconst BUFF_STATUS = 0x58;\nconst BUFF_CPU_SHOULD_HANDLE = 0x5c;\nconst USB_MUXING = 0x74;\nconst INTR = 0x8c;\nconst INTE = 0x90;\nconst INTF = 0x94;\nconst INTS = 0x98;\n// MAIN_CTRL bits\nconst SIM_TIMING = 1 << 31;\nconst HOST_NDEVICE = 1 << 1;\nconst CONTROLLER_EN = 1 << 0;\n// SIE_STATUS bits\nconst SIE_DATA_SEQ_ERROR = 1 << 31;\nconst SIE_ACK_REC = 1 << 30;\nconst SIE_STALL_REC = 1 << 29;\nconst SIE_NAK_REC = 1 << 28;\nconst SIE_RX_TIMEOUT = 1 << 27;\nconst SIE_RX_OVERFLOW = 1 << 26;\nconst SIE_BIT_STUFF_ERROR = 1 << 25;\nconst SIE_CRC_ERROR = 1 << 24;\nconst SIE_BUS_RESET = 1 << 19;\nconst SIE_TRANS_COMPLETE = 1 << 18;\nconst SIE_SETUP_REC = 1 << 17;\nconst SIE_CONNECTED = 1 << 16;\nconst SIE_RESUME = 1 << 11;\nconst SIE_VBUS_OVER_CURR = 1 << 10;\nconst SIE_SPEED = 1 << 9;\nconst SIE_SUSPENDED = 1 << 4;\nconst SIE_LINE_STATE_MASK = 0x3;\nconst SIE_LINE_STATE_SHIFT = 2;\nconst SIE_VBUS_DETECTED = 1 << 0;\n// USB_MUXING bits\nconst SOFTCON = 1 << 3;\nconst TO_DIGITAL_PAD = 1 << 2;\nconst TO_EXTPHY = 1 << 1;\nconst TO_PHY = 1 << 0;\n// INTR bits\nconst INTR_BUFF_STATUS = 1 << 4;\n// SIE Line states\nvar SIELineState;\n(function (SIELineState) {\n    SIELineState[SIELineState[\"SE0\"] = 0] = \"SE0\";\n    SIELineState[SIELineState[\"J\"] = 1] = \"J\";\n    SIELineState[SIELineState[\"K\"] = 2] = \"K\";\n    SIELineState[SIELineState[\"SE1\"] = 3] = \"SE1\";\n})(SIELineState || (SIELineState = {}));\nconst SIE_WRITECLEAR_MASK = SIE_DATA_SEQ_ERROR |\n    SIE_ACK_REC |\n    SIE_STALL_REC |\n    SIE_NAK_REC |\n    SIE_RX_TIMEOUT |\n    SIE_RX_OVERFLOW |\n    SIE_BIT_STUFF_ERROR |\n    SIE_CONNECTED |\n    SIE_CRC_ERROR |\n    SIE_BUS_RESET |\n    SIE_TRANS_COMPLETE |\n    SIE_SETUP_REC |\n    SIE_RESUME;\nclass USBEndpointAlarm {\n    constructor(alarm) {\n        this.alarm = alarm;\n        this.buffers = [];\n    }\n    schedule(buffer, delayNanos) {\n        this.buffers.push(buffer);\n        this.alarm.schedule(delayNanos);\n    }\n}\nexport class RPUSBController extends BasePeripheral {\n    get intStatus() {\n        return (this.intRaw & this.intEnable) | this.intForce;\n    }\n    constructor(rp2040, name) {\n        super(rp2040, name);\n        this.addrEndp = 0;\n        this.mainCtrl = 0;\n        this.intRaw = 0;\n        this.intEnable = 0;\n        this.intForce = 0;\n        this.sieStatus = 0;\n        this.buffStatus = 0;\n        this.readDelayMicroseconds = 10;\n        this.writeDelayMicroseconds = 10; // Determined empirically\n        const clock = rp2040.clock;\n        this.endpointReadAlarms = [];\n        this.endpointWriteAlarms = [];\n        for (let i = 0; i < ENDPOINT_COUNT; ++i) {\n            this.endpointReadAlarms.push(new USBEndpointAlarm(clock.createAlarm(() => {\n                const buffer = this.endpointReadAlarms[i].buffers.shift();\n                if (buffer) {\n                    this.finishRead(i, buffer);\n                }\n            })));\n            this.endpointWriteAlarms.push(new USBEndpointAlarm(clock.createAlarm(() => {\n                var _a;\n                for (const buffer of this.endpointWriteAlarms[i].buffers) {\n                    (_a = this.onEndpointWrite) === null || _a === void 0 ? void 0 : _a.call(this, i, buffer);\n                }\n                this.endpointWriteAlarms[i].buffers = [];\n            })));\n        }\n        this.resetAlarm = clock.createAlarm(() => {\n            this.sieStatus |= SIE_BUS_RESET;\n            this.sieStatusUpdated();\n        });\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case ADDR_ENDP:\n                return this.addrEndp & 0b1111000000001111111;\n            case MAIN_CTRL:\n                return this.mainCtrl;\n            case SIE_STATUS:\n                return this.sieStatus;\n            case BUFF_STATUS:\n                return this.buffStatus;\n            case BUFF_CPU_SHOULD_HANDLE:\n                return 0;\n            case INTR:\n                return this.intRaw;\n            case INTE:\n                return this.intEnable;\n            case INTF:\n                return this.intForce;\n            case INTS:\n                return this.intStatus;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        var _a, _b;\n        switch (offset) {\n            case ADDR_ENDP:\n                this.addrEndp = value;\n                break;\n            case MAIN_CTRL:\n                this.mainCtrl = value & (SIM_TIMING | CONTROLLER_EN | HOST_NDEVICE);\n                if (value & CONTROLLER_EN && !(value & HOST_NDEVICE)) {\n                    (_a = this.onUSBEnabled) === null || _a === void 0 ? void 0 : _a.call(this);\n                }\n                break;\n            case BUFF_STATUS:\n                this.buffStatus &= ~this.rawWriteValue;\n                this.buffStatusUpdated();\n                break;\n            case USB_MUXING:\n                // Workaround for busy wait in hw_enumeration_fix_force_ls_j() / hw_enumeration_fix_finish():\n                if (value & TO_DIGITAL_PAD && !(value & TO_PHY)) {\n                    this.sieStatus |= SIE_CONNECTED;\n                }\n                break;\n            case SIE_STATUS:\n                this.sieStatus &= ~(this.rawWriteValue & SIE_WRITECLEAR_MASK);\n                if (this.rawWriteValue & SIE_BUS_RESET) {\n                    (_b = this.onResetReceived) === null || _b === void 0 ? void 0 : _b.call(this);\n                    this.sieStatus &= ~(SIE_LINE_STATE_MASK << SIE_LINE_STATE_SHIFT);\n                    this.sieStatus |= (SIELineState.J << SIE_LINE_STATE_SHIFT) | SIE_CONNECTED;\n                }\n                this.sieStatusUpdated();\n                break;\n            case INTE:\n                this.intEnable = value & 0xfffff;\n                this.checkInterrupts();\n                break;\n            case INTF:\n                this.intForce = value & 0xfffff;\n                this.checkInterrupts();\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n    readEndpointControlReg(endpoint, out) {\n        const controlRegOffset = EP1_IN_CONTROL + 8 * (endpoint - 1) + (out ? 4 : 0);\n        return this.rp2040.usbDPRAMView.getUint32(controlRegOffset, true);\n    }\n    getEndpointBufferOffset(endpoint, out) {\n        if (endpoint === 0) {\n            return 0x100;\n        }\n        return this.readEndpointControlReg(endpoint, out) & 0xffc0;\n    }\n    DPRAMUpdated(offset, value) {\n        var _a, _b;\n        if (value & USB_BUF_CTRL_AVAILABLE &&\n            offset >= EP0_IN_BUFFER_CONTROL &&\n            offset <= EP15_OUT_BUFFER_CONTROL) {\n            const endpoint = (offset - EP0_IN_BUFFER_CONTROL) >> 3;\n            const bufferOut = offset & 4 ? true : false;\n            let doubleBuffer = false;\n            let interrupt = true;\n            if (endpoint != 0) {\n                const control = this.readEndpointControlReg(endpoint, bufferOut);\n                doubleBuffer = !!(control & USB_CTRL_DOUBLE_BUF);\n                interrupt = !!(control & USB_CTRL_INTERRUPT_PER_TRANSFER);\n            }\n            if (doubleBuffer && (value >> USB_BUF1_SHIFT) & USB_BUF_CTRL_AVAILABLE) {\n                const bufferLength = (value >> USB_BUF1_SHIFT) & USB_BUF_CTRL_LEN_MASK;\n                const bufferOffset = this.getEndpointBufferOffset(endpoint, bufferOut) + USB_BUF1_OFFSET;\n                this.debug(`Start USB transfer, endPoint=${endpoint}, direction=${bufferOut ? 'out' : 'in'} buffer=${bufferOffset.toString(16)} length=${bufferLength}`);\n                value &= ~(USB_BUF_CTRL_AVAILABLE << USB_BUF1_SHIFT);\n                this.rp2040.usbDPRAMView.setUint32(offset, value, true);\n                if (bufferOut) {\n                    (_a = this.onEndpointRead) === null || _a === void 0 ? void 0 : _a.call(this, endpoint, bufferLength);\n                }\n                else {\n                    value &= ~(USB_BUF_CTRL_FULL << USB_BUF1_SHIFT);\n                    this.rp2040.usbDPRAMView.setUint32(offset, value, true);\n                    const buffer = this.rp2040.usbDPRAM.slice(bufferOffset, bufferOffset + bufferLength);\n                    this.indicateBufferReady(endpoint, false);\n                    this.endpointWriteAlarms[endpoint].schedule(buffer, this.writeDelayMicroseconds * 1000);\n                }\n            }\n            const bufferLength = value & USB_BUF_CTRL_LEN_MASK;\n            const bufferOffset = this.getEndpointBufferOffset(endpoint, bufferOut);\n            this.debug(`Start USB transfer, endPoint=${endpoint}, direction=${bufferOut ? 'out' : 'in'} buffer=${bufferOffset.toString(16)} length=${bufferLength}`);\n            value &= ~USB_BUF_CTRL_AVAILABLE;\n            this.rp2040.usbDPRAMView.setUint32(offset, value, true);\n            if (bufferOut) {\n                (_b = this.onEndpointRead) === null || _b === void 0 ? void 0 : _b.call(this, endpoint, bufferLength);\n            }\n            else {\n                value &= ~USB_BUF_CTRL_FULL;\n                this.rp2040.usbDPRAMView.setUint32(offset, value, true);\n                const buffer = this.rp2040.usbDPRAM.slice(bufferOffset, bufferOffset + bufferLength);\n                if (interrupt || !doubleBuffer) {\n                    this.indicateBufferReady(endpoint, false);\n                }\n                this.endpointWriteAlarms[endpoint].schedule(buffer, this.writeDelayMicroseconds * 1000);\n            }\n        }\n    }\n    endpointReadDone(endpoint, buffer, delay = this.readDelayMicroseconds) {\n        this.endpointReadAlarms[endpoint].schedule(buffer, delay * 1000);\n    }\n    finishRead(endpoint, buffer) {\n        const bufferOffset = this.getEndpointBufferOffset(endpoint, true);\n        const bufControlReg = EP0_OUT_BUFFER_CONTROL + endpoint * 8;\n        let bufControl = this.rp2040.usbDPRAMView.getUint32(bufControlReg, true);\n        const requestedLength = bufControl & USB_BUF_CTRL_LEN_MASK;\n        const newLength = Math.min(buffer.length, requestedLength);\n        bufControl |= USB_BUF_CTRL_FULL;\n        bufControl = (bufControl & ~USB_BUF_CTRL_LEN_MASK) | (newLength & USB_BUF_CTRL_LEN_MASK);\n        this.rp2040.usbDPRAMView.setUint32(bufControlReg, bufControl, true);\n        this.rp2040.usbDPRAM.set(buffer.subarray(0, newLength), bufferOffset);\n        this.indicateBufferReady(endpoint, true);\n    }\n    checkInterrupts() {\n        const { intStatus } = this;\n        this.rp2040.setInterrupt(IRQ.USBCTRL, !!intStatus);\n    }\n    resetDevice() {\n        this.resetAlarm.schedule(10000000); // USB reset takes ~10ms\n    }\n    sendSetupPacket(setupPacket) {\n        this.rp2040.usbDPRAM.set(setupPacket);\n        this.sieStatus |= SIE_SETUP_REC;\n        this.sieStatusUpdated();\n    }\n    indicateBufferReady(endpoint, out) {\n        this.buffStatus |= 1 << (endpoint * 2 + (out ? 1 : 0));\n        this.buffStatusUpdated();\n    }\n    buffStatusUpdated() {\n        if (this.buffStatus) {\n            this.intRaw |= INTR_BUFF_STATUS;\n        }\n        else {\n            this.intRaw &= ~INTR_BUFF_STATUS;\n        }\n        this.checkInterrupts();\n    }\n    sieStatusUpdated() {\n        const intRegisterMap = [\n            [SIE_SETUP_REC, 1 << 16],\n            [SIE_RESUME, 1 << 15],\n            [SIE_SUSPENDED, 1 << 14],\n            [SIE_CONNECTED, 1 << 13],\n            [SIE_BUS_RESET, 1 << 12],\n            [SIE_VBUS_DETECTED, 1 << 11],\n            [SIE_STALL_REC, 1 << 10],\n            [SIE_CRC_ERROR, 1 << 9],\n            [SIE_BIT_STUFF_ERROR, 1 << 8],\n            [SIE_RX_OVERFLOW, 1 << 7],\n            [SIE_RX_TIMEOUT, 1 << 6],\n            [SIE_DATA_SEQ_ERROR, 1 << 5],\n        ];\n        for (const [sieBit, intRawBit] of intRegisterMap) {\n            if (this.sieStatus & sieBit) {\n                this.intRaw |= intRawBit;\n            }\n            else {\n                this.intRaw &= ~intRawBit;\n            }\n        }\n        this.checkInterrupts();\n    }\n}\n", "import { Timer32, Timer32PeriodicAlarm, TimerMode } from '../utils/timer32.js';\nimport { BasePeripheral } from './peripheral.js';\nconst CTRL = 0x00; // Control register\nconst LOAD = 0x04; // Load the watchdog timer.\nconst REASON = 0x08; // Logs the reason for the last reset.\nconst SCRATCH0 = 0x0c; // Scratch register\nconst SCRATCH1 = 0x10; // Scratch register\nconst SCRATCH2 = 0x14; // Scratch register\nconst SCRATCH3 = 0x18; // Scratch register\nconst SCRATCH4 = 0x1c; // Scratch register\nconst SCRATCH5 = 0x20; // Scratch register\nconst SCRATCH6 = 0x24; // Scratch register\nconst SCRATCH7 = 0x28; // Scratch register\nconst TICK = 0x2c; // Controls the tick generator\n// CTRL bits:\nconst TRIGGER = 1 << 31;\nconst ENABLE = 1 << 30;\nconst PAUSE_DBG1 = 1 << 26;\nconst PAUSE_DBG0 = 1 << 25;\nconst PAUSE_JTAG = 1 << 24;\nconst TIME_MASK = 0xffffff;\nconst TIME_SHIFT = 0;\n// LOAD bits\nconst LOAD_MASK = 0xffffff;\nconst LOAD_SHIFT = 0;\n// REASON bits:\nconst FORCE = 1 << 1;\nconst TIMER = 1 << 0;\n// TICK bits:\nconst COUNT_MASK = 0x1ff;\nconst COUNT_SHIFT = 11;\nconst RUNNING = 1 << 10;\nconst TICK_ENABLE = 1 << 9;\nconst CYCLES_MASK = 0x1ff;\nconst CYCLES_SHIFT = 0;\nconst TICK_FREQUENCY = 2000000; // Actually 1 MHz, but due to errata RP2040-E1, the timer is decremented twice per tick\nexport class RPWatchdog extends BasePeripheral {\n    // User provided\n    constructor(rp2040, name) {\n        super(rp2040, name);\n        this.scratchData = new Uint32Array(8);\n        this.enable = false;\n        this.tickEnable = true;\n        this.reason = 0;\n        this.pauseDbg0 = true;\n        this.pauseDbg1 = true;\n        this.pauseJtag = true;\n        /** Called when the watchdog triggers - override with your own soft reset implementation */\n        this.onWatchdogTrigger = () => {\n            this.rp2040.logger.warn(this.name, 'Watchdog triggered, but no reset handler provided');\n        };\n        this.timer = new Timer32(rp2040.clock, TICK_FREQUENCY);\n        this.timer.mode = TimerMode.Decrement;\n        this.timer.enable = false;\n        this.alarm = new Timer32PeriodicAlarm(this.timer, () => {\n            var _a;\n            this.reason = TIMER;\n            (_a = this.onWatchdogTrigger) === null || _a === void 0 ? void 0 : _a.call(this);\n        });\n        this.alarm.target = 0;\n        this.alarm.enable = false;\n    }\n    readUint32(offset) {\n        switch (offset) {\n            case CTRL:\n                return ((this.timer.enable ? ENABLE : 0) |\n                    (this.pauseDbg0 ? PAUSE_DBG0 : 0) |\n                    (this.pauseDbg1 ? PAUSE_DBG1 : 0) |\n                    (this.pauseJtag ? PAUSE_JTAG : 0) |\n                    ((this.timer.counter & TIME_MASK) << TIME_SHIFT));\n            case REASON:\n                return this.reason;\n            case SCRATCH0:\n            case SCRATCH1:\n            case SCRATCH2:\n            case SCRATCH3:\n            case SCRATCH4:\n            case SCRATCH5:\n            case SCRATCH6:\n            case SCRATCH7:\n                return this.scratchData[(offset - SCRATCH0) >> 2];\n            case TICK:\n                // TODO COUNT bits\n                return this.tickEnable ? RUNNING | TICK_ENABLE : 0;\n        }\n        return super.readUint32(offset);\n    }\n    writeUint32(offset, value) {\n        var _a;\n        switch (offset) {\n            case CTRL:\n                if (value & TRIGGER) {\n                    this.reason = FORCE;\n                    (_a = this.onWatchdogTrigger) === null || _a === void 0 ? void 0 : _a.call(this);\n                }\n                this.enable = !!(value & ENABLE);\n                this.timer.enable = this.enable && this.tickEnable;\n                this.alarm.enable = this.enable && this.tickEnable;\n                this.pauseDbg0 = !!(value & PAUSE_DBG0);\n                this.pauseDbg1 = !!(value & PAUSE_DBG1);\n                this.pauseJtag = !!(value & PAUSE_JTAG);\n                break;\n            case LOAD:\n                this.timer.set((value >>> LOAD_SHIFT) & LOAD_MASK);\n                break;\n            case SCRATCH0:\n            case SCRATCH1:\n            case SCRATCH2:\n            case SCRATCH3:\n            case SCRATCH4:\n            case SCRATCH5:\n            case SCRATCH6:\n            case SCRATCH7:\n                this.scratchData[(offset - SCRATCH0) >> 2] = value;\n                break;\n            case TICK:\n                this.tickEnable = !!(value & TICK_ENABLE);\n                this.timer.enable = this.enable && this.tickEnable;\n                this.alarm.enable = this.enable && this.tickEnable;\n                // TODO - handle CYCLES (tick also affectes timer)\n                break;\n            default:\n                super.writeUint32(offset, value);\n        }\n    }\n}\n", "export function bit(n) {\n    return 1 << n;\n}\nexport function s32(n) {\n    return n | 0;\n}\nexport function u32(n) {\n    return n >>> 0;\n}\n", "import { s32, u32 } from './utils/bit.js';\nexport class InterpolatorConfig {\n    constructor(value) {\n        this.shift = 0;\n        this.maskLSB = 0;\n        this.maskMSB = 0;\n        this.signed = false;\n        this.crossInput = false;\n        this.crossResult = false;\n        this.addRaw = false;\n        this.forceMSB = 0;\n        this.blend = false;\n        this.clamp = false;\n        this.overf0 = false;\n        this.overf1 = false;\n        this.overf = false;\n        this.shift = (value >>> 0) & 0b11111;\n        this.maskLSB = (value >>> 5) & 0b11111;\n        this.maskMSB = (value >>> 10) & 0b11111;\n        this.signed = Boolean((value >>> 15) & 1);\n        this.crossInput = Boolean((value >>> 16) & 1);\n        this.crossResult = Boolean((value >>> 17) & 1);\n        this.addRaw = Boolean((value >>> 18) & 1);\n        this.forceMSB = (value >>> 19) & 0b11;\n        this.blend = Boolean((value >>> 21) & 1);\n        this.clamp = Boolean((value >>> 22) & 1);\n        this.overf0 = Boolean((value >>> 23) & 1);\n        this.overf1 = Boolean((value >>> 24) & 1);\n        this.overf = Boolean((value >>> 25) & 1);\n    }\n    toUint32() {\n        return (((this.shift & 0b11111) << 0) |\n            ((this.maskLSB & 0b11111) << 5) |\n            ((this.maskMSB & 0b11111) << 10) |\n            ((Number(this.signed) & 1) << 15) |\n            ((Number(this.crossInput) & 1) << 16) |\n            ((Number(this.crossResult) & 1) << 17) |\n            ((Number(this.addRaw) & 1) << 18) |\n            ((this.forceMSB & 0b11) << 19) |\n            ((Number(this.blend) & 1) << 21) |\n            ((Number(this.clamp) & 1) << 22) |\n            ((Number(this.overf0) & 1) << 23) |\n            ((Number(this.overf1) & 1) << 24) |\n            ((Number(this.overf) & 1) << 25));\n    }\n}\nexport class Interpolator {\n    constructor(index) {\n        this.index = index;\n        this.accum0 = 0;\n        this.accum1 = 0;\n        this.base0 = 0;\n        this.base1 = 0;\n        this.base2 = 0;\n        this.ctrl0 = 0;\n        this.ctrl1 = 0;\n        this.result0 = 0;\n        this.result1 = 0;\n        this.result2 = 0;\n        this.smresult0 = 0;\n        this.smresult1 = 0;\n        this.update();\n    }\n    update() {\n        const N = this.index;\n        const ctrl0 = new InterpolatorConfig(this.ctrl0);\n        const ctrl1 = new InterpolatorConfig(this.ctrl1);\n        const do_clamp = ctrl0.clamp && N == 1;\n        const do_blend = ctrl0.blend && N == 0;\n        ctrl0.clamp = do_clamp;\n        ctrl0.blend = do_blend;\n        ctrl1.clamp = false;\n        ctrl1.blend = false;\n        ctrl1.overf0 = false;\n        ctrl1.overf1 = false;\n        ctrl1.overf = false;\n        const input0 = s32(ctrl0.crossInput ? this.accum1 : this.accum0);\n        const input1 = s32(ctrl1.crossInput ? this.accum0 : this.accum1);\n        const msbmask0 = ctrl0.maskMSB == 31 ? 0xffffffff : (1 << (ctrl0.maskMSB + 1)) - 1;\n        const msbmask1 = ctrl1.maskMSB == 31 ? 0xffffffff : (1 << (ctrl1.maskMSB + 1)) - 1;\n        const mask0 = msbmask0 & ~((1 << ctrl0.maskLSB) - 1);\n        const mask1 = msbmask1 & ~((1 << ctrl1.maskLSB) - 1);\n        const uresult0 = (input0 >>> ctrl0.shift) & mask0;\n        const uresult1 = (input1 >>> ctrl1.shift) & mask1;\n        const overf0 = Boolean((input0 >>> ctrl0.shift) & ~msbmask0);\n        const overf1 = Boolean((input1 >>> ctrl1.shift) & ~msbmask1);\n        const overf = overf0 || overf1;\n        const sextmask0 = uresult0 & (1 << ctrl0.maskMSB) ? -1 << ctrl0.maskMSB : 0;\n        const sextmask1 = uresult1 & (1 << ctrl1.maskMSB) ? -1 << ctrl1.maskMSB : 0;\n        const sresult0 = uresult0 | sextmask0;\n        const sresult1 = uresult1 | sextmask1;\n        const result0 = ctrl0.signed ? sresult0 : uresult0;\n        const result1 = ctrl1.signed ? sresult1 : uresult1;\n        const addresult0 = this.base0 + (ctrl0.addRaw ? input0 : result0);\n        const addresult1 = this.base1 + (ctrl1.addRaw ? input1 : result1);\n        const addresult2 = this.base2 + result0 + (do_blend ? 0 : result1);\n        const uclamp0 = u32(result0) < u32(this.base0)\n            ? this.base0\n            : u32(result0) > u32(this.base1)\n                ? this.base1\n                : result0;\n        const sclamp0 = s32(result0) < s32(this.base0)\n            ? this.base0\n            : s32(result0) > s32(this.base1)\n                ? this.base1\n                : result0;\n        const clamp0 = ctrl0.signed ? sclamp0 : uclamp0;\n        const alpha1 = result1 & 0xff;\n        const ublend1 = u32(this.base0) + (Math.floor((alpha1 * (u32(this.base1) - u32(this.base0))) / 256) | 0);\n        const sblend1 = s32(this.base0) + (Math.floor((alpha1 * (s32(this.base1) - s32(this.base0))) / 256) | 0);\n        const blend1 = ctrl1.signed ? sblend1 : ublend1;\n        this.smresult0 = u32(result0);\n        this.smresult1 = u32(result1);\n        this.result0 = u32(do_blend ? alpha1 : (do_clamp ? clamp0 : addresult0) | (ctrl0.forceMSB << 28));\n        this.result1 = u32((do_blend ? blend1 : addresult1) | (ctrl0.forceMSB << 28));\n        this.result2 = u32(addresult2);\n        ctrl0.overf0 = overf0;\n        ctrl0.overf1 = overf1;\n        ctrl0.overf = overf;\n        this.ctrl0 = ctrl0.toUint32();\n        this.ctrl1 = ctrl1.toUint32();\n    }\n    writeback() {\n        const ctrl0 = new InterpolatorConfig(this.ctrl0);\n        const ctrl1 = new InterpolatorConfig(this.ctrl1);\n        this.accum0 = u32(ctrl0.crossResult ? this.result1 : this.result0);\n        this.accum1 = u32(ctrl1.crossResult ? this.result0 : this.result1);\n        this.update();\n    }\n    setBase01(value) {\n        const N = this.index;\n        const ctrl0 = new InterpolatorConfig(this.ctrl0);\n        const ctrl1 = new InterpolatorConfig(this.ctrl1);\n        const do_blend = ctrl0.blend && N == 0;\n        const input0 = value & 0xffff;\n        const input1 = (value >>> 16) & 0xffff;\n        const sextmask0 = input0 & (1 << 15) ? -1 << 15 : 0;\n        const sextmask1 = input1 & (1 << 15) ? -1 << 15 : 0;\n        const base0 = (do_blend ? ctrl1.signed : ctrl0.signed) ? input0 | sextmask0 : input0;\n        const base1 = ctrl1.signed ? input1 | sextmask1 : input1;\n        this.base0 = u32(base0);\n        this.base1 = u32(base1);\n        this.update();\n    }\n}\n", "import { Interpolator } from './interpolator.js';\nconst CPUID = 0x000;\n// GPIO\nconst GPIO_IN = 0x004; // Input value for GPIO pins\nconst GPIO_HI_IN = 0x008; // Input value for QSPI pins\nconst GPIO_OUT = 0x010; // GPIO output value\nconst GPIO_OUT_SET = 0x014; // GPIO output value set\nconst GPIO_OUT_CLR = 0x018; // GPIO output value clear\nconst GPIO_OUT_XOR = 0x01c; // GPIO output value XOR\nconst GPIO_OE = 0x020; // GPIO output enable\nconst GPIO_OE_SET = 0x024; // GPIO output enable set\nconst GPIO_OE_CLR = 0x028; // GPIO output enable clear\nconst GPIO_OE_XOR = 0x02c; // GPIO output enable XOR\nconst GPIO_HI_OUT = 0x030; // QSPI output value\nconst GPIO_HI_OUT_SET = 0x034; // QSPI output value set\nconst GPIO_HI_OUT_CLR = 0x038; // QSPI output value clear\nconst GPIO_HI_OUT_XOR = 0x03c; // QSPI output value XOR\nconst GPIO_HI_OE = 0x040; // QSPI output enable\nconst GPIO_HI_OE_SET = 0x044; // QSPI output enable set\nconst GPIO_HI_OE_CLR = 0x048; // QSPI output enable clear\nconst GPIO_HI_OE_XOR = 0x04c; // QSPI output enable XOR\nconst GPIO_MASK = 0x3fffffff;\n//HARDWARE DIVIDER\nconst DIV_UDIVIDEND = 0x060; //  Divider unsigned dividend\nconst DIV_UDIVISOR = 0x064; //  Divider unsigned divisor\nconst DIV_SDIVIDEND = 0x068; //  Divider signed dividend\nconst DIV_SDIVISOR = 0x06c; //  Divider signed divisor\nconst DIV_QUOTIENT = 0x070; //  Divider result quotient\nconst DIV_REMAINDER = 0x074; //Divider result remainder\nconst DIV_CSR = 0x078;\n//INTERPOLATOR\nconst INTERP0_ACCUM0 = 0x080; // Read/write access to accumulator 0\nconst INTERP0_ACCUM1 = 0x084; // Read/write access to accumulator 1\nconst INTERP0_BASE0 = 0x088; // Read/write access to BASE0 register\nconst INTERP0_BASE1 = 0x08c; // Read/write access to BASE1 register\nconst INTERP0_BASE2 = 0x090; // Read/write access to BASE2 register\nconst INTERP0_POP_LANE0 = 0x094; // Read LANE0 result, and simultaneously write lane results to both accumulators (POP)\nconst INTERP0_POP_LANE1 = 0x098; // Read LANE1 result, and simultaneously write lane results to both accumulators (POP)\nconst INTERP0_POP_FULL = 0x09c; // Read FULL result, and simultaneously write lane results to both accumulators (POP)\nconst INTERP0_PEEK_LANE0 = 0x0a0; // Read LANE0 result, without altering any internal state (PEEK)\nconst INTERP0_PEEK_LANE1 = 0x0a4; // Read LANE1 result, without altering any internal state (PEEK)\nconst INTERP0_PEEK_FULL = 0x0a8; // Read FULL result, without altering any internal state (PEEK)\nconst INTERP0_CTRL_LANE0 = 0x0ac; // Control register for lane 0\nconst INTERP0_CTRL_LANE1 = 0x0b0; // Control register for lane 1\nconst INTERP0_ACCUM0_ADD = 0x0b4; // Values written here are atomically added to ACCUM0\nconst INTERP0_ACCUM1_ADD = 0x0b8; // Values written here are atomically added to ACCUM1\nconst INTERP0_BASE_1AND0 = 0x0bc; // On write, the lower 16 bits go to BASE0, upper bits to BASE1 simultaneously\nconst INTERP1_ACCUM0 = 0x0c0; // Read/write access to accumulator 0\nconst INTERP1_ACCUM1 = 0x0c4; // Read/write access to accumulator 1\nconst INTERP1_BASE0 = 0x0c8; // Read/write access to BASE0 register\nconst INTERP1_BASE1 = 0x0cc; // Read/write access to BASE1 register\nconst INTERP1_BASE2 = 0x0d0; // Read/write access to BASE2 register\nconst INTERP1_POP_LANE0 = 0x0d4; // Read LANE0 result, and simultaneously write lane results to both accumulators (POP)\nconst INTERP1_POP_LANE1 = 0x0d8; // Read LANE1 result, and simultaneously write lane results to both accumulators (POP)\nconst INTERP1_POP_FULL = 0x0dc; // Read FULL result, and simultaneously write lane results to both accumulators (POP)\nconst INTERP1_PEEK_LANE0 = 0x0e0; // Read LANE0 result, without altering any internal state (PEEK)\nconst INTERP1_PEEK_LANE1 = 0x0e4; // Read LANE1 result, without altering any internal state (PEEK)\nconst INTERP1_PEEK_FULL = 0x0e8; // Read FULL result, without altering any internal state (PEEK)\nconst INTERP1_CTRL_LANE0 = 0x0ec; // Control register for lane 0\nconst INTERP1_CTRL_LANE1 = 0x0f0; // Control register for lane 1\nconst INTERP1_ACCUM0_ADD = 0x0f4; // Values written here are atomically added to ACCUM0\nconst INTERP1_ACCUM1_ADD = 0x0f8; // Values written here are atomically added to ACCUM1\nconst INTERP1_BASE_1AND0 = 0x0fc; // On write, the lower 16 bits go to BASE0, upper bits to BASE1 simultaneously\n//SPINLOCK\nconst SPINLOCK_ST = 0x5c;\nconst SPINLOCK0 = 0x100;\nconst SPINLOCK31 = 0x17c;\nexport class RPSIO {\n    constructor(rp2040) {\n        this.rp2040 = rp2040;\n        this.gpioValue = 0;\n        this.gpioOutputEnable = 0;\n        this.qspiGpioValue = 0;\n        this.qspiGpioOutputEnable = 0;\n        this.divDividend = 0;\n        this.divDivisor = 1;\n        this.divQuotient = 0;\n        this.divRemainder = 0;\n        this.divCSR = 0;\n        this.spinLock = 0;\n        this.interp0 = new Interpolator(0);\n        this.interp1 = new Interpolator(1);\n    }\n    updateHardwareDivider(signed) {\n        if (this.divDivisor == 0) {\n            this.divQuotient = this.divDividend > 0 ? -1 : 1;\n            this.divRemainder = this.divDividend;\n        }\n        else {\n            if (signed) {\n                this.divQuotient = (this.divDividend | 0) / (this.divDivisor | 0);\n                this.divRemainder = (this.divDividend | 0) % (this.divDivisor | 0);\n            }\n            else {\n                this.divQuotient = (this.divDividend >>> 0) / (this.divDivisor >>> 0);\n                this.divRemainder = (this.divDividend >>> 0) % (this.divDivisor >>> 0);\n            }\n        }\n        this.divCSR = 0b11;\n        this.rp2040.core.cycles += 8;\n    }\n    readUint32(offset) {\n        if (offset >= SPINLOCK0 && offset <= SPINLOCK31) {\n            const bitIndexMask = 1 << ((offset - SPINLOCK0) / 4);\n            if (this.spinLock & bitIndexMask) {\n                return 0;\n            }\n            else {\n                this.spinLock |= bitIndexMask;\n                return bitIndexMask;\n            }\n        }\n        switch (offset) {\n            case GPIO_IN:\n                return this.rp2040.gpioValues;\n            case GPIO_HI_IN: {\n                const { qspi } = this.rp2040;\n                let result = 0;\n                for (let qspiIndex = 0; qspiIndex < qspi.length; qspiIndex++) {\n                    if (qspi[qspiIndex].inputValue) {\n                        result |= 1 << qspiIndex;\n                    }\n                }\n                return result;\n            }\n            case GPIO_OUT:\n                return this.gpioValue;\n            case GPIO_OE:\n                return this.gpioOutputEnable;\n            case GPIO_HI_OUT:\n                return this.qspiGpioValue;\n            case GPIO_HI_OE:\n                return this.qspiGpioOutputEnable;\n            case GPIO_OUT_SET:\n            case GPIO_OUT_CLR:\n            case GPIO_OUT_XOR:\n            case GPIO_OE_SET:\n            case GPIO_OE_CLR:\n            case GPIO_OE_XOR:\n            case GPIO_HI_OUT_SET:\n            case GPIO_HI_OUT_CLR:\n            case GPIO_HI_OUT_XOR:\n            case GPIO_HI_OE_SET:\n            case GPIO_HI_OE_CLR:\n            case GPIO_HI_OE_XOR:\n                return 0; // TODO verify with silicone\n            case CPUID:\n                // Returns the current CPU core id (always 0 for now)\n                return 0;\n            case SPINLOCK_ST:\n                return this.spinLock;\n            case DIV_UDIVIDEND:\n                return this.divDividend;\n            case DIV_SDIVIDEND:\n                return this.divDividend;\n            case DIV_UDIVISOR:\n                return this.divDivisor;\n            case DIV_SDIVISOR:\n                return this.divDivisor;\n            case DIV_QUOTIENT:\n                this.divCSR &= ~0b10;\n                return this.divQuotient;\n            case DIV_REMAINDER:\n                return this.divRemainder;\n            case DIV_CSR:\n                return this.divCSR;\n            case INTERP0_ACCUM0:\n                return this.interp0.accum0;\n            case INTERP0_ACCUM1:\n                return this.interp0.accum1;\n            case INTERP0_BASE0:\n                return this.interp0.base0;\n            case INTERP0_BASE1:\n                return this.interp0.base1;\n            case INTERP0_BASE2:\n                return this.interp0.base2;\n            case INTERP0_CTRL_LANE0:\n                return this.interp0.ctrl0;\n            case INTERP0_CTRL_LANE1:\n                return this.interp0.ctrl1;\n            case INTERP0_PEEK_LANE0:\n                return this.interp0.result0;\n            case INTERP0_PEEK_LANE1:\n                return this.interp0.result1;\n            case INTERP0_PEEK_FULL:\n                return this.interp0.result2;\n            case INTERP0_POP_LANE0: {\n                const value = this.interp0.result0;\n                this.interp0.writeback();\n                return value;\n            }\n            case INTERP0_POP_LANE1: {\n                const value = this.interp0.result1;\n                this.interp0.writeback();\n                return value;\n            }\n            case INTERP0_POP_FULL: {\n                const value = this.interp0.result2;\n                this.interp0.writeback();\n                return value;\n            }\n            case INTERP0_ACCUM0_ADD:\n                return this.interp0.smresult0;\n            case INTERP0_ACCUM1_ADD:\n                return this.interp0.smresult1;\n            case INTERP1_ACCUM0:\n                return this.interp1.accum0;\n            case INTERP1_ACCUM1:\n                return this.interp1.accum1;\n            case INTERP1_BASE0:\n                return this.interp1.base0;\n            case INTERP1_BASE1:\n                return this.interp1.base1;\n            case INTERP1_BASE2:\n                return this.interp1.base2;\n            case INTERP1_CTRL_LANE0:\n                return this.interp1.ctrl0;\n            case INTERP1_CTRL_LANE1:\n                return this.interp1.ctrl1;\n            case INTERP1_PEEK_LANE0:\n                return this.interp1.result0;\n            case INTERP1_PEEK_LANE1:\n                return this.interp1.result1;\n            case INTERP1_PEEK_FULL:\n                return this.interp1.result2;\n            case INTERP1_POP_LANE0: {\n                const value = this.interp1.result0;\n                this.interp1.writeback();\n                return value;\n            }\n            case INTERP1_POP_LANE1: {\n                const value = this.interp1.result1;\n                this.interp1.writeback();\n                return value;\n            }\n            case INTERP1_POP_FULL: {\n                const value = this.interp1.result2;\n                this.interp1.writeback();\n                return value;\n            }\n            case INTERP1_ACCUM0_ADD:\n                return this.interp1.smresult0;\n            case INTERP1_ACCUM1_ADD:\n                return this.interp1.smresult1;\n        }\n        console.warn(`Read from invalid SIO address: ${offset.toString(16)}`);\n        return 0xffffffff;\n    }\n    writeUint32(offset, value) {\n        if (offset >= SPINLOCK0 && offset <= SPINLOCK31) {\n            const bitIndexMask = ~(1 << ((offset - SPINLOCK0) / 4));\n            this.spinLock &= bitIndexMask;\n            return;\n        }\n        const prevGpioValue = this.gpioValue;\n        const prevGpioOutputEnable = this.gpioOutputEnable;\n        switch (offset) {\n            case GPIO_OUT:\n                this.gpioValue = value & GPIO_MASK;\n                break;\n            case GPIO_OUT_SET:\n                this.gpioValue |= value & GPIO_MASK;\n                break;\n            case GPIO_OUT_CLR:\n                this.gpioValue &= ~value;\n                break;\n            case GPIO_OUT_XOR:\n                this.gpioValue ^= value & GPIO_MASK;\n                break;\n            case GPIO_OE:\n                this.gpioOutputEnable = value & GPIO_MASK;\n                break;\n            case GPIO_OE_SET:\n                this.gpioOutputEnable |= value & GPIO_MASK;\n                break;\n            case GPIO_OE_CLR:\n                this.gpioOutputEnable &= ~value;\n                break;\n            case GPIO_OE_XOR:\n                this.gpioOutputEnable ^= value & GPIO_MASK;\n                break;\n            case GPIO_HI_OUT:\n                this.qspiGpioValue = value & GPIO_MASK;\n                break;\n            case GPIO_HI_OUT_SET:\n                this.qspiGpioValue |= value & GPIO_MASK;\n                break;\n            case GPIO_HI_OUT_CLR:\n                this.qspiGpioValue &= ~value;\n                break;\n            case GPIO_HI_OUT_XOR:\n                this.qspiGpioValue ^= value & GPIO_MASK;\n                break;\n            case GPIO_HI_OE:\n                this.qspiGpioOutputEnable = value & GPIO_MASK;\n                break;\n            case GPIO_HI_OE_SET:\n                this.qspiGpioOutputEnable |= value & GPIO_MASK;\n                break;\n            case GPIO_HI_OE_CLR:\n                this.qspiGpioOutputEnable &= ~value;\n                break;\n            case GPIO_HI_OE_XOR:\n                this.qspiGpioOutputEnable ^= value & GPIO_MASK;\n                break;\n            case DIV_UDIVIDEND:\n                this.divDividend = value;\n                this.updateHardwareDivider(false);\n                break;\n            case DIV_SDIVIDEND:\n                this.divDividend = value;\n                this.updateHardwareDivider(true);\n                break;\n            case DIV_UDIVISOR:\n                this.divDivisor = value;\n                this.updateHardwareDivider(false);\n                break;\n            case DIV_SDIVISOR:\n                this.divDivisor = value;\n                this.updateHardwareDivider(true);\n                break;\n            case DIV_QUOTIENT:\n                this.divQuotient = value;\n                this.divCSR = 0b11;\n                break;\n            case DIV_REMAINDER:\n                this.divRemainder = value;\n                this.divCSR = 0b11;\n                break;\n            case INTERP0_ACCUM0:\n                this.interp0.accum0 = value;\n                this.interp0.update();\n                break;\n            case INTERP0_ACCUM1:\n                this.interp0.accum1 = value;\n                this.interp0.update();\n                break;\n            case INTERP0_BASE0:\n                this.interp0.base0 = value;\n                this.interp0.update();\n                break;\n            case INTERP0_BASE1:\n                this.interp0.base1 = value;\n                this.interp0.update();\n                break;\n            case INTERP0_BASE2:\n                this.interp0.base2 = value;\n                this.interp0.update();\n                break;\n            case INTERP0_CTRL_LANE0:\n                this.interp0.ctrl0 = value;\n                this.interp0.update();\n                break;\n            case INTERP0_CTRL_LANE1:\n                this.interp0.ctrl1 = value;\n                this.interp0.update();\n                break;\n            case INTERP0_ACCUM0_ADD:\n                this.interp0.accum0 += value;\n                this.interp0.update();\n                break;\n            case INTERP0_ACCUM1_ADD:\n                this.interp0.accum1 += value;\n                this.interp0.update();\n                break;\n            case INTERP0_BASE_1AND0:\n                this.interp0.setBase01(value);\n                break;\n            case INTERP1_ACCUM0:\n                this.interp1.accum0 = value;\n                this.interp1.update();\n                break;\n            case INTERP1_ACCUM1:\n                this.interp1.accum1 = value;\n                this.interp1.update();\n                break;\n            case INTERP1_BASE0:\n                this.interp1.base0 = value;\n                this.interp1.update();\n                break;\n            case INTERP1_BASE1:\n                this.interp1.base1 = value;\n                this.interp1.update();\n                break;\n            case INTERP1_BASE2:\n                this.interp1.base2 = value;\n                this.interp1.update();\n                break;\n            case INTERP1_CTRL_LANE0:\n                this.interp1.ctrl0 = value;\n                this.interp1.update();\n                break;\n            case INTERP1_CTRL_LANE1:\n                this.interp1.ctrl1 = value;\n                this.interp1.update();\n                break;\n            case INTERP1_ACCUM0_ADD:\n                this.interp1.accum0 += value;\n                this.interp1.update();\n                break;\n            case INTERP1_ACCUM1_ADD:\n                this.interp1.accum1 += value;\n                this.interp1.update();\n                break;\n            case INTERP1_BASE_1AND0:\n                this.interp1.setBase01(value);\n                break;\n            default:\n                console.warn(`Write to invalid SIO address: ${offset.toString(16)}, value=${value.toString(16)}`);\n        }\n        const pinsToUpdate = (this.gpioValue ^ prevGpioValue) | (this.gpioOutputEnable ^ prevGpioOutputEnable);\n        if (pinsToUpdate) {\n            const { gpio } = this.rp2040;\n            for (let gpioIndex = 0; gpioIndex < gpio.length; gpioIndex++) {\n                if (pinsToUpdate & (1 << gpioIndex)) {\n                    gpio[gpioIndex].checkForUpdates();\n                }\n            }\n        }\n    }\n}\n", "export function getCurrentMicroseconds() {\n    if (typeof performance != 'undefined') {\n        return Math.floor(performance.now() * 1000);\n    }\n    else {\n        return Math.floor(eval('require')('perf_hooks').performance.now() * 1000);\n    }\n}\nfunction leftPad(value, minLength, padChar = ' ') {\n    if (value.length < minLength) {\n        value = padChar + value;\n    }\n    return value;\n}\nfunction rightPad(value, minLength, padChar = ' ') {\n    if (value.length < minLength) {\n        value += padChar;\n    }\n    return value;\n}\nexport function formatTime(date) {\n    const hours = leftPad(date.getHours().toString(), 2, '0');\n    const minutes = leftPad(date.getMinutes().toString(), 2, '0');\n    const seconds = leftPad(date.getSeconds().toString(), 2, '0');\n    const milliseconds = rightPad(date.getMilliseconds().toString(), 3);\n    return `${hours}:${minutes}:${seconds}.${milliseconds}`;\n}\n", "import { formatTime } from './time.js';\nexport var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n})(LogLevel || (LogLevel = {}));\nexport class ConsoleLogger {\n    constructor(currentLogLevel, throwOnError = true) {\n        this.currentLogLevel = currentLogLevel;\n        this.throwOnError = throwOnError;\n    }\n    aboveLogLevel(logLevel) {\n        return logLevel >= this.currentLogLevel ? true : false;\n    }\n    formatMessage(componentName, message) {\n        const currentTime = formatTime(new Date());\n        return `${currentTime} [${componentName}] ${message}`;\n    }\n    debug(componetName, message) {\n        if (this.aboveLogLevel(LogLevel.Debug)) {\n            console.debug(this.formatMessage(componetName, message));\n        }\n    }\n    warn(componetName, message) {\n        if (this.aboveLogLevel(LogLevel.Warn)) {\n            console.warn(this.formatMessage(componetName, message));\n        }\n    }\n    error(componentName, message) {\n        if (this.aboveLogLevel(LogLevel.Error)) {\n            console.error(this.formatMessage(componentName, message));\n            if (this.throwOnError) {\n                throw new Error(`[${componentName}] ${message}`);\n            }\n        }\n    }\n    info(componentName, message) {\n        if (this.aboveLogLevel(LogLevel.Info)) {\n            console.info(this.formatMessage(componentName, message));\n        }\n    }\n}\n", "import { SimulationClock } from './clock/simulation-clock.js';\nimport { CortexM0Core } from './cortex-m0-core.js';\nimport { GPIOPin } from './gpio-pin.js';\nimport { IRQ } from './irq.js';\nimport { RPADC } from './peripherals/adc.js';\nimport { RPBUSCTRL } from './peripherals/busctrl.js';\nimport { RPClocks } from './peripherals/clocks.js';\nimport { DREQChannel, RPDMA } from './peripherals/dma.js';\nimport { RPI2C } from './peripherals/i2c.js';\nimport { RPIO } from './peripherals/io.js';\nimport { RPPADS } from './peripherals/pads.js';\nimport { UnimplementedPeripheral } from './peripherals/peripheral.js';\nimport { RPPIO } from './peripherals/pio.js';\nimport { RPPPB } from './peripherals/ppb.js';\nimport { RPPWM } from './peripherals/pwm.js';\nimport { RPReset } from './peripherals/reset.js';\nimport { RP2040RTC } from './peripherals/rtc.js';\nimport { RPSPI } from './peripherals/spi.js';\nimport { RPSSI } from './peripherals/ssi.js';\nimport { RP2040SysCfg } from './peripherals/syscfg.js';\nimport { RP2040SysInfo } from './peripherals/sysinfo.js';\nimport { RPTBMAN } from './peripherals/tbman.js';\nimport { RPTimer } from './peripherals/timer.js';\nimport { RPUART } from './peripherals/uart.js';\nimport { RPUSBController } from './peripherals/usb.js';\nimport { RPWatchdog } from './peripherals/watchdog.js';\nimport { RPSIO } from './sio.js';\nimport { ConsoleLogger, LogLevel } from './utils/logging.js';\nexport const FLASH_START_ADDRESS = 0x10000000;\nexport const FLASH_END_ADDRESS = 0x14000000;\nexport const RAM_START_ADDRESS = 0x20000000;\nexport const APB_START_ADDRESS = 0x40000000;\nexport const DPRAM_START_ADDRESS = 0x50100000;\nexport const SIO_START_ADDRESS = 0xd0000000;\nconst LOG_NAME = 'RP2040';\nconst KB = 1024;\nconst MB = 1024 * KB;\nconst MHz = 1000000;\nexport class RP2040 {\n    constructor(clock = new SimulationClock()) {\n        this.clock = clock;\n        this.bootrom = new Uint32Array(4 * KB);\n        this.sram = new Uint8Array(264 * KB);\n        this.sramView = new DataView(this.sram.buffer);\n        this.flash = new Uint8Array(16 * MB);\n        this.flash16 = new Uint16Array(this.flash.buffer);\n        this.flashView = new DataView(this.flash.buffer);\n        this.usbDPRAM = new Uint8Array(4 * KB);\n        this.usbDPRAMView = new DataView(this.usbDPRAM.buffer);\n        this.core = new CortexM0Core(this);\n        /* Clocks */\n        this.clkSys = 125 * MHz;\n        this.clkPeri = 125 * MHz;\n        this.ppb = new RPPPB(this, 'PPB');\n        this.sio = new RPSIO(this);\n        this.uart = [\n            new RPUART(this, 'UART0', IRQ.UART0, {\n                rx: DREQChannel.DREQ_UART0_RX,\n                tx: DREQChannel.DREQ_UART0_TX,\n            }),\n            new RPUART(this, 'UART1', IRQ.UART1, {\n                rx: DREQChannel.DREQ_UART1_RX,\n                tx: DREQChannel.DREQ_UART1_TX,\n            }),\n        ];\n        this.i2c = [new RPI2C(this, 'I2C0', IRQ.I2C0), new RPI2C(this, 'I2C1', IRQ.I2C1)];\n        this.pwm = new RPPWM(this, 'PWM_BASE');\n        this.adc = new RPADC(this, 'ADC');\n        this.gpio = [\n            new GPIOPin(this, 0),\n            new GPIOPin(this, 1),\n            new GPIOPin(this, 2),\n            new GPIOPin(this, 3),\n            new GPIOPin(this, 4),\n            new GPIOPin(this, 5),\n            new GPIOPin(this, 6),\n            new GPIOPin(this, 7),\n            new GPIOPin(this, 8),\n            new GPIOPin(this, 9),\n            new GPIOPin(this, 10),\n            new GPIOPin(this, 11),\n            new GPIOPin(this, 12),\n            new GPIOPin(this, 13),\n            new GPIOPin(this, 14),\n            new GPIOPin(this, 15),\n            new GPIOPin(this, 16),\n            new GPIOPin(this, 17),\n            new GPIOPin(this, 18),\n            new GPIOPin(this, 19),\n            new GPIOPin(this, 20),\n            new GPIOPin(this, 21),\n            new GPIOPin(this, 22),\n            new GPIOPin(this, 23),\n            new GPIOPin(this, 24),\n            new GPIOPin(this, 25),\n            new GPIOPin(this, 26),\n            new GPIOPin(this, 27),\n            new GPIOPin(this, 28),\n            new GPIOPin(this, 29),\n        ];\n        this.qspi = [\n            new GPIOPin(this, 0, 'SCLK'),\n            new GPIOPin(this, 1, 'SS'),\n            new GPIOPin(this, 2, 'SD0'),\n            new GPIOPin(this, 3, 'SD1'),\n            new GPIOPin(this, 4, 'SD2'),\n            new GPIOPin(this, 5, 'SD3'),\n        ];\n        this.dma = new RPDMA(this, 'DMA');\n        this.pio = [\n            new RPPIO(this, 'PIO0', IRQ.PIO0_IRQ0, 0),\n            new RPPIO(this, 'PIO1', IRQ.PIO1_IRQ0, 1),\n        ];\n        this.usbCtrl = new RPUSBController(this, 'USB');\n        this.spi = [\n            new RPSPI(this, 'SPI0', IRQ.SPI0, {\n                rx: DREQChannel.DREQ_SPI0_RX,\n                tx: DREQChannel.DREQ_SPI0_TX,\n            }),\n            new RPSPI(this, 'SPI1', IRQ.SPI1, {\n                rx: DREQChannel.DREQ_SPI1_RX,\n                tx: DREQChannel.DREQ_SPI1_TX,\n            }),\n        ];\n        this.logger = new ConsoleLogger(LogLevel.Debug, true);\n        this.peripherals = {\n            0x18000: new RPSSI(this, 'SSI'),\n            0x40000: new RP2040SysInfo(this, 'SYSINFO_BASE'),\n            0x40004: new RP2040SysCfg(this, 'SYSCFG'),\n            0x40008: new RPClocks(this, 'CLOCKS_BASE'),\n            0x4000c: new RPReset(this, 'RESETS_BASE'),\n            0x40010: new UnimplementedPeripheral(this, 'PSM_BASE'),\n            0x40014: new RPIO(this, 'IO_BANK0_BASE'),\n            0x40018: new UnimplementedPeripheral(this, 'IO_QSPI_BASE'),\n            0x4001c: new RPPADS(this, 'PADS_BANK0_BASE', 'bank0'),\n            0x40020: new RPPADS(this, 'PADS_QSPI_BASE', 'qspi'),\n            0x40024: new UnimplementedPeripheral(this, 'XOSC_BASE'),\n            0x40028: new UnimplementedPeripheral(this, 'PLL_SYS_BASE'),\n            0x4002c: new UnimplementedPeripheral(this, 'PLL_USB_BASE'),\n            0x40030: new RPBUSCTRL(this, 'BUSCTRL_BASE'),\n            0x40034: this.uart[0],\n            0x40038: this.uart[1],\n            0x4003c: this.spi[0],\n            0x40040: this.spi[1],\n            0x40044: this.i2c[0],\n            0x40048: this.i2c[1],\n            0x4004c: this.adc,\n            0x40050: this.pwm,\n            0x40054: new RPTimer(this, 'TIMER_BASE'),\n            0x40058: new RPWatchdog(this, 'WATCHDOG_BASE'),\n            0x4005c: new RP2040RTC(this, 'RTC_BASE'),\n            0x40060: new UnimplementedPeripheral(this, 'ROSC_BASE'),\n            0x40064: new UnimplementedPeripheral(this, 'VREG_AND_CHIP_RESET_BASE'),\n            0x4006c: new RPTBMAN(this, 'TBMAN_BASE'),\n            0x50000: this.dma,\n            0x50110: this.usbCtrl,\n            0x50200: this.pio[0],\n            0x50300: this.pio[1],\n        };\n        // Debugging\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        this.onBreak = (code) => {\n            // TODO: raise HardFault exception\n            // console.error('Breakpoint!', code);\n        };\n        this.reset();\n    }\n    loadBootrom(bootromData) {\n        this.bootrom.set(bootromData);\n        this.reset();\n    }\n    reset() {\n        this.core.reset();\n        this.pwm.reset();\n        this.flash.fill(0xff);\n    }\n    readUint32(address) {\n        address = address >>> 0; // round to 32-bits, unsigned\n        if (address & 0x3) {\n            this.logger.error(LOG_NAME, `read from address ${address.toString(16)}, which is not 32 bit aligned`);\n        }\n        const { bootrom } = this;\n        if (address < bootrom.length * 4) {\n            return bootrom[address / 4];\n        }\n        else if (address >= FLASH_START_ADDRESS && address < FLASH_END_ADDRESS) {\n            // Flash is mirrored four times:\n            // - 0x10000000 XIP\n            // - 0x11000000 XIP_NOALLOC\n            // - 0x12000000 XIP_NOCACHE\n            // - 0x13000000 XIP_NOCACHE_NOALLOC\n            const offset = address & 16777215;\n            return this.flashView.getUint32(offset, true);\n        }\n        else if (address >= RAM_START_ADDRESS && address < RAM_START_ADDRESS + this.sram.length) {\n            return this.sramView.getUint32(address - RAM_START_ADDRESS, true);\n        }\n        else if (address >= DPRAM_START_ADDRESS &&\n            address < DPRAM_START_ADDRESS + this.usbDPRAM.length) {\n            return this.usbDPRAMView.getUint32(address - DPRAM_START_ADDRESS, true);\n        }\n        else if (address >>> 12 === 0xe000e) {\n            return this.ppb.readUint32(address & 0xfff);\n        }\n        else if (address >= SIO_START_ADDRESS && address < SIO_START_ADDRESS + 0x10000000) {\n            return this.sio.readUint32(address - SIO_START_ADDRESS);\n        }\n        const peripheral = this.findPeripheral(address);\n        if (peripheral) {\n            return peripheral.readUint32(address & 0x3fff);\n        }\n        this.logger.warn(LOG_NAME, `Read from invalid memory address: ${address.toString(16)}`);\n        return 0xffffffff;\n    }\n    findPeripheral(address) {\n        return this.peripherals[(address >>> 14) << 2];\n    }\n    /** We assume the address is 16-bit aligned */\n    readUint16(address) {\n        if (address >= FLASH_START_ADDRESS && address < FLASH_START_ADDRESS + this.flash.length) {\n            return this.flashView.getUint16(address - FLASH_START_ADDRESS, true);\n        }\n        else if (address >= RAM_START_ADDRESS && address < RAM_START_ADDRESS + this.sram.length) {\n            return this.sramView.getUint16(address - RAM_START_ADDRESS, true);\n        }\n        const value = this.readUint32(address & 0xfffffffc);\n        return address & 0x2 ? (value & 0xffff0000) >>> 16 : value & 0xffff;\n    }\n    readUint8(address) {\n        if (address >= FLASH_START_ADDRESS && address < FLASH_START_ADDRESS + this.flash.length) {\n            return this.flash[address - FLASH_START_ADDRESS];\n        }\n        else if (address >= RAM_START_ADDRESS && address < RAM_START_ADDRESS + this.sram.length) {\n            return this.sram[address - RAM_START_ADDRESS];\n        }\n        const value = this.readUint16(address & 0xfffffffe);\n        return (address & 0x1 ? (value & 0xff00) >>> 8 : value & 0xff) >>> 0;\n    }\n    writeUint32(address, value) {\n        address = address >>> 0;\n        const { bootrom } = this;\n        const peripheral = this.findPeripheral(address);\n        if (peripheral) {\n            const atomicType = (address & 0x3000) >> 12;\n            const offset = address & 0xfff;\n            peripheral.writeUint32Atomic(offset, value, atomicType);\n        }\n        else if (address < bootrom.length * 4) {\n            bootrom[address / 4] = value;\n        }\n        else if (address >= FLASH_START_ADDRESS &&\n            address < FLASH_START_ADDRESS + this.flash.length) {\n            this.flashView.setUint32(address - FLASH_START_ADDRESS, value, true);\n        }\n        else if (address >= RAM_START_ADDRESS && address < RAM_START_ADDRESS + this.sram.length) {\n            this.sramView.setUint32(address - RAM_START_ADDRESS, value, true);\n        }\n        else if (address >= DPRAM_START_ADDRESS &&\n            address < DPRAM_START_ADDRESS + this.usbDPRAM.length) {\n            const offset = address - DPRAM_START_ADDRESS;\n            this.usbDPRAMView.setUint32(offset, value, true);\n            this.usbCtrl.DPRAMUpdated(offset, value);\n        }\n        else if (address >= SIO_START_ADDRESS && address < SIO_START_ADDRESS + 0x10000000) {\n            this.sio.writeUint32(address - SIO_START_ADDRESS, value);\n        }\n        else if (address >>> 12 === 0xe000e) {\n            this.ppb.writeUint32(address & 0xfff, value);\n        }\n        else {\n            this.logger.warn(LOG_NAME, `Write to undefined address: ${address.toString(16)}`);\n        }\n    }\n    writeUint8(address, value) {\n        if (address >= RAM_START_ADDRESS && address < RAM_START_ADDRESS + this.sram.length) {\n            this.sram[address - RAM_START_ADDRESS] = value;\n            return;\n        }\n        const alignedAddress = (address & 0xfffffffc) >>> 0;\n        const offset = address & 0x3;\n        const peripheral = this.findPeripheral(address);\n        if (peripheral) {\n            const atomicType = (alignedAddress & 0x3000) >> 12;\n            const offset = alignedAddress & 0xfff;\n            peripheral.writeUint32Atomic(offset, (value & 0xff) | ((value & 0xff) << 8) | ((value & 0xff) << 16) | ((value & 0xff) << 24), atomicType);\n            return;\n        }\n        const originalValue = this.readUint32(alignedAddress);\n        const newValue = new Uint32Array([originalValue]);\n        new DataView(newValue.buffer).setUint8(offset, value);\n        this.writeUint32(alignedAddress, newValue[0]);\n    }\n    writeUint16(address, value) {\n        // we assume that addess is 16-bit aligned.\n        // Ideally we should generate a fault if not!\n        if (address >= RAM_START_ADDRESS && address < RAM_START_ADDRESS + this.sram.length) {\n            this.sramView.setUint16(address - RAM_START_ADDRESS, value, true);\n            return;\n        }\n        const alignedAddress = (address & 0xfffffffc) >>> 0;\n        const offset = address & 0x3;\n        const peripheral = this.findPeripheral(address);\n        if (peripheral) {\n            const atomicType = (alignedAddress & 0x3000) >> 12;\n            const offset = alignedAddress & 0xfff;\n            peripheral.writeUint32Atomic(offset, (value & 0xffff) | ((value & 0xffff) << 16), atomicType);\n            return;\n        }\n        const originalValue = this.readUint32(alignedAddress);\n        const newValue = new Uint32Array([originalValue]);\n        new DataView(newValue.buffer).setUint16(offset, value, true);\n        this.writeUint32(alignedAddress, newValue[0]);\n    }\n    get gpioValues() {\n        const { gpio } = this;\n        let result = 0;\n        for (let gpioIndex = 0; gpioIndex < gpio.length; gpioIndex++) {\n            if (gpio[gpioIndex].inputValue) {\n                result |= 1 << gpioIndex;\n            }\n        }\n        return result;\n    }\n    setInterrupt(irq, value) {\n        this.core.setInterrupt(irq, value);\n    }\n    updateIOInterrupt() {\n        let interruptValue = false;\n        for (const pin of this.gpio) {\n            if (pin.irqValue) {\n                interruptValue = true;\n            }\n        }\n        this.setInterrupt(IRQ.IO_BANK0, interruptValue);\n    }\n    step() {\n        this.core.executeInstruction();\n    }\n}\n", "import { MAX_HARDWARE_IRQ } from './irq.js';\nimport { APB_START_ADDRESS, SIO_START_ADDRESS } from './rp2040.js';\n/* eslint-disable @typescript-eslint/no-unused-vars */\nconst EXC_RESET = 1;\nconst EXC_NMI = 2;\nconst EXC_HARDFAULT = 3;\nconst EXC_SVCALL = 11;\nconst EXC_PENDSV = 14;\nconst EXC_SYSTICK = 15;\nconst SYSM_APSR = 0;\nconst SYSM_IAPSR = 1;\nconst SYSM_EAPSR = 2;\nconst SYSM_XPSR = 3;\nconst SYSM_IPSR = 5;\nconst SYSM_EPSR = 6;\nconst SYSM_IEPSR = 7;\nexport const SYSM_MSP = 8;\nexport const SYSM_PSP = 9;\nexport const SYSM_PRIMASK = 16;\nexport const SYSM_CONTROL = 20;\n/* eslint-enable @typescript-eslint/no-unused-vars */\n// Lowest possible exception priority\nconst LOWEST_PRIORITY = 4;\nvar ExecutionMode;\n(function (ExecutionMode) {\n    ExecutionMode[ExecutionMode[\"Mode_Thread\"] = 0] = \"Mode_Thread\";\n    ExecutionMode[ExecutionMode[\"Mode_Handler\"] = 1] = \"Mode_Handler\";\n})(ExecutionMode || (ExecutionMode = {}));\nfunction signExtend8(value) {\n    return (value << 24) >> 24;\n}\nfunction signExtend16(value) {\n    return (value << 16) >> 16;\n}\nconst spRegister = 13;\nconst pcRegister = 15;\nvar StackPointerBank;\n(function (StackPointerBank) {\n    StackPointerBank[StackPointerBank[\"SPmain\"] = 0] = \"SPmain\";\n    StackPointerBank[StackPointerBank[\"SPprocess\"] = 1] = \"SPprocess\";\n})(StackPointerBank || (StackPointerBank = {}));\nconst LOG_NAME = 'CortexM0Core';\nexport class CortexM0Core {\n    constructor(rp2040) {\n        this.rp2040 = rp2040;\n        this.registers = new Uint32Array(16);\n        this.bankedSP = 0;\n        this.cycles = 0;\n        this.eventRegistered = false;\n        this.waiting = false;\n        // APSR fields\n        this.N = false;\n        this.C = false;\n        this.Z = false;\n        this.V = false;\n        // How many bytes to rewind the last break instruction\n        this.breakRewind = 0;\n        // PRIMASK fields\n        this.PM = false;\n        // CONTROL fields\n        this.SPSEL = StackPointerBank.SPmain;\n        this.nPRIV = false;\n        this.currentMode = ExecutionMode.Mode_Thread;\n        this.IPSR = 0;\n        this.interruptNMIMask = 0;\n        this.pendingInterrupts = 0;\n        this.enabledInterrupts = 0;\n        this.interruptPriorities = [0xffffffff, 0x0, 0x0, 0x0];\n        this.pendingNMI = false;\n        this.pendingPendSV = false;\n        this.pendingSVCall = false;\n        this.pendingSystick = false;\n        this.interruptsUpdated = false;\n        this.VTOR = 0;\n        this.SHPR2 = 0;\n        this.SHPR3 = 0;\n        /** Hook to listen for function calls - branch-link (BL/BLX) instructions */\n        this.blTaken = (core, blx) => {\n            void core; // surpress unused variable warnings\n            void blx;\n        };\n        this.SP = 0xfffffffc;\n        this.bankedSP = 0xfffffffc;\n    }\n    get logger() {\n        return this.rp2040.logger;\n    }\n    reset() {\n        this.SP = this.rp2040.readUint32(this.VTOR);\n        this.PC = this.rp2040.readUint32(this.VTOR + 4) & 0xfffffffe;\n        this.cycles = 0;\n    }\n    get SP() {\n        return this.registers[13];\n    }\n    set SP(value) {\n        this.registers[13] = value & ~0x3;\n    }\n    get LR() {\n        return this.registers[14];\n    }\n    set LR(value) {\n        this.registers[14] = value;\n    }\n    get PC() {\n        return this.registers[15];\n    }\n    set PC(value) {\n        this.registers[15] = value;\n    }\n    get APSR() {\n        return ((this.N ? 0x80000000 : 0) |\n            (this.Z ? 0x40000000 : 0) |\n            (this.C ? 0x20000000 : 0) |\n            (this.V ? 0x10000000 : 0));\n    }\n    set APSR(value) {\n        this.N = !!(value & 0x80000000);\n        this.Z = !!(value & 0x40000000);\n        this.C = !!(value & 0x20000000);\n        this.V = !!(value & 0x10000000);\n    }\n    get xPSR() {\n        return this.APSR | this.IPSR | (1 << 24);\n    }\n    set xPSR(value) {\n        this.APSR = value;\n        this.IPSR = value & 0x3f;\n    }\n    checkCondition(cond) {\n        // Evaluate base condition.\n        let result = false;\n        switch (cond >> 1) {\n            case 0b000:\n                result = this.Z;\n                break;\n            case 0b001:\n                result = this.C;\n                break;\n            case 0b010:\n                result = this.N;\n                break;\n            case 0b011:\n                result = this.V;\n                break;\n            case 0b100:\n                result = this.C && !this.Z;\n                break;\n            case 0b101:\n                result = this.N === this.V;\n                break;\n            case 0b110:\n                result = this.N === this.V && !this.Z;\n                break;\n            case 0b111:\n                result = true;\n                break;\n        }\n        return cond & 0b1 && cond != 0b1111 ? !result : result;\n    }\n    readUint32(address) {\n        return this.rp2040.readUint32(address);\n    }\n    readUint16(address) {\n        return this.rp2040.readUint16(address);\n    }\n    readUint8(address) {\n        return this.rp2040.readUint8(address);\n    }\n    writeUint32(address, value) {\n        this.rp2040.writeUint32(address, value);\n    }\n    writeUint16(address, value) {\n        this.rp2040.writeUint16(address, value);\n    }\n    writeUint8(address, value) {\n        this.rp2040.writeUint8(address, value);\n    }\n    switchStack(stack) {\n        if (this.SPSEL !== stack) {\n            const temp = this.SP;\n            this.SP = this.bankedSP;\n            this.bankedSP = temp;\n            this.SPSEL = stack;\n        }\n    }\n    get SPprocess() {\n        return this.SPSEL === StackPointerBank.SPprocess ? this.SP : this.bankedSP;\n    }\n    set SPprocess(value) {\n        if (this.SPSEL === StackPointerBank.SPprocess) {\n            this.SP = value;\n        }\n        else {\n            this.bankedSP = value >>> 0;\n        }\n    }\n    get SPmain() {\n        return this.SPSEL === StackPointerBank.SPmain ? this.SP : this.bankedSP;\n    }\n    set SPmain(value) {\n        if (this.SPSEL === StackPointerBank.SPmain) {\n            this.SP = value;\n        }\n        else {\n            this.bankedSP = value >>> 0;\n        }\n    }\n    exceptionEntry(exceptionNumber) {\n        // PushStack:\n        let framePtr = 0;\n        let framePtrAlign = 0;\n        if (this.SPSEL && this.currentMode === ExecutionMode.Mode_Thread) {\n            framePtrAlign = this.SPprocess & 0b100 ? 1 : 0;\n            this.SPprocess = (this.SPprocess - 0x20) & ~0b100;\n            framePtr = this.SPprocess;\n        }\n        else {\n            framePtrAlign = this.SPmain & 0b100 ? 1 : 0;\n            this.SPmain = (this.SPmain - 0x20) & ~0b100;\n            framePtr = this.SPmain;\n        }\n        /* only the stack locations, not the store order, are architected */\n        this.writeUint32(framePtr, this.registers[0]);\n        this.writeUint32(framePtr + 0x4, this.registers[1]);\n        this.writeUint32(framePtr + 0x8, this.registers[2]);\n        this.writeUint32(framePtr + 0xc, this.registers[3]);\n        this.writeUint32(framePtr + 0x10, this.registers[12]);\n        this.writeUint32(framePtr + 0x14, this.LR);\n        this.writeUint32(framePtr + 0x18, this.PC & ~1); // ReturnAddress(ExceptionType);\n        this.writeUint32(framePtr + 0x1c, (this.xPSR & ~(1 << 9)) | (framePtrAlign << 9));\n        if (this.currentMode == ExecutionMode.Mode_Handler) {\n            this.LR = 0xfffffff1;\n        }\n        else {\n            if (!this.SPSEL) {\n                this.LR = 0xfffffff9;\n            }\n            else {\n                this.LR = 0xfffffffd;\n            }\n        }\n        // ExceptionTaken:\n        this.currentMode = ExecutionMode.Mode_Handler; // Enter Handler Mode, now Privileged\n        this.IPSR = exceptionNumber;\n        this.switchStack(StackPointerBank.SPmain);\n        this.eventRegistered = true;\n        const vectorTable = this.VTOR;\n        this.PC = this.readUint32(vectorTable + 4 * exceptionNumber);\n    }\n    exceptionReturn(excReturn) {\n        let framePtr = this.SPmain;\n        switch (excReturn & 0xf) {\n            case 0b0001: // Return to Handler\n                this.currentMode = ExecutionMode.Mode_Handler;\n                this.switchStack(StackPointerBank.SPmain);\n                break;\n            case 0b1001: // Return to Thread using Main stack\n                this.currentMode = ExecutionMode.Mode_Thread;\n                this.switchStack(StackPointerBank.SPmain);\n                break;\n            case 0b1101: // Return to Thread using Process stack\n                framePtr = this.SPprocess;\n                this.currentMode = ExecutionMode.Mode_Thread;\n                this.switchStack(StackPointerBank.SPprocess);\n                break;\n            // Assigning CurrentMode to Mode_Thread causes a drop in privilege\n            // if CONTROL.nPRIV is set to 1\n        }\n        // PopStack:\n        this.registers[0] = this.readUint32(framePtr); // Stack accesses are performed as Unprivileged accesses if\n        this.registers[1] = this.readUint32(framePtr + 0x4); // CONTROL<0>=='1' && EXC_RETURN<3>=='1' Privileged otherwise\n        this.registers[2] = this.readUint32(framePtr + 0x8);\n        this.registers[3] = this.readUint32(framePtr + 0xc);\n        this.registers[12] = this.readUint32(framePtr + 0x10);\n        this.LR = this.readUint32(framePtr + 0x14);\n        this.PC = this.readUint32(framePtr + 0x18);\n        const psr = this.readUint32(framePtr + 0x1c);\n        const framePtrAlign = psr & (1 << 9) ? 0b100 : 0;\n        switch (excReturn & 0xf) {\n            case 0b0001: // Returning to Handler mode\n                this.SPmain = (this.SPmain + 0x20) | framePtrAlign;\n                break;\n            case 0b1001: // Returning to Thread mode using Main stack\n                this.SPmain = (this.SPmain + 0x20) | framePtrAlign;\n                break;\n            case 0b1101: // Returning to Thread mode using Process stack\n                this.SPprocess = (this.SPprocess + 0x20) | framePtrAlign;\n                break;\n        }\n        this.APSR = psr & 0xf0000000;\n        const forceThread = this.currentMode == ExecutionMode.Mode_Thread && this.nPRIV;\n        this.IPSR = forceThread ? 0 : psr & 0x3f;\n        this.interruptsUpdated = true;\n        // Thumb bit should always be one! EPSR<24> = psr<24>; // Load valid EPSR bits from memory\n        this.eventRegistered = true;\n        // if CurrentMode == Mode_Thread && SCR.SLEEPONEXIT == '1' then\n        // SleepOnExit(); // IMPLEMENTATION DEFINED\n    }\n    get pendSVPriority() {\n        return (this.SHPR3 >> 22) & 0x3;\n    }\n    get svCallPriority() {\n        return this.SHPR2 >>> 30;\n    }\n    get systickPriority() {\n        return this.SHPR3 >>> 30;\n    }\n    exceptionPriority(n) {\n        switch (n) {\n            case EXC_RESET:\n                return -3;\n            case EXC_NMI:\n                return -2;\n            case EXC_HARDFAULT:\n                return -1;\n            case EXC_SVCALL:\n                return this.svCallPriority;\n            case EXC_PENDSV:\n                return this.pendSVPriority;\n            case EXC_SYSTICK:\n                return this.systickPriority;\n            default: {\n                if (n < 16) {\n                    return LOWEST_PRIORITY;\n                }\n                const intNum = n - 16;\n                for (let priority = 0; priority < 4; priority++) {\n                    if (this.interruptPriorities[priority] & (1 << intNum)) {\n                        return priority;\n                    }\n                }\n                return LOWEST_PRIORITY;\n            }\n        }\n    }\n    get vectPending() {\n        if (this.pendingNMI) {\n            return EXC_NMI;\n        }\n        const { svCallPriority, systickPriority, pendSVPriority, pendingInterrupts } = this;\n        for (let priority = 0; priority < LOWEST_PRIORITY; priority++) {\n            const levelInterrupts = pendingInterrupts & this.interruptPriorities[priority];\n            if (this.pendingSVCall && priority === svCallPriority) {\n                return EXC_SVCALL;\n            }\n            if (this.pendingPendSV && priority === pendSVPriority) {\n                return EXC_PENDSV;\n            }\n            if (this.pendingSystick && priority === systickPriority) {\n                return EXC_SYSTICK;\n            }\n            if (levelInterrupts) {\n                for (let interruptNumber = 0; interruptNumber < 32; interruptNumber++) {\n                    if (levelInterrupts & (1 << interruptNumber)) {\n                        return 16 + interruptNumber;\n                    }\n                }\n            }\n        }\n        return 0;\n    }\n    setInterrupt(irq, value) {\n        const irqBit = 1 << irq;\n        if (value && !(this.pendingInterrupts & irqBit)) {\n            this.pendingInterrupts |= irqBit;\n            this.interruptsUpdated = true;\n            if (this.waiting && this.checkForInterrupts()) {\n                this.waiting = false;\n            }\n        }\n        else if (!value) {\n            this.pendingInterrupts &= ~irqBit;\n        }\n    }\n    checkForInterrupts() {\n        /* If we're waiting for an interrupt (i.e. WFI/WFE), the ARM says:\n           > If PRIMASK.PM is set to 1, an asynchronous exception that has a higher group priority than any\n           > active exception results in a WFI instruction exit. If the group priority of the exception is less than or\n           > equal to the execution group priority, the exception is ignored.\n        */\n        const currentPriority = this.waiting\n            ? this.PM\n                ? this.exceptionPriority(this.IPSR)\n                : LOWEST_PRIORITY\n            : Math.min(this.exceptionPriority(this.IPSR), this.PM ? 0 : LOWEST_PRIORITY);\n        const interruptSet = this.pendingInterrupts & this.enabledInterrupts;\n        const { svCallPriority, systickPriority, pendSVPriority } = this;\n        if (this.pendingNMI) {\n            this.pendingNMI = false;\n            this.exceptionEntry(EXC_NMI);\n            return true;\n        }\n        for (let priority = 0; priority < currentPriority; priority++) {\n            const levelInterrupts = interruptSet & this.interruptPriorities[priority];\n            if (this.pendingSVCall && priority === svCallPriority) {\n                this.pendingSVCall = false;\n                this.exceptionEntry(EXC_SVCALL);\n                return true;\n            }\n            if (this.pendingPendSV && priority === pendSVPriority) {\n                this.pendingPendSV = false;\n                this.exceptionEntry(EXC_PENDSV);\n                return true;\n            }\n            if (this.pendingSystick && priority === systickPriority) {\n                this.pendingSystick = false;\n                this.exceptionEntry(EXC_SYSTICK);\n                return true;\n            }\n            if (levelInterrupts) {\n                for (let interruptNumber = 0; interruptNumber < 32; interruptNumber++) {\n                    if (levelInterrupts & (1 << interruptNumber)) {\n                        if (interruptNumber > MAX_HARDWARE_IRQ) {\n                            this.pendingInterrupts &= ~(1 << interruptNumber);\n                        }\n                        this.exceptionEntry(16 + interruptNumber);\n                        return true;\n                    }\n                }\n            }\n        }\n        this.interruptsUpdated = false;\n        return false;\n    }\n    readSpecialRegister(sysm) {\n        switch (sysm) {\n            case SYSM_APSR:\n                return this.APSR;\n            case SYSM_XPSR:\n                return this.xPSR;\n            case SYSM_IPSR:\n                return this.IPSR;\n            case SYSM_PRIMASK:\n                return this.PM ? 1 : 0;\n            case SYSM_MSP:\n                return this.SPmain;\n            case SYSM_PSP:\n                return this.SPprocess;\n            case SYSM_CONTROL:\n                return (this.SPSEL === StackPointerBank.SPprocess ? 2 : 0) | (this.nPRIV ? 1 : 0);\n            default:\n                this.logger.warn(LOG_NAME, `MRS with unimplemented SYSm value: ${sysm}`);\n                return 0;\n        }\n    }\n    writeSpecialRegister(sysm, value) {\n        switch (sysm) {\n            case SYSM_APSR:\n                this.APSR = value;\n                break;\n            case SYSM_XPSR:\n                this.xPSR = value;\n                break;\n            case SYSM_IPSR:\n                this.IPSR = value;\n                break;\n            case SYSM_PRIMASK:\n                this.PM = !!(value & 1);\n                this.interruptsUpdated = true;\n                break;\n            case SYSM_MSP:\n                this.SPmain = value;\n                break;\n            case SYSM_PSP:\n                this.SPprocess = value;\n                break;\n            case SYSM_CONTROL:\n                this.nPRIV = !!(value & 1);\n                if (this.currentMode === ExecutionMode.Mode_Thread) {\n                    this.switchStack(value & 2 ? StackPointerBank.SPprocess : StackPointerBank.SPmain);\n                }\n                break;\n            default:\n                this.logger.warn(LOG_NAME, `MRS with unimplemented SYSm value: ${sysm}`);\n                return 0;\n        }\n    }\n    BXWritePC(address) {\n        if (this.currentMode == ExecutionMode.Mode_Handler && address >>> 28 == 0b1111) {\n            this.exceptionReturn(address & 0x0fffffff);\n        }\n        else {\n            this.PC = address & ~1;\n        }\n    }\n    substractUpdateFlags(minuend, subtrahend) {\n        const result = minuend - subtrahend;\n        this.N = !!(result & 0x80000000);\n        this.Z = (result & 0xffffffff) === 0;\n        this.C = minuend >= subtrahend;\n        this.V =\n            (!!(result & 0x80000000) && !(minuend & 0x80000000) && !!(subtrahend & 0x80000000)) ||\n                (!(result & 0x80000000) && !!(minuend & 0x80000000) && !(subtrahend & 0x80000000));\n        return result;\n    }\n    addUpdateFlags(addend1, addend2) {\n        const unsignedSum = (addend1 + addend2) >>> 0;\n        const signedSum = (addend1 | 0) + (addend2 | 0);\n        const result = addend1 + addend2;\n        this.N = !!(result & 0x80000000);\n        this.Z = (result & 0xffffffff) === 0;\n        this.C = result === unsignedSum ? false : true;\n        this.V = (result | 0) === signedSum ? false : true;\n        return result & 0xffffffff;\n    }\n    cyclesIO(addr, write = false) {\n        addr = addr >>> 0;\n        if (addr >= SIO_START_ADDRESS && addr < SIO_START_ADDRESS + 0x10000000) {\n            return 0;\n        }\n        if (addr >= APB_START_ADDRESS && addr < APB_START_ADDRESS + 0x10000000) {\n            return write ? 4 : 3;\n        }\n        return 1;\n    }\n    executeInstruction() {\n        if (this.interruptsUpdated) {\n            if (this.checkForInterrupts()) {\n                this.waiting = false;\n            }\n        }\n        // ARM Thumb instruction encoding - 16 bits / 2 bytes\n        const opcodePC = this.PC & ~1; //ensure no LSB set PC are executed\n        const opcode = this.readUint16(opcodePC);\n        const wideInstruction = opcode >> 12 === 0b1111 || opcode >> 11 === 0b11101;\n        const opcode2 = wideInstruction ? this.readUint16(opcodePC + 2) : 0;\n        this.PC += 2;\n        let deltaCycles = 1;\n        // ADCS\n        if (opcode >> 6 === 0b0100000101) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            this.registers[Rdn] = this.addUpdateFlags(this.registers[Rm], this.registers[Rdn] + (this.C ? 1 : 0));\n        }\n        // ADD (register = SP plus immediate)\n        else if (opcode >> 11 === 0b10101) {\n            const imm8 = opcode & 0xff;\n            const Rd = (opcode >> 8) & 0x7;\n            this.registers[Rd] = this.SP + (imm8 << 2);\n        }\n        // ADD (SP plus immediate)\n        else if (opcode >> 7 === 0b101100000) {\n            const imm32 = (opcode & 0x7f) << 2;\n            this.SP += imm32;\n        }\n        // ADDS (Encoding T1)\n        else if (opcode >> 9 === 0b0001110) {\n            const imm3 = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            this.registers[Rd] = this.addUpdateFlags(this.registers[Rn], imm3);\n        }\n        // ADDS (Encoding T2)\n        else if (opcode >> 11 === 0b00110) {\n            const imm8 = opcode & 0xff;\n            const Rdn = (opcode >> 8) & 0x7;\n            this.registers[Rdn] = this.addUpdateFlags(this.registers[Rdn], imm8);\n        }\n        // ADDS (register)\n        else if (opcode >> 9 === 0b0001100) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            this.registers[Rd] = this.addUpdateFlags(this.registers[Rn], this.registers[Rm]);\n        }\n        // ADD (register)\n        else if (opcode >> 8 === 0b01000100) {\n            const Rm = (opcode >> 3) & 0xf;\n            const Rdn = ((opcode & 0x80) >> 4) | (opcode & 0x7);\n            const leftValue = Rdn === pcRegister ? this.PC + 2 : this.registers[Rdn];\n            const rightValue = this.registers[Rm];\n            const result = leftValue + rightValue;\n            if (Rdn !== spRegister && Rdn !== pcRegister) {\n                this.registers[Rdn] = result;\n            }\n            else if (Rdn === pcRegister) {\n                this.registers[Rdn] = result & ~0x1;\n                deltaCycles++;\n            }\n            else if (Rdn === spRegister) {\n                this.registers[Rdn] = result & ~0x3;\n            }\n        }\n        // ADR\n        else if (opcode >> 11 === 0b10100) {\n            const imm8 = opcode & 0xff;\n            const Rd = (opcode >> 8) & 0x7;\n            this.registers[Rd] = (opcodePC & 0xfffffffc) + 4 + (imm8 << 2);\n        }\n        // ANDS (Encoding T2)\n        else if (opcode >> 6 === 0b0100000000) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            const result = this.registers[Rdn] & this.registers[Rm];\n            this.registers[Rdn] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = (result & 0xffffffff) === 0;\n        }\n        // ASRS (immediate)\n        else if (opcode >> 11 === 0b00010) {\n            const imm5 = (opcode >> 6) & 0x1f;\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            const input = this.registers[Rm];\n            const shiftN = imm5 ? imm5 : 32;\n            const result = shiftN < 32 ? input >> shiftN : (input & 0x80000000) >> 31;\n            this.registers[Rd] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = (result & 0xffffffff) === 0;\n            this.C = input & (1 << (shiftN - 1)) ? true : false;\n        }\n        // ASRS (register)\n        else if (opcode >> 6 === 0b0100000100) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            const input = this.registers[Rdn];\n            const shiftN = (this.registers[Rm] & 0xff) < 32 ? this.registers[Rm] & 0xff : 32;\n            const result = shiftN < 32 ? input >> shiftN : (input & 0x80000000) >> 31;\n            this.registers[Rdn] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = (result & 0xffffffff) === 0;\n            this.C = input & (1 << (shiftN - 1)) ? true : false;\n        }\n        // B (with cond)\n        else if (opcode >> 12 === 0b1101 && ((opcode >> 9) & 0x7) !== 0b111) {\n            let imm8 = (opcode & 0xff) << 1;\n            const cond = (opcode >> 8) & 0xf;\n            if (imm8 & (1 << 8)) {\n                imm8 = (imm8 & 0x1ff) - 0x200;\n            }\n            if (this.checkCondition(cond)) {\n                this.PC += imm8 + 2;\n                deltaCycles++;\n            }\n        }\n        // B\n        else if (opcode >> 11 === 0b11100) {\n            let imm11 = (opcode & 0x7ff) << 1;\n            if (imm11 & (1 << 11)) {\n                imm11 = (imm11 & 0x7ff) - 0x800;\n            }\n            this.PC += imm11 + 2;\n            deltaCycles++;\n        }\n        // BICS\n        else if (opcode >> 6 === 0b0100001110) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            const result = (this.registers[Rdn] &= ~this.registers[Rm]);\n            this.N = !!(result & 0x80000000);\n            this.Z = result === 0;\n        }\n        // BKPT\n        else if (opcode >> 8 === 0b10111110) {\n            const imm8 = opcode & 0xff;\n            this.breakRewind = 2;\n            this.rp2040.onBreak(imm8);\n        }\n        // BL\n        else if (opcode >> 11 === 0b11110 && opcode2 >> 14 === 0b11 && ((opcode2 >> 12) & 0x1) == 1) {\n            const imm11 = opcode2 & 0x7ff;\n            const J2 = (opcode2 >> 11) & 0x1;\n            const J1 = (opcode2 >> 13) & 0x1;\n            const imm10 = opcode & 0x3ff;\n            const S = (opcode >> 10) & 0x1;\n            const I1 = 1 - (S ^ J1);\n            const I2 = 1 - (S ^ J2);\n            const imm32 = ((S ? 0b11111111 : 0) << 24) | ((I1 << 23) | (I2 << 22) | (imm10 << 12) | (imm11 << 1));\n            this.LR = (this.PC + 2) | 0x1;\n            this.PC += 2 + imm32;\n            deltaCycles += 2;\n            this.blTaken(this, false);\n        }\n        // BLX\n        else if (opcode >> 7 === 0b010001111 && (opcode & 0x7) === 0) {\n            const Rm = (opcode >> 3) & 0xf;\n            this.LR = this.PC | 0x1;\n            this.PC = this.registers[Rm] & ~1;\n            deltaCycles++;\n            this.blTaken(this, true);\n        }\n        // BX\n        else if (opcode >> 7 === 0b010001110 && (opcode & 0x7) === 0) {\n            const Rm = (opcode >> 3) & 0xf;\n            this.BXWritePC(this.registers[Rm]);\n            deltaCycles++;\n        }\n        // CMN (register)\n        else if (opcode >> 6 === 0b0100001011) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rn = opcode & 0x7;\n            this.addUpdateFlags(this.registers[Rn], this.registers[Rm]);\n        }\n        // CMP immediate\n        else if (opcode >> 11 === 0b00101) {\n            const Rn = (opcode >> 8) & 0x7;\n            const imm8 = opcode & 0xff;\n            this.substractUpdateFlags(this.registers[Rn], imm8);\n        }\n        // CMP (register)\n        else if (opcode >> 6 === 0b0100001010) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rn = opcode & 0x7;\n            this.substractUpdateFlags(this.registers[Rn], this.registers[Rm]);\n        }\n        // CMP (register) encoding T2\n        else if (opcode >> 8 === 0b01000101) {\n            const Rm = (opcode >> 3) & 0xf;\n            const Rn = ((opcode >> 4) & 0x8) | (opcode & 0x7);\n            this.substractUpdateFlags(this.registers[Rn], this.registers[Rm]);\n        }\n        // CPSID i\n        else if (opcode === 0xb672) {\n            this.PM = true;\n        }\n        // CPSIE i\n        else if (opcode === 0xb662) {\n            this.PM = false;\n            this.interruptsUpdated = true;\n        }\n        // DMB SY\n        else if (opcode === 0xf3bf && (opcode2 & 0xfff0) === 0x8f50) {\n            this.PC += 2;\n            deltaCycles += 2;\n        }\n        // DSB SY\n        else if (opcode === 0xf3bf && (opcode2 & 0xfff0) === 0x8f40) {\n            this.PC += 2;\n            deltaCycles += 2;\n        }\n        // EORS\n        else if (opcode >> 6 === 0b0100000001) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            const result = this.registers[Rm] ^ this.registers[Rdn];\n            this.registers[Rdn] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = result === 0;\n        }\n        // ISB SY\n        else if (opcode === 0xf3bf && (opcode2 & 0xfff0) === 0x8f60) {\n            this.PC += 2;\n            deltaCycles += 2;\n        }\n        // LDMIA\n        else if (opcode >> 11 === 0b11001) {\n            const Rn = (opcode >> 8) & 0x7;\n            const registers = opcode & 0xff;\n            let address = this.registers[Rn];\n            for (let i = 0; i < 8; i++) {\n                if (registers & (1 << i)) {\n                    this.registers[i] = this.readUint32(address);\n                    address += 4;\n                    deltaCycles++;\n                }\n            }\n            // Write back\n            if (!(registers & (1 << Rn))) {\n                this.registers[Rn] = address;\n            }\n        }\n        // LDR (immediate)\n        else if (opcode >> 11 === 0b01101) {\n            const imm5 = ((opcode >> 6) & 0x1f) << 2;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const addr = this.registers[Rn] + imm5;\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = this.readUint32(addr);\n        }\n        // LDR (sp + immediate)\n        else if (opcode >> 11 === 0b10011) {\n            const Rt = (opcode >> 8) & 0x7;\n            const imm8 = opcode & 0xff;\n            const addr = this.SP + (imm8 << 2);\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = this.readUint32(addr);\n        }\n        // LDR (literal)\n        else if (opcode >> 11 === 0b01001) {\n            const imm8 = (opcode & 0xff) << 2;\n            const Rt = (opcode >> 8) & 7;\n            const nextPC = this.PC + 2;\n            const addr = (nextPC & 0xfffffffc) + imm8;\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = this.readUint32(addr);\n        }\n        // LDR (register)\n        else if (opcode >> 9 === 0b0101100) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const addr = this.registers[Rm] + this.registers[Rn];\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = this.readUint32(addr);\n        }\n        // LDRB (immediate)\n        else if (opcode >> 11 === 0b01111) {\n            const imm5 = (opcode >> 6) & 0x1f;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const addr = this.registers[Rn] + imm5;\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = this.readUint8(addr);\n        }\n        // LDRB (register)\n        else if (opcode >> 9 === 0b0101110) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const addr = this.registers[Rm] + this.registers[Rn];\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = this.readUint8(addr);\n        }\n        // LDRH (immediate)\n        else if (opcode >> 11 === 0b10001) {\n            const imm5 = (opcode >> 6) & 0x1f;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const addr = this.registers[Rn] + (imm5 << 1);\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = this.readUint16(addr);\n        }\n        // LDRH (register)\n        else if (opcode >> 9 === 0b0101101) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const addr = this.registers[Rm] + this.registers[Rn];\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = this.readUint16(addr);\n        }\n        // LDRSB\n        else if (opcode >> 9 === 0b0101011) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const addr = this.registers[Rm] + this.registers[Rn];\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = signExtend8(this.readUint8(addr));\n        }\n        // LDRSH\n        else if (opcode >> 9 === 0b0101111) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const addr = this.registers[Rm] + this.registers[Rn];\n            deltaCycles += this.cyclesIO(addr);\n            this.registers[Rt] = signExtend16(this.readUint16(addr));\n        }\n        // LSLS (immediate)\n        else if (opcode >> 11 === 0b00000) {\n            const imm5 = (opcode >> 6) & 0x1f;\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            const input = this.registers[Rm];\n            const result = input << imm5;\n            this.registers[Rd] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = result === 0;\n            this.C = imm5 ? !!(input & (1 << (32 - imm5))) : this.C;\n        }\n        // LSLS (register)\n        else if (opcode >> 6 === 0b0100000010) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            const input = this.registers[Rdn];\n            const shiftCount = this.registers[Rm] & 0xff;\n            const result = shiftCount >= 32 ? 0 : input << shiftCount;\n            this.registers[Rdn] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = result === 0;\n            this.C = shiftCount ? !!(input & (1 << (32 - shiftCount))) : this.C;\n        }\n        // LSRS (immediate)\n        else if (opcode >> 11 === 0b00001) {\n            const imm5 = (opcode >> 6) & 0x1f;\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            const input = this.registers[Rm];\n            const result = imm5 ? input >>> imm5 : 0;\n            this.registers[Rd] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = result === 0;\n            this.C = !!((input >>> (imm5 ? imm5 - 1 : 31)) & 0x1);\n        }\n        // LSRS (register)\n        else if (opcode >> 6 === 0b0100000011) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            const shiftAmount = this.registers[Rm] & 0xff;\n            const input = this.registers[Rdn];\n            const result = shiftAmount < 32 ? input >>> shiftAmount : 0;\n            this.registers[Rdn] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = result === 0;\n            this.C = shiftAmount <= 32 ? !!((input >>> (shiftAmount - 1)) & 0x1) : false;\n        }\n        // MOV\n        else if (opcode >> 8 === 0b01000110) {\n            const Rm = (opcode >> 3) & 0xf;\n            const Rd = ((opcode >> 4) & 0x8) | (opcode & 0x7);\n            let value = Rm === pcRegister ? this.PC + 2 : this.registers[Rm];\n            if (Rd === pcRegister) {\n                deltaCycles++;\n                value &= ~1;\n            }\n            else if (Rd === spRegister) {\n                value &= ~3;\n            }\n            this.registers[Rd] = value;\n        }\n        // MOVS\n        else if (opcode >> 11 === 0b00100) {\n            const value = opcode & 0xff;\n            const Rd = (opcode >> 8) & 7;\n            this.registers[Rd] = value;\n            this.N = !!(value & 0x80000000);\n            this.Z = value === 0;\n        }\n        // MRS\n        else if (opcode === 0b1111001111101111 && opcode2 >> 12 == 0b1000) {\n            const SYSm = opcode2 & 0xff;\n            const Rd = (opcode2 >> 8) & 0xf;\n            this.registers[Rd] = this.readSpecialRegister(SYSm);\n            this.PC += 2;\n            deltaCycles += 2;\n        }\n        // MSR\n        else if (opcode >> 4 === 0b111100111000 && opcode2 >> 8 == 0b10001000) {\n            const SYSm = opcode2 & 0xff;\n            const Rn = opcode & 0xf;\n            this.writeSpecialRegister(SYSm, this.registers[Rn]);\n            this.PC += 2;\n            deltaCycles += 2;\n        }\n        // MULS\n        else if (opcode >> 6 === 0b0100001101) {\n            const Rn = (opcode >> 3) & 0x7;\n            const Rdm = opcode & 0x7;\n            const result = Math.imul(this.registers[Rn], this.registers[Rdm]);\n            this.registers[Rdm] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = (result & 0xffffffff) === 0;\n        }\n        // MVNS\n        else if (opcode >> 6 === 0b0100001111) {\n            const Rm = (opcode >> 3) & 7;\n            const Rd = opcode & 7;\n            const result = ~this.registers[Rm];\n            this.registers[Rd] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = result === 0;\n        }\n        // ORRS (Encoding T2)\n        else if (opcode >> 6 === 0b0100001100) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            const result = this.registers[Rdn] | this.registers[Rm];\n            this.registers[Rdn] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = (result & 0xffffffff) === 0;\n        }\n        // POP\n        else if (opcode >> 9 === 0b1011110) {\n            const P = (opcode >> 8) & 1;\n            let address = this.SP;\n            for (let i = 0; i <= 7; i++) {\n                if (opcode & (1 << i)) {\n                    this.registers[i] = this.readUint32(address);\n                    address += 4;\n                    deltaCycles++;\n                }\n            }\n            if (P) {\n                this.SP = address + 4;\n                this.BXWritePC(this.readUint32(address));\n                deltaCycles += 2;\n            }\n            else {\n                this.SP = address;\n            }\n        }\n        // PUSH\n        else if (opcode >> 9 === 0b1011010) {\n            let bitCount = 0;\n            for (let i = 0; i <= 8; i++) {\n                if (opcode & (1 << i)) {\n                    bitCount++;\n                }\n            }\n            let address = this.SP - 4 * bitCount;\n            for (let i = 0; i <= 7; i++) {\n                if (opcode & (1 << i)) {\n                    this.writeUint32(address, this.registers[i]);\n                    deltaCycles++;\n                    address += 4;\n                }\n            }\n            if (opcode & (1 << 8)) {\n                this.writeUint32(address, this.registers[14]);\n            }\n            this.SP -= 4 * bitCount;\n        }\n        // REV\n        else if (opcode >> 6 === 0b1011101000) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            const input = this.registers[Rm];\n            this.registers[Rd] =\n                ((input & 0xff) << 24) |\n                    (((input >> 8) & 0xff) << 16) |\n                    (((input >> 16) & 0xff) << 8) |\n                    ((input >> 24) & 0xff);\n        }\n        // REV16\n        else if (opcode >> 6 === 0b1011101001) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            const input = this.registers[Rm];\n            this.registers[Rd] =\n                (((input >> 16) & 0xff) << 24) |\n                    (((input >> 24) & 0xff) << 16) |\n                    ((input & 0xff) << 8) |\n                    ((input >> 8) & 0xff);\n        }\n        // REVSH\n        else if (opcode >> 6 === 0b1011101011) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            const input = this.registers[Rm];\n            this.registers[Rd] = signExtend16(((input & 0xff) << 8) | ((input >> 8) & 0xff));\n        }\n        // ROR\n        else if (opcode >> 6 === 0b0100000111) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            const input = this.registers[Rdn];\n            const shift = (this.registers[Rm] & 0xff) % 32;\n            const result = (input >>> shift) | (input << (32 - shift));\n            this.registers[Rdn] = result;\n            this.N = !!(result & 0x80000000);\n            this.Z = result === 0;\n            this.C = !!(result & 0x80000000);\n        }\n        // NEGS / RSBS\n        else if (opcode >> 6 === 0b0100001001) {\n            const Rn = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            this.registers[Rd] = this.substractUpdateFlags(0, this.registers[Rn]);\n        }\n        // NOP\n        else if (opcode === 0b1011111100000000) {\n            // Do nothing!\n        }\n        // SBCS (Encoding T1)\n        else if (opcode >> 6 === 0b0100000110) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rdn = opcode & 0x7;\n            this.registers[Rdn] = this.substractUpdateFlags(this.registers[Rdn], this.registers[Rm] + (1 - (this.C ? 1 : 0)));\n        }\n        // SEV\n        else if (opcode === 0b1011111101000000) {\n            this.logger.info(LOG_NAME, 'SEV');\n        }\n        // STMIA\n        else if (opcode >> 11 === 0b11000) {\n            const Rn = (opcode >> 8) & 0x7;\n            const registers = opcode & 0xff;\n            let address = this.registers[Rn];\n            for (let i = 0; i < 8; i++) {\n                if (registers & (1 << i)) {\n                    this.writeUint32(address, this.registers[i]);\n                    address += 4;\n                    deltaCycles++;\n                }\n            }\n            // Write back\n            if (!(registers & (1 << Rn))) {\n                this.registers[Rn] = address;\n            }\n        }\n        // STR (immediate)\n        else if (opcode >> 11 === 0b01100) {\n            const imm5 = ((opcode >> 6) & 0x1f) << 2;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const address = this.registers[Rn] + imm5;\n            deltaCycles += this.cyclesIO(address, true);\n            this.writeUint32(address, this.registers[Rt]);\n        }\n        // STR (sp + immediate)\n        else if (opcode >> 11 === 0b10010) {\n            const Rt = (opcode >> 8) & 0x7;\n            const imm8 = opcode & 0xff;\n            const address = this.SP + (imm8 << 2);\n            deltaCycles += this.cyclesIO(address, true);\n            this.writeUint32(address, this.registers[Rt]);\n        }\n        // STR (register)\n        else if (opcode >> 9 === 0b0101000) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const address = this.registers[Rm] + this.registers[Rn];\n            deltaCycles += this.cyclesIO(address, true);\n            this.writeUint32(address, this.registers[Rt]);\n        }\n        // STRB (immediate)\n        else if (opcode >> 11 === 0b01110) {\n            const imm5 = (opcode >> 6) & 0x1f;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const address = this.registers[Rn] + imm5;\n            deltaCycles += this.cyclesIO(address, true);\n            this.writeUint8(address, this.registers[Rt]);\n        }\n        // STRB (register)\n        else if (opcode >> 9 === 0b0101010) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const address = this.registers[Rm] + this.registers[Rn];\n            deltaCycles += this.cyclesIO(address, true);\n            this.writeUint8(address, this.registers[Rt]);\n        }\n        // STRH (immediate)\n        else if (opcode >> 11 === 0b10000) {\n            const imm5 = ((opcode >> 6) & 0x1f) << 1;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const address = this.registers[Rn] + imm5;\n            deltaCycles += this.cyclesIO(address, true);\n            this.writeUint16(address, this.registers[Rt]);\n        }\n        // STRH (register)\n        else if (opcode >> 9 === 0b0101001) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rt = opcode & 0x7;\n            const address = this.registers[Rm] + this.registers[Rn];\n            deltaCycles += this.cyclesIO(address, true);\n            this.writeUint16(address, this.registers[Rt]);\n        }\n        // SUB (SP minus immediate)\n        else if (opcode >> 7 === 0b101100001) {\n            const imm32 = (opcode & 0x7f) << 2;\n            this.SP -= imm32;\n        }\n        // SUBS (Encoding T1)\n        else if (opcode >> 9 === 0b0001111) {\n            const imm3 = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            this.registers[Rd] = this.substractUpdateFlags(this.registers[Rn], imm3);\n        }\n        // SUBS (Encoding T2)\n        else if (opcode >> 11 === 0b00111) {\n            const imm8 = opcode & 0xff;\n            const Rdn = (opcode >> 8) & 0x7;\n            this.registers[Rdn] = this.substractUpdateFlags(this.registers[Rdn], imm8);\n        }\n        // SUBS (register)\n        else if (opcode >> 9 === 0b0001101) {\n            const Rm = (opcode >> 6) & 0x7;\n            const Rn = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            this.registers[Rd] = this.substractUpdateFlags(this.registers[Rn], this.registers[Rm]);\n        }\n        // SVC\n        else if (opcode >> 8 === 0b11011111) {\n            this.pendingSVCall = true;\n            this.interruptsUpdated = true;\n        }\n        // SXTB\n        else if (opcode >> 6 === 0b1011001001) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            this.registers[Rd] = signExtend8(this.registers[Rm]);\n        }\n        // SXTH\n        else if (opcode >> 6 === 0b1011001000) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            this.registers[Rd] = signExtend16(this.registers[Rm]);\n        }\n        // TST\n        else if (opcode >> 6 == 0b0100001000) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rn = opcode & 0x7;\n            const result = this.registers[Rn] & this.registers[Rm];\n            this.N = !!(result & 0x80000000);\n            this.Z = result === 0;\n        }\n        // UDF\n        else if (opcode >> 8 == 0b11011110) {\n            const imm8 = opcode & 0xff;\n            this.breakRewind = 2;\n            this.rp2040.onBreak(imm8);\n        }\n        // UDF (Encoding T2)\n        else if (opcode >> 4 === 0b111101111111 && opcode2 >> 12 === 0b1010) {\n            const imm4 = opcode & 0xf;\n            const imm12 = opcode2 & 0xfff;\n            this.breakRewind = 4;\n            this.rp2040.onBreak((imm4 << 12) | imm12);\n            this.PC += 2;\n        }\n        // UXTB\n        else if (opcode >> 6 == 0b1011001011) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            this.registers[Rd] = this.registers[Rm] & 0xff;\n        }\n        // UXTH\n        else if (opcode >> 6 == 0b1011001010) {\n            const Rm = (opcode >> 3) & 0x7;\n            const Rd = opcode & 0x7;\n            this.registers[Rd] = this.registers[Rm] & 0xffff;\n        }\n        // WFE\n        else if (opcode === 0b1011111100100000) {\n            deltaCycles++;\n            if (this.eventRegistered) {\n                this.eventRegistered = false;\n            }\n            else {\n                this.waiting = true;\n            }\n        }\n        // WFI\n        else if (opcode === 0b1011111100110000) {\n            deltaCycles++;\n            this.waiting = true;\n        }\n        // YIELD\n        else if (opcode === 0b1011111100010000) {\n            // do nothing for now. Wait for event!\n            this.logger.info(LOG_NAME, 'Yield');\n        }\n        else {\n            this.logger.warn(LOG_NAME, `Warning: Instruction at ${opcodePC.toString(16)} is not implemented yet!`);\n            this.logger.warn(LOG_NAME, `Opcode: 0x${opcode.toString(16)} (0x${opcode2.toString(16)})`);\n        }\n        this.cycles += deltaCycles;\n        return deltaCycles;\n    }\n}\n", "export function encodeHexByte(value) {\n    return (value >> 4).toString(16) + (value & 0xf).toString(16);\n}\nexport function encodeHexBuf(buf) {\n    return Array.from(buf).map(encodeHexByte).join('');\n}\nexport function encodeHexUint32BE(value) {\n    return encodeHexBuf(new Uint8Array([(value >> 24) & 0xff, (value >> 16) & 0xff, (value >> 8) & 0xff, value & 0xff]));\n}\nexport function encodeHexUint32(value) {\n    const buf = new Uint32Array([value]);\n    return encodeHexBuf(new Uint8Array(buf.buffer));\n}\nexport function decodeHexBuf(encoded) {\n    const result = new Uint8Array(encoded.length / 2);\n    for (let i = 0; i < result.length; i++) {\n        result[i] = parseInt(encoded.substr(i * 2, 2), 16);\n    }\n    return result;\n}\nexport function decodeHexUint32Array(encoded) {\n    return new Uint32Array(decodeHexBuf(encoded).buffer);\n}\nexport function decodeHexUint32(encoded) {\n    return decodeHexUint32Array(encoded)[0];\n}\nexport function gdbChecksum(text) {\n    const value = text\n        .split('')\n        .map((c) => c.charCodeAt(0))\n        .reduce((a, b) => a + b, 0) & 0xff;\n    return encodeHexByte(value);\n}\nexport function gdbMessage(value) {\n    return `$${value}#${gdbChecksum(value)}`;\n}\n", "/**\n * RP2040 GDB Server\n *\n * Copyright (C) 2021, Uri Shaked\n */\nimport { SYSM_CONTROL, SYSM_MSP, SYSM_PRIMASK, SYSM_PSP } from '../cortex-m0-core.js';\nimport { ConsoleLogger, LogLevel } from '../utils/logging.js';\nimport { decodeHexBuf, encodeHexBuf, encodeHexByte, encodeHexUint32, gdbMessage, } from './gdb-utils.js';\nexport const STOP_REPLY_SIGINT = 'S02';\nexport const STOP_REPLY_TRAP = 'S05';\n/* string value: armv6m-none-unknown-eabi */\nconst lldbTriple = '61726d76366d2d6e6f6e652d756e6b6e6f776e2d65616269';\nconst registers = [\n    `name:r0;bitsize:32;offset:0;encoding:int;format:hex;set:General Purpose Registers;generic:arg1;gcc:0;dwarf:0;`,\n    `name:r1;bitsize:32;offset:4;encoding:int;format:hex;set:General Purpose Registers;generic:arg2;gcc:1;dwarf:1;`,\n    `name:r2;bitsize:32;offset:8;encoding:int;format:hex;set:General Purpose Registers;generic:arg3;gcc:2;dwarf:2;`,\n    `name:r3;bitsize:32;offset:12;encoding:int;format:hex;set:General Purpose Registers;generic:arg4;gcc:3;dwarf:3;`,\n    `name:r4;bitsize:32;offset:16;encoding:int;format:hex;set:General Purpose Registers;gcc:4;dwarf:4;`,\n    `name:r5;bitsize:32;offset:20;encoding:int;format:hex;set:General Purpose Registers;gcc:5;dwarf:5;`,\n    `name:r6;bitsize:32;offset:24;encoding:int;format:hex;set:General Purpose Registers;gcc:6;dwarf:6;`,\n    `name:r7;bitsize:32;offset:28;encoding:int;format:hex;set:General Purpose Registers;gcc:7;dwarf:7;`,\n    `name:r8;bitsize:32;offset:32;encoding:int;format:hex;set:General Purpose Registers;gcc:8;dwarf:8;`,\n    `name:r9;bitsize:32;offset:36;encoding:int;format:hex;set:General Purpose Registers;gcc:9;dwarf:9;`,\n    `name:r10;bitsize:32;offset:40;encoding:int;format:hex;set:General Purpose Registers;gcc:10;dwarf:10;`,\n    `name:r11;bitsize:32;offset:44;encoding:int;format:hex;set:General Purpose Registers;generic:fp;gcc:11;dwarf:11;`,\n    `name:r12;bitsize:32;offset:48;encoding:int;format:hex;set:General Purpose Registers;gcc:12;dwarf:12;`,\n    `name:sp;bitsize:32;offset:52;encoding:int;format:hex;set:General Purpose Registers;generic:sp;alt-name:r13;gcc:13;dwarf:13;`,\n    `name:lr;bitsize:32;offset:56;encoding:int;format:hex;set:General Purpose Registers;generic:ra;alt-name:r14;gcc:14;dwarf:14;`,\n    `name:pc;bitsize:32;offset:60;encoding:int;format:hex;set:General Purpose Registers;generic:pc;alt-name:r15;gcc:15;dwarf:15;`,\n    `name:cpsr;bitsize:32;offset:64;encoding:int;format:hex;set:General Purpose Registers;generic:flags;alt-name:psr;gcc:16;dwarf:16;`,\n];\nconst targetXML = `<?xml version=\"1.0\"?>\r\n<!DOCTYPE target SYSTEM \"gdb-target.dtd\">\r\n<target version=\"1.0\">\r\n<architecture>arm</architecture>\r\n<feature name=\"org.gnu.gdb.arm.m-profile\">\r\n<reg name=\"r0\" bitsize=\"32\" regnum=\"0\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r1\" bitsize=\"32\" regnum=\"1\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r2\" bitsize=\"32\" regnum=\"2\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r3\" bitsize=\"32\" regnum=\"3\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r4\" bitsize=\"32\" regnum=\"4\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r5\" bitsize=\"32\" regnum=\"5\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r6\" bitsize=\"32\" regnum=\"6\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r7\" bitsize=\"32\" regnum=\"7\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r8\" bitsize=\"32\" regnum=\"8\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r9\" bitsize=\"32\" regnum=\"9\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r10\" bitsize=\"32\" regnum=\"10\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r11\" bitsize=\"32\" regnum=\"11\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"r12\" bitsize=\"32\" regnum=\"12\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"sp\" bitsize=\"32\" regnum=\"13\" save-restore=\"yes\" type=\"data_ptr\" group=\"general\"/>\r\n<reg name=\"lr\" bitsize=\"32\" regnum=\"14\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n<reg name=\"pc\" bitsize=\"32\" regnum=\"15\" save-restore=\"yes\" type=\"code_ptr\" group=\"general\"/>\r\n<reg name=\"xPSR\" bitsize=\"32\" regnum=\"16\" save-restore=\"yes\" type=\"int\" group=\"general\"/>\r\n</feature>\r\n<feature name=\"org.gnu.gdb.arm.m-system\">\r\n<reg name=\"msp\" bitsize=\"32\" regnum=\"17\" save-restore=\"yes\" type=\"data_ptr\" group=\"system\"/>\r\n<reg name=\"psp\" bitsize=\"32\" regnum=\"18\" save-restore=\"yes\" type=\"data_ptr\" group=\"system\"/>\r\n<reg name=\"primask\" bitsize=\"1\" regnum=\"19\" save-restore=\"yes\" type=\"int8\" group=\"system\"/>\r\n<reg name=\"basepri\" bitsize=\"8\" regnum=\"20\" save-restore=\"yes\" type=\"int8\" group=\"system\"/>\r\n<reg name=\"faultmask\" bitsize=\"1\" regnum=\"21\" save-restore=\"yes\" type=\"int8\" group=\"system\"/>\r\n<reg name=\"control\" bitsize=\"2\" regnum=\"22\" save-restore=\"yes\" type=\"int8\" group=\"system\"/>\r\n</feature>\r\n</target>`;\nconst LOG_NAME = 'GDBServer';\nexport class GDBServer {\n    constructor(target) {\n        this.target = target;\n        this.logger = new ConsoleLogger(LogLevel.Warn, true);\n        this.connections = new Set();\n    }\n    processGDBMessage(cmd) {\n        const { rp2040 } = this.target;\n        const { core } = rp2040;\n        if (cmd === 'Hg0') {\n            return gdbMessage('OK');\n        }\n        switch (cmd[0]) {\n            case '?':\n                return gdbMessage(STOP_REPLY_TRAP);\n            case 'q':\n                // Query things\n                if (cmd.startsWith('qSupported:')) {\n                    return gdbMessage('PacketSize=4000;vContSupported+;qXfer:features:read+');\n                }\n                if (cmd === 'qAttached') {\n                    return gdbMessage('1');\n                }\n                if (cmd.startsWith('qXfer:features:read:target.xml')) {\n                    return gdbMessage('l' + targetXML);\n                }\n                if (cmd.startsWith('qRegisterInfo')) {\n                    const index = parseInt(cmd.substring(13), 16);\n                    const register = registers[index];\n                    if (register) {\n                        return gdbMessage(register);\n                    }\n                    else {\n                        return gdbMessage(`E45`);\n                    }\n                }\n                if (cmd === 'qHostInfo') {\n                    return gdbMessage(`triple:${lldbTriple};endian:little;ptrsize:4;`);\n                }\n                if (cmd === 'qProcessInfo') {\n                    return gdbMessage('pid:1;endian:little;ptrsize:4;');\n                }\n                return gdbMessage('');\n            case 'v':\n                if (cmd === 'vCont?') {\n                    return gdbMessage('vCont;c;C;s;S');\n                }\n                if (cmd.startsWith('vCont;c')) {\n                    if (!this.target.executing) {\n                        this.target.execute();\n                    }\n                    return;\n                }\n                if (cmd.startsWith('vCont;s')) {\n                    rp2040.step();\n                    const registerStatus = [];\n                    for (let i = 0; i < 17; i++) {\n                        const value = i === 16 ? core.xPSR : core.registers[i];\n                        registerStatus.push(`${encodeHexByte(i)}:${encodeHexUint32(value)}`);\n                    }\n                    return gdbMessage(`T05${registerStatus.join(';')};reason:trace;`);\n                }\n                break;\n            case 'c':\n                if (!this.target.executing) {\n                    this.target.execute();\n                }\n                return gdbMessage('OK');\n            case 'g': {\n                // Read registers\n                const buf = new Uint32Array(17);\n                buf.set(core.registers);\n                buf[16] = core.xPSR;\n                return gdbMessage(encodeHexBuf(new Uint8Array(buf.buffer)));\n            }\n            case 'p': {\n                // Read register\n                const registerIndex = parseInt(cmd.substr(1), 16);\n                if (registerIndex >= 0 && registerIndex <= 15) {\n                    return gdbMessage(encodeHexUint32(core.registers[registerIndex]));\n                }\n                const specialRegister = (sysm) => gdbMessage(encodeHexUint32(core.readSpecialRegister(sysm)));\n                switch (registerIndex) {\n                    case 0x10:\n                        return gdbMessage(encodeHexUint32(core.xPSR));\n                    case 0x11:\n                        return specialRegister(SYSM_MSP);\n                    case 0x12:\n                        return specialRegister(SYSM_PSP);\n                    case 0x13:\n                        return specialRegister(SYSM_PRIMASK);\n                    case 0x14:\n                        this.logger.warn(LOG_NAME, 'TODO BASEPRI');\n                        return gdbMessage(encodeHexUint32(0)); // TODO BASEPRI\n                    case 0x15:\n                        this.logger.warn(LOG_NAME, 'TODO faultmask');\n                        return gdbMessage(encodeHexUint32(0)); // TODO faultmask\n                    case 0x16:\n                        return specialRegister(SYSM_CONTROL);\n                }\n                break;\n            }\n            case 'P': {\n                // Write register\n                const params = cmd.substring(1).split('=');\n                const registerIndex = parseInt(params[0], 16);\n                const registerValue = params[1].trim();\n                const registerBytes = registerIndex > 0x12 ? 1 : 4;\n                const decodedValue = decodeHexBuf(registerValue);\n                if (registerIndex < 0 || registerIndex > 0x16 || decodedValue.length !== registerBytes) {\n                    return gdbMessage('E00');\n                }\n                const valueBuffer = new Uint8Array(4);\n                valueBuffer.set(decodedValue.slice(0, 4));\n                const value = new DataView(valueBuffer.buffer).getUint32(0, true);\n                switch (registerIndex) {\n                    case 0x10:\n                        core.xPSR = value;\n                        break;\n                    case 0x11:\n                        core.writeSpecialRegister(SYSM_MSP, value);\n                        break;\n                    case 0x12:\n                        core.writeSpecialRegister(SYSM_PSP, value);\n                        break;\n                    case 0x13:\n                        core.writeSpecialRegister(SYSM_PRIMASK, value);\n                        break;\n                    case 0x14:\n                        this.logger.warn(LOG_NAME, 'TODO BASEPRI');\n                        break; // TODO BASEPRI\n                    case 0x15:\n                        this.logger.warn(LOG_NAME, 'TODO faultmask');\n                        break; // TODO faultmask\n                    case 0x16:\n                        core.writeSpecialRegister(SYSM_CONTROL, value);\n                        break;\n                    default:\n                        core.registers[registerIndex] = value;\n                        break;\n                }\n                return gdbMessage('OK');\n            }\n            case 'm': {\n                // Read memory\n                const params = cmd.substr(1).split(',');\n                const address = parseInt(params[0], 16);\n                const length = parseInt(params[1], 16);\n                let result = '';\n                for (let i = 0; i < length; i++) {\n                    result += encodeHexByte(rp2040.readUint8(address + i));\n                }\n                return gdbMessage(result);\n            }\n            case 'M': {\n                // Write memory\n                const params = cmd.substr(1).split(/[,:]/);\n                const address = parseInt(params[0], 16);\n                const length = parseInt(params[1], 16);\n                const data = decodeHexBuf(params[2].substr(0, length * 2));\n                for (let i = 0; i < data.length; i++) {\n                    this.debug(`Write ${data[i].toString(16)} to ${(address + i).toString(16)}`);\n                    rp2040.writeUint8(address + i, data[i]);\n                }\n                return gdbMessage('OK');\n            }\n        }\n        return gdbMessage('');\n    }\n    addConnection(connection) {\n        const { rp2040 } = this.target;\n        this.connections.add(connection);\n        rp2040.onBreak = () => {\n            this.target.stop();\n            rp2040.core.PC -= rp2040.core.breakRewind;\n            for (const connection of this.connections) {\n                connection.onBreakpoint();\n            }\n        };\n    }\n    removeConnection(connection) {\n        this.connections.delete(connection);\n    }\n    debug(msg) {\n        this.logger.debug(LOG_NAME, msg);\n    }\n    info(msg) {\n        this.logger.info(LOG_NAME, msg);\n    }\n    warn(msg) {\n        this.logger.warn(LOG_NAME, msg);\n    }\n    error(msg) {\n        this.logger.error(LOG_NAME, msg);\n    }\n}\n", "import { STOP_REPLY_SIGINT, STOP_REPLY_TRAP } from './gdb-server.js';\nimport { gdbChecksum, gdbMessage } from './gdb-utils.js';\nexport class GDBConnection {\n    constructor(server, onResponse) {\n        this.server = server;\n        this.onResponse = onResponse;\n        this.target = this.server.target;\n        this.buf = '';\n        server.addConnection(this);\n        onResponse('+');\n    }\n    feedData(data) {\n        const { onResponse } = this;\n        if (data.charCodeAt(0) === 3) {\n            this.server.info('BREAK');\n            this.target.stop();\n            onResponse(gdbMessage(STOP_REPLY_SIGINT));\n            data = data.slice(1);\n        }\n        this.buf += data;\n        for (;;) {\n            const dolla = this.buf.indexOf('$');\n            const hash = this.buf.indexOf('#', dolla + 1);\n            if (dolla < 0 || hash < 0 || hash + 2 > this.buf.length) {\n                return;\n            }\n            const cmd = this.buf.substring(dolla + 1, hash);\n            const cksum = this.buf.substr(hash + 1, 2);\n            this.buf = this.buf.substr(hash + 2);\n            if (gdbChecksum(cmd) !== cksum) {\n                this.server.warn(`GDB checksum error in message: ${cmd}`);\n                onResponse('-');\n            }\n            else {\n                onResponse('+');\n                this.server.debug(`>${cmd}`);\n                const response = this.server.processGDBMessage(cmd);\n                if (response) {\n                    this.server.debug(`<${response}`);\n                    onResponse(response);\n                }\n            }\n        }\n    }\n    onBreakpoint() {\n        try {\n            this.onResponse(gdbMessage(STOP_REPLY_TRAP));\n        }\n        catch (e) {\n            this.server.removeConnection(this);\n        }\n    }\n}\n", "import { SimulationClock } from './clock/simulation-clock.js';\nimport { RP2040 } from './rp2040.js';\nexport class Simulator {\n    constructor(clock = new SimulationClock()) {\n        this.clock = clock;\n        this.executeTimer = null;\n        this.stopped = true;\n        this.rp2040 = new RP2040(clock);\n        this.rp2040.onBreak = () => this.stop();\n    }\n    execute() {\n        const { rp2040, clock } = this;\n        this.executeTimer = null;\n        this.stopped = false;\n        const cycleNanos = 1e9 / 125000000; // 125 MHz\n        for (let i = 0; i < 1000000 && !this.stopped; i++) {\n            if (rp2040.core.waiting) {\n                const { nanosToNextAlarm } = clock;\n                clock.tick(nanosToNextAlarm);\n                i += nanosToNextAlarm / cycleNanos;\n            }\n            else {\n                const cycles = rp2040.core.executeInstruction();\n                clock.tick(cycles * cycleNanos);\n            }\n        }\n        if (!this.stopped) {\n            this.executeTimer = setTimeout(() => this.execute(), 0);\n        }\n    }\n    stop() {\n        this.stopped = true;\n        if (this.executeTimer != null) {\n            clearTimeout(this.executeTimer);\n            this.executeTimer = null;\n        }\n    }\n    get executing() {\n        return !this.stopped;\n    }\n}\n", "export var DataDirection;\n(function (DataDirection) {\n    DataDirection[DataDirection[\"HostToDevice\"] = 0] = \"HostToDevice\";\n    DataDirection[DataDirection[\"DeviceToHost\"] = 1] = \"DeviceToHost\";\n})(DataDirection || (DataDirection = {}));\nexport var SetupType;\n(function (SetupType) {\n    SetupType[SetupType[\"Standard\"] = 0] = \"Standard\";\n    SetupType[SetupType[\"Class\"] = 1] = \"Class\";\n    SetupType[SetupType[\"Vendor\"] = 2] = \"Vendor\";\n    SetupType[SetupType[\"Reserved\"] = 3] = \"Reserved\";\n})(SetupType || (SetupType = {}));\nexport var SetupRecipient;\n(function (SetupRecipient) {\n    SetupRecipient[SetupRecipient[\"Device\"] = 0] = \"Device\";\n    SetupRecipient[SetupRecipient[\"Interface\"] = 1] = \"Interface\";\n    SetupRecipient[SetupRecipient[\"Endpoint\"] = 2] = \"Endpoint\";\n    SetupRecipient[SetupRecipient[\"Other\"] = 3] = \"Other\";\n})(SetupRecipient || (SetupRecipient = {}));\nexport var SetupRequest;\n(function (SetupRequest) {\n    SetupRequest[SetupRequest[\"GetStatus\"] = 0] = \"GetStatus\";\n    SetupRequest[SetupRequest[\"ClearFeature\"] = 1] = \"ClearFeature\";\n    SetupRequest[SetupRequest[\"Reserved1\"] = 2] = \"Reserved1\";\n    SetupRequest[SetupRequest[\"SetFeature\"] = 3] = \"SetFeature\";\n    SetupRequest[SetupRequest[\"Reserved2\"] = 4] = \"Reserved2\";\n    SetupRequest[SetupRequest[\"SetAddress\"] = 5] = \"SetAddress\";\n    SetupRequest[SetupRequest[\"GetDescriptor\"] = 6] = \"GetDescriptor\";\n    SetupRequest[SetupRequest[\"SetDescriptor\"] = 7] = \"SetDescriptor\";\n    SetupRequest[SetupRequest[\"GetConfiguration\"] = 8] = \"GetConfiguration\";\n    SetupRequest[SetupRequest[\"SetDeviceConfiguration\"] = 9] = \"SetDeviceConfiguration\";\n    SetupRequest[SetupRequest[\"GetInterface\"] = 10] = \"GetInterface\";\n    SetupRequest[SetupRequest[\"SetInterface\"] = 11] = \"SetInterface\";\n    SetupRequest[SetupRequest[\"SynchFrame\"] = 12] = \"SynchFrame\";\n})(SetupRequest || (SetupRequest = {}));\nexport var DescriptorType;\n(function (DescriptorType) {\n    DescriptorType[DescriptorType[\"Device\"] = 1] = \"Device\";\n    DescriptorType[DescriptorType[\"Configration\"] = 2] = \"Configration\";\n    DescriptorType[DescriptorType[\"String\"] = 3] = \"String\";\n    DescriptorType[DescriptorType[\"Interface\"] = 4] = \"Interface\";\n    DescriptorType[DescriptorType[\"Endpoint\"] = 5] = \"Endpoint\";\n})(DescriptorType || (DescriptorType = {}));\n", "import { DataDirection, SetupRecipient, SetupRequest, SetupType, } from './interfaces.js';\nexport function createSetupPacket(params) {\n    const setupPacket = new Uint8Array(8);\n    setupPacket[0] = (params.dataDirection << 7) | (params.type << 5) | params.recipient;\n    setupPacket[1] = params.bRequest;\n    setupPacket[2] = params.wValue & 0xff;\n    setupPacket[3] = (params.wValue >> 8) & 0xff;\n    setupPacket[4] = params.wIndex & 0xff;\n    setupPacket[5] = (params.wIndex >> 8) & 0xff;\n    setupPacket[6] = params.wLength & 0xff;\n    setupPacket[7] = (params.wLength >> 8) & 0xff;\n    return setupPacket;\n}\nexport function setDeviceAddressPacket(address) {\n    return createSetupPacket({\n        dataDirection: DataDirection.HostToDevice,\n        type: SetupType.Standard,\n        recipient: SetupRecipient.Device,\n        bRequest: SetupRequest.SetAddress,\n        wValue: address,\n        wIndex: 0,\n        wLength: 0,\n    });\n}\nexport function getDescriptorPacket(type, length, index = 0) {\n    return createSetupPacket({\n        dataDirection: DataDirection.DeviceToHost,\n        type: SetupType.Standard,\n        recipient: SetupRecipient.Device,\n        bRequest: SetupRequest.GetDescriptor,\n        wValue: type << 8,\n        wIndex: index,\n        wLength: length,\n    });\n}\nexport function setDeviceConfigurationPacket(configurationNumber) {\n    return createSetupPacket({\n        dataDirection: DataDirection.HostToDevice,\n        type: SetupType.Standard,\n        recipient: SetupRecipient.Device,\n        bRequest: SetupRequest.SetDeviceConfiguration,\n        wValue: configurationNumber,\n        wIndex: 0,\n        wLength: 0,\n    });\n}\n", "import { FIFO } from '../utils/fifo.js';\nimport { DataDirection, DescriptorType, SetupRecipient, SetupType } from './interfaces.js';\nimport { createSetupPacket, getDescriptorPacket, setDeviceAddressPacket, setDeviceConfigurationPacket, } from './setup.js';\n// CDC stuff\nconst CDC_REQUEST_SET_CONTROL_LINE_STATE = 0x22;\nconst CDC_DTR = 1 << 0;\nconst CDC_RTS = 1 << 1;\nconst CDC_DATA_CLASS = 10;\nconst ENDPOINT_BULK = 2;\nconst TX_FIFO_SIZE = 512;\nconst ENDPOINT_ZERO = 0;\nconst CONFIGURATION_DESCRIPTOR_SIZE = 9;\nexport function extractEndpointNumbers(descriptors) {\n    let index = 0;\n    let foundInterface = false;\n    const result = {\n        in: -1,\n        out: -1,\n    };\n    while (index < descriptors.length) {\n        const len = descriptors[index];\n        if (len < 2 || descriptors.length < index + len) {\n            break;\n        }\n        const type = descriptors[index + 1];\n        if (type === DescriptorType.Interface && len === 9) {\n            const numEndpoints = descriptors[index + 4];\n            const interfaceClass = descriptors[index + 5];\n            foundInterface = numEndpoints === 2 && interfaceClass === CDC_DATA_CLASS;\n        }\n        if (foundInterface && type === DescriptorType.Endpoint && len === 7) {\n            const address = descriptors[index + 2];\n            const attributes = descriptors[index + 3];\n            if ((attributes & 0x3) === ENDPOINT_BULK) {\n                if (address & 0x80) {\n                    result.in = address & 0xf;\n                }\n                else {\n                    result.out = address & 0xf;\n                }\n            }\n        }\n        index += descriptors[index];\n    }\n    return result;\n}\nexport class USBCDC {\n    constructor(usb) {\n        this.usb = usb;\n        this.txFIFO = new FIFO(TX_FIFO_SIZE);\n        this.initialized = false;\n        this.descriptorsSize = null;\n        this.descriptors = [];\n        this.outEndpoint = -1;\n        this.inEndpoint = -1;\n        this.usb.onUSBEnabled = () => {\n            this.usb.resetDevice();\n        };\n        this.usb.onResetReceived = () => {\n            this.usb.sendSetupPacket(setDeviceAddressPacket(1));\n        };\n        this.usb.onEndpointWrite = (endpoint, buffer) => {\n            var _a, _b;\n            if (endpoint === ENDPOINT_ZERO && buffer.length === 0) {\n                if (this.descriptorsSize == null) {\n                    this.usb.sendSetupPacket(getDescriptorPacket(DescriptorType.Configration, CONFIGURATION_DESCRIPTOR_SIZE));\n                }\n                // Acknowledgement\n                else if (!this.initialized) {\n                    this.cdcSetControlLineState();\n                    (_a = this.onDeviceConnected) === null || _a === void 0 ? void 0 : _a.call(this);\n                }\n            }\n            if (endpoint === ENDPOINT_ZERO && buffer.length > 1) {\n                if (buffer.length === CONFIGURATION_DESCRIPTOR_SIZE &&\n                    buffer[1] === DescriptorType.Configration &&\n                    this.descriptorsSize == null) {\n                    this.descriptorsSize = (buffer[3] << 8) | buffer[2];\n                    this.usb.sendSetupPacket(getDescriptorPacket(DescriptorType.Configration, this.descriptorsSize));\n                }\n                else if (this.descriptorsSize != null && this.descriptors.length < this.descriptorsSize) {\n                    this.descriptors.push(...buffer);\n                }\n                if (this.descriptorsSize === this.descriptors.length) {\n                    const endpoints = extractEndpointNumbers(this.descriptors);\n                    this.inEndpoint = endpoints.in;\n                    this.outEndpoint = endpoints.out;\n                    // Now configure the device\n                    this.usb.sendSetupPacket(setDeviceConfigurationPacket(1));\n                }\n            }\n            if (endpoint === this.inEndpoint) {\n                (_b = this.onSerialData) === null || _b === void 0 ? void 0 : _b.call(this, buffer);\n            }\n        };\n        this.usb.onEndpointRead = (endpoint, size) => {\n            if (endpoint === this.outEndpoint) {\n                const buffer = new Uint8Array(Math.min(size, this.txFIFO.itemCount));\n                for (let i = 0; i < buffer.length; i++) {\n                    buffer[i] = this.txFIFO.pull();\n                }\n                this.usb.endpointReadDone(this.outEndpoint, buffer);\n            }\n        };\n    }\n    cdcSetControlLineState(value = CDC_DTR | CDC_RTS, interfaceNumber = 0) {\n        this.usb.sendSetupPacket(createSetupPacket({\n            dataDirection: DataDirection.HostToDevice,\n            type: SetupType.Class,\n            recipient: SetupRecipient.Device,\n            bRequest: CDC_REQUEST_SET_CONTROL_LINE_STATE,\n            wValue: value,\n            wIndex: interfaceNumber,\n            wLength: 0,\n        }));\n        this.initialized = true;\n    }\n    sendSerialByte(data) {\n        this.txFIFO.push(data);\n    }\n}\n"],
  "mappings": "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",
  "names": ["IRQ", "DREQChannel", "TREQ", "rp2040", "IRQ", "INTR", "WaitType", "GPIOPinState", "INTR", "I2CMode", "I2CSpeed", "I2CState", "TimerMode", "EN", "INTR", "INTE", "INTF", "INTS", "PWMDivMode", "RFF", "TFE", "RFF", "TFE", "PLATFORM", "INTR", "INTE", "INTF", "INTS", "INTR", "INTE", "INTF", "INTS", "SIELineState", "bufferLength", "bufferOffset", "CTRL", "ENABLE", "CTRL", "ENABLE", "CPUID", "LogLevel", "offset", "ExecutionMode", "StackPointerBank", "LOG_NAME", "registers", "LOG_NAME", "connection", "DataDirection", "SetupType", "SetupRecipient", "SetupRequest", "DescriptorType"]
}
